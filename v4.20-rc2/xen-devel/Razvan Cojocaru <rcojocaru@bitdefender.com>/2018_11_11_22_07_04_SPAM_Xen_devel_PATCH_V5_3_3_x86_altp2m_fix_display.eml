Return-Path: <xen-devel-bounces@lists.xenproject.org>
Delivered-To: unknown
Received: from pop3.zju.edu.cn (61.164.42.155:110) by
  likexu-MOBL1.ccr.corp.intel.com with POP3; 11 Nov 2018 15:05:40 -0000
Received: from icoremail.net (unknown [209.85.214.181])
	by mail-app2 (Coremail) with SMTP id by_KCgDXv+4kOOhbj_V1AQ--.35893S3;
	Sun, 11 Nov 2018 22:09:45 +0800 (CST)
Received: from mail-pl1-f181.google.com (unknown [209.85.214.181])
	by mx2.icoremail.net (Coremail) with SMTP id AQAAfwB3WkYgOOhbaLMsAA--.8180S3;
	Sun, 11 Nov 2018 22:09:36 +0800 (CST)
Received: by mail-pl1-f181.google.com with SMTP id x21-v6so331525pln.9
        for <xuliker@zju.edu.cn>; Sun, 11 Nov 2018 06:09:36 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20161025;
        h=x-original-authentication-results:x-gm-message-state:delivered-to
         :from:to:date:message-id:in-reply-to:references:subject:precedence
         :list-id:list-unsubscribe:list-post:list-help:list-subscribe:cc
         :mime-version:content-transfer-encoding:errors-to:sender;
        bh=LU8o8uSH28/vHIx9ThRt/11/rcBAUXoelJhnuyLpbEY=;
        b=lBmBAKNKYfVV20vwJPlOftsxBbpL/ycF/S0DZoAm/Zjyc0XJG0IbKHG4KEAGq4zmGj
         1C3VrboZ//xRBmalwJH/srQPaalJBQmFJF/dndtWLKYjhicGRi1TzTiqb9M3bCzN/VXy
         JDuoUxLZvRf4EZqxDi9WsiiPk+3+ek8C9P+JDR4UI+nK6Dg3a3SM0a8FnvHtbKlePFie
         habz/Buuh+ULZ63U/bDffWKe9eb0v7wPSDJVthmmdRj7XGZNfqVTPApv5fGZ84a3iSSs
         l5RAsLxkL+lpuu167oHGOAziKBA+ZBk2rUqzfqtCuJSxNyJ5HCWl5JszGqqwttyRx6Oj
         m/bQ==
X-Original-Authentication-Results: mx.google.com;       spf=pass (google.com: best guess record for domain of xen-devel-bounces@lists.xenproject.org designates 192.237.175.120 as permitted sender) smtp.mailfrom=xen-devel-bounces@lists.xenproject.org
X-Gm-Message-State: AGRZ1gLunNPtjyAnPc43D6kHywzdT0FW1OcMC8h05BJv8R/SMslPSBjK
	AYDzYdroSHJyfeWxGE3VyBJP9vRZsoYsGY7Yqc6k9j4J/18hd8Q=
X-Received: by 2002:a17:902:50e3:: with SMTP id c32-v6mr16195749plj.39.1541945376034;
        Sun, 11 Nov 2018 06:09:36 -0800 (PST)
X-Forwarded-To: xuliker@zju.edu.cn
X-Forwarded-For: liker.xu@gmail.com xuliker@zju.edu.cn
Delivered-To: liker.xu@gmail.com
Received: by 2002:a17:90a:c304:0:0:0:0 with SMTP id g4-v6csp2140495pjt;
        Sun, 11 Nov 2018 06:09:34 -0800 (PST)
X-Google-Smtp-Source: AJdET5e+CvRF8eJ2hhlPcJ9zNjAArMUKUTblYDzf3Up7nTgI16bljS99/Fs0eXJ5hZsLWGgrrDQs
X-Received: by 2002:a81:17d4:: with SMTP id 203-v6mr14691579ywx.423.1541945374482;
        Sun, 11 Nov 2018 06:09:34 -0800 (PST)
ARC-Seal: i=1; a=rsa-sha256; t=1541945374; cv=none;
        d=google.com; s=arc-20160816;
        b=ml16Yvqmi/dX8XoZt+XtOUD9JxLTzNVGF0ektQsT/DR69hkomjDf0Cz8QdGVJCge2b
         +iWfsTPy/j9LZvoDwbbnvwSOb+4IOyjmJawxv5d2OiOIW8wqF4axdkxyz3ToyxLArwcf
         f37EIE6XiOmUKx6TrFtDJmuz2swi+4dDUCRgWhaM765JMDzxnToZwUBMFyi/9t5bvofL
         3YGEVTQXvokRRtY7+8UjAg0pexf4v3ILCsUhkbId4qtRE9oea4z5P0WNosExzZlsw0IO
         vH2ywvqAmPkehSHmdE0p58HpooG0MSUGm8seEaC2MaqQDPIcvUQ6nCvV+Her5/laSGCJ
         i9AQ==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;
        h=sender:errors-to:content-transfer-encoding:mime-version:cc
         :list-subscribe:list-help:list-post:list-unsubscribe:list-id
         :precedence:subject:references:in-reply-to:message-id:date:to:from;
        bh=LU8o8uSH28/vHIx9ThRt/11/rcBAUXoelJhnuyLpbEY=;
        b=lRDIt8bixTmaJNvdkLDgRijtuhUSuucqZPX2oHrTpn839tQzf6SpHIfwhJqbbTUCcb
         qAJkc+hz2wGwI9ua0lkddHSPqyYomQkBaGvRK4WLlJAuPhgv8w+RZJMEi0h6pDrmcdgj
         6b2DqiaPy7D6/jcHxYmSSXUW4CjMDEF2AVjg+3fost+nvV6tr7KzDCMlTsL68pfX6Ksq
         MAfJCuObqaUec7om5V7osQxprJhA0tAvkVUnymI9o6VsRPTw6zf4UYJb8ImOZrDy51jn
         aTSO0ERgEmfaIWWUS7TVvgvY3h9XQfhmqHd9WYcJy/7faZ1S1sRtYseOPMNxjzWZcUsJ
         a6zQ==
ARC-Authentication-Results: i=1; mx.google.com;
       spf=pass (google.com: best guess record for domain of xen-devel-bounces@lists.xenproject.org designates 192.237.175.120 as permitted sender) smtp.mailfrom=xen-devel-bounces@lists.xenproject.org
Received: from lists.xenproject.org (lists.xenproject.org. [192.237.175.120])
        by mx.google.com with ESMTPS id x33-v6si7178976ywj.135.2018.11.11.06.09.33
        (version=TLS1_2 cipher=ECDHE-RSA-CHACHA20-POLY1305 bits=256/256);
        Sun, 11 Nov 2018 06:09:34 -0800 (PST)
Received-SPF: pass (google.com: best guess record for domain of xen-devel-bounces@lists.xenproject.org designates 192.237.175.120 as permitted sender) client-ip=192.237.175.120;
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1gLqOh-0004EX-Ka; Sun, 11 Nov 2018 14:07:31 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <srs0=j1di=nw=bitdefender.com=rcojocaru@srs-us1.protection.inumbo.net>)
 id 1gLqOf-0004EM-S4
 for xen-devel@lists.xenproject.org; Sun, 11 Nov 2018 14:07:29 +0000
X-Inumbo-ID: 1c8ba48c-e5bb-11e8-a4dd-12d6303a7972
Received: from mx01.bbu.dsd.mx.bitdefender.com (unknown [91.199.104.161])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTP
 id 1c8ba48c-e5bb-11e8-a4dd-12d6303a7972;
 Sun, 11 Nov 2018 14:07:23 +0000 (UTC)
Received: from smtp.bitdefender.com (smtp01.buh.bitdefender.com [10.17.80.75])
 by mx01.bbu.dsd.mx.bitdefender.com (Postfix) with ESMTPS id
 D19DB305FFB0; Sun, 11 Nov 2018 16:07:22 +0200 (EET)
Received: from rcojocaru.npunix.bitdefender.biz (unknown [10.17.12.174])
 by smtp.bitdefender.com (Postfix) with ESMTPSA id B9BDE3084EF2;
 Sun, 11 Nov 2018 16:07:22 +0200 (EET)
From: Razvan Cojocaru <rcojocaru@bitdefender.com>
To: xen-devel@lists.xenproject.org
Date: Sun, 11 Nov 2018 16:07:04 +0200
Message-Id: <1541945224-23075-4-git-send-email-rcojocaru@bitdefender.com>
X-Mailer: git-send-email 2.7.4
In-Reply-To: <1541945224-23075-1-git-send-email-rcojocaru@bitdefender.com>
References: <1541945224-23075-1-git-send-email-rcojocaru@bitdefender.com>
Subject: [SPAM] [Xen-devel] [PATCH V5 3/3] x86/altp2m: fix display
 frozen when switching to a new view early
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Kevin Tian <kevin.tian@intel.com>, Wei Liu <wei.liu2@citrix.com>,
 Jun Nakajima <jun.nakajima@intel.com>,
 Razvan Cojocaru <rcojocaru@bitdefender.com>,
 George Dunlap <george.dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>, Jan Beulich <jbeulich@suse.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: liker.xu+caf_=xuliker=zju.edu.cn@gmail.com
X-CM-TRANSID: AQAAfwB3WkYgOOhbaLMsAA--.8180S3
Authentication-Results: mail-app2; spf=pass smtp.mail=liker.xu+caf_=xu
	liker=zju.edu.cn@gmail.com;
X-Coremail-Antispam: 1UD129KBjvJXoW3Jr45XFyxAr1UJrW8WFy5CFg_yoWfJFW7pF
	n0yrn8WF45tFW2g3Z3Gws5ur4Yk3y8WFn5GFZYk345t342qF17Cr4I9w1UCr18CF93ZF1Y
	yFyfKF17uayjyaDanT9S1TB71UUUUUUqnTZGkaVYY2UrUUUUjbIjqfuFe4nvWSU8nxnvy2
	9KBjDU0xBIdaVrnRJUUUHIb7Iv0xC_Kw4lb4IE77IF4wAFF20E14v26r1j6r4UM7CIcVAF
	z4kK6r1j6r18M28lY4IEw2IIxxk0rwA2F7IY1VAKz4vEj48ve4kI8wA2z4x0Y4vE2Ix0cI
	8IcVAFwI0_Xr0_Ar1l84ACjcxK6xIIjxv20xvEc7CjxVAFwI0_Gr0_Cr1l84ACjcxK6I8E
	87Iv67AKxVW0oVCq3wA2z4x0Y4vEx4A2jsIEc7CjxVAFwI0_GcCE3s1lnx0E6VACY4xI67
	k04243AVACY4xI67k04243AVAKzVAKj4xI6x02cVCv0xWle2I262IYc4CY6c8Ij28IcVAa
	Y2xG8wAqx4xG64xvF2IEw4CE5I8CrVC2j2WlYx0E2Ix0cI8IcVAFwI0_Jr0_Jr4lYx0Ex4
	A2jsIE14v26r4j6F4UMcvjeVCFs4IE7xkEbVWUJVW8JwACjcxG0xvY0x0EwIxGrwACY4xI
	67k04243AVAKzVAKj4xxMx02cVCv0xWlc7CjxVAKzI0EY4vE52x082I5MxkI7II2jI8vz4
	vEwIxGrwCYIxAIcVC0I7IYx2IY67AKxVWUJVWUCwCYIxAIcVC0I7IYx2IY6xkF7I0E14v2
	6r1j6r4UMxvI42IY6I8E87Iv67AKxVW8Jr0_Cr1UMxvI42IY6I8E87Iv6xkF7I0E14v26r
	4UJVWxJr1l42xK82IYc2Ij64vIr41l42xK82IY64kExVAvwVAq07x20xyl4x8a6x804xWl
	4I8I3I0E4IkC6x0Yz7v_Jr0_Gr1lx2IqxVAqx4xG67AKxVWUJVWUGwC20s026x8GjcxK67
	AKxVWUGVWUWwC2zVAF1VAY17CE14v26r1q6r43MIIYrxkI7VAKI48JMIIF0xvE42xK8VAv
	wI8IcIk0rVWUJVWUCwCE64xvF2IEb7IF0Fy7YxBIdaVFxhVjvjDU0xZFpf9x07b2xRgUUU
	UU=

V2hlbiBhbiBuZXcgYWx0cDJtIHZpZXcgaXMgY3JlYXRlZCB2ZXJ5IGVhcmx5IG9uIGd1ZXN0IGJv
b3QsIHRoZQpkaXNwbGF5IHdpbGwgZnJlZXplIChhbHRob3VnaCB0aGUgZ3Vlc3Qgd2lsbCBydW4g
bm9ybWFsbHkpLiBUaGlzCm1heSBhbHNvIGhhcHBlbiBvbiByZXNpemluZyB0aGUgZGlzcGxheS4g
VGhlIHJlYXNvbiBpcyB0aGUgd2F5ClhlbiBjdXJyZW50bHkgKG1pcyloYW5kbGVzIGxvZ2RpcnR5
IFZHQTogaXQgaW50ZW50aW9uYWxseQptaXNjb25maWd1cmVzIFZHQSBwYWdlcyBzbyB0aGF0IHRo
ZXkgd2lsbCBmYXVsdC4KClRoZSBwcm9ibGVtIGlzIHRoYXQgaXQgb25seSBkb2VzIHRoaXMgaW4g
dGhlIGhvc3QgcDJtLiBPbmNlIHdlCnN3aXRjaCB0byBhIG5ldyBhbHRwMm0sIHRoZSBtaXNjb25m
aWd1cmVkIGVudHJpZXMgd2lsbCBubyBsb25nZXIKZmF1bHQsIHNvIHRoZSBkaXNwbGF5IHdpbGwg
bm90IGJlIHVwZGF0ZWQuCgpUaGlzIHBhdGNoOgoqIHVwZGF0ZXMgZXB0X2hhbmRsZV9taXNjb25m
aWcoKSB0byB1c2UgdGhlIGFjdGl2ZSBhbHRwMm0gaW5zdGVhZAogIG9mIHRoZSBob3N0cDJtOwoq
IG1vZGlmaWVzIHAybV9jaGFuZ2VfZW50cnlfdHlwZV9nbG9iYWwoKSwgcDJtX21lbW9yeV90eXBl
X2NoYW5nZWQKICBhbmQgcDJtX2NoYW5nZV90eXBlX3JhbmdlKCkgdG8gcHJvcGFnYXRlIHRoZWly
IGNoYW5nZXMgdG8gYWxsCiAgdmFsaWQgYWx0cDJtcy4KClNpZ25lZC1vZmYtYnk6IFJhenZhbiBD
b2pvY2FydSA8cmNvam9jYXJ1QGJpdGRlZmVuZGVyLmNvbT4KU3VnZ2VzdGVkLWJ5OiBHZW9yZ2Ug
RHVubGFwIDxnZW9yZ2UuZHVubGFwQGNpdHJpeC5jb20+CgotLS0KQ0M6IEp1biBOYWthamltYSA8
anVuLm5ha2FqaW1hQGludGVsLmNvbT4KQ0M6IEtldmluIFRpYW4gPGtldmluLnRpYW5AaW50ZWwu
Y29tPgpDQzogR2VvcmdlIER1bmxhcCA8Z2VvcmdlLmR1bmxhcEBldS5jaXRyaXguY29tPgpDQzog
SmFuIEJldWxpY2ggPGpiZXVsaWNoQHN1c2UuY29tPgpDQzogQW5kcmV3IENvb3BlciA8YW5kcmV3
LmNvb3BlcjNAY2l0cml4LmNvbT4KQ0M6IFdlaSBMaXUgPHdlaS5saXUyQGNpdHJpeC5jb20+Cgot
LS0KQ2hhbmdlcyBzaW5jZSBWNDoKIC0gTm93IEFTU0VSVCgpaW5nIHRoYXQgYWx0cDJtIGlzIF9u
b3RfIGFjdGl2ZSBpbgogICBwMm1fcHRfaGFuZGxlX2RlZmVycmVkX2NoYW5nZXMoKSwgd2l0aCBh
ZGRlZCBjb21tZW50LgogLSBwMm1fbWVtb3J5X3R5cGVfY2hhbmdlZCgpIGFuZCBwMm1fY2hhbmdl
X3R5cGVfcmFuZ2UoKSBub3cKICAgcHJvY2VzcyBhbHRwMm1zIHdpdGggdGhlIGhvc3RwMm0gbG9j
ayB0YWtlbi4KLS0tCiB4ZW4vYXJjaC94ODYvbW0vcDJtLWVwdC5jIHwgICA4ICsrKysKIHhlbi9h
cmNoL3g4Ni9tbS9wMm0tcHQuYyAgfCAgIDggKysrKwogeGVuL2FyY2gveDg2L21tL3AybS5jICAg
ICB8IDExNSArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKy0tLS0tLS0tCiB4
ZW4vaW5jbHVkZS9hc20teDg2L3AybS5oIHwgICA2ICstLQogNCBmaWxlcyBjaGFuZ2VkLCAxMTQg
aW5zZXJ0aW9ucygrKSwgMjMgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEveGVuL2FyY2gveDg2
L21tL3AybS1lcHQuYyBiL3hlbi9hcmNoL3g4Ni9tbS9wMm0tZXB0LmMKaW5kZXggZmFiY2QwNi4u
ZTZmYTg1ZiAxMDA2NDQKLS0tIGEveGVuL2FyY2gveDg2L21tL3AybS1lcHQuYworKysgYi94ZW4v
YXJjaC94ODYvbW0vcDJtLWVwdC5jCkBAIC02NTcsNiArNjU3LDkgQEAgYm9vbF90IGVwdF9oYW5k
bGVfbWlzY29uZmlnKHVpbnQ2NF90IGdwYSkKICAgICBib29sX3Qgc3B1cmlvdXM7CiAgICAgaW50
IHJjOwogCisgICAgaWYgKCBhbHRwMm1fYWN0aXZlKGN1cnItPmRvbWFpbikgKQorICAgICAgICBw
Mm0gPSBwMm1fZ2V0X2FsdHAybShjdXJyKTsKKwogICAgIHAybV9sb2NrKHAybSk7CiAKICAgICBz
cHVyaW91cyA9IGN1cnItPmFyY2guaHZtLnZteC5lcHRfc3B1cmlvdXNfbWlzY29uZmlnOwpAQCAt
MTQ0MCw2ICsxNDQzLDExIEBAIHZvaWQgcDJtX2luaXRfYWx0cDJtX2VwdChzdHJ1Y3QgZG9tYWlu
ICpkLCB1bnNpZ25lZCBpbnQgaSkKICAgICBzdHJ1Y3QgcDJtX2RvbWFpbiAqaG9zdHAybSA9IHAy
bV9nZXRfaG9zdHAybShkKTsKICAgICBzdHJ1Y3QgZXB0X2RhdGEgKmVwdDsKIAorICAgIHAybS0+
bWF4X21hcHBlZF9wZm4gPSBob3N0cDJtLT5tYXhfbWFwcGVkX3BmbjsKKyAgICBwMm0tPmRlZmF1
bHRfYWNjZXNzID0gaG9zdHAybS0+ZGVmYXVsdF9hY2Nlc3M7CisgICAgcDJtLT5kb21haW4gPSBo
b3N0cDJtLT5kb21haW47CisKKyAgICBwMm0tPmdsb2JhbF9sb2dkaXJ0eSA9IGhvc3RwMm0tPmds
b2JhbF9sb2dkaXJ0eTsKICAgICBwMm0tPmVwdC5hZCA9IGhvc3RwMm0tPmVwdC5hZDsKICAgICBw
Mm0tPm1pbl9yZW1hcHBlZF9nZm4gPSBnZm5feChJTlZBTElEX0dGTik7CiAgICAgcDJtLT5tYXhf
cmVtYXBwZWRfZ2ZuID0gMDsKZGlmZiAtLWdpdCBhL3hlbi9hcmNoL3g4Ni9tbS9wMm0tcHQuYyBi
L3hlbi9hcmNoL3g4Ni9tbS9wMm0tcHQuYwppbmRleCA1NWRmMTg1Li4zODI4MDg4IDEwMDY0NAot
LS0gYS94ZW4vYXJjaC94ODYvbW0vcDJtLXB0LmMKKysrIGIveGVuL2FyY2gveDg2L21tL3AybS1w
dC5jCkBAIC0yOSw2ICsyOSw3IEBACiAjaW5jbHVkZSA8eGVuL2V2ZW50Lmg+CiAjaW5jbHVkZSA8
eGVuL3RyYWNlLmg+CiAjaW5jbHVkZSA8cHVibGljL3ZtX2V2ZW50Lmg+CisjaW5jbHVkZSA8YXNt
L2FsdHAybS5oPgogI2luY2x1ZGUgPGFzbS9kb21haW4uaD4KICNpbmNsdWRlIDxhc20vcGFnZS5o
PgogI2luY2x1ZGUgPGFzbS9wYWdpbmcuaD4KQEAgLTQ2NCw2ICs0NjUsMTMgQEAgaW50IHAybV9w
dF9oYW5kbGVfZGVmZXJyZWRfY2hhbmdlcyh1aW50NjRfdCBncGEpCiAgICAgc3RydWN0IHAybV9k
b21haW4gKnAybSA9IHAybV9nZXRfaG9zdHAybShjdXJyZW50LT5kb21haW4pOwogICAgIGludCBy
YzsKIAorICAgIC8qCisgICAgICogU2hvdWxkIGFsdHAybSBldmVyIGJlIGVuYWJsZWQgZm9yIE5Q
VCAvIHNoYWRvdyB1c2UsIHRoaXMgY29kZQorICAgICAqIHNob3VsZCBiZSB1cGRhdGVkIHRvIG1h
a2UgdXNlIG9mIHRoZSBhY3RpdmUgYWx0cDJtLCBsaWtlCisgICAgICogZXB0X2hhbmRsZV9taXNj
b25maWcoKS4KKyAgICAgKi8KKyAgICBBU1NFUlQoIWFsdHAybV9hY3RpdmUoY3VycmVudC0+ZG9t
YWluKSk7CisKICAgICBwMm1fbG9jayhwMm0pOwogICAgIHJjID0gZG9fcmVjYWxjKHAybSwgUEZO
X0RPV04oZ3BhKSk7CiAgICAgcDJtX3VubG9jayhwMm0pOwpkaWZmIC0tZ2l0IGEveGVuL2FyY2gv
eDg2L21tL3AybS5jIGIveGVuL2FyY2gveDg2L21tL3AybS5jCmluZGV4IDY5NTM2YzEuLmM4NTYx
YmEgMTAwNjQ0Ci0tLSBhL3hlbi9hcmNoL3g4Ni9tbS9wMm0uYworKysgYi94ZW4vYXJjaC94ODYv
bW0vcDJtLmMKQEAgLTI3Nyw3ICsyNzcsNiBAQCBpbnQgcDJtX2luaXQoc3RydWN0IGRvbWFpbiAq
ZCkKIGludCBwMm1faXNfbG9nZGlydHlfcmFuZ2Uoc3RydWN0IHAybV9kb21haW4gKnAybSwgdW5z
aWduZWQgbG9uZyBzdGFydCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgbG9u
ZyBlbmQpCiB7Ci0gICAgQVNTRVJUKHAybV9pc19ob3N0cDJtKHAybSkpOwogICAgIGlmICggcDJt
LT5nbG9iYWxfbG9nZGlydHkgfHwKICAgICAgICAgIHJhbmdlc2V0X2NvbnRhaW5zX3JhbmdlKHAy
bS0+bG9nZGlydHlfcmFuZ2VzLCBzdGFydCwgZW5kKSApCiAgICAgICAgIHJldHVybiAxOwpAQCAt
Mjg2LDMxICsyODUsNzkgQEAgaW50IHAybV9pc19sb2dkaXJ0eV9yYW5nZShzdHJ1Y3QgcDJtX2Rv
bWFpbiAqcDJtLCB1bnNpZ25lZCBsb25nIHN0YXJ0LAogICAgIHJldHVybiAwOwogfQogCitzdGF0
aWMgdm9pZCBjaGFuZ2VfZW50cnlfdHlwZV9nbG9iYWwoc3RydWN0IHAybV9kb21haW4gKnAybSwK
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwMm1fdHlwZV90IG90LCBwMm1f
dHlwZV90IG50KQoreworICAgIHAybS0+Y2hhbmdlX2VudHJ5X3R5cGVfZ2xvYmFsKHAybSwgb3Qs
IG50KTsKKyAgICBwMm0tPmdsb2JhbF9sb2dkaXJ0eSA9IChudCA9PSBwMm1fcmFtX2xvZ2RpcnR5
KTsKK30KKwogdm9pZCBwMm1fY2hhbmdlX2VudHJ5X3R5cGVfZ2xvYmFsKHN0cnVjdCBkb21haW4g
KmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcDJtX3R5cGVfdCBvdCwgcDJt
X3R5cGVfdCBudCkKIHsKLSAgICBzdHJ1Y3QgcDJtX2RvbWFpbiAqcDJtID0gcDJtX2dldF9ob3N0
cDJtKGQpOworICAgIHN0cnVjdCBwMm1fZG9tYWluICpob3N0cDJtID0gcDJtX2dldF9ob3N0cDJt
KGQpOwogCiAgICAgQVNTRVJUKG90ICE9IG50KTsKICAgICBBU1NFUlQocDJtX2lzX2NoYW5nZWFi
bGUob3QpICYmIHAybV9pc19jaGFuZ2VhYmxlKG50KSk7CiAKLSAgICBwMm1fbG9jayhwMm0pOwot
ICAgIHAybS0+Y2hhbmdlX2VudHJ5X3R5cGVfZ2xvYmFsKHAybSwgb3QsIG50KTsKLSAgICBwMm0t
Pmdsb2JhbF9sb2dkaXJ0eSA9IChudCA9PSBwMm1fcmFtX2xvZ2RpcnR5KTsKLSAgICBwMm1fdW5s
b2NrKHAybSk7CisgICAgcDJtX2xvY2soaG9zdHAybSk7CisKKyAgICBjaGFuZ2VfZW50cnlfdHlw
ZV9nbG9iYWwoaG9zdHAybSwgb3QsIG50KTsKKworI2lmZGVmIENPTkZJR19IVk0KKyAgICBpZiAo
IHVubGlrZWx5KGFsdHAybV9hY3RpdmUoZCkpICkKKyAgICB7CisgICAgICAgIHVuc2lnbmVkIGlu
dCBpOworCisgICAgICAgIGZvciAoIGkgPSAwOyBpIDwgTUFYX0FMVFAyTTsgaSsrICkKKyAgICAg
ICAgICAgIGlmICggZC0+YXJjaC5hbHRwMm1fZXB0cFtpXSAhPSBtZm5feChJTlZBTElEX01GTikg
KQorICAgICAgICAgICAgeworICAgICAgICAgICAgICAgIHN0cnVjdCBwMm1fZG9tYWluICphbHRw
Mm0gPSBkLT5hcmNoLmFsdHAybV9wMm1baV07CisKKyAgICAgICAgICAgICAgICBwMm1fbG9jayhh
bHRwMm0pOworICAgICAgICAgICAgICAgIGNoYW5nZV9lbnRyeV90eXBlX2dsb2JhbChhbHRwMm0s
IG90LCBudCk7CisgICAgICAgICAgICAgICAgcDJtX3VubG9jayhhbHRwMm0pOworICAgICAgICAg
ICAgfQorICAgIH0KKyNlbmRpZgorCisgICAgcDJtX3VubG9jayhob3N0cDJtKTsKK30KKworI2lm
ZGVmIENPTkZJR19IVk0KKy8qIFRoZXJlJ3MgYWxyZWFkeSBhIG1lbW9yeV90eXBlX2NoYW5nZWQo
KSBpbiBhc20vbXRyci5oLiAqLworc3RhdGljIHZvaWQgX21lbW9yeV90eXBlX2NoYW5nZWQoc3Ry
dWN0IHAybV9kb21haW4gKnAybSkKK3sKKyAgICBpZiAoIHAybS0+bWVtb3J5X3R5cGVfY2hhbmdl
ZCApCisgICAgICAgIHAybS0+bWVtb3J5X3R5cGVfY2hhbmdlZChwMm0pOwogfQogCiB2b2lkIHAy
bV9tZW1vcnlfdHlwZV9jaGFuZ2VkKHN0cnVjdCBkb21haW4gKmQpCiB7Ci0gICAgc3RydWN0IHAy
bV9kb21haW4gKnAybSA9IHAybV9nZXRfaG9zdHAybShkKTsKKyAgICBzdHJ1Y3QgcDJtX2RvbWFp
biAqaG9zdHAybSA9IHAybV9nZXRfaG9zdHAybShkKTsKIAotICAgIGlmICggcDJtLT5tZW1vcnlf
dHlwZV9jaGFuZ2VkICkKKyAgICBwMm1fbG9jayhob3N0cDJtKTsKKworICAgIF9tZW1vcnlfdHlw
ZV9jaGFuZ2VkKGhvc3RwMm0pOworCisgICAgaWYgKCB1bmxpa2VseShhbHRwMm1fYWN0aXZlKGQp
KSApCiAgICAgewotICAgICAgICBwMm1fbG9jayhwMm0pOwotICAgICAgICBwMm0tPm1lbW9yeV90
eXBlX2NoYW5nZWQocDJtKTsKLSAgICAgICAgcDJtX3VubG9jayhwMm0pOworICAgICAgICB1bnNp
Z25lZCBpbnQgaTsKKworICAgICAgICBmb3IgKCBpID0gMDsgaSA8IE1BWF9BTFRQMk07IGkrKyAp
CisgICAgICAgICAgICBpZiAoIGQtPmFyY2guYWx0cDJtX2VwdHBbaV0gIT0gbWZuX3goSU5WQUxJ
RF9NRk4pICkKKyAgICAgICAgICAgIHsKKyAgICAgICAgICAgICAgICBzdHJ1Y3QgcDJtX2RvbWFp
biAqYWx0cDJtID0gZC0+YXJjaC5hbHRwMm1fcDJtW2ldOworCisgICAgICAgICAgICAgICAgcDJt
X2xvY2soYWx0cDJtKTsKKyAgICAgICAgICAgICAgICBfbWVtb3J5X3R5cGVfY2hhbmdlZChhbHRw
Mm0pOworICAgICAgICAgICAgICAgIHAybV91bmxvY2soYWx0cDJtKTsKKyAgICAgICAgICAgIH0K
ICAgICB9CisKKyAgICBwMm1fdW5sb2NrKGhvc3RwMm0pOwogfQorI2VuZGlmCiAKIGludCBwMm1f
c2V0X2lvcmVxX3NlcnZlcihzdHJ1Y3QgZG9tYWluICpkLAogICAgICAgICAgICAgICAgICAgICAg
ICAgIHVuc2lnbmVkIGludCBmbGFncywKQEAgLTk5MiwxOCArMTAzOSwxNCBAQCBpbnQgcDJtX2No
YW5nZV90eXBlX29uZShzdHJ1Y3QgZG9tYWluICpkLCB1bnNpZ25lZCBsb25nIGdmbl9sLAogfQog
CiAvKiBNb2RpZnkgdGhlIHAybSB0eXBlIG9mIGEgcmFuZ2Ugb2YgZ2ZucyBmcm9tIG90IHRvIG50
LiAqLwotdm9pZCBwMm1fY2hhbmdlX3R5cGVfcmFuZ2Uoc3RydWN0IGRvbWFpbiAqZCwgCi0gICAg
ICAgICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBsb25nIHN0YXJ0LCB1bnNpZ25lZCBsb25n
IGVuZCwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgIHAybV90eXBlX3Qgb3QsIHAybV90eXBl
X3QgbnQpCitzdGF0aWMgdm9pZCBjaGFuZ2VfdHlwZV9yYW5nZShzdHJ1Y3QgcDJtX2RvbWFpbiAq
cDJtLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgbG9uZyBzdGFydCwg
dW5zaWduZWQgbG9uZyBlbmQsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwMm1fdHlw
ZV90IG90LCBwMm1fdHlwZV90IG50KQogewogICAgIHVuc2lnbmVkIGxvbmcgZ2ZuID0gc3RhcnQ7
Ci0gICAgc3RydWN0IHAybV9kb21haW4gKnAybSA9IHAybV9nZXRfaG9zdHAybShkKTsKKyAgICBz
dHJ1Y3QgZG9tYWluICpkID0gcDJtLT5kb21haW47CiAgICAgaW50IHJjID0gMDsKIAotICAgIEFT
U0VSVChvdCAhPSBudCk7Ci0gICAgQVNTRVJUKHAybV9pc19jaGFuZ2VhYmxlKG90KSAmJiBwMm1f
aXNfY2hhbmdlYWJsZShudCkpOwotCi0gICAgcDJtX2xvY2socDJtKTsKICAgICBwMm0tPmRlZmVy
X25lc3RlZF9mbHVzaCA9IDE7CiAKICAgICBpZiAoIHVubGlrZWx5KGVuZCA+IHAybS0+bWF4X21h
cHBlZF9wZm4pICkKQEAgLTEwNDcsNyArMTA5MCwzOSBAQCB2b2lkIHAybV9jaGFuZ2VfdHlwZV9y
YW5nZShzdHJ1Y3QgZG9tYWluICpkLAogICAgIHAybS0+ZGVmZXJfbmVzdGVkX2ZsdXNoID0gMDsK
ICAgICBpZiAoIG5lc3RlZGh2bV9lbmFibGVkKGQpICkKICAgICAgICAgcDJtX2ZsdXNoX25lc3Rl
ZHAybShkKTsKLSAgICBwMm1fdW5sb2NrKHAybSk7Cit9CisKK3ZvaWQgcDJtX2NoYW5nZV90eXBl
X3JhbmdlKHN0cnVjdCBkb21haW4gKmQsCisgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNp
Z25lZCBsb25nIHN0YXJ0LCB1bnNpZ25lZCBsb25nIGVuZCwKKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHAybV90eXBlX3Qgb3QsIHAybV90eXBlX3QgbnQpCit7CisgICAgc3RydWN0IHAybV9k
b21haW4gKmhvc3RwMm0gPSBwMm1fZ2V0X2hvc3RwMm0oZCk7CisKKyAgICBBU1NFUlQob3QgIT0g
bnQpOworICAgIEFTU0VSVChwMm1faXNfY2hhbmdlYWJsZShvdCkgJiYgcDJtX2lzX2NoYW5nZWFi
bGUobnQpKTsKKworICAgIHAybV9sb2NrKGhvc3RwMm0pOworCisgICAgY2hhbmdlX3R5cGVfcmFu
Z2UoaG9zdHAybSwgc3RhcnQsIGVuZCwgb3QsIG50KTsKKworI2lmZGVmIENPTkZJR19IVk0KKyAg
ICBpZiAoIHVubGlrZWx5KGFsdHAybV9hY3RpdmUoZCkpICkKKyAgICB7CisgICAgICAgIHVuc2ln
bmVkIGludCBpOworCisgICAgICAgIGZvciAoIGkgPSAwOyBpIDwgTUFYX0FMVFAyTTsgaSsrICkK
KyAgICAgICAgICAgIGlmICggZC0+YXJjaC5hbHRwMm1fZXB0cFtpXSAhPSBtZm5feChJTlZBTElE
X01GTikgKQorICAgICAgICAgICAgeworICAgICAgICAgICAgICAgIHN0cnVjdCBwMm1fZG9tYWlu
ICphbHRwMm0gPSBkLT5hcmNoLmFsdHAybV9wMm1baV07CisKKyAgICAgICAgICAgICAgICBwMm1f
bG9jayhhbHRwMm0pOworICAgICAgICAgICAgICAgIGNoYW5nZV90eXBlX3JhbmdlKGFsdHAybSwg
c3RhcnQsIGVuZCwgb3QsIG50KTsKKyAgICAgICAgICAgICAgICBwMm1fdW5sb2NrKGFsdHAybSk7
CisgICAgICAgICAgICB9CisgICAgfQorI2VuZGlmCisKKyAgICBwMm1fdW5sb2NrKGhvc3RwMm0p
OwogfQogCiAvKgpkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUvYXNtLXg4Ni9wMm0uaCBiL3hlbi9p
bmNsdWRlL2FzbS14ODYvcDJtLmgKaW5kZXggYzdmNTcxMC4uYmU1YjdhMiAxMDA2NDQKLS0tIGEv
eGVuL2luY2x1ZGUvYXNtLXg4Ni9wMm0uaAorKysgYi94ZW4vaW5jbHVkZS9hc20teDg2L3AybS5o
CkBAIC02MzAsOSArNjMwLDYgQEAgaW50IHAybV9maW5pc2hfdHlwZV9jaGFuZ2Uoc3RydWN0IGRv
bWFpbiAqZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdmbl90IGZpcnN0X2dmbiwKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGxvbmcgbWF4X25yKTsKIAotLyogUmVw
b3J0IGEgY2hhbmdlIGFmZmVjdGluZyBtZW1vcnkgdHlwZXMuICovCi12b2lkIHAybV9tZW1vcnlf
dHlwZV9jaGFuZ2VkKHN0cnVjdCBkb21haW4gKmQpOwotCiBpbnQgcDJtX2lzX2xvZ2RpcnR5X3Jh
bmdlKHN0cnVjdCBwMm1fZG9tYWluICosIHVuc2lnbmVkIGxvbmcgc3RhcnQsCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHVuc2lnbmVkIGxvbmcgZW5kKTsKIApAQCAtNjYzLDYgKzY2MCw5IEBA
IHZvaWQgcDJtX3BvZF9kdW1wX2RhdGEoc3RydWN0IGRvbWFpbiAqZCk7CiAKICNpZmRlZiBDT05G
SUdfSFZNCiAKKy8qIFJlcG9ydCBhIGNoYW5nZSBhZmZlY3RpbmcgbWVtb3J5IHR5cGVzLiAqLwor
dm9pZCBwMm1fbWVtb3J5X3R5cGVfY2hhbmdlZChzdHJ1Y3QgZG9tYWluICpkKTsKKwogLyogQ2Fs
bGVkIGJ5IHAybSBjb2RlIHdoZW4gZGVtYW5kLXBvcHVsYXRpbmcgYSBQb0QgcGFnZSAqLwogYm9v
bAogcDJtX3BvZF9kZW1hbmRfcG9wdWxhdGUoc3RydWN0IHAybV9kb21haW4gKnAybSwgZ2ZuX3Qg
Z2ZuLCB1bnNpZ25lZCBpbnQgb3JkZXIpOwotLSAKMi43LjQKCgpfX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1k
ZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21h
aWxtYW4vbGlzdGluZm8veGVuLWRldmVs
