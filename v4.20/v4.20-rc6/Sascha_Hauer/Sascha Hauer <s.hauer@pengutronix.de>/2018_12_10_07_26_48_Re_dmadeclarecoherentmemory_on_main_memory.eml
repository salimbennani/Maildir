Return-Path: <linux-kernel-owner@vger.kernel.org>
Delivered-To: unknown
Received: from linux.intel.com (10.54.29.200:995) by likexu-workstation with
  POP3-SSL; 10 Dec 2018 18:14:23 -0000
X-Original-To: like.xu@linux.intel.com
Delivered-To: like.xu@linux.intel.com
Received: from orsmga007.jf.intel.com (orsmga007.jf.intel.com [10.7.209.58])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by linux.intel.com (Postfix) with ESMTPS id 68E335800CB;
	Sun,  9 Dec 2018 23:27:07 -0800 (PST)
Received: from fmsmga103.fm.intel.com ([10.1.193.90])
  by orsmga007-1.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384; 09 Dec 2018 23:27:06 -0800
X-SG-BADATTACHMENTNOREPLY: True
IronPort-PHdr: =?us-ascii?q?9a23=3AEktZ6RFykJolPPVTEIZvz51GYnF86YWxBRYc798d?=
 =?us-ascii?q?s5kLTJ75os69bnLW6fgltlLVR4KTs6sC17KG9fi4EUU7or+5+EgYd5JNUxJXwe?=
 =?us-ascii?q?43pCcHRPC/NEvgMfTxZDY7FskRHHVs/nW8LFQHUJ2mPw6arXK99yMdFQviPgRp?=
 =?us-ascii?q?OOv1BpTSj8Oq3Oyu5pHfeQpFiCa+bL9oMBm6sRjau9ULj4dlNqs/0AbCrGFSe+?=
 =?us-ascii?q?RRy2NoJFaTkAj568yt4pNt8Dletuw4+cJYXqr0Y6o3TbpDDDQ7KG81/9HktQPC?=
 =?us-ascii?q?TQSU+HQRVHgdnwdSDAjE6BH6WYrxsjf/u+Fg1iSWIdH6QLYpUjm58axlVAHnhz?=
 =?us-ascii?q?sGNz4h8WHYlMpwjL5AoBm8oxBz2pPYbJ2JOPZ7eK7WYNEUSndbXstJWSJPAp2y?=
 =?us-ascii?q?YZYMAeoPMulXs5TyqFkKrRSwHgmsHOHixyRUhnPqx6A2z/gtHBvY0AEmAtkAsG?=
 =?us-ascii?q?7UrNLwNKoKTO661rLIwinDb/xMxDzz6pLHcg0/rvGWQLl9dtHRxVMvFwzfk1Wf?=
 =?us-ascii?q?t5blMiiN1usTtWib4PdgVf61i24grQFxozeuyt0xhYbXn48YzE3P+yt+wIYwP9?=
 =?us-ascii?q?K4SUh7bMa8EJROsSGaOJZ2Qt84Q2FvviY6y7IHtYSmcycUzpks2h3Ra+SffoSW?=
 =?us-ascii?q?/h7uUPydLSp2iX57Yr6zmhW//VS6xuD9VMS4yEhGojZZntXRs30A1h7e5dSCR/?=
 =?us-ascii?q?Z8/EqtxTOC2x3P5u1YJE04iLfUJpskz7EsipYet1nIEDXsl0XslqCWc10p+ui2?=
 =?us-ascii?q?5OTjZbXrvoGcN4BqhQHkKKgumdKwAf4+MgcQW2iX4+O81Kfs/UHhQbVKiOM5kr?=
 =?us-ascii?q?XBvZzEOcgWorS1DxJb34o98RqzEjSr3MgCkXQGLl9JYBeHgJLoO1HKLvD4F/C/?=
 =?us-ascii?q?g1G0nTdvxvDGOKDhA5rUInjAjrjhZ7B95FBYyAYqytBe6ZRUBa8bIP/oRE/xu8?=
 =?us-ascii?q?LXDgUjPwy33ennEtN92Z0aWW6VBa+ZKqzSvUeS5u0zO+mMeJMVuDHlJvgh5v7u?=
 =?us-ascii?q?jmE2lUUSfKm0xpYXbHG4HvJ7I0SWe3bsg9EBEXsUsQo6VuDllFqCUTtLbXaoQ6?=
 =?us-ascii?q?08/i07CJ6hDYrbRoCimr2B3DuhEZ1RfGxGCk2MHm3ud4WLQPoMbCOSIsl8kj0L?=
 =?us-ascii?q?T7ShSokh1Q2wuw/+0bZoMu3U+igAv5L5yNd1//HTlQ019TFsDcSd1H+CQ3t3nm?=
 =?us-ascii?q?MPQT822qd/rFd5yleC16h4nvNZGcZS5/NPTgc1K5rcw/ZmBND1XwLLZs2JR0q+?=
 =?us-ascii?q?QtW6HTExSco8zMUVY0Z9HNWijQrP3zCwDL8XjLGLAJ008qTB33n+Pcp9ynDG1L?=
 =?us-ascii?q?U/gFkiWMdAKWqmhqtn/QjJG4HJi1mZl7qtdakE3y7C7mGDwXCKvEFZSgFwV6rF?=
 =?us-ascii?q?UGsbZkvXq9T5+0zDQ6WvCbQhLgtO18qCJrFWZd3uiFVMXO3jN8jGY2Kth2ewAg?=
 =?us-ascii?q?6Fya6WY4r0ZWoRxiXdB1ICkwAI43mGMw8yBiOio2LbCDxjDlbvY0Lq8eljp3K3?=
 =?us-ascii?q?VE40zweWb0J/07q54AIahfuZS/kLxLILpD8hqyloHFa6x9/ZFsCPpxR/c6lGYd?=
 =?us-ascii?q?My+lFH1XnHuAx7JZGgK6FihlgDcwV4pU/u1hN3Cplensgutn8l0A1yKaeA2lNb?=
 =?us-ascii?q?azyYxYzwOqHQKmTq4BCvaqvW2lbC0NaW+qYD8ug4p0/kvAGzEkoi8nNn09ZO3n?=
 =?us-ascii?q?uY55XKChcSUJ3rXkY28Rh6u6/VYi0n64zI0n1sNLG+siXe1NIxGOsl1hGgcs9F?=
 =?us-ascii?q?P6OACgDzHNMVBsi0JOMxhlimcwgLPOZR9K4zIcOrbP+G2K+tPOZ9kzOql2VH4I?=
 =?us-ascii?q?Zh0k2S8ypwUPLH35EAw/uAxAuISy/8jEu9ssDwgY1FZSwSEnCjxiT+BY9RZrd9?=
 =?us-ascii?q?fYAECWq1J823x9N+h4PiWnJC9V6jAU8G19GteRaIc1P92ghQ31wNoXO7gSu40y?=
 =?us-ascii?q?B0kzYxo6qF3SzB3/7tdAAaNW5MXmVii0njIZK1j9wDQEendQwpmwa76kbgwKhb?=
 =?us-ascii?q?or9yL23SQUdOYij3IHtuUqq2trqefcFP7IkkvjlQUOS5eVqaUKLyowMG0yP/GG?=
 =?us-ascii?q?tT3DA6dzCwtpT5hRB6k3+dLHBooXrdeMFwwwrf5dPGSf5Q2DoGWDd3iT3NCleg?=
 =?us-ascii?q?ONmp+M2el43fveCmS2KhSppTfDHpzYyariu75m5qARqlk/CogNLnEgs60S7919?=
 =?us-ascii?q?Z0UyXFtxL8Yojt16SnPuNrZEhoBFng68VkHoFyiJc/hJYV2XICnJWa4WIHkXvv?=
 =?us-ascii?q?MdVcwa//bGACRTkRz97X4Qjl3lZuLnaIx4L/S3WczdFtZ9i8YmMKxC0969pGB7?=
 =?us-ascii?q?uT7LxBhSF1uEa3rRrNYfhhmTcQ0fgu52Qbg+0TuAot0z+SArYdHURDOSzslhKI?=
 =?us-ascii?q?782xralNZWavd6Sw21R6ndy7EL6CpQRcUm7jepg+BS9w8tl/MFXU3X3264Hke8?=
 =?us-ascii?q?PfYcgdtxKKiBfAk/ZaKIgqmfUUnypnNnnwvXkky+49kBxv0ou2vImBK2Vx4q25?=
 =?us-ascii?q?BgRUOSHyZ8MW4jvtl7pRnt6K34CzGZVsAikLXJztTf6yETMdr/LnNxuVED0nq3?=
 =?us-ascii?q?eWAr7fHQ6Z6Ed7oHPDCZGrN3eLJHYHydVuXgWSJEtagAoMRjU1goY5Fhy2xMzm?=
 =?us-ascii?q?aEp2/Soe5ln8qhtR0O5oMwT/X3zbpAepbDc0VZeeIABX7gFE+0faL8ie4vhvEC?=
 =?us-ascii?q?Ff+52rtBaNJXCDZwRUEWEJXVSJB1L5Mbmr+9bA6PKUBvakI/vNfLWOqvFeV/GS?=
 =?us-ascii?q?ypK0yYZm+zeMNsOSPnhtFfE720xDXWxnFMTdgTkAVysXlyfVZc6BuBi84jF3rt?=
 =?us-ascii?q?y48PnzWAPv4paPC6JPMdp1/RC6m7yDN+mWhCZ2MjtY0pIMxXnVyLkQxlISiidu?=
 =?us-ascii?q?dyWzHrQEryLCUKXQmqpPBR4BdyxzLNdI77473gRVOc7UlNL11r17jv40EVtFVk?=
 =?us-ascii?q?bhmsamZcMUOWG9KUjHCV2PNLSHIz3L3s72bbm9Sb1WkOVbqRmwtSyHHE/kOzSJ?=
 =?us-ascii?q?jyPpWAy3MeFQkCGbOwRTt5ugchl2E2jsUtLnZge/MN92ljA2xbw0hnXXNW8TKz?=
 =?us-ascii?q?R8ckVNrqGO4iNcmPlwB2tB7n99J+mehymZ9/XYKooRsfZzHiR0luda7G4mxLdP?=
 =?us-ascii?q?8C5EROJ6mC3Jo95qolGmlPSPyzV9XBpPrDZLmJyEvUF4NarF8ZlAXG7O/AgR4m?=
 =?us-ascii?q?WIFxQKu9xlB8Xvuq9KzNjPkaPzKDFa/NPV/csTHc7UKM2cPXolMBrpHiPUDQQf?=
 =?us-ascii?q?QT6qM2Hfm1JSkPWI+nKJqZg6r8ukpJ1bYb9BVUcpEesaQmRoGNgdIZg/CjMvkZ?=
 =?us-ascii?q?afl9JO6Xfo/zfLQ8APhZncXfKbSdXmNTuDxe1fIRsB3L7iBZweMILmx1ZlbFhq?=
 =?us-ascii?q?2ojHTRmDFetRqzFsO1dn6H5G92JzGyhqgxro?=
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A0ARAABkFA5ch0O0hNFjHAEBAQQBAQcEA?=
 =?us-ascii?q?QGBUQcBAQsBgTCBOYECjDqMDYINFJJBhHyBdRIYBwwBh2QiNAkNAQMBAQEBAQE?=
 =?us-ascii?q?CARMBAQEIDQkIKSMMgjYkAYJiAQIDAQI3PwYIAQEBCg4KCSUDDAwhGwYYFoMGA?=
 =?us-ascii?q?YIBAQMBphOKHwWMHIFXP4QjilwCoHUHAoEVkC8jiXGHTCyZBIFGgg4zGiSDPAi?=
 =?us-ascii?q?CHheDfYohP4E3AQGMSQEB?=
X-IPAS-Result: =?us-ascii?q?A0ARAABkFA5ch0O0hNFjHAEBAQQBAQcEAQGBUQcBAQsBgTC?=
 =?us-ascii?q?BOYECjDqMDYINFJJBhHyBdRIYBwwBh2QiNAkNAQMBAQEBAQECARMBAQEIDQkIK?=
 =?us-ascii?q?SMMgjYkAYJiAQIDAQI3PwYIAQEBCg4KCSUDDAwhGwYYFoMGAYIBAQMBphOKHwW?=
 =?us-ascii?q?MHIFXP4QjilwCoHUHAoEVkC8jiXGHTCyZBIFGgg4zGiSDPAiCHheDfYohP4E3A?=
 =?us-ascii?q?QGMSQEB?=
X-IronPort-AV: E=Sophos;i="5.56,337,1539673200"; 
   d="scan'208";a="55217713"
X-Amp-Result: UNKNOWN
X-Amp-Original-Verdict: FILE UNKNOWN
X-Amp-File-Uploaded: False
Received: from vger.kernel.org ([209.132.180.67])
  by mtab.intel.com with ESMTP; 09 Dec 2018 23:27:05 -0800
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1726262AbeLJH1C (ORCPT <rfc822;like.xu@linux.intel.com>
        + 23 others); Mon, 10 Dec 2018 02:27:02 -0500
Received: from metis.ext.pengutronix.de ([85.220.165.71]:48877 "EHLO
        metis.ext.pengutronix.de" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1726029AbeLJH1B (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Mon, 10 Dec 2018 02:27:01 -0500
Received: from ptx.hi.pengutronix.de ([2001:67c:670:100:1d::c0])
        by metis.ext.pengutronix.de with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
        (Exim 4.89)
        (envelope-from <sha@pengutronix.de>)
        id 1gWFxq-0000Q7-N1; Mon, 10 Dec 2018 08:26:50 +0100
Received: from sha by ptx.hi.pengutronix.de with local (Exim 4.89)
        (envelope-from <sha@pengutronix.de>)
        id 1gWFxo-00049o-Im; Mon, 10 Dec 2018 08:26:48 +0100
Date: Mon, 10 Dec 2018 08:26:48 +0100
From: Sascha Hauer <s.hauer@pengutronix.de>
To: Christoph Hellwig <hch@lst.de>
Cc: Shawn Guo <shawnguo@kernel.org>,
        Fabio Estevam <fabio.estevam@nxp.com>,
        linux-arm-kernel@lists.infradead.org,
        iommu@lists.linux-foundation.org, linux-imx@nxp.com,
        linux-kernel@vger.kernel.org, linux-sh@vger.kernel.org
Subject: Re: dma_declare_coherent_memory on main memory
Message-ID: <20181210072648.ore6xttedsgpndi4@pengutronix.de>
References: <20181207153432.GA24917@lst.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20181207153432.GA24917@lst.de>
X-Sent-From: Pengutronix Hildesheim
X-URL: http://www.pengutronix.de/
X-IRC: #ptxdist @freenode
X-Accept-Language: de,en
X-Accept-Content-Type: text/plain
X-Uptime: 08:25:52 up 180 days, 16:34, 120 users,  load average: 0.17, 0.12,
 0.11
User-Agent: NeoMutt/20170113 (1.7.2)
X-SA-Exim-Connect-IP: 2001:67c:670:100:1d::c0
X-SA-Exim-Mail-From: sha@pengutronix.de
X-SA-Exim-Scanned: No (on metis.ext.pengutronix.de); SAEximRunCond expanded to false
X-PTX-Original-Recipient: linux-kernel@vger.kernel.org
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

On Fri, Dec 07, 2018 at 04:34:32PM +0100, Christoph Hellwig wrote:
> Hi all,
> 
> the ARM imx27/31 ports and various sh boards use
> dma_declare_coherent_memory on main memory taken from the memblock
> allocator.
> 
> Is there any good reason these couldn't be switched to CMA areas?
> Getting rid of these magic dma_declare_coherent_memory area would
> help making the dma allocator a lot simpler.

At least for i.MX27/31 I'd say this predates CMA support, so historical
reasons.

Sascha

-- 
Pengutronix e.K.                           |                             |
Industrial Linux Solutions                 | http://www.pengutronix.de/  |
Peiner Str. 6-8, 31137 Hildesheim, Germany | Phone: +49-5121-206917-0    |
Amtsgericht Hildesheim, HRA 2686           | Fax:   +49-5121-206917-5555 |
