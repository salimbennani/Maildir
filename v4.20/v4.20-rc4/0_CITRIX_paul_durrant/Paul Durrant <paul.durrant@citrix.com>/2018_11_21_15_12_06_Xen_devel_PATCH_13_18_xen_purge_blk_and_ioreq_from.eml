Return-Path: <xen-devel-bounces@lists.xenproject.org>
Delivered-To: unknown
Received: from pop3.zju.edu.cn (124.160.105.205:110) by
  likexu-MOBL1.ccr.corp.intel.com with POP3; 22 Nov 2018 00:34:20 -0000
Received: from icoremail.net (unknown [209.85.214.177])
	by mail-app2 (Coremail) with SMTP id by_KCgCn36RsevVbsifJAQ--.58164S3;
	Wed, 21 Nov 2018 23:31:58 +0800 (CST)
Received: from mail-pl1-f177.google.com (unknown [209.85.214.177])
	by mx2.icoremail.net (Coremail) with SMTP id AQAAfwAH6URmevVbSRtkAA--.2317S3;
	Wed, 21 Nov 2018 23:31:51 +0800 (CST)
Received: by mail-pl1-f177.google.com with SMTP id v1-v6so6023957plo.2
        for <xuliker@zju.edu.cn>; Wed, 21 Nov 2018 07:31:51 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20161025;
        h=x-original-authentication-results:x-gm-message-state:delivered-to
         :from:to:date:message-id:in-reply-to:references:mime-version:subject
         :precedence:list-id:list-unsubscribe:list-post:list-help
         :list-subscribe:cc:content-transfer-encoding:errors-to:sender;
        bh=1mdzvW+klvr6Eano+osjYei6Z3gOcjQf611jvB4VMCo=;
        b=Yv4QQt6NYNuqTBJ/+VhtKcfbk+6xdZMMdnPGdwzh5Ub396irFFXVLRQ3sM2ZPOMaMf
         a5+ivSIN7DRhgPFH8SkqeGiMp/BROfcTkCZOluhByCxDPoovYw1Zp4FeQjvIQzPd2F33
         PmoS1P+v/WGG/nqXFD+ULpfBP+brfEL6U7uIraN/j7UuYUByXpuLXvVsBWACJ0LhmKM6
         ZXDJUYudVR6SLCHd3waMwnuAIhcXuPi+sf+sIXVugouG4DfByTr3gjg6kT57SZPbMP91
         UQomWWEkZXD5MeIka1n+Mg39yx1ACQlppcmaH4WMs5RbXZoHJo50txcO5KOb+GOkwj1W
         J0gg==
X-Original-Authentication-Results: mx.google.com;       spf=pass (google.com: best guess record for domain of xen-devel-bounces@lists.xenproject.org designates 192.237.175.120 as permitted sender) smtp.mailfrom=xen-devel-bounces@lists.xenproject.org
X-Gm-Message-State: AA+aEWYZFxdEpcCv5BvrgK37XiIA0MkJ1v4TSFz3T6YvSWhsblCAFGRT
	qNlDQq7l4WmnzoZxDBVCAMCzCvhyIE+5LgSy5z79Tsqd9oYQsMs=
X-Received: by 2002:a65:66ce:: with SMTP id c14mr6355742pgw.450.1542814310768;
        Wed, 21 Nov 2018 07:31:50 -0800 (PST)
X-Forwarded-To: xuliker@zju.edu.cn
X-Forwarded-For: liker.xu@gmail.com xuliker@zju.edu.cn
Delivered-To: liker.xu@gmail.com
Received: by 2002:a17:90a:d106:0:0:0:0 with SMTP id l6-v6csp2101417pju;
        Wed, 21 Nov 2018 07:31:49 -0800 (PST)
X-Google-Smtp-Source: AJdET5c2DQcue5kPXcuzLh2fKTavyYv72QqN+pSQTYn/Kp3i/OGw61ynGHrRC3PTohZsXwSD6PpP
X-Received: by 2002:a25:7d45:: with SMTP id y66-v6mr6899519ybc.105.1542814309646;
        Wed, 21 Nov 2018 07:31:49 -0800 (PST)
ARC-Seal: i=1; a=rsa-sha256; t=1542814309; cv=none;
        d=google.com; s=arc-20160816;
        b=SoShbkTZOAU37S8ZkaF7lOapHtilSUb3OFv5xWVrcMVTUuFG6wfHfH78C+abOdibZZ
         mLNggXHrM06K+jTz4RbUDpsm3OLiwywnzaPTKWObKr4awpZwns/oZtbbC/zwhz0CqV6M
         upX8cem1huYAgGTVKk1+Q+07yj1s+oRsiVTo+6xe9ou2zZB9+V62+Zf++lz81ghq8Sqt
         80PDNM/WLmz2N6jNpIIeD7U/SvIAiyfbLB7CiF0f9UturRfo5Q0Cw/igWc0Aw5n/XdM1
         1rG9V93NLy9YrzXM+cnhUnCxYN/bRfxFLtrq9QhsCWB+DoG+BbGf8vatecNQ4suKbjin
         AVZQ==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;
        h=sender:errors-to:content-transfer-encoding:cc:list-subscribe
         :list-help:list-post:list-unsubscribe:list-id:precedence:subject
         :mime-version:references:in-reply-to:message-id:date:to:from;
        bh=1mdzvW+klvr6Eano+osjYei6Z3gOcjQf611jvB4VMCo=;
        b=JFJssBRzIOspDXF0QYZZhYjGenvfoCF70ENsOl/aEJoAuThgTB/Ri7K8iPZj/Q2Tg8
         NysNrvHjeOqNQZuFxmpgukssi+ocB1Vk8O6DijfU6J1mthXERuWjtEeQafAvuvxZZuNJ
         PEXH+jVadPu8zZpYYvf/Ln92kaVgJwsOMDZq4/D5eXDoWWpQze/T/wWogBUKypDVSP9S
         jLCMowYdHNDf46sTE8Z6s691AVeC1yp0VSTrWKJKjqXKM1NIQqBw+na2V2fNmmroxMpT
         Q2xDPz7b4qqj/jggf7Mc2e/lDVwfnON1JtPmfL3HxPyMdwwzxpvgK6FHSjRspbOx4Qc6
         dz4A==
ARC-Authentication-Results: i=1; mx.google.com;
       spf=pass (google.com: best guess record for domain of xen-devel-bounces@lists.xenproject.org designates 192.237.175.120 as permitted sender) smtp.mailfrom=xen-devel-bounces@lists.xenproject.org
Received: from lists.xenproject.org (lists.xenproject.org. [192.237.175.120])
        by mx.google.com with ESMTPS id d187-v6si28776704ybf.62.2018.11.21.07.31.32
        (version=TLS1_2 cipher=ECDHE-RSA-CHACHA20-POLY1305 bits=256/256);
        Wed, 21 Nov 2018 07:31:49 -0800 (PST)
Received-SPF: pass (google.com: best guess record for domain of xen-devel-bounces@lists.xenproject.org designates 192.237.175.120 as permitted sender) client-ip=192.237.175.120;
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1gPUR9-0000tl-Tb; Wed, 21 Nov 2018 15:29:07 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=wVSe=OA=citrix.com=prvs=856356900=paul.durrant@srs-us1.protection.inumbo.net>)
 id 1gPUR7-0000rz-Ft
 for xen-devel@lists.xenproject.org; Wed, 21 Nov 2018 15:29:05 +0000
X-Inumbo-ID: 2cbbd02c-eda2-11e8-a6d3-12d6303a7972
Received: from SMTP03.CITRIX.COM (unknown [162.221.156.55])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 2cbbd02c-eda2-11e8-a6d3-12d6303a7972;
 Wed, 21 Nov 2018 15:29:03 +0000 (UTC)
X-IronPort-AV: E=Sophos;i="5.56,261,1539648000"; d="scan'208";a="71207558"
From: Paul Durrant <paul.durrant@citrix.com>
To: <qemu-block@nongnu.org>, <qemu-devel@nongnu.org>,
 <xen-devel@lists.xenproject.org>
Date: Wed, 21 Nov 2018 15:12:06 +0000
Message-ID: <20181121151211.15997-14-paul.durrant@citrix.com>
X-Mailer: git-send-email 2.11.0
In-Reply-To: <20181121151211.15997-1-paul.durrant@citrix.com>
References: <20181121151211.15997-1-paul.durrant@citrix.com>
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH 13/18] xen: purge 'blk' and 'ioreq' from
 function names in dataplane/xen-qdisk.c
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Kevin Wolf <kwolf@redhat.com>, Stefano Stabellini <sstabellini@kernel.org>,
 Max Reitz <mreitz@redhat.com>, Paul Durrant <paul.durrant@citrix.com>,
 Stefan Hajnoczi <stefanha@redhat.com>,
 Anthony Perard <anthony.perard@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: liker.xu+caf_=xuliker=zju.edu.cn@gmail.com
X-CM-TRANSID: AQAAfwAH6URmevVbSRtkAA--.2317S3
Authentication-Results: mail-app2; spf=pass smtp.mail=liker.xu+caf_=xu
	liker=zju.edu.cn@gmail.com;
X-Coremail-Antispam: 1UD129KBjvJXoW3uFykKrW7AF1DKw1rtryUtrb_yoWkJF4kpF
	4kXFZ0krW5Xr4DJ3y8XryDZF1xZrWIkrW7Kr13tr1Yqr98Grs7CF1UG34xXr12ya4rWw48
	Cw4DJwnrW3W2qFJanT9S1TB71UUUUU7qnTZGkaVYY2UrUUUU0bIjqfuFe4nvWSU8nxnvy2
	9KBjDU0xBIdaVrnRJUUUl2b7Iv0xC_Kw4lb4IE77IF4wAFF20E14v26r1j6r4UM7CIcVAF
	z4kK6r1j6r18M28lY4IEw2IIxxk0rwA2F7IY1VAKz4vEj48ve4kI8wA2z4x0Y4vE2Ix0cI
	8IcVAFwI0_Ar0_tr1l84ACjcxK6xIIjxv20xvEc7CjxVAFwI0_Cr0_Gr1UM28EF7xvwVC2
	z280aVAFwI0_GcCE3s1l84ACjcxK6I8E87Iv6xkF7I0E14v26rxl6s0DM2vj6VCEFcxC0V
	AYjxAxZF0EFcxC0VAYjxAxZF0Ew4CEw7xC0VCjxxvEa2IrM2AIxVAIcxkEcVAq07x20xvE
	ncxIr21l5I8CrVACY4xI64kE6c02F40Ex7xfMcIj6xIIjxv20xvE14v26r1j6r18McIj6I
	8E87Iv67AKxVW8Jr0_Cr1UMcvjeVCFs4IE7xkEbVWUJVW8JwACjcxG0xvY0x0EwIxGrwAC
	Y4xI67k04243AVAKzVAKj4xxMx02cVCv0xWlc7CjxVAKzI0EY4vE52x082I5MxkFs20EY4
	vE44CYbxCE4x80FwCY02Avz4vEIxC_XrWlc2IjII80xcxEwVAKI48JMxvI42IY6xIIjxv2
	0xvE14v26ryj6F1UMxvI42IY6xIIjxv20xvEc7CjxVAFwI0_Gr0_Cr1lcIIF0xvEx4A2js
	IE14v26rxl6s0DMxvI42IY6I8E87Iv6xkF7I0E14v26rxl6s0DMxAIw28IcxkI7VAKI48J
	MxAIw28IcVAKzI0EY4vE52x082I5MxCjnVCjjxCrMxC20s026xCaFVCjc4AY6r1j6r4UMI
	8I3I0E5I8CrVAFwI0_Jr0_Jr4lx2IqxVCjr7xvwVAFwI0_JrI_JrWlx4CE17CEb7AF67AK
	xVWUtVW8ZwCIc40Y0x0EwIxGrwCI42IY6xAIw20EY4v20xvaj40_Jr0_JF4l6VACY4xI67
	k04243AbIYCTnIWIevJa73UjIFyTuYvjxUBAhLUUUUU

VGhpcyBpcyBhIHB1cmVseSBjb3NtZXRpYyBwYXRjaCB0aGF0IHB1cmdlcyByZW1haW5pbmcgdXNl
IG9mICdibGsnIGFuZAonaW9yZXEnIGluIGxvY2FsIGZ1bmN0aW9uIG5hbWVzLgoKTm8gZnVuY3Rp
b25hbCBjaGFuZ2UuCgpTaWduZWQtb2ZmLWJ5OiBQYXVsIER1cnJhbnQgPHBhdWwuZHVycmFudEBj
aXRyaXguY29tPgotLS0KQ2M6IFN0ZWZhbm8gU3RhYmVsbGluaSA8c3N0YWJlbGxpbmlAa2VybmVs
Lm9yZz4KQ2M6IEFudGhvbnkgUGVyYXJkIDxhbnRob255LnBlcmFyZEBjaXRyaXguY29tPgpDYzog
U3RlZmFuIEhham5vY3ppIDxzdGVmYW5oYUByZWRoYXQuY29tPgpDYzogS2V2aW4gV29sZiA8a3dv
bGZAcmVkaGF0LmNvbT4KQ2M6IE1heCBSZWl0eiA8bXJlaXR6QHJlZGhhdC5jb20+Ci0tLQogaHcv
YmxvY2svZGF0YXBsYW5lL3hlbi1xZGlzay5jIHwgODYgKysrKysrKysrKysrKysrKysrKysrLS0t
LS0tLS0tLS0tLS0tLS0tLS0tCiAxIGZpbGUgY2hhbmdlZCwgNDMgaW5zZXJ0aW9ucygrKSwgNDMg
ZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvaHcvYmxvY2svZGF0YXBsYW5lL3hlbi1xZGlzay5j
IGIvaHcvYmxvY2svZGF0YXBsYW5lL3hlbi1xZGlzay5jCmluZGV4IDUwYTQ4YjZmNWYuLjk0Nzg1
ZWVmZjMgMTAwNjQ0Ci0tLSBhL2h3L2Jsb2NrL2RhdGFwbGFuZS94ZW4tcWRpc2suYworKysgYi9o
dy9ibG9jay9kYXRhcGxhbmUveGVuLXFkaXNrLmMKQEAgLTU3LDcgKzU3LDcgQEAgc3RydWN0IFhl
blFkaXNrRGF0YVBsYW5lIHsKICAgICBBaW9Db250ZXh0ICpjdHg7CiB9OwogCi1zdGF0aWMgdm9p
ZCBpb3JlcV9yZXNldChYZW5RZGlza1JlcXVlc3QgKnJlcXVlc3QpCitzdGF0aWMgdm9pZCByZXNl
dF9yZXF1ZXN0KFhlblFkaXNrUmVxdWVzdCAqcmVxdWVzdCkKIHsKICAgICBtZW1zZXQoJnJlcXVl
c3QtPnJlcSwgMCwgc2l6ZW9mKHJlcXVlc3QtPnJlcSkpOwogICAgIHJlcXVlc3QtPnN0YXR1cyA9
IDA7CkBAIC03Niw3ICs3Niw3IEBAIHN0YXRpYyB2b2lkIGlvcmVxX3Jlc2V0KFhlblFkaXNrUmVx
dWVzdCAqcmVxdWVzdCkKICAgICBxZW11X2lvdmVjX3Jlc2V0KCZyZXF1ZXN0LT52KTsKIH0KIAot
c3RhdGljIFhlblFkaXNrUmVxdWVzdCAqaW9yZXFfc3RhcnQoWGVuUWRpc2tEYXRhUGxhbmUgKmRh
dGFwbGFuZSkKK3N0YXRpYyBYZW5RZGlza1JlcXVlc3QgKnN0YXJ0X3JlcXVlc3QoWGVuUWRpc2tE
YXRhUGxhbmUgKmRhdGFwbGFuZSkKIHsKICAgICBYZW5RZGlza1JlcXVlc3QgKnJlcXVlc3QgPSBO
VUxMOwogCkBAIC0xMDEsNyArMTAxLDcgQEAgb3V0OgogICAgIHJldHVybiByZXF1ZXN0OwogfQog
Ci1zdGF0aWMgdm9pZCBpb3JlcV9maW5pc2goWGVuUWRpc2tSZXF1ZXN0ICpyZXF1ZXN0KQorc3Rh
dGljIHZvaWQgZmluaXNoX3JlcXVlc3QoWGVuUWRpc2tSZXF1ZXN0ICpyZXF1ZXN0KQogewogICAg
IFhlblFkaXNrRGF0YVBsYW5lICpkYXRhcGxhbmUgPSByZXF1ZXN0LT5kYXRhcGxhbmU7CiAKQEAg
LTExMSwxMiArMTExLDEyIEBAIHN0YXRpYyB2b2lkIGlvcmVxX2ZpbmlzaChYZW5RZGlza1JlcXVl
c3QgKnJlcXVlc3QpCiAgICAgZGF0YXBsYW5lLT5yZXF1ZXN0c19maW5pc2hlZCsrOwogfQogCi1z
dGF0aWMgdm9pZCBpb3JlcV9yZWxlYXNlKFhlblFkaXNrUmVxdWVzdCAqcmVxdWVzdCwgYm9vbCBm
aW5pc2gpCitzdGF0aWMgdm9pZCByZWxlYXNlX3JlcXVlc3QoWGVuUWRpc2tSZXF1ZXN0ICpyZXF1
ZXN0LCBib29sIGZpbmlzaCkKIHsKICAgICBYZW5RZGlza0RhdGFQbGFuZSAqZGF0YXBsYW5lID0g
cmVxdWVzdC0+ZGF0YXBsYW5lOwogCiAgICAgUUxJU1RfUkVNT1ZFKHJlcXVlc3QsIGxpc3QpOwot
ICAgIGlvcmVxX3Jlc2V0KHJlcXVlc3QpOworICAgIHJlc2V0X3JlcXVlc3QocmVxdWVzdCk7CiAg
ICAgcmVxdWVzdC0+ZGF0YXBsYW5lID0gZGF0YXBsYW5lOwogICAgIFFMSVNUX0lOU0VSVF9IRUFE
KCZkYXRhcGxhbmUtPmZyZWVsaXN0LCByZXF1ZXN0LCBsaXN0KTsKICAgICBpZiAoZmluaXNoKSB7
CkBAIC0xMzAsNyArMTMwLDcgQEAgc3RhdGljIHZvaWQgaW9yZXFfcmVsZWFzZShYZW5RZGlza1Jl
cXVlc3QgKnJlcXVlc3QsIGJvb2wgZmluaXNoKQogICogdHJhbnNsYXRlIHJlcXVlc3QgaW50byBp
b3ZlYyArIHN0YXJ0IG9mZnNldAogICogZG8gc2FuaXR5IGNoZWNrcyBhbG9uZyB0aGUgd2F5CiAg
Ki8KLXN0YXRpYyBpbnQgaW9yZXFfcGFyc2UoWGVuUWRpc2tSZXF1ZXN0ICpyZXF1ZXN0KQorc3Rh
dGljIGludCBwYXJzZV9yZXF1ZXN0KFhlblFkaXNrUmVxdWVzdCAqcmVxdWVzdCkKIHsKICAgICBY
ZW5RZGlza0RhdGFQbGFuZSAqZGF0YXBsYW5lID0gcmVxdWVzdC0+ZGF0YXBsYW5lOwogICAgIHNp
emVfdCBsZW47CkBAIC0xOTEsNyArMTkxLDcgQEAgZXJyOgogICAgIHJldHVybiAtMTsKIH0KIAot
c3RhdGljIGludCBpb3JlcV9ncmFudF9jb3B5KFhlblFkaXNrUmVxdWVzdCAqcmVxdWVzdCkKK3N0
YXRpYyBpbnQgY29weV9yZXF1ZXN0KFhlblFkaXNrUmVxdWVzdCAqcmVxdWVzdCkKIHsKICAgICBY
ZW5RZGlza0RhdGFQbGFuZSAqZGF0YXBsYW5lID0gcmVxdWVzdC0+ZGF0YXBsYW5lOwogICAgIFhl
bkRldmljZSAqeGVuZGV2ID0gZGF0YXBsYW5lLT54ZW5kZXY7CkBAIC0yNDAsOSArMjQwLDkgQEAg
c3RhdGljIGludCBpb3JlcV9ncmFudF9jb3B5KFhlblFkaXNrUmVxdWVzdCAqcmVxdWVzdCkKICAg
ICByZXR1cm4gMDsKIH0KIAotc3RhdGljIGludCBpb3JlcV9ydW5pb19xZW11X2FpbyhYZW5RZGlz
a1JlcXVlc3QgKnJlcXVlc3QpOworc3RhdGljIGludCBkb19haW8oWGVuUWRpc2tSZXF1ZXN0ICpy
ZXF1ZXN0KTsKIAotc3RhdGljIHZvaWQgcWVtdV9haW9fY29tcGxldGUodm9pZCAqb3BhcXVlLCBp
bnQgcmV0KQorc3RhdGljIHZvaWQgY29tcGxldGVfYWlvKHZvaWQgKm9wYXF1ZSwgaW50IHJldCkK
IHsKICAgICBYZW5RZGlza1JlcXVlc3QgKnJlcXVlc3QgPSBvcGFxdWU7CiAgICAgWGVuUWRpc2tE
YXRhUGxhbmUgKmRhdGFwbGFuZSA9IHJlcXVlc3QtPmRhdGFwbGFuZTsKQEAgLTI1OSw3ICsyNTks
NyBAQCBzdGF0aWMgdm9pZCBxZW11X2Fpb19jb21wbGV0ZSh2b2lkICpvcGFxdWUsIGludCByZXQp
CiAgICAgcmVxdWVzdC0+YWlvX2luZmxpZ2h0LS07CiAgICAgaWYgKHJlcXVlc3QtPnByZXN5bmMp
IHsKICAgICAgICAgcmVxdWVzdC0+cHJlc3luYyA9IDA7Ci0gICAgICAgIGlvcmVxX3J1bmlvX3Fl
bXVfYWlvKHJlcXVlc3QpOworICAgICAgICBkb19haW8ocmVxdWVzdCk7CiAgICAgICAgIGdvdG8g
ZG9uZTsKICAgICB9CiAgICAgaWYgKHJlcXVlc3QtPmFpb19pbmZsaWdodCA+IDApIHsKQEAgLTI3
MCw3ICsyNzAsNyBAQCBzdGF0aWMgdm9pZCBxZW11X2Fpb19jb21wbGV0ZSh2b2lkICpvcGFxdWUs
IGludCByZXQpCiAgICAgY2FzZSBCTEtJRl9PUF9SRUFEOgogICAgICAgICAvKiBpbiBjYXNlIG9m
IGZhaWx1cmUgcmVxdWVzdC0+YWlvX2Vycm9ycyBpcyBpbmNyZWFzZWQgKi8KICAgICAgICAgaWYg
KHJldCA9PSAwKSB7Ci0gICAgICAgICAgICBpb3JlcV9ncmFudF9jb3B5KHJlcXVlc3QpOworICAg
ICAgICAgICAgY29weV9yZXF1ZXN0KHJlcXVlc3QpOwogICAgICAgICB9CiAgICAgICAgIHFlbXVf
dmZyZWUocmVxdWVzdC0+YnVmKTsKICAgICAgICAgYnJlYWs7CkBAIC0yODYsNyArMjg2LDcgQEAg
c3RhdGljIHZvaWQgcWVtdV9haW9fY29tcGxldGUodm9pZCAqb3BhcXVlLCBpbnQgcmV0KQogICAg
IH0KIAogICAgIHJlcXVlc3QtPnN0YXR1cyA9IHJlcXVlc3QtPmFpb19lcnJvcnMgPyBCTEtJRl9S
U1BfRVJST1IgOiBCTEtJRl9SU1BfT0tBWTsKLSAgICBpb3JlcV9maW5pc2gocmVxdWVzdCk7Cisg
ICAgZmluaXNoX3JlcXVlc3QocmVxdWVzdCk7CiAKICAgICBzd2l0Y2ggKHJlcXVlc3QtPnJlcS5v
cGVyYXRpb24pIHsKICAgICBjYXNlIEJMS0lGX09QX1dSSVRFOgpAQCAtMzExLDkgKzMxMSw4IEBA
IGRvbmU6CiAgICAgYWlvX2NvbnRleHRfcmVsZWFzZShkYXRhcGxhbmUtPmN0eCk7CiB9CiAKLXN0
YXRpYyBib29sIGJsa19zcGxpdF9kaXNjYXJkKFhlblFkaXNrUmVxdWVzdCAqcmVxdWVzdCwKLSAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsa2lmX3NlY3Rvcl90IHNlY3Rvcl9udW1iZXIs
Ci0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50NjRfdCBucl9zZWN0b3JzKQorc3Rh
dGljIGJvb2wgc3BsaXRfZGlzY2FyZChYZW5RZGlza1JlcXVlc3QgKnJlcXVlc3QsCisgICAgICAg
ICAgICAgICAgICAgICAgICAgIGJsa2lmX3NlY3Rvcl90IHNlY3Rvcl9udW1iZXIsIHVpbnQ2NF90
IG5yX3NlY3RvcnMpCiB7CiAgICAgWGVuUWRpc2tEYXRhUGxhbmUgKmRhdGFwbGFuZSA9IHJlcXVl
c3QtPmRhdGFwbGFuZTsKICAgICBpbnQ2NF90IGJ5dGVfb2Zmc2V0OwpAQCAtMzM2LDcgKzMzNSw3
IEBAIHN0YXRpYyBib29sIGJsa19zcGxpdF9kaXNjYXJkKFhlblFkaXNrUmVxdWVzdCAqcmVxdWVz
dCwKICAgICAgICAgYnl0ZV9jaHVuayA9IGJ5dGVfcmVtYWluaW5nID4gbGltaXQgPyBsaW1pdCA6
IGJ5dGVfcmVtYWluaW5nOwogICAgICAgICByZXF1ZXN0LT5haW9faW5mbGlnaHQrKzsKICAgICAg
ICAgYmxrX2Fpb19wZGlzY2FyZChkYXRhcGxhbmUtPmJsaywgYnl0ZV9vZmZzZXQsIGJ5dGVfY2h1
bmssCi0gICAgICAgICAgICAgICAgICAgICAgICAgcWVtdV9haW9fY29tcGxldGUsIHJlcXVlc3Qp
OworICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlX2FpbywgcmVxdWVzdCk7CiAgICAg
ICAgIGJ5dGVfcmVtYWluaW5nIC09IGJ5dGVfY2h1bms7CiAgICAgICAgIGJ5dGVfb2Zmc2V0ICs9
IGJ5dGVfY2h1bms7CiAgICAgfSB3aGlsZSAoYnl0ZV9yZW1haW5pbmcgPiAwKTsKQEAgLTM0NCw3
ICszNDMsNyBAQCBzdGF0aWMgYm9vbCBibGtfc3BsaXRfZGlzY2FyZChYZW5RZGlza1JlcXVlc3Qg
KnJlcXVlc3QsCiAgICAgcmV0dXJuIHRydWU7CiB9CiAKLXN0YXRpYyBpbnQgaW9yZXFfcnVuaW9f
cWVtdV9haW8oWGVuUWRpc2tSZXF1ZXN0ICpyZXF1ZXN0KQorc3RhdGljIGludCBkb19haW8oWGVu
UWRpc2tSZXF1ZXN0ICpyZXF1ZXN0KQogewogICAgIFhlblFkaXNrRGF0YVBsYW5lICpkYXRhcGxh
bmUgPSByZXF1ZXN0LT5kYXRhcGxhbmU7CiAKQEAgLTM1MiwxNCArMzUxLDE0IEBAIHN0YXRpYyBp
bnQgaW9yZXFfcnVuaW9fcWVtdV9haW8oWGVuUWRpc2tSZXF1ZXN0ICpyZXF1ZXN0KQogICAgIGlm
IChyZXF1ZXN0LT5yZXEubnJfc2VnbWVudHMgJiYKICAgICAgICAgKHJlcXVlc3QtPnJlcS5vcGVy
YXRpb24gPT0gQkxLSUZfT1BfV1JJVEUgfHwKICAgICAgICAgIHJlcXVlc3QtPnJlcS5vcGVyYXRp
b24gPT0gQkxLSUZfT1BfRkxVU0hfRElTS0NBQ0hFKSAmJgotICAgICAgICBpb3JlcV9ncmFudF9j
b3B5KHJlcXVlc3QpKSB7CisgICAgICAgIGNvcHlfcmVxdWVzdChyZXF1ZXN0KSkgewogICAgICAg
ICBxZW11X3ZmcmVlKHJlcXVlc3QtPmJ1Zik7CiAgICAgICAgIGdvdG8gZXJyOwogICAgIH0KIAog
ICAgIHJlcXVlc3QtPmFpb19pbmZsaWdodCsrOwogICAgIGlmIChyZXF1ZXN0LT5wcmVzeW5jKSB7
Ci0gICAgICAgIGJsa19haW9fZmx1c2gocmVxdWVzdC0+ZGF0YXBsYW5lLT5ibGssIHFlbXVfYWlv
X2NvbXBsZXRlLCByZXF1ZXN0KTsKKyAgICAgICAgYmxrX2Fpb19mbHVzaChyZXF1ZXN0LT5kYXRh
cGxhbmUtPmJsaywgY29tcGxldGVfYWlvLCByZXF1ZXN0KTsKICAgICAgICAgcmV0dXJuIDA7CiAg
ICAgfQogCkBAIC0zNzAsNyArMzY5LDcgQEAgc3RhdGljIGludCBpb3JlcV9ydW5pb19xZW11X2Fp
byhYZW5RZGlza1JlcXVlc3QgKnJlcXVlc3QpCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVx
dWVzdC0+di5zaXplLCBCTE9DS19BQ0NUX1JFQUQpOwogICAgICAgICByZXF1ZXN0LT5haW9faW5m
bGlnaHQrKzsKICAgICAgICAgYmxrX2Fpb19wcmVhZHYoZGF0YXBsYW5lLT5ibGssIHJlcXVlc3Qt
PnN0YXJ0LCAmcmVxdWVzdC0+diwgMCwKLSAgICAgICAgICAgICAgICAgICAgICAgcWVtdV9haW9f
Y29tcGxldGUsIHJlcXVlc3QpOworICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZV9haW8s
IHJlcXVlc3QpOwogICAgICAgICBicmVhazsKICAgICBjYXNlIEJMS0lGX09QX1dSSVRFOgogICAg
IGNhc2UgQkxLSUZfT1BfRkxVU0hfRElTS0NBQ0hFOgpAQCAtMzg1LDEyICszODQsMTIgQEAgc3Rh
dGljIGludCBpb3JlcV9ydW5pb19xZW11X2FpbyhYZW5RZGlza1JlcXVlc3QgKnJlcXVlc3QpCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgQkxPQ0tfQUNDVF9XUklURSA6IEJMT0NLX0FDQ1RfRkxV
U0gpOwogICAgICAgICByZXF1ZXN0LT5haW9faW5mbGlnaHQrKzsKICAgICAgICAgYmxrX2Fpb19w
d3JpdGV2KGRhdGFwbGFuZS0+YmxrLCByZXF1ZXN0LT5zdGFydCwgJnJlcXVlc3QtPnYsIDAsCi0g
ICAgICAgICAgICAgICAgICAgICAgICBxZW11X2Fpb19jb21wbGV0ZSwgcmVxdWVzdCk7CisgICAg
ICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZV9haW8sIHJlcXVlc3QpOwogICAgICAgICBicmVh
azsKICAgICBjYXNlIEJMS0lGX09QX0RJU0NBUkQ6CiAgICAgewogICAgICAgICBzdHJ1Y3QgYmxr
aWZfcmVxdWVzdF9kaXNjYXJkICpyZXEgPSAodm9pZCAqKSZyZXF1ZXN0LT5yZXE7Ci0gICAgICAg
IGlmICghYmxrX3NwbGl0X2Rpc2NhcmQocmVxdWVzdCwgcmVxLT5zZWN0b3JfbnVtYmVyLCByZXEt
Pm5yX3NlY3RvcnMpKSB7CisgICAgICAgIGlmICghc3BsaXRfZGlzY2FyZChyZXF1ZXN0LCByZXEt
PnNlY3Rvcl9udW1iZXIsIHJlcS0+bnJfc2VjdG9ycykpIHsKICAgICAgICAgICAgIGdvdG8gZXJy
OwogICAgICAgICB9CiAgICAgICAgIGJyZWFrOwpAQCAtNDAwLDE3ICszOTksMTcgQEAgc3RhdGlj
IGludCBpb3JlcV9ydW5pb19xZW11X2FpbyhYZW5RZGlza1JlcXVlc3QgKnJlcXVlc3QpCiAgICAg
ICAgIGdvdG8gZXJyOwogICAgIH0KIAotICAgIHFlbXVfYWlvX2NvbXBsZXRlKHJlcXVlc3QsIDAp
OworICAgIGNvbXBsZXRlX2FpbyhyZXF1ZXN0LCAwKTsKIAogICAgIHJldHVybiAwOwogCiBlcnI6
Ci0gICAgaW9yZXFfZmluaXNoKHJlcXVlc3QpOworICAgIGZpbmlzaF9yZXF1ZXN0KHJlcXVlc3Qp
OwogICAgIHJlcXVlc3QtPnN0YXR1cyA9IEJMS0lGX1JTUF9FUlJPUjsKICAgICByZXR1cm4gLTE7
CiB9CiAKLXN0YXRpYyBpbnQgYmxrX3NlbmRfcmVzcG9uc2Vfb25lKFhlblFkaXNrUmVxdWVzdCAq
cmVxdWVzdCkKK3N0YXRpYyBpbnQgc2VuZF9yZXNwb25zZV9vbmUoWGVuUWRpc2tSZXF1ZXN0ICpy
ZXF1ZXN0KQogewogICAgIFhlblFkaXNrRGF0YVBsYW5lICpkYXRhcGxhbmUgPSByZXF1ZXN0LT5k
YXRhcGxhbmU7CiAgICAgaW50IHNlbmRfbm90aWZ5ID0gMDsKQEAgLTQ2NiwxNSArNDY1LDE1IEBA
IHN0YXRpYyBpbnQgYmxrX3NlbmRfcmVzcG9uc2Vfb25lKFhlblFkaXNrUmVxdWVzdCAqcmVxdWVz
dCkKIH0KIAogLyogd2FsayBmaW5pc2hlZCBsaXN0LCBzZW5kIG91dHN0YW5kaW5nIHJlc3BvbnNl
cywgZnJlZSByZXF1ZXN0cyAqLwotc3RhdGljIHZvaWQgYmxrX3NlbmRfcmVzcG9uc2VfYWxsKFhl
blFkaXNrRGF0YVBsYW5lICpkYXRhcGxhbmUpCitzdGF0aWMgdm9pZCBzZW5kX3Jlc3BvbnNlX2Fs
bChYZW5RZGlza0RhdGFQbGFuZSAqZGF0YXBsYW5lKQogewogICAgIFhlblFkaXNrUmVxdWVzdCAq
cmVxdWVzdDsKICAgICBpbnQgc2VuZF9ub3RpZnkgPSAwOwogCiAgICAgd2hpbGUgKCFRTElTVF9F
TVBUWSgmZGF0YXBsYW5lLT5maW5pc2hlZCkpIHsKICAgICAgICAgcmVxdWVzdCA9IFFMSVNUX0ZJ
UlNUKCZkYXRhcGxhbmUtPmZpbmlzaGVkKTsKLSAgICAgICAgc2VuZF9ub3RpZnkgKz0gYmxrX3Nl
bmRfcmVzcG9uc2Vfb25lKHJlcXVlc3QpOwotICAgICAgICBpb3JlcV9yZWxlYXNlKHJlcXVlc3Qs
IHRydWUpOworICAgICAgICBzZW5kX25vdGlmeSArPSBzZW5kX3Jlc3BvbnNlX29uZShyZXF1ZXN0
KTsKKyAgICAgICAgcmVsZWFzZV9yZXF1ZXN0KHJlcXVlc3QsIHRydWUpOwogICAgIH0KICAgICBp
ZiAoc2VuZF9ub3RpZnkpIHsKICAgICAgICAgeGVuX2RldmljZV9ub3RpZnlfZXZlbnRfY2hhbm5l
bChkYXRhcGxhbmUtPnhlbmRldiwKQEAgLTQ4Miw4ICs0ODEsOCBAQCBzdGF0aWMgdm9pZCBibGtf
c2VuZF9yZXNwb25zZV9hbGwoWGVuUWRpc2tEYXRhUGxhbmUgKmRhdGFwbGFuZSkKICAgICB9CiB9
CiAKLXN0YXRpYyBpbnQgYmxrX2dldF9yZXF1ZXN0KFhlblFkaXNrRGF0YVBsYW5lICpkYXRhcGxh
bmUsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICBYZW5RZGlza1JlcXVlc3QgKnJlcXVlc3Qs
IFJJTkdfSURYIHJjKQorc3RhdGljIGludCBnZXRfcmVxdWVzdChYZW5RZGlza0RhdGFQbGFuZSAq
ZGF0YXBsYW5lLAorICAgICAgICAgICAgICAgICAgICAgICBYZW5RZGlza1JlcXVlc3QgKnJlcXVl
c3QsIFJJTkdfSURYIHJjKQogewogICAgIHN3aXRjaCAoZGF0YXBsYW5lLT5wcm90b2NvbCkgewog
ICAgIGNhc2UgQkxLSUZfUFJPVE9DT0xfTkFUSVZFOiB7CkBAIC01MTMsNyArNTEyLDcgQEAgc3Rh
dGljIGludCBibGtfZ2V0X3JlcXVlc3QoWGVuUWRpc2tEYXRhUGxhbmUgKmRhdGFwbGFuZSwKICAg
ICByZXR1cm4gMDsKIH0KIAotc3RhdGljIHZvaWQgYmxrX2hhbmRsZV9yZXF1ZXN0cyhYZW5RZGlz
a0RhdGFQbGFuZSAqZGF0YXBsYW5lKQorc3RhdGljIHZvaWQgaGFuZGxlX3JlcXVlc3RzKFhlblFk
aXNrRGF0YVBsYW5lICpkYXRhcGxhbmUpCiB7CiAgICAgUklOR19JRFggcmMsIHJwOwogICAgIFhl
blFkaXNrUmVxdWVzdCAqcmVxdWVzdDsKQEAgLTUyNCwyMiArNTIzLDIyIEBAIHN0YXRpYyB2b2lk
IGJsa19oYW5kbGVfcmVxdWVzdHMoWGVuUWRpc2tEYXRhUGxhbmUgKmRhdGFwbGFuZSkKICAgICBy
cCA9IGRhdGFwbGFuZS0+cmluZ3MuY29tbW9uLnNyaW5nLT5yZXFfcHJvZDsKICAgICB4ZW5fcm1i
KCk7IC8qIEVuc3VyZSB3ZSBzZWUgcXVldWVkIHJlcXVlc3RzIHVwIHRvICdycCcuICovCiAKLSAg
ICBibGtfc2VuZF9yZXNwb25zZV9hbGwoZGF0YXBsYW5lKTsKKyAgICBzZW5kX3Jlc3BvbnNlX2Fs
bChkYXRhcGxhbmUpOwogICAgIHdoaWxlIChyYyAhPSBycCkgewogICAgICAgICAvKiBwdWxsIHJl
cXVlc3QgZnJvbSByaW5nICovCiAgICAgICAgIGlmIChSSU5HX1JFUVVFU1RfQ09OU19PVkVSRkxP
VygmZGF0YXBsYW5lLT5yaW5ncy5jb21tb24sIHJjKSkgewogICAgICAgICAgICAgYnJlYWs7CiAg
ICAgICAgIH0KLSAgICAgICAgcmVxdWVzdCA9IGlvcmVxX3N0YXJ0KGRhdGFwbGFuZSk7CisgICAg
ICAgIHJlcXVlc3QgPSBzdGFydF9yZXF1ZXN0KGRhdGFwbGFuZSk7CiAgICAgICAgIGlmIChyZXF1
ZXN0ID09IE5VTEwpIHsKICAgICAgICAgICAgIGRhdGFwbGFuZS0+bW9yZV93b3JrKys7CiAgICAg
ICAgICAgICBicmVhazsKICAgICAgICAgfQotICAgICAgICBibGtfZ2V0X3JlcXVlc3QoZGF0YXBs
YW5lLCByZXF1ZXN0LCByYyk7CisgICAgICAgIGdldF9yZXF1ZXN0KGRhdGFwbGFuZSwgcmVxdWVz
dCwgcmMpOwogICAgICAgICBkYXRhcGxhbmUtPnJpbmdzLmNvbW1vbi5yZXFfY29ucyA9ICsrcmM7
CiAKICAgICAgICAgLyogcGFyc2UgdGhlbSAqLwotICAgICAgICBpZiAoaW9yZXFfcGFyc2UocmVx
dWVzdCkgIT0gMCkgeworICAgICAgICBpZiAocGFyc2VfcmVxdWVzdChyZXF1ZXN0KSAhPSAwKSB7
CiAKICAgICAgICAgICAgIHN3aXRjaCAocmVxdWVzdC0+cmVxLm9wZXJhdGlvbikgewogICAgICAg
ICAgICAgY2FzZSBCTEtJRl9PUF9SRUFEOgpAQCAtNTU3LDE1ICs1NTYsMTUgQEAgc3RhdGljIHZv
aWQgYmxrX2hhbmRsZV9yZXF1ZXN0cyhYZW5RZGlza0RhdGFQbGFuZSAqZGF0YXBsYW5lKQogICAg
ICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgfTsKIAotICAgICAgICAgICAgaWYgKGJs
a19zZW5kX3Jlc3BvbnNlX29uZShyZXF1ZXN0KSkgeworICAgICAgICAgICAgaWYgKHNlbmRfcmVz
cG9uc2Vfb25lKHJlcXVlc3QpKSB7CiAgICAgICAgICAgICAgICAgeGVuX2RldmljZV9ub3RpZnlf
ZXZlbnRfY2hhbm5lbChkYXRhcGxhbmUtPnhlbmRldiwKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFwbGFuZS0+ZXZlbnRfY2hhbm5lbCk7CiAgICAg
ICAgICAgICB9Ci0gICAgICAgICAgICBpb3JlcV9yZWxlYXNlKHJlcXVlc3QsIGZhbHNlKTsKKyAg
ICAgICAgICAgIHJlbGVhc2VfcmVxdWVzdChyZXF1ZXN0LCBmYWxzZSk7CiAgICAgICAgICAgICBj
b250aW51ZTsKICAgICAgICAgfQogCi0gICAgICAgIGlvcmVxX3J1bmlvX3FlbXVfYWlvKHJlcXVl
c3QpOworICAgICAgICBkb19haW8ocmVxdWVzdCk7CiAgICAgfQogCiAgICAgaWYgKGRhdGFwbGFu
ZS0+bW9yZV93b3JrICYmCkBAIC01NzQsMTYgKzU3MywxNiBAQCBzdGF0aWMgdm9pZCBibGtfaGFu
ZGxlX3JlcXVlc3RzKFhlblFkaXNrRGF0YVBsYW5lICpkYXRhcGxhbmUpCiAgICAgfQogfQogCi1z
dGF0aWMgdm9pZCBibGtfYmgodm9pZCAqb3BhcXVlKQorc3RhdGljIHZvaWQgeGVuX3FkaXNrX2Rh
dGFwbGFuZV9iaCh2b2lkICpvcGFxdWUpCiB7CiAgICAgWGVuUWRpc2tEYXRhUGxhbmUgKmRhdGFw
bGFuZSA9IG9wYXF1ZTsKIAogICAgIGFpb19jb250ZXh0X2FjcXVpcmUoZGF0YXBsYW5lLT5jdHgp
OwotICAgIGJsa19oYW5kbGVfcmVxdWVzdHMoZGF0YXBsYW5lKTsKKyAgICBoYW5kbGVfcmVxdWVz
dHMoZGF0YXBsYW5lKTsKICAgICBhaW9fY29udGV4dF9yZWxlYXNlKGRhdGFwbGFuZS0+Y3R4KTsK
IH0KIAotc3RhdGljIHZvaWQgYmxrX2V2ZW50KHZvaWQgKm9wYXF1ZSkKK3N0YXRpYyB2b2lkIHhl
bl9xZGlza19kYXRhcGxhbmVfZXZlbnQodm9pZCAqb3BhcXVlKQogewogICAgIFhlblFkaXNrRGF0
YVBsYW5lICpkYXRhcGxhbmUgPSBvcGFxdWU7CiAKQEAgLTYxMiw3ICs2MTEsOCBAQCBYZW5RZGlz
a0RhdGFQbGFuZSAqeGVuX3FkaXNrX2RhdGFwbGFuZV9jcmVhdGUoWGVuRGV2aWNlICp4ZW5kZXYs
CiAgICAgfSBlbHNlIHsKICAgICAgICAgZGF0YXBsYW5lLT5jdHggPSBxZW11X2dldF9haW9fY29u
dGV4dCgpOwogICAgIH0KLSAgICBkYXRhcGxhbmUtPmJoID0gYWlvX2JoX25ldyhkYXRhcGxhbmUt
PmN0eCwgYmxrX2JoLCBkYXRhcGxhbmUpOworICAgIGRhdGFwbGFuZS0+YmggPSBhaW9fYmhfbmV3
KGRhdGFwbGFuZS0+Y3R4LCB4ZW5fcWRpc2tfZGF0YXBsYW5lX2JoLAorICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGRhdGFwbGFuZSk7CiAKICAgICByZXR1cm4gZGF0YXBsYW5lOwogfQpA
QCAtNzE4LDcgKzcxOCw3IEBAIHZvaWQgeGVuX3FkaXNrX2RhdGFwbGFuZV9zdGFydChYZW5RZGlz
a0RhdGFQbGFuZSAqZGF0YXBsYW5lLAogCiAgICAgZGF0YXBsYW5lLT5ldmVudF9jaGFubmVsID0K
ICAgICAgICAgeGVuX2RldmljZV9iaW5kX2V2ZW50X2NoYW5uZWwoeGVuZGV2LCBldmVudF9jaGFu
bmVsLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGtfZXZlbnQsIGRh
dGFwbGFuZSwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeGVuX3FkaXNr
X2RhdGFwbGFuZV9ldmVudCwgZGF0YXBsYW5lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAmZXJyb3JfZmF0YWwpOwogCiAgICAgYWlvX2NvbnRleHRfYWNxdWlyZShkYXRh
cGxhbmUtPmN0eCk7Ci0tIAoyLjExLjAKCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54
ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGlu
Zm8veGVuLWRldmVs
