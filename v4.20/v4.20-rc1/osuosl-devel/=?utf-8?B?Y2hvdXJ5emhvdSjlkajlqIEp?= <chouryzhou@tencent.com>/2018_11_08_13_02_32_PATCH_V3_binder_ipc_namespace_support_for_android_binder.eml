Return-Path: <linux-kernel-owner@vger.kernel.org>
Delivered-To: unknown
Received: from pop3.zju.edu.cn (124.160.105.205:110) by
  likexu-MOBL1.ccr.corp.intel.com with POP3; 09 Nov 2018 00:34:31 -0000
Received: from icoremail.net (unknown [209.85.210.170])
	by mail-app2 (Coremail) with SMTP id by_KCgC3f+0XNORbMCxgAQ--.28710S3;
	Thu, 08 Nov 2018 21:03:20 +0800 (CST)
Received: from mail-pf1-f170.google.com (unknown [209.85.210.170])
	by mx2.icoremail.net (Coremail) with SMTP id AQAAfwC3m0cUNORbHsscAA--.2255S3;
	Thu, 08 Nov 2018 21:03:17 +0800 (CST)
Received: by mail-pf1-f170.google.com with SMTP id d13-v6so2113175pfo.3
        for <xuliker@zju.edu.cn>; Thu, 08 Nov 2018 05:03:16 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20161025;
        h=x-original-authentication-results:x-gm-message-state:delivered-to
         :from:to:cc:subject:thread-topic:thread-index:date:message-id
         :accept-language:content-language:content-transfer-encoding
         :mime-version:sender:precedence:list-id;
        bh=7FOiWVSizmD3CKwheQZyQ6Ar2mf0TPPbSoDz8SZUMms=;
        b=SySrDW2Br5jjgKn5skVUqDfwon7Je+I/od2F3hWi0Xs8zH9Ja2g7WI6JD8T68XaxC/
         lyfpf8mVhHZvtohlY4NyI7Nrk8E4s2AoFm9xkM8sgbljgOg+VaGKxIbJp4WETcPjtQCC
         G7MTvmVL8yWJGEZeuROG/oNa0HEKh652hWOnqMx+3/JZ4+/IZlHZYrqY60+hcKCPLT3a
         2CotlLSjQOFGpY4PIbqxRwhKCB3unTXepsyAqNrgDsd+w1HUFM6Fa1EgnjfxE8aHpZjs
         FECrNEOyuYCjN6g83qlhYOIpRaZXztMq6QIIPdssuNaDqUBG3+rgxWSY4WpyMD7F8OPR
         9Apg==
X-Original-Authentication-Results: mx.google.com;       spf=pass (google.com: best guess record for domain of linux-kernel-owner@vger.kernel.org designates 209.132.180.67 as permitted sender) smtp.mailfrom=linux-kernel-owner@vger.kernel.org
X-Gm-Message-State: AGRZ1gK56Sk8SfCOoJ6yhb/bBlT6ipfKM+ZBzeMR/jU7TQx6NTTKlXJg
	nkuOh6OyLC2uQ/O4Wyu+8PvlVFgi3PbxM8kxMEvJw1jy9Uu7NcO7aw==
X-Received: by 2002:a63:cd17:: with SMTP id i23mr3692590pgg.13.1541682196537;
        Thu, 08 Nov 2018 05:03:16 -0800 (PST)
X-Forwarded-To: xuliker@zju.edu.cn
X-Forwarded-For: liker.xu@gmail.com xuliker@zju.edu.cn
Delivered-To: liker.xu@gmail.com
Received: by 2002:a17:90a:c304:0:0:0:0 with SMTP id g4-v6csp155522pjt;
        Thu, 8 Nov 2018 05:03:14 -0800 (PST)
X-Google-Smtp-Source: AJdET5fL6vEFS9OHAF7IfsaOTPmJRyU8+R/j9drOp2wkffIpnWCGk+qkXAaMEeG4Rw/uEQC7U0/N
X-Received: by 2002:a17:902:104:: with SMTP id 4-v6mr4573899plb.184.1541682194183;
        Thu, 08 Nov 2018 05:03:14 -0800 (PST)
ARC-Seal: i=1; a=rsa-sha256; t=1541682194; cv=none;
        d=google.com; s=arc-20160816;
        b=NE+8B0mY33UYMDC+2GtKahrA65jLJ6dzVLFSNZT+xzKLyQmSOUpG4VBdTLxb/Fr7SK
         DndsILysCkCIal0E7nI209pesjVad0lJABdSrQtnHC7qgy+aa/0m9Yq0FOHfiBCTYDtL
         tLeSYjL4YiDkGcACPvD7YOcOOzktg5Wd/Ew8KsJD2J+HXE8zf6y8bQby4KjZcujD2PL0
         POA+VtxTrMhVyKNfL2jvFh7ELWi77+/dcP4h1yRd+0zsDzTYuqRVPFRmoQjSRqRvo4uT
         GOgPnCrcsTfgkhsKUNWLCi5yYBAvj0/vwYreCLo1AKBj0WXe0EBLRfJGrsmSb6H45nJO
         6DIg==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;
        h=list-id:precedence:sender:mime-version:content-transfer-encoding
         :content-language:accept-language:message-id:date:thread-index
         :thread-topic:subject:cc:to:from;
        bh=7FOiWVSizmD3CKwheQZyQ6Ar2mf0TPPbSoDz8SZUMms=;
        b=dkPr/283XHozJHMmi2yQE2ijQBNIPJr3wKMSnNUKxLhQ6uWVx91XgO+1te4hst7BFZ
         9p4+317stjXqkujMzlk7eAsTqU5+MYkwnjnSi6K4Ezuxxbh2eGq9koZnazrSYuPGhyXS
         2kOc7emyThVi6mN7tbOwJQ3/G6L7z809u+gscCvU8Zl3PNKrET48SL5NBlnsmKqT1uwU
         bYJCj12BH/SO0Ceu6rC2be35RDnD9X8048N80GdygOLNPxBP0LQvI1ciXbOsBvuw0b5w
         kN/Kvd4OiI4b2z/gcVzjK5la9Qjfy+WK35VvQrSKhZCyPVmd32pSoRc8JVNd9pV0r6J7
         bZZA==
ARC-Authentication-Results: i=1; mx.google.com;
       spf=pass (google.com: best guess record for domain of linux-kernel-owner@vger.kernel.org designates 209.132.180.67 as permitted sender) smtp.mailfrom=linux-kernel-owner@vger.kernel.org
Received: from vger.kernel.org (vger.kernel.org. [209.132.180.67])
        by mx.google.com with ESMTP id e17-v6si3302524pgb.19.2018.11.08.05.02.50;
        Thu, 08 Nov 2018 05:03:14 -0800 (PST)
Received-SPF: pass (google.com: best guess record for domain of linux-kernel-owner@vger.kernel.org designates 209.132.180.67 as permitted sender) client-ip=209.132.180.67;
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1726927AbeKHWiD (ORCPT <rfc822;ankurbansal210989@gmail.com>
        + 99 others); Thu, 8 Nov 2018 17:38:03 -0500
Received: from mail2.tencent.com ([163.177.67.195]:45932 "EHLO
        mail2.tencent.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1726571AbeKHWiD (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Thu, 8 Nov 2018 17:38:03 -0500
Received: from EXHUB-SZMAIL04.tencent.com (unknown [10.14.6.35])
        by mail2.tencent.com (Postfix) with ESMTP id DD5DA8ED64;
        Thu,  8 Nov 2018 21:02:34 +0800 (CST)
Received: from EXMBX-SZMAIL022.tencent.com ([fe80::dcc:e364:cd45:89d9]) by
 EXHUB-SZMAIL04.tencent.com ([::1]) with mapi id 14.03.0415.000; Thu, 8 Nov
 2018 21:02:34 +0800
From: =?utf-8?B?Y2hvdXJ5emhvdSjlkajlqIEp?= <chouryzhou@tencent.com>
To: "gregkh@linuxfoundation.org" <gregkh@linuxfoundation.org>
CC: "arve@android.com" <arve@android.com>,
        "tkjos@android.com" <tkjos@android.com>,
        "akpm@linux-foundation.org" <akpm@linux-foundation.org>,
        "dave@stgolabs.net" <dave@stgolabs.net>,
        "devel@driverdev.osuosl.org" <devel@driverdev.osuosl.org>,
        "linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>,
        =?utf-8?B?Y2hvdXJ5emhvdSjlkajlqIEp?= <chouryzhou@tencent.com>
Subject: [PATCH V3] binder: ipc namespace support for android binder
Thread-Topic: [PATCH V3] binder: ipc namespace support for android binder
Thread-Index: AdR3YviKcLK8Wh4CTPuYTq2LmRMnlQ==
Date: Thu, 8 Nov 2018 13:02:32 +0000
Message-ID: <5FBCBE569E134E4CA167B91C0A77FD610198F851AC@EXMBX-SZMAIL022.tencent.com>
Accept-Language: zh-CN, en-US
Content-Language: zh-CN
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [10.96.209.168]
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
Sender: liker.xu+caf_=xuliker=zju.edu.cn@gmail.com
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-CM-TRANSID: AQAAfwC3m0cUNORbHsscAA--.2255S3
Authentication-Results: mail-app2; spf=pass smtp.mail=liker.xu+caf_=xu
	liker=zju.edu.cn@gmail.com;
X-Coremail-Antispam: 1UD129KBjvAXoW3KFW7Xw15tr1rJryfXrWxtFb_yoW8Jr4kto
	Z7Xa1Fy3WxJr18ZrW8t3s3tFWUZw4DG3yxArsYkrsrZrnakr4Yg3yUG3W7Xayjgr1rGr1F
	q34xJrZxGa4xJryrn29KB7ZKAUJUUUUU529EdanIXcx71UUUUj7v73VFW2AGmfu7jjvjm3
	AaLaJ3UjIYCTnIWjp_UUUos7k0a2IF6w4kM7kC6x804xWl14x267AKxVWUJVW8JwAFIxvE
	14AKwVWUJVWUGwA2ocxC64kIII0Yj41l84x0c7CEw4AK67xGY2AK021l84ACjcxK6xIIjx
	v20xvE14v26F1j6w1UM28EF7xvwVC0I7IYx2IY6xkF7I0E14v26r4j6F4UM28EF7xvwVC2
	z280aVAFwI0_GcCE3s1l84ACjcxK6I8E87Iv6xkF7I0E14v26rxl6s0DM2vj6VCEFcxC0V
	AYjxAxZF0EFcxC0VAYjxAxZF0Ew4CEw7xC0VCjxxvEa2IrM2AIxVAIcxkEcVAq07x20xvE
	ncxIr21l5I8CrVACY4xI64kE6c02F40Ex7xfMcIj6xIIjxv20xvE14v26r1j6r18McIj6I
	8E87Iv67AKxVW8JVWxJwAm72CE4IkC6x0Yz7v_Jr0_Gr1lFcxC0VAYjxAxZF0Ew4CEw7xC
	0wCjxxvEa2IrMxkF7I0Ew4C26cxK6c8Ij28IcwCY1Ik26cxK6xAEc7vF6xCjj44lc2xSY4
	AK6IIF6ry8MxkI7II2jI8vz4vEwIxGrwCYIxAIcVC0I7IYx2IY67AKxVW8JVW5JwCYIxAI
	cVC0I7IYx2IY6xkF7I0E14v26r4j6F4UMxvI42IY6I8E87Iv67AKxVW0oVCq3wCYIxAIcV
	C2z280aVCY1x0267AKxVW0oVCq3wCF04k20xvY0x0EwIxGrwCF04k20xvEw4C26cxK6c8I
	j28IcwCF72vE77IF4wCFx2IqxVCFs4IE7xkEbVWUJVW8JwC20s026c02F40E14v26r1j6r
	18MI8I3I0E7480Y4vE14v26r106r1rMI8E67x28xkI4xCE0xIEc2x0rwC2zVAF1VAY17CE
	14v26r1q6r43MIIYrxkI7VAKI48JMIIF0xvE42xK8VAvwI8IcIk0rVW3JVWrJr1l6VACY4
	xI67k04243AbIYCTnIWIevJa73UjIFyTuYvjxUmIJQUUUUU

ICBXZSBhcmUgd29ya2luZyBmb3IgcnVubmluZyBhbmRyb2lkIGluIGNvbnRhaW5lciwgYnV0IHdl
IGZvdW5kIHRoYXQgYmluZGVyIGlzDQpub3QgaXNvbGF0ZWQgYnkgaXBjIG5hbWVzcGFjZS4gU2lu
Y2UgYmluZGVyIGlzIGEgZm9ybSBvZiBJUEMgYW5kIHRoZXJlZm9yZSBzaG91bGQNCmJlIHRpZWQg
dG8gaXBjIG5hbWVzcGFjZS4gV2l0aCB0aGlzIHBhdGNoLCB3ZSBjYW4gcnVuIG1vcmUgdGhhbiBv
bmUgYW5kcm9pZA0KY29udGFpbmVyIG9uIG9uZSBob3N0Lg0KICBUaGlzIHBhdGNoIG1vdmUgImJp
bmRlcl9wcm9jcyIgYW5kICJiaW5kZXJfY29udGV4dCIgaW50byBpcGNfbmFtZXNwYWNlLA0KZHJp
dmVyIHdpbGwgZmluZCB0aGUgY29udGV4dCBmcm9tIGl0IHdoZW4gb3BlbmluZy4gQWx0aG91Z2gg
c3RhdGlzdGljcyBpbiBkZWJ1Z2ZzDQpyZW1haW4gZ2xvYmFsLg0KDQpTaWduZWQtb2ZmLWJ5OiBj
aG91cnl6aG91IDxjaG91cnl6aG91QHRlbmNlbnQuY29tPg0KLS0tDQogZHJpdmVycy9hbmRyb2lk
L2JpbmRlci5jICAgICAgfCAxMjggKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKy0tLS0t
LS0tLS0tDQogaW5jbHVkZS9saW51eC9pcGNfbmFtZXNwYWNlLmggfCAgMTUgKysrKysNCiBpcGMv
bmFtZXNwYWNlLmMgICAgICAgICAgICAgICB8ICAxMCArKystDQogMyBmaWxlcyBjaGFuZ2VkLCAx
MTcgaW5zZXJ0aW9ucygrKSwgMzYgZGVsZXRpb25zKC0pDQoNCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2FuZHJvaWQvYmluZGVyLmMgYi9kcml2ZXJzL2FuZHJvaWQvYmluZGVyLmMNCmluZGV4IGNiMzBh
NTI0ZDE2ZC4uMjJlNDViYjkzN2U2IDEwMDY0NA0KLS0tIGEvZHJpdmVycy9hbmRyb2lkL2JpbmRl
ci5jDQorKysgYi9kcml2ZXJzL2FuZHJvaWQvYmluZGVyLmMNCkBAIC02OCw2ICs2OCw3IEBADQog
I2luY2x1ZGUgPGxpbnV4L3NlcV9maWxlLmg+DQogI2luY2x1ZGUgPGxpbnV4L3VhY2Nlc3MuaD4N
CiAjaW5jbHVkZSA8bGludXgvcGlkX25hbWVzcGFjZS5oPg0KKyNpbmNsdWRlIDxsaW51eC9pcGNf
bmFtZXNwYWNlLmg+DQogI2luY2x1ZGUgPGxpbnV4L3NlY3VyaXR5Lmg+DQogI2luY2x1ZGUgPGxp
bnV4L3NwaW5sb2NrLmg+DQogI2luY2x1ZGUgPGxpbnV4L3JhdGVsaW1pdC5oPg0KQEAgLTgwLDEz
ICs4MSwxOCBAQA0KICNpbmNsdWRlICJiaW5kZXJfYWxsb2MuaCINCiAjaW5jbHVkZSAiYmluZGVy
X3RyYWNlLmgiDQogDQorDQorI2lmICFkZWZpbmVkKENPTkZJR19TWVNWSVBDKSAmJiAgIWRlZmlu
ZWQoQ09ORklHX1BPU0lYX01RVUVVRSkNCitzdHJ1Y3QgaXBjX25hbWVzcGFjZSBpbml0X2lwY19u
czsNCisjZGVmaW5lIGlwY25zICAoJmluaXRfaXBjX25zKQ0KKyNlbHNlDQorI2RlZmluZSBpcGNu
cyAgKGN1cnJlbnQtPm5zcHJveHktPmlwY19ucykNCisjZW5kaWYNCisNCiBzdGF0aWMgSExJU1Rf
SEVBRChiaW5kZXJfZGVmZXJyZWRfbGlzdCk7DQogc3RhdGljIERFRklORV9NVVRFWChiaW5kZXJf
ZGVmZXJyZWRfbG9jayk7DQogDQogc3RhdGljIEhMSVNUX0hFQUQoYmluZGVyX2RldmljZXMpOw0K
LXN0YXRpYyBITElTVF9IRUFEKGJpbmRlcl9wcm9jcyk7DQotc3RhdGljIERFRklORV9NVVRFWChi
aW5kZXJfcHJvY3NfbG9jayk7DQotDQogc3RhdGljIEhMSVNUX0hFQUQoYmluZGVyX2RlYWRfbm9k
ZXMpOw0KIHN0YXRpYyBERUZJTkVfU1BJTkxPQ0soYmluZGVyX2RlYWRfbm9kZXNfbG9jayk7DQog
DQpAQCAtMjMyLDcgKzIzOCw3IEBAIHN0cnVjdCBiaW5kZXJfdHJhbnNhY3Rpb25fbG9nX2VudHJ5
IHsNCiAgICAgICAgaW50IHJldHVybl9lcnJvcl9saW5lOw0KICAgICAgICB1aW50MzJfdCByZXR1
cm5fZXJyb3I7DQogICAgICAgIHVpbnQzMl90IHJldHVybl9lcnJvcl9wYXJhbTsNCi0gICAgICAg
Y29uc3QgY2hhciAqY29udGV4dF9uYW1lOw0KKyAgICAgICBpbnQgY29udGV4dF9kZXZpY2U7DQog
fTsNCiBzdHJ1Y3QgYmluZGVyX3RyYW5zYWN0aW9uX2xvZyB7DQogICAgICAgIGF0b21pY190IGN1
cjsNCkBAIC0yNjMsMTkgKzI2OSw2NCBAQCBzdGF0aWMgc3RydWN0IGJpbmRlcl90cmFuc2FjdGlv
bl9sb2dfZW50cnkgKmJpbmRlcl90cmFuc2FjdGlvbl9sb2dfYWRkKA0KIH0NCiANCiBzdHJ1Y3Qg
YmluZGVyX2NvbnRleHQgew0KKyAgICAgICBzdHJ1Y3QgaGxpc3Rfbm9kZSBobGlzdDsNCiAgICAg
ICAgc3RydWN0IGJpbmRlcl9ub2RlICpiaW5kZXJfY29udGV4dF9tZ3Jfbm9kZTsNCiAgICAgICAg
c3RydWN0IG11dGV4IGNvbnRleHRfbWdyX25vZGVfbG9jazsNCiANCiAgICAgICAga3VpZF90IGJp
bmRlcl9jb250ZXh0X21ncl91aWQ7DQotICAgICAgIGNvbnN0IGNoYXIgKm5hbWU7DQorICAgICAg
IGludCAgICBkZXZpY2U7DQogfTsNCiANCiBzdHJ1Y3QgYmluZGVyX2RldmljZSB7DQogICAgICAg
IHN0cnVjdCBobGlzdF9ub2RlIGhsaXN0Ow0KICAgICAgICBzdHJ1Y3QgbWlzY2RldmljZSBtaXNj
ZGV2Ow0KLSAgICAgICBzdHJ1Y3QgYmluZGVyX2NvbnRleHQgY29udGV4dDsNCiB9Ow0KIA0KK3Zv
aWQgYmluZGVyX2V4aXRfbnMoc3RydWN0IGlwY19uYW1lc3BhY2UgKm5zKQ0KK3sNCisgICAgICAg
c3RydWN0IGJpbmRlcl9jb250ZXh0ICpjb250ZXh0Ow0KKyAgICAgICBzdHJ1Y3QgaGxpc3Rfbm9k
ZSAqdG1wOw0KKw0KKyAgICAgICBtdXRleF9kZXN0cm95KCZucy0+YmluZGVyX3Byb2NzX2xvY2sp
Ow0KKyAgICAgICBobGlzdF9mb3JfZWFjaF9lbnRyeV9zYWZlKGNvbnRleHQsIHRtcCwgJm5zLT5i
aW5kZXJfY29udGV4dHMsIGhsaXN0KSB7DQorICAgICAgICAgICAgICAgbXV0ZXhfZGVzdHJveSgm
Y29udGV4dC0+Y29udGV4dF9tZ3Jfbm9kZV9sb2NrKTsNCisgICAgICAgICAgICAgICBobGlzdF9k
ZWwoJmNvbnRleHQtPmhsaXN0KTsNCisgICAgICAgICAgICAgICBrZnJlZShjb250ZXh0KTsNCisg
ICAgICAgfQ0KK30NCisNCitpbnQgYmluZGVyX2luaXRfbnMoc3RydWN0IGlwY19uYW1lc3BhY2Ug
Km5zKQ0KK3sNCisgICAgICAgaW50IHJldDsNCisgICAgICAgc3RydWN0IGJpbmRlcl9kZXZpY2Ug
KmRldmljZTsNCisNCisgICAgICAgbXV0ZXhfaW5pdCgmbnMtPmJpbmRlcl9wcm9jc19sb2NrKTsN
CisgICAgICAgSU5JVF9ITElTVF9IRUFEKCZucy0+YmluZGVyX3Byb2NzKTsNCisgICAgICAgSU5J
VF9ITElTVF9IRUFEKCZucy0+YmluZGVyX2NvbnRleHRzKTsNCisNCisgICAgICAgaGxpc3RfZm9y
X2VhY2hfZW50cnkoZGV2aWNlLCAmYmluZGVyX2RldmljZXMsIGhsaXN0KSB7DQorICAgICAgICAg
ICAgICAgc3RydWN0IGJpbmRlcl9jb250ZXh0ICpjb250ZXh0Ow0KKw0KKyAgICAgICAgICAgICAg
IGNvbnRleHQgPSBremFsbG9jKHNpemVvZigqY29udGV4dCksIEdGUF9LRVJORUwpOw0KKyAgICAg
ICAgICAgICAgIGlmICghY29udGV4dCkgew0KKyAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0g
LUVOT01FTTsNCisgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gZXJyOw0KKyAgICAgICAgICAg
ICAgIH0NCisNCisgICAgICAgICAgICAgICBjb250ZXh0LT5kZXZpY2UgPSBkZXZpY2UtPm1pc2Nk
ZXYubWlub3I7DQorICAgICAgICAgICAgICAgY29udGV4dC0+YmluZGVyX2NvbnRleHRfbWdyX3Vp
ZCA9IElOVkFMSURfVUlEOw0KKyAgICAgICAgICAgICAgIG11dGV4X2luaXQoJmNvbnRleHQtPmNv
bnRleHRfbWdyX25vZGVfbG9jayk7DQorDQorICAgICAgICAgICAgICAgaGxpc3RfYWRkX2hlYWQo
JmNvbnRleHQtPmhsaXN0LCAmbnMtPmJpbmRlcl9jb250ZXh0cyk7DQorICAgICAgIH0NCisNCisg
ICAgICAgcmV0dXJuIDA7DQorZXJyOg0KKyAgICAgICBiaW5kZXJfZXhpdF9ucyhucyk7DQorICAg
ICAgIHJldHVybiByZXQ7DQorfQ0KKw0KKw0KIC8qKg0KICAqIHN0cnVjdCBiaW5kZXJfd29yayAt
IHdvcmsgZW5xdWV1ZWQgb24gYSB3b3JrbGlzdA0KICAqIEBlbnRyeTogICAgICAgICAgICAgbm9k
ZSBlbnF1ZXVlZCBvbiBsaXN0DQpAQCAtMjcyNyw3ICsyNzc4LDcgQEAgc3RhdGljIHZvaWQgYmlu
ZGVyX3RyYW5zYWN0aW9uKHN0cnVjdCBiaW5kZXJfcHJvYyAqcHJvYywNCiAgICAgICAgZS0+dGFy
Z2V0X2hhbmRsZSA9IHRyLT50YXJnZXQuaGFuZGxlOw0KICAgICAgICBlLT5kYXRhX3NpemUgPSB0
ci0+ZGF0YV9zaXplOw0KICAgICAgICBlLT5vZmZzZXRzX3NpemUgPSB0ci0+b2Zmc2V0c19zaXpl
Ow0KLSAgICAgICBlLT5jb250ZXh0X25hbWUgPSBwcm9jLT5jb250ZXh0LT5uYW1lOw0KKyAgICAg
ICBlLT5jb250ZXh0X2RldmljZSA9IHByb2MtPmNvbnRleHQtPmRldmljZTsNCiANCiAgICAgICAg
aWYgKHJlcGx5KSB7DQogICAgICAgICAgICAgICAgYmluZGVyX2lubmVyX3Byb2NfbG9jayhwcm9j
KTsNCkBAIC00OTIyLDYgKzQ5NzMsNyBAQCBzdGF0aWMgaW50IGJpbmRlcl9vcGVuKHN0cnVjdCBp
bm9kZSAqbm9kcCwgc3RydWN0IGZpbGUgKmZpbHApDQogew0KICAgICAgICBzdHJ1Y3QgYmluZGVy
X3Byb2MgKnByb2M7DQogICAgICAgIHN0cnVjdCBiaW5kZXJfZGV2aWNlICpiaW5kZXJfZGV2Ow0K
KyAgICAgICBzdHJ1Y3QgYmluZGVyX2NvbnRleHQgKmNvbnRleHQ7DQogDQogICAgICAgIGJpbmRl
cl9kZWJ1ZyhCSU5ERVJfREVCVUdfT1BFTl9DTE9TRSwgIiVzOiAlZDolZFxuIiwgX19mdW5jX18s
DQogICAgICAgICAgICAgICAgICAgICBjdXJyZW50LT5ncm91cF9sZWFkZXItPnBpZCwgY3VycmVu
dC0+cGlkKTsNCkBAIC00OTM3LDcgKzQ5ODksMTUgQEAgc3RhdGljIGludCBiaW5kZXJfb3Blbihz
dHJ1Y3QgaW5vZGUgKm5vZHAsIHN0cnVjdCBmaWxlICpmaWxwKQ0KICAgICAgICBwcm9jLT5kZWZh
dWx0X3ByaW9yaXR5ID0gdGFza19uaWNlKGN1cnJlbnQpOw0KICAgICAgICBiaW5kZXJfZGV2ID0g
Y29udGFpbmVyX29mKGZpbHAtPnByaXZhdGVfZGF0YSwgc3RydWN0IGJpbmRlcl9kZXZpY2UsDQog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWlzY2Rldik7DQotICAgICAgIHByb2Mt
PmNvbnRleHQgPSAmYmluZGVyX2Rldi0+Y29udGV4dDsNCisgICAgICAgaGxpc3RfZm9yX2VhY2hf
ZW50cnkoY29udGV4dCwgJmlwY25zLT5iaW5kZXJfY29udGV4dHMsIGhsaXN0KSB7DQorICAgICAg
ICAgICAgICAgaWYgKGNvbnRleHQtPmRldmljZSA9PSBiaW5kZXJfZGV2LT5taXNjZGV2Lm1pbm9y
KSB7DQorICAgICAgICAgICAgICAgICAgICAgICBwcm9jLT5jb250ZXh0ID0gY29udGV4dDsNCisg
ICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KKyAgICAgICAgICAgICAgIH0NCisgICAgICAg
fQ0KKyAgICAgICBpZiAoIXByb2MtPmNvbnRleHQpDQorICAgICAgICAgICAgICAgcmV0dXJuIC1F
Tk9FTlQ7DQorDQogICAgICAgIGJpbmRlcl9hbGxvY19pbml0KCZwcm9jLT5hbGxvYyk7DQogDQog
ICAgICAgIGJpbmRlcl9zdGF0c19jcmVhdGVkKEJJTkRFUl9TVEFUX1BST0MpOw0KQEAgLTQ5NDYs
OSArNTAwNiw5IEBAIHN0YXRpYyBpbnQgYmluZGVyX29wZW4oc3RydWN0IGlub2RlICpub2RwLCBz
dHJ1Y3QgZmlsZSAqZmlscCkNCiAgICAgICAgSU5JVF9MSVNUX0hFQUQoJnByb2MtPndhaXRpbmdf
dGhyZWFkcyk7DQogICAgICAgIGZpbHAtPnByaXZhdGVfZGF0YSA9IHByb2M7DQogDQotICAgICAg
IG11dGV4X2xvY2soJmJpbmRlcl9wcm9jc19sb2NrKTsNCi0gICAgICAgaGxpc3RfYWRkX2hlYWQo
JnByb2MtPnByb2Nfbm9kZSwgJmJpbmRlcl9wcm9jcyk7DQotICAgICAgIG11dGV4X3VubG9jaygm
YmluZGVyX3Byb2NzX2xvY2spOw0KKyAgICAgICBtdXRleF9sb2NrKCZpcGNucy0+YmluZGVyX3By
b2NzX2xvY2spOw0KKyAgICAgICBobGlzdF9hZGRfaGVhZCgmcHJvYy0+cHJvY19ub2RlLCAmaXBj
bnMtPmJpbmRlcl9wcm9jcyk7DQorICAgICAgIG11dGV4X3VubG9jaygmaXBjbnMtPmJpbmRlcl9w
cm9jc19sb2NrKTsNCiANCiAgICAgICAgaWYgKGJpbmRlcl9kZWJ1Z2ZzX2Rpcl9lbnRyeV9wcm9j
KSB7DQogICAgICAgICAgICAgICAgY2hhciBzdHJidWZbMTFdOw0KQEAgLTUwODIsOSArNTE0Miw5
IEBAIHN0YXRpYyB2b2lkIGJpbmRlcl9kZWZlcnJlZF9yZWxlYXNlKHN0cnVjdCBiaW5kZXJfcHJv
YyAqcHJvYykNCiAgICAgICAgc3RydWN0IHJiX25vZGUgKm47DQogICAgICAgIGludCB0aHJlYWRz
LCBub2RlcywgaW5jb21pbmdfcmVmcywgb3V0Z29pbmdfcmVmcywgYWN0aXZlX3RyYW5zYWN0aW9u
czsNCiANCi0gICAgICAgbXV0ZXhfbG9jaygmYmluZGVyX3Byb2NzX2xvY2spOw0KKyAgICAgICBt
dXRleF9sb2NrKCZpcGNucy0+YmluZGVyX3Byb2NzX2xvY2spOw0KICAgICAgICBobGlzdF9kZWwo
JnByb2MtPnByb2Nfbm9kZSk7DQotICAgICAgIG11dGV4X3VubG9jaygmYmluZGVyX3Byb2NzX2xv
Y2spOw0KKyAgICAgICBtdXRleF91bmxvY2soJmlwY25zLT5iaW5kZXJfcHJvY3NfbG9jayk7DQog
DQogICAgICAgIG11dGV4X2xvY2soJmNvbnRleHQtPmNvbnRleHRfbWdyX25vZGVfbG9jayk7DQog
ICAgICAgIGlmIChjb250ZXh0LT5iaW5kZXJfY29udGV4dF9tZ3Jfbm9kZSAmJg0KQEAgLTUzNzcs
NyArNTQzNyw3IEBAIHN0YXRpYyB2b2lkIHByaW50X2JpbmRlcl9wcm9jKHN0cnVjdCBzZXFfZmls
ZSAqbSwNCiAgICAgICAgc3RydWN0IGJpbmRlcl9ub2RlICpsYXN0X25vZGUgPSBOVUxMOw0KIA0K
ICAgICAgICBzZXFfcHJpbnRmKG0sICJwcm9jICVkXG4iLCBwcm9jLT5waWQpOw0KLSAgICAgICBz
ZXFfcHJpbnRmKG0sICJjb250ZXh0ICVzXG4iLCBwcm9jLT5jb250ZXh0LT5uYW1lKTsNCisgICAg
ICAgc2VxX3ByaW50ZihtLCAiY29udGV4dCAlZFxuIiwgcHJvYy0+Y29udGV4dC0+ZGV2aWNlKTsN
CiAgICAgICAgaGVhZGVyX3BvcyA9IG0tPmNvdW50Ow0KIA0KICAgICAgICBiaW5kZXJfaW5uZXJf
cHJvY19sb2NrKHByb2MpOw0KQEAgLTU1MzgsNyArNTU5OCw3IEBAIHN0YXRpYyB2b2lkIHByaW50
X2JpbmRlcl9wcm9jX3N0YXRzKHN0cnVjdCBzZXFfZmlsZSAqbSwNCiAgICAgICAgICAgICAgICBi
aW5kZXJfYWxsb2NfZ2V0X2ZyZWVfYXN5bmNfc3BhY2UoJnByb2MtPmFsbG9jKTsNCiANCiAgICAg
ICAgc2VxX3ByaW50ZihtLCAicHJvYyAlZFxuIiwgcHJvYy0+cGlkKTsNCi0gICAgICAgc2VxX3By
aW50ZihtLCAiY29udGV4dCAlc1xuIiwgcHJvYy0+Y29udGV4dC0+bmFtZSk7DQorICAgICAgIHNl
cV9wcmludGYobSwgImNvbnRleHQgJWRcbiIsIHByb2MtPmNvbnRleHQtPmRldmljZSk7DQogICAg
ICAgIGNvdW50ID0gMDsNCiAgICAgICAgcmVhZHlfdGhyZWFkcyA9IDA7DQogICAgICAgIGJpbmRl
cl9pbm5lcl9wcm9jX2xvY2socHJvYyk7DQpAQCAtNTYyMywxMCArNTY4MywxMCBAQCBzdGF0aWMg
aW50IGJpbmRlcl9zdGF0ZV9zaG93KHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9pZCAqdW51c2VkKQ0K
ICAgICAgICBpZiAobGFzdF9ub2RlKQ0KICAgICAgICAgICAgICAgIGJpbmRlcl9wdXRfbm9kZShs
YXN0X25vZGUpOw0KIA0KLSAgICAgICBtdXRleF9sb2NrKCZiaW5kZXJfcHJvY3NfbG9jayk7DQot
ICAgICAgIGhsaXN0X2Zvcl9lYWNoX2VudHJ5KHByb2MsICZiaW5kZXJfcHJvY3MsIHByb2Nfbm9k
ZSkNCisgICAgICAgbXV0ZXhfbG9jaygmaXBjbnMtPmJpbmRlcl9wcm9jc19sb2NrKTsNCisgICAg
ICAgaGxpc3RfZm9yX2VhY2hfZW50cnkocHJvYywgJmlwY25zLT5iaW5kZXJfcHJvY3MsIHByb2Nf
bm9kZSkNCiAgICAgICAgICAgICAgICBwcmludF9iaW5kZXJfcHJvYyhtLCBwcm9jLCAxKTsNCi0g
ICAgICAgbXV0ZXhfdW5sb2NrKCZiaW5kZXJfcHJvY3NfbG9jayk7DQorICAgICAgIG11dGV4X3Vu
bG9jaygmaXBjbnMtPmJpbmRlcl9wcm9jc19sb2NrKTsNCiANCiAgICAgICAgcmV0dXJuIDA7DQog
fQ0KQEAgLTU2MzksMTAgKzU2OTksMTAgQEAgc3RhdGljIGludCBiaW5kZXJfc3RhdHNfc2hvdyhz
dHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKnVudXNlZCkNCiANCiAgICAgICAgcHJpbnRfYmluZGVy
X3N0YXRzKG0sICIiLCAmYmluZGVyX3N0YXRzKTsNCiANCi0gICAgICAgbXV0ZXhfbG9jaygmYmlu
ZGVyX3Byb2NzX2xvY2spOw0KLSAgICAgICBobGlzdF9mb3JfZWFjaF9lbnRyeShwcm9jLCAmYmlu
ZGVyX3Byb2NzLCBwcm9jX25vZGUpDQorICAgICAgIG11dGV4X2xvY2soJmlwY25zLT5iaW5kZXJf
cHJvY3NfbG9jayk7DQorICAgICAgIGhsaXN0X2Zvcl9lYWNoX2VudHJ5KHByb2MsICZpcGNucy0+
YmluZGVyX3Byb2NzLCBwcm9jX25vZGUpDQogICAgICAgICAgICAgICAgcHJpbnRfYmluZGVyX3By
b2Nfc3RhdHMobSwgcHJvYyk7DQotICAgICAgIG11dGV4X3VubG9jaygmYmluZGVyX3Byb2NzX2xv
Y2spOw0KKyAgICAgICBtdXRleF91bmxvY2soJmlwY25zLT5iaW5kZXJfcHJvY3NfbG9jayk7DQog
DQogICAgICAgIHJldHVybiAwOw0KIH0NCkBAIC01NjUyLDEwICs1NzEyLDEwIEBAIHN0YXRpYyBp
bnQgYmluZGVyX3RyYW5zYWN0aW9uc19zaG93KHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9pZCAqdW51
c2VkKQ0KICAgICAgICBzdHJ1Y3QgYmluZGVyX3Byb2MgKnByb2M7DQogDQogICAgICAgIHNlcV9w
dXRzKG0sICJiaW5kZXIgdHJhbnNhY3Rpb25zOlxuIik7DQotICAgICAgIG11dGV4X2xvY2soJmJp
bmRlcl9wcm9jc19sb2NrKTsNCi0gICAgICAgaGxpc3RfZm9yX2VhY2hfZW50cnkocHJvYywgJmJp
bmRlcl9wcm9jcywgcHJvY19ub2RlKQ0KKyAgICAgICBtdXRleF9sb2NrKCZpcGNucy0+YmluZGVy
X3Byb2NzX2xvY2spOw0KKyAgICAgICBobGlzdF9mb3JfZWFjaF9lbnRyeShwcm9jLCAmaXBjbnMt
PmJpbmRlcl9wcm9jcywgcHJvY19ub2RlKQ0KICAgICAgICAgICAgICAgIHByaW50X2JpbmRlcl9w
cm9jKG0sIHByb2MsIDApOw0KLSAgICAgICBtdXRleF91bmxvY2soJmJpbmRlcl9wcm9jc19sb2Nr
KTsNCisgICAgICAgbXV0ZXhfdW5sb2NrKCZpcGNucy0+YmluZGVyX3Byb2NzX2xvY2spOw0KIA0K
ICAgICAgICByZXR1cm4gMDsNCiB9DQpAQCAtNTY2NSwxNCArNTcyNSwxNCBAQCBzdGF0aWMgaW50
IGJpbmRlcl9wcm9jX3Nob3coc3RydWN0IHNlcV9maWxlICptLCB2b2lkICp1bnVzZWQpDQogICAg
ICAgIHN0cnVjdCBiaW5kZXJfcHJvYyAqaXRyOw0KICAgICAgICBpbnQgcGlkID0gKHVuc2lnbmVk
IGxvbmcpbS0+cHJpdmF0ZTsNCiANCi0gICAgICAgbXV0ZXhfbG9jaygmYmluZGVyX3Byb2NzX2xv
Y2spOw0KLSAgICAgICBobGlzdF9mb3JfZWFjaF9lbnRyeShpdHIsICZiaW5kZXJfcHJvY3MsIHBy
b2Nfbm9kZSkgew0KKyAgICAgICBtdXRleF9sb2NrKCZpcGNucy0+YmluZGVyX3Byb2NzX2xvY2sp
Ow0KKyAgICAgICBobGlzdF9mb3JfZWFjaF9lbnRyeShpdHIsICZpcGNucy0+YmluZGVyX3Byb2Nz
LCBwcm9jX25vZGUpIHsNCiAgICAgICAgICAgICAgICBpZiAoaXRyLT5waWQgPT0gcGlkKSB7DQog
ICAgICAgICAgICAgICAgICAgICAgICBzZXFfcHV0cyhtLCAiYmluZGVyIHByb2Mgc3RhdGU6XG4i
KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50X2JpbmRlcl9wcm9jKG0sIGl0ciwgMSk7
DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICB9DQotICAgICAgIG11dGV4X3VubG9jaygmYmlu
ZGVyX3Byb2NzX2xvY2spOw0KKyAgICAgICBtdXRleF91bmxvY2soJmlwY25zLT5iaW5kZXJfcHJv
Y3NfbG9jayk7DQogDQogICAgICAgIHJldHVybiAwOw0KIH0NCkBAIC01Njg3LDEwICs1NzQ3LDEw
IEBAIHN0YXRpYyB2b2lkIHByaW50X2JpbmRlcl90cmFuc2FjdGlvbl9sb2dfZW50cnkoc3RydWN0
IHNlcV9maWxlICptLA0KICAgICAgICAgKi8NCiAgICAgICAgc21wX3JtYigpOw0KICAgICAgICBz
ZXFfcHJpbnRmKG0sDQotICAgICAgICAgICAgICAgICAgIiVkOiAlcyBmcm9tICVkOiVkIHRvICVk
OiVkIGNvbnRleHQgJXMgbm9kZSAlZCBoYW5kbGUgJWQgc2l6ZSAlZDolZCByZXQgJWQvJWQgbD0l
ZCIsDQorICAgICAgICAgICAgICAgICAgIiVkOiAlcyBmcm9tICVkOiVkIHRvICVkOiVkIGNvbnRl
eHQgJWQgbm9kZSAlZCBoYW5kbGUgJWQgc2l6ZSAlZDolZCByZXQgJWQvJWQgbD0lZCIsDQogICAg
ICAgICAgICAgICAgICAgZS0+ZGVidWdfaWQsIChlLT5jYWxsX3R5cGUgPT0gMikgPyAicmVwbHki
IDoNCiAgICAgICAgICAgICAgICAgICAoKGUtPmNhbGxfdHlwZSA9PSAxKSA/ICJhc3luYyIgOiAi
Y2FsbCAiKSwgZS0+ZnJvbV9wcm9jLA0KLSAgICAgICAgICAgICAgICAgIGUtPmZyb21fdGhyZWFk
LCBlLT50b19wcm9jLCBlLT50b190aHJlYWQsIGUtPmNvbnRleHRfbmFtZSwNCisgICAgICAgICAg
ICAgICAgICBlLT5mcm9tX3RocmVhZCwgZS0+dG9fcHJvYywgZS0+dG9fdGhyZWFkLCBlLT5jb250
ZXh0X2RldmljZSwNCiAgICAgICAgICAgICAgICAgICBlLT50b19ub2RlLCBlLT50YXJnZXRfaGFu
ZGxlLCBlLT5kYXRhX3NpemUsIGUtPm9mZnNldHNfc2l6ZSwNCiAgICAgICAgICAgICAgICAgICBl
LT5yZXR1cm5fZXJyb3IsIGUtPnJldHVybl9lcnJvcl9wYXJhbSwNCiAgICAgICAgICAgICAgICAg
ICBlLT5yZXR1cm5fZXJyb3JfbGluZSk7DQpAQCAtNTc1MywxMCArNTgxMyw2IEBAIHN0YXRpYyBp
bnQgX19pbml0IGluaXRfYmluZGVyX2RldmljZShjb25zdCBjaGFyICpuYW1lKQ0KICAgICAgICBi
aW5kZXJfZGV2aWNlLT5taXNjZGV2Lm1pbm9yID0gTUlTQ19EWU5BTUlDX01JTk9SOw0KICAgICAg
ICBiaW5kZXJfZGV2aWNlLT5taXNjZGV2Lm5hbWUgPSBuYW1lOw0KIA0KLSAgICAgICBiaW5kZXJf
ZGV2aWNlLT5jb250ZXh0LmJpbmRlcl9jb250ZXh0X21ncl91aWQgPSBJTlZBTElEX1VJRDsNCi0g
ICAgICAgYmluZGVyX2RldmljZS0+Y29udGV4dC5uYW1lID0gbmFtZTsNCi0gICAgICAgbXV0ZXhf
aW5pdCgmYmluZGVyX2RldmljZS0+Y29udGV4dC5jb250ZXh0X21ncl9ub2RlX2xvY2spOw0KLQ0K
ICAgICAgICByZXQgPSBtaXNjX3JlZ2lzdGVyKCZiaW5kZXJfZGV2aWNlLT5taXNjZGV2KTsNCiAg
ICAgICAgaWYgKHJldCA8IDApIHsNCiAgICAgICAgICAgICAgICBrZnJlZShiaW5kZXJfZGV2aWNl
KTsNCkBAIC01ODMyLDggKzU4ODgsMTIgQEAgc3RhdGljIGludCBfX2luaXQgYmluZGVyX2luaXQo
dm9pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gZXJyX2luaXRfYmluZGVyX2Rldmlj
ZV9mYWlsZWQ7DQogICAgICAgIH0NCiANCi0gICAgICAgcmV0dXJuIHJldDsNCisgICAgICAgcmV0
ID0gYmluZGVyX2luaXRfbnMoJmluaXRfaXBjX25zKTsNCisgICAgICAgaWYgKHJldCkNCisgICAg
ICAgICAgICAgICBnb3RvIGVycl9pbml0X25hbWVzcGFjZV9mYWlsZWQ7DQogDQorICAgICAgIHJl
dHVybiByZXQ7DQorZXJyX2luaXRfbmFtZXNwYWNlX2ZhaWxlZDoNCiBlcnJfaW5pdF9iaW5kZXJf
ZGV2aWNlX2ZhaWxlZDoNCiAgICAgICAgaGxpc3RfZm9yX2VhY2hfZW50cnlfc2FmZShkZXZpY2Us
IHRtcCwgJmJpbmRlcl9kZXZpY2VzLCBobGlzdCkgew0KICAgICAgICAgICAgICAgIG1pc2NfZGVy
ZWdpc3RlcigmZGV2aWNlLT5taXNjZGV2KTsNCmRpZmYgLS1naXQgYS9pbmNsdWRlL2xpbnV4L2lw
Y19uYW1lc3BhY2UuaCBiL2luY2x1ZGUvbGludXgvaXBjX25hbWVzcGFjZS5oDQppbmRleCA2YWI4
YzFiYWRhM2YuLmQ3Zjg1MGEyZGVkOCAxMDA2NDQNCi0tLSBhL2luY2x1ZGUvbGludXgvaXBjX25h
bWVzcGFjZS5oDQorKysgYi9pbmNsdWRlL2xpbnV4L2lwY19uYW1lc3BhY2UuaA0KQEAgLTYzLDYg
KzYzLDEzIEBAIHN0cnVjdCBpcGNfbmFtZXNwYWNlIHsNCiAgICAgICAgdW5zaWduZWQgaW50ICAg
IG1xX21zZ19kZWZhdWx0Ow0KICAgICAgICB1bnNpZ25lZCBpbnQgICAgbXFfbXNnc2l6ZV9kZWZh
dWx0Ow0KIA0KKyNpZmRlZiBDT05GSUdfQU5EUk9JRF9CSU5ERVJfSVBDDQorICAgICAgIC8qIG5l
eHQgZmllbGRzIGFyZSBmb3IgYmluZGVyICovDQorICAgICAgIHN0cnVjdCBtdXRleCAgICAgIGJp
bmRlcl9wcm9jc19sb2NrOw0KKyAgICAgICBzdHJ1Y3QgaGxpc3RfaGVhZCBiaW5kZXJfcHJvY3M7
DQorICAgICAgIHN0cnVjdCBobGlzdF9oZWFkIGJpbmRlcl9jb250ZXh0czsNCisjZW5kaWYNCisN
CiAgICAgICAgLyogdXNlcl9ucyB3aGljaCBvd25zIHRoZSBpcGMgbnMgKi8NCiAgICAgICAgc3Ry
dWN0IHVzZXJfbmFtZXNwYWNlICp1c2VyX25zOw0KICAgICAgICBzdHJ1Y3QgdWNvdW50cyAqdWNv
dW50czsNCkBAIC0xMTgsNiArMTI1LDE0IEBAIGV4dGVybiBpbnQgbXFfaW5pdF9ucyhzdHJ1Y3Qg
aXBjX25hbWVzcGFjZSAqbnMpOw0KIHN0YXRpYyBpbmxpbmUgaW50IG1xX2luaXRfbnMoc3RydWN0
IGlwY19uYW1lc3BhY2UgKm5zKSB7IHJldHVybiAwOyB9DQogI2VuZGlmDQogDQorI2lmZGVmIENP
TkZJR19BTkRST0lEX0JJTkRFUl9JUEMNCitleHRlcm4gaW50IGJpbmRlcl9pbml0X25zKHN0cnVj
dCBpcGNfbmFtZXNwYWNlICpucyk7DQorZXh0ZXJuIHZvaWQgYmluZGVyX2V4aXRfbnMoc3RydWN0
IGlwY19uYW1lc3BhY2UgKm5zKTsNCisjZWxzZQ0KK3N0YXRpYyBpbmxpbmUgaW50IGJpbmRlcl9p
bml0X25zKHN0cnVjdCBpcGNfbmFtZXNwYWNlICpucykgeyByZXR1cm4gMDsgfQ0KK3N0YXRpYyBp
bmxpbmUgdm9pZCBiaW5kZXJfZXhpdF9ucyhzdHJ1Y3QgaXBjX25hbWVzcGFjZSAqbnMpIHsgfQ0K
KyNlbmRpZg0KKw0KICNpZiBkZWZpbmVkKENPTkZJR19JUENfTlMpDQogZXh0ZXJuIHN0cnVjdCBp
cGNfbmFtZXNwYWNlICpjb3B5X2lwY3ModW5zaWduZWQgbG9uZyBmbGFncywNCiAgICAgICAgc3Ry
dWN0IHVzZXJfbmFtZXNwYWNlICp1c2VyX25zLCBzdHJ1Y3QgaXBjX25hbWVzcGFjZSAqbnMpOw0K
ZGlmZiAtLWdpdCBhL2lwYy9uYW1lc3BhY2UuYyBiL2lwYy9uYW1lc3BhY2UuYw0KaW5kZXggMjE2
MDc3OTFkNjJjLi42OGM2ZTk4M2IwMDIgMTAwNjQ0DQotLS0gYS9pcGMvbmFtZXNwYWNlLmMNCisr
KyBiL2lwYy9uYW1lc3BhY2UuYw0KQEAgLTU3LDcgKzU3LDEwIEBAIHN0YXRpYyBzdHJ1Y3QgaXBj
X25hbWVzcGFjZSAqY3JlYXRlX2lwY19ucyhzdHJ1Y3QgdXNlcl9uYW1lc3BhY2UgKnVzZXJfbnMs
DQogDQogICAgICAgIGVyciA9IG1xX2luaXRfbnMobnMpOw0KICAgICAgICBpZiAoZXJyKQ0KLSAg
ICAgICAgICAgICAgIGdvdG8gZmFpbF9wdXQ7DQorICAgICAgICAgICAgICAgZ290byBmYWlsX2lu
aXRfbXE7DQorICAgICAgIGVyciA9IGJpbmRlcl9pbml0X25zKG5zKTsNCisgICAgICAgaWYgKGVy
cikNCisgICAgICAgICAgICAgICBnb3RvIGZhaWxfaW5pdF9iaW5kZXI7DQogDQogICAgICAgIHNl
bV9pbml0X25zKG5zKTsNCiAgICAgICAgbXNnX2luaXRfbnMobnMpOw0KQEAgLTY1LDcgKzY4LDkg
QEAgc3RhdGljIHN0cnVjdCBpcGNfbmFtZXNwYWNlICpjcmVhdGVfaXBjX25zKHN0cnVjdCB1c2Vy
X25hbWVzcGFjZSAqdXNlcl9ucywNCiANCiAgICAgICAgcmV0dXJuIG5zOw0KIA0KLWZhaWxfcHV0
Og0KK2ZhaWxfaW5pdF9iaW5kZXI6DQorICAgICAgIG1xX3B1dF9tbnQobnMpOw0KK2ZhaWxfaW5p
dF9tcToNCiAgICAgICAgcHV0X3VzZXJfbnMobnMtPnVzZXJfbnMpOw0KICAgICAgICBuc19mcmVl
X2ludW0oJm5zLT5ucyk7DQogZmFpbF9mcmVlOg0KQEAgLTEyMCw2ICsxMjUsNyBAQCBzdGF0aWMg
dm9pZCBmcmVlX2lwY19ucyhzdHJ1Y3QgaXBjX25hbWVzcGFjZSAqbnMpDQogICAgICAgIHNlbV9l
eGl0X25zKG5zKTsNCiAgICAgICAgbXNnX2V4aXRfbnMobnMpOw0KICAgICAgICBzaG1fZXhpdF9u
cyhucyk7DQorICAgICAgIGJpbmRlcl9leGl0X25zKG5zKTsNCiANCiAgICAgICAgZGVjX2lwY19u
YW1lc3BhY2VzKG5zLT51Y291bnRzKTsNCiAgICAgICAgcHV0X3VzZXJfbnMobnMtPnVzZXJfbnMp
Ow0KLS0gDQoyLjExLjANCg==
