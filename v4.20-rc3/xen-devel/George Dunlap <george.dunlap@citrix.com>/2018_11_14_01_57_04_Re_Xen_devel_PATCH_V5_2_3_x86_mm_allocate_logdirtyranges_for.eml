Return-Path: <xen-devel-bounces@lists.xenproject.org>
Delivered-To: unknown
Received: from pop3.zju.edu.cn (124.160.105.205:110) by
  likexu-MOBL1.ccr.corp.intel.com with POP3; 14 Nov 2018 00:35:53 -0000
Received: from icoremail.net (unknown [209.85.215.176])
	by mail-app2 (Coremail) with SMTP id by_KCgDnX_vsEOtbt+6HAQ--.41153S3;
	Wed, 14 Nov 2018 01:59:09 +0800 (CST)
Received: from mail-pg1-f176.google.com (unknown [209.85.215.176])
	by mx2.icoremail.net (Coremail) with SMTP id AQAAfwAH5D_nEOtbPJ45AA--.4274S3;
	Wed, 14 Nov 2018 01:59:04 +0800 (CST)
Received: by mail-pg1-f176.google.com with SMTP id 17so5782796pgg.1
        for <xuliker@zju.edu.cn>; Tue, 13 Nov 2018 09:59:03 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20161025;
        h=x-original-authentication-results:x-gm-message-state:delivered-to
         :to:references:from:openpgp:autocrypt:message-id:date:user-agent
         :mime-version:in-reply-to:content-language:subject:precedence
         :list-id:list-unsubscribe:list-post:list-help:list-subscribe:cc
         :content-transfer-encoding:errors-to:sender;
        bh=nncPNPHV6A1MF+FRIdNlvXRned1Urlkojtp9DhcUv1w=;
        b=a2LzbVm6kUcZ4O2cu5ZVq5DG5G5ABrRuWf65IL6VekE8IjiWN1iwFGcxiLzlAn7kVm
         gi6euFLPBwd4sjyAZzbBiT++OlvAAD7biiyE4+fZ8v1iaAI06i82CYJ+fPQ2jSTzW5fu
         dDfEflCBX2n8ilgzMMN4CgitfNfsEZIZGr+3BKP/VqLAS9odn3j++F5gf4z3rsB//mgN
         EgzH7npfT6jxV0WPMF2geo/AdPtqVDejVzwCeITrvvTHs9ovwi3l9IehDB6/rtOeJ0wx
         AEQ+qfMgMAicfC6GIV6s3PyclWPA7zZm71aSdA+EJFWgpKy9sriGHGlgBCFa3orhtKNi
         c2KA==
X-Original-Authentication-Results: mx.google.com;       spf=pass (google.com: best guess record for domain of xen-devel-bounces@lists.xenproject.org designates 192.237.175.120 as permitted sender) smtp.mailfrom=xen-devel-bounces@lists.xenproject.org
X-Gm-Message-State: AGRZ1gJav1fGuDD8gFMF33/tMrfSh78P3qA0AHvPWTAJKvp/YLSN9rY9
	8kXRaYiYNTlTjSToPGSxxtexcC249/pKU2I1Xe741G7uXgz2pMA1HA==
X-Received: by 2002:a63:a91a:: with SMTP id u26mr5506045pge.349.1542131943595;
        Tue, 13 Nov 2018 09:59:03 -0800 (PST)
X-Forwarded-To: xuliker@zju.edu.cn
X-Forwarded-For: liker.xu@gmail.com xuliker@zju.edu.cn
Delivered-To: liker.xu@gmail.com
Received: by 2002:a17:90a:c304:0:0:0:0 with SMTP id g4-v6csp4789221pjt;
        Tue, 13 Nov 2018 09:59:02 -0800 (PST)
X-Google-Smtp-Source: AJdET5eU27sa4jJADlp5HPbdji+aEY1DhdGntiBDxZdyG9xzMx9n7dWf7opUNH6o17IoZ5SY+oH3
X-Received: by 2002:a81:ae64:: with SMTP id g36-v6mr5904580ywk.370.1542131942161;
        Tue, 13 Nov 2018 09:59:02 -0800 (PST)
ARC-Seal: i=1; a=rsa-sha256; t=1542131942; cv=none;
        d=google.com; s=arc-20160816;
        b=I+gcH2OmjYUhisUFZfO8nPM0zBsbvmZTxI3PHB9QbMpVdy+WuyHA+ASTf3etZowoeX
         i61RsUCak9GwDPOP4+e81lxA3iibI7hVTYqxD6O+fDJ/lUe5iLr7Bpk/E449uAK3huvA
         PQt/Z7LjjDLlJBi3VllkpAmjdxAdGPVou9r/5lOdSsu4jaZ/xkya8uf/bJmEHT9veBdV
         Gv1T1wuZAfhsPTF4rgX92jEj6MmzOgmbDBfi+M69yakCR3ZXhcZfIgrKnpgjAZerKzFU
         jmQ0m9WfVcenR0MYBWs8bgCjZ7lxY4VzJ0LNC5ccsH+pUZvrGAFLErFBTw2qQaPLilN5
         obNA==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;
        h=sender:errors-to:content-transfer-encoding:cc:list-subscribe
         :list-help:list-post:list-unsubscribe:list-id:precedence:subject
         :content-language:in-reply-to:mime-version:user-agent:date
         :message-id:autocrypt:openpgp:from:references:to;
        bh=nncPNPHV6A1MF+FRIdNlvXRned1Urlkojtp9DhcUv1w=;
        b=H/FdeT2cLkt+FDKEpXL9LjCmuQ1Aws1Uoqw7Wr8CaeQ/E5YXQxZgCHTb2OlRc5X84a
         K0AqvzOlgZTwVLNvpetBEXURunSH4MKVM7qZGclt3D5W378SexQdR/j/CpOcPq6kEtVh
         pwEXkd1vUE1jK1FZSwD9GXKgDveuXyMokBJ7qVtMQlZbkIBWaOWJpixy7CJhDfVBdEFH
         3EkVl6B41WrBX0aXw+dGKpLL6F7lZLZ0ChhVVTWKVBWpp0tIkSH452plKbTgYhXOlRPy
         Qmo5Kmir4tYwBGyDmhOEO8TwHaSWwlxhHk4xuXlDKKiVmj/bOb95GPIouafFhRdTdpQJ
         Ca/Q==
ARC-Authentication-Results: i=1; mx.google.com;
       spf=pass (google.com: best guess record for domain of xen-devel-bounces@lists.xenproject.org designates 192.237.175.120 as permitted sender) smtp.mailfrom=xen-devel-bounces@lists.xenproject.org
Received: from lists.xenproject.org (lists.xenproject.org. [192.237.175.120])
        by mx.google.com with ESMTPS id d64-v6si12488926ybb.18.2018.11.13.09.59.01
        (version=TLS1_2 cipher=ECDHE-RSA-CHACHA20-POLY1305 bits=256/256);
        Tue, 13 Nov 2018 09:59:02 -0800 (PST)
Received-SPF: pass (google.com: best guess record for domain of xen-devel-bounces@lists.xenproject.org designates 192.237.175.120 as permitted sender) client-ip=192.237.175.120;
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1gMcw3-0006C0-Pj; Tue, 13 Nov 2018 17:57:11 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <srs0=5e5r=ny=citrix.com=prvs=8481c4fca=george.dunlap@srs-us1.protection.inumbo.net>)
 id 1gMcw2-0006Bv-2k
 for xen-devel@lists.xenproject.org; Tue, 13 Nov 2018 17:57:10 +0000
X-Inumbo-ID: 8955607c-e76d-11e8-b36f-12d6303a7972
Received: from SMTP03.CITRIX.COM (unknown [162.221.156.55])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 8955607c-e76d-11e8-b36f-12d6303a7972;
 Tue, 13 Nov 2018 17:57:08 +0000 (UTC)
X-IronPort-AV: E=Sophos;i="5.56,228,1539648000"; d="scan'208";a="70448605"
To: Razvan Cojocaru <rcojocaru@bitdefender.com>,
 <xen-devel@lists.xenproject.org>
References: <1541945224-23075-1-git-send-email-rcojocaru@bitdefender.com>
 <1541945224-23075-3-git-send-email-rcojocaru@bitdefender.com>
From: George Dunlap <george.dunlap@citrix.com>
Openpgp: preference=signencrypt
Autocrypt: addr=george.dunlap@citrix.com; prefer-encrypt=mutual; keydata=
 xsFNBFPqG+MBEACwPYTQpHepyshcufo0dVmqxDo917iWPslB8lauFxVf4WZtGvQSsKStHJSj
 92Qkxp4CH2DwudI8qpVbnWCXsZxodDWac9c3PordLwz5/XL41LevEoM3NWRm5TNgJ3ckPA+J
 K5OfSK04QtmwSHFP3G/SXDJpGs+oDJgASta2AOl9vPV+t3xG6xyfa2NMGn9wmEvvVMD44Z7R
 W3RhZPn/NEZ5gaJhIUMgTChGwwWDOX0YPY19vcy5fT4bTIxvoZsLOkLSGoZb/jHIzkAAznug
 Q7PPeZJ1kXpbW9EHHaUHiCD9C87dMyty0N3TmWfp0VvBCaw32yFtM9jUgB7UVneoZUMUKeHA
 fgIXhJ7I7JFmw3J0PjGLxCLHf2Q5JOD8jeEXpdxugqF7B/fWYYmyIgwKutiGZeoPhl9c/7RE
 Bf6f9Qv4AtQoJwtLw6+5pDXsTD5q/GwhPjt7ohF7aQZTMMHhZuS52/izKhDzIufl6uiqUBge
 0lqG+/ViLKwCkxHDREuSUTtfjRc9/AoAt2V2HOfgKORSCjFC1eI0+8UMxlfdq2z1AAchinU0
 eSkRpX2An3CPEjgGFmu2Je4a/R/Kd6nGU8AFaE8ta0oq5BSFDRYdcKchw4TSxetkG6iUtqOO
 ZFS7VAdF00eqFJNQpi6IUQryhnrOByw+zSobqlOPUO7XC5fjnwARAQABzSRHZW9yZ2UgVy4g
 RHVubGFwIDxkdW5sYXBnQHVtaWNoLmVkdT7CwYAEEwEKACoCGwMFCwkIBwMFFQoJCAsFFgID
 AQACHgECF4ACGQEFAlpk2IEFCQo9I54ACgkQpjY8MQWQtG1A1BAAnc0oX3+M/jyv4j/ESJTO
 U2JhuWUWV6NFuzU10pUmMqpgQtiVEVU2QbCvTcZS1U/S6bqAUoiWQreDMSSgGH3a3BmRNi8n
 HKtarJqyK81aERM2HrjYkC1ZlRYG+jS8oWzzQrCQiTwn3eFLJrHjqowTbwahoiMw/nJ+OrZO
 /VXLfNeaxA5GF6emwgbpshwaUtESQ/MC5hFAFmUBZKAxp9CXG2ZhTP6ROV4fwhpnHaz8z+BT
 NQz8YwA4gkmFJbDUA9I0Cm9D/EZscrCGMeaVvcyldbMhWS+aH8nbqv6brhgbJEQS22eKCZDD
 J/ng5ea25QnS0fqu3bMrH39tDqeh7rVnt8Yu/YgOwc3XmgzmAhIDyzSinYEWJ1FkOVpIbGl9
 uR6seRsfJmUK84KCScjkBhMKTOixWgNEQ/zTcLUsfTh6KQdLTn083Q5aFxWOIal2hiy9UyqR
 VQydowXy4Xx58rqvZjuYzdGDdAUlZ+D2O3Jp28ez5SikA/ZaaoGI9S1VWvQsQdzNfD2D+xfL
 qfd9yv7gko9eTJzv5zFr2MedtRb/nCrMTnvLkwNX4abB5+19JGneeRU4jy7yDYAhUXcI/waS
 /hHioT9MOjMh+DoLCgeZJYaOcgQdORY/IclLiLq4yFnG+4Ocft8igp79dbYYHkAkmC9te/2x
 Kq9nEd0Hg288EO/OwE0EVFq6vQEIAO2idItaUEplEemV2Q9mBA8YmtgckdLmaE0uzdDWL9To
 1PL+qdNe7tBXKOfkKI7v32fe0nB4aecRlQJOZMWQRQ0+KLyXdJyHkq9221sHzcxsdcGs7X3c
 17ep9zASq+wIYqAdZvr7pN9a3nVHZ4W7bzezuNDAvn4EpOf/o0RsWNyDlT6KECs1DuzOdRqD
 oOMJfYmtx9hMzqBoTdr6U20/KgnC/dmWWcJAUZXaAFp+3NYRCkk7k939VaUpoY519CeLrymd
 Vdke66KCiWBQXMkgtMGvGk5gLQLy4H3KXvpXoDrYKgysy7jeOccxI8owoiOdtbfM8TTDyWPR
 Ygjzb9LApA8AEQEAAcLBZQQYAQoADwIbDAUCWmTXMwUJB+tP9gAKCRCmNjwxBZC0bb+2D/9h
 jn1k5WcRHlu19WGuH6q0Kgm1LRT7PnnSz904igHNElMB5a7wRjw5kdNwU3sRm2nnmHeOJH8k
 Yj2Hn1QgX5SqQsysWTHWOEseGeoXydx9zZZkt3oQJM+9NV1VjK0bOXwqhiQyEUWz5/9l467F
 S/k4FJ5CHNRumvhLa0l2HEEu5pxq463HQZHDt4YE/9Y74eXOnYCB4nrYxQD/GSXEZvWryEWr
 eDoaFqzq1TKtzHhFgQG7yFUEepxLRUUtYsEpT6Rks2l4LCqG3hVD0URFIiTyuxJx3VC2Ta4L
 H3hxQtiaIpuXqq2D4z63h6vCx2wxfZc/WRHGbr4NAlB81l35Q/UHyMocVuYLj0llF0rwU4Aj
 iKZ5qWNSEdvEpL43fTvZYxQhDCjQTKbb38omu5P4kOf1HT7s+kmQKRtiLBlqHzK17D4K/180
 ADw7a3gnmr5RumcZP3NGSSZA6jP5vNqQpNu4gqrPFWNQKQcW8HBiYFgq6SoLQQWbRxJDHvTR
 YJ2ms7oCe870gh4D1wFFqTLeyXiVqjddENGNaP8ZlCDw6EU82N8Bn5LXKjR1GWo2UK3CjrkH
 pTt3YYZvrhS2MO2EYEcWjyu6LALF/lS6z6LKeQZ+t9AdQUcILlrx9IxqXv6GvAoBLJY1jjGB
 q+/kRPrWXpoaQn7FXWGfMqU+NkY9enyrlw==
Message-ID: <2c1b78c1-e526-4481-f36d-791e11bdd06e@citrix.com>
Date: Tue, 13 Nov 2018 17:57:04 +0000
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.3.0
MIME-Version: 1.0
In-Reply-To: <1541945224-23075-3-git-send-email-rcojocaru@bitdefender.com>
Content-Language: en-US
Subject: Re: [Xen-devel] [PATCH V5 2/3] x86/mm: allocate logdirty_ranges for
 altp2ms
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: George Dunlap <george.dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>, Wei Liu <wei.liu2@citrix.com>,
 Jan Beulich <jbeulich@suse.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: liker.xu+caf_=xuliker=zju.edu.cn@gmail.com
X-CM-TRANSID: AQAAfwAH5D_nEOtbPJ45AA--.4274S3
Authentication-Results: mail-app2; spf=pass smtp.mail=liker.xu+caf_=xu
	liker=zju.edu.cn@gmail.com;
X-Coremail-Antispam: 1UD129KBjvJXoW3GFW5Xw4UZFWkZr1DAw4kXrb_yoWxur4rpF
	Z8Ar1SgFZ8JFZF9w1fGrs7Zr1F9r4fGFs5X345G34rtryYkF9xWF10kw15CF48WFn3CFs8
	tF1xWr1Uua4qyFJanT9S1TB71UUUUUUqnTZGkaVYY2UrUUUU0bIjqfuFe4nvWSU8nxnvy2
	9KBjDU0xBIdaVrnRJUUULlb7Iv0xC_Kw4lb4IE77IF4wAFF20E14v26r1j6r4UM7CIcVAF
	z4kK6r1j6r18M28lY4IEw2IIxxk0rwA2F7IY1VAKz4vEj48ve4kI8wA2z4x0Y4vE2Ix0cI
	8IcVAFwI0_Ar0_tr1l84ACjcxK6xIIjxv20xvEc7CjxVAFwI0_Cr0_Gr1UM28EF7xvwVC2
	z280aVAFwI0_Gr1j6F4UJwA2z4x0Y4vEx4A2jsIEc7CjxVAFwI0_Gr1j6F4UJwAa7VCE64
	xvF2IEb7IF0Fy264xvF2IEb7IF0Fy264kE64k0F2IE7I0Y6sxI4wAS0I0E0xvYzxvE52x0
	82IY62kv0487Mc02F40EFcxC0VAKzVAqx4xG6I80ewAv7VC0I7IYx2IY67AKxVWUJVWUGw
	Av7VC2z280aVAFwI0_Jr0_Gr1lOx8S6xCaFVCjc4AY6r1j6r4UM4x0Y48IcVAKI48JM4xv
	F2IEb7IF0Fy264kE64k0F24l7I0Y6sxI4wCYjI0SjxkI62AI1cAE67vIY487MxkF7I0Ew4
	C26cxK6c8Ij28IcwCY1Ik26cxK6xAEc7vF6xCjj44lc2xSY4AK6IIF6r4lc2IjII80xcxE
	wVAKI48JMxvI42IY6xIIjxv20xvE14v26ryj6F1UMxvI42IY6xIIjxv20xvEc7CjxVAFwI
	0_Gr0_Cr1lcIIF0xvEx4A2jsIE14v26r4UJVWxJr1lcIIF0xvEx4A2jsIEc7CjxVAFwI0_
	Gr1j6F4UJwCF04k20xvY0x0EwIxGrwCF04k20xvEw4C26cxK6c8Ij28IcwCF72vE77IF4w
	CFx2IqxVCFs4IE7xkEbVWUJVW8JwC20s026c02F40E14v26r1j6r18MI8I3I0E7480Y4vE
	14v26r106r1rMI8E67AF67kF1VAFwI0_JF0_Jw1lIxkGc2Ij64vIr41lIxAIcVCF04k26c
	xKx2IYs7xG6Fyj6rWUJwCE64xvF2IEb7IF0Fy7YxBIdaVFxhVjvjDU0xZFpf9x07bfL0OU
	UUUU=

T24gMTEvMTEvMTggMjowNyBQTSwgUmF6dmFuIENvam9jYXJ1IHdyb3RlOgo+IFRoaXMgcGF0Y2gg
aXMgYSBwcmUtcmVxdWlzaXRlIGZvciB0aGUgb25lIGZpeGluZyBWR0EgbG9nZGlydHkKPiBmcmVl
emVzIHdoZW4gdXNpbmcgYWx0cDJtLiBJdCBvbmx5IGNvbmNlcm5zIGl0c2VsZiB3aXRoIHRoZQo+
IHJhbmdlcyBhbGxvY2F0aW9uIC8gZGVhbGxvY2F0aW9uIC8gaW5pdGlhbGl6YXRpb24gcGFydC4g
V2hpbGUKPiB0b3VjaGluZyB0aGUgY29kZSwgSSd2ZSBzd2l0Y2hlZCBnbG9iYWxfbG9nZGlydHkg
ZnJvbSBib29sX3QKPiB0byBib29sLgo+IAo+IFNpZ25lZC1vZmYtYnk6IFJhenZhbiBDb2pvY2Fy
dSA8cmNvam9jYXJ1QGJpdGRlZmVuZGVyLmNvbT4KCkkndmUgY29udmluY2VkIG15c2VsZiB0aGF0
IHRoaXMgcGF0Y2ggaXMgcHJvYmFibHkgY29ycmVjdCBub3csIGFuZCBhcyBhCnJlc3VsdCBJJ3Zl
IGhhZCBhIGNoYW5jZSB0byBsb29rIGEgYml0IGF0IHRoZSByZXN1bHRpbmcgY29kZS4gIFdoaWNo
Cm1lYW5zLCB1bmZvcnR1bmF0ZWx5LCB0aGF0IEknbSBnb2luZyB0byBiZSBhIGJpdCBhbm5veWlu
ZyBhbmQgYXNrIG1vcmUKcXVlc3Rpb25zIHRoYXQgSSBkaWRuJ3QgYXNrIGxhc3QgdGltZS4KCj4g
Cj4gLS0tCj4gQ0M6IEdlb3JnZSBEdW5sYXAgPGdlb3JnZS5kdW5sYXBAZXUuY2l0cml4LmNvbT4K
PiBDQzogSmFuIEJldWxpY2ggPGpiZXVsaWNoQHN1c2UuY29tPgo+IENDOiBBbmRyZXcgQ29vcGVy
IDxhbmRyZXcuY29vcGVyM0BjaXRyaXguY29tPgo+IENDOiBXZWkgTGl1IDx3ZWkubGl1MkBjaXRy
aXguY29tPgo+IAo+IC0tLQo+IENoYW5nZXMgc2luY2UgVjQ6Cj4gIC0gQWx3YXlzIGNhbGwgcDJt
X2ZyZWVfbG9nZGlydHkoKSBpbiBwMm1fZnJlZV9vbmUoKSAocHJldmlvdXNseQo+ICAgIHRoZSBj
YWxsIHdhcyBnYXRlZCBvbiBoYXBfZW5hYmxlZChwMm0tPmRvbWFpbikgJiYgY3B1X2hhc192bXgp
Lgo+IC0tLQo+ICB4ZW4vYXJjaC94ODYvbW0vcDJtLmMgICAgIHwgNzQgKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrLS0tLS0tLS0tLS0KPiAgeGVuL2luY2x1ZGUvYXNtLXg4Ni9w
Mm0uaCB8ICAyICstCj4gIDIgZmlsZXMgY2hhbmdlZCwgNTggaW5zZXJ0aW9ucygrKSwgMTggZGVs
ZXRpb25zKC0pCj4gCj4gZGlmZiAtLWdpdCBhL3hlbi9hcmNoL3g4Ni9tbS9wMm0uYyBiL3hlbi9h
cmNoL3g4Ni9tbS9wMm0uYwo+IGluZGV4IDQyYjllZjQuLjY5NTM2YzEgMTAwNjQ0Cj4gLS0tIGEv
eGVuL2FyY2gveDg2L21tL3AybS5jCj4gKysrIGIveGVuL2FyY2gveDg2L21tL3AybS5jCj4gQEAg
LTU5LDYgKzU5LDI4IEBAIHN0YXRpYyB2b2lkIHAybV9uZXN0ZWRwMm1faW5pdChzdHJ1Y3QgcDJt
X2RvbWFpbiAqcDJtKQo+ICAjZW5kaWYKPiAgfQo+ICAKPiArc3RhdGljIGludCBwMm1faW5pdF9s
b2dkaXJ0eShzdHJ1Y3QgcDJtX2RvbWFpbiAqcDJtKQo+ICt7Cj4gKyAgICBpZiAoIHAybS0+bG9n
ZGlydHlfcmFuZ2VzICkKPiArICAgICAgICByZXR1cm4gMDsKPiArCj4gKyAgICBwMm0tPmxvZ2Rp
cnR5X3JhbmdlcyA9IHJhbmdlc2V0X25ldyhwMm0tPmRvbWFpbiwgImxvZy1kaXJ0eSIsCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSQU5HRVNFVEZfcHJldHR5cHJp
bnRfaGV4KTsKPiArICAgIGlmICggIXAybS0+bG9nZGlydHlfcmFuZ2VzICkKPiArICAgICAgICBy
ZXR1cm4gLUVOT01FTTsKPiArCj4gKyAgICByZXR1cm4gMDsKPiArfQo+ICsKPiArc3RhdGljIHZv
aWQgcDJtX2ZyZWVfbG9nZGlydHkoc3RydWN0IHAybV9kb21haW4gKnAybSkKPiArewo+ICsgICAg
aWYgKCAhcDJtLT5sb2dkaXJ0eV9yYW5nZXMgKQo+ICsgICAgICAgIHJldHVybjsKPiArCj4gKyAg
ICByYW5nZXNldF9kZXN0cm95KHAybS0+bG9nZGlydHlfcmFuZ2VzKTsKPiArICAgIHAybS0+bG9n
ZGlydHlfcmFuZ2VzID0gTlVMTDsKPiArfQo+ICsKPiAgLyogSW5pdCB0aGUgZGF0YXN0cnVjdHVy
ZXMgZm9yIGxhdGVyIHVzZSBieSB0aGUgcDJtIGNvZGUgKi8KPiAgc3RhdGljIGludCBwMm1faW5p
dGlhbGlzZShzdHJ1Y3QgZG9tYWluICpkLCBzdHJ1Y3QgcDJtX2RvbWFpbiAqcDJtKQo+ICB7Cj4g
QEAgLTEwNyw2ICsxMjksNyBAQCBmcmVlX3AybToKPiAgCj4gIHN0YXRpYyB2b2lkIHAybV9mcmVl
X29uZShzdHJ1Y3QgcDJtX2RvbWFpbiAqcDJtKQo+ICB7Cj4gKyAgICBwMm1fZnJlZV9sb2dkaXJ0
eShwMm0pOwo+ICAgICAgaWYgKCBoYXBfZW5hYmxlZChwMm0tPmRvbWFpbikgJiYgY3B1X2hhc192
bXggKQo+ICAgICAgICAgIGVwdF9wMm1fdW5pbml0KHAybSk7Cj4gICAgICBmcmVlX2NwdW1hc2tf
dmFyKHAybS0+ZGlydHlfY3B1bWFzayk7Cj4gQEAgLTExNiwxOSArMTM5LDE5IEBAIHN0YXRpYyB2
b2lkIHAybV9mcmVlX29uZShzdHJ1Y3QgcDJtX2RvbWFpbiAqcDJtKQo+ICBzdGF0aWMgaW50IHAy
bV9pbml0X2hvc3RwMm0oc3RydWN0IGRvbWFpbiAqZCkKPiAgewo+ICAgICAgc3RydWN0IHAybV9k
b21haW4gKnAybSA9IHAybV9pbml0X29uZShkKTsKPiArICAgIGludCByYzsKPiAgCj4gLSAgICBp
ZiAoIHAybSApCj4gLSAgICB7Cj4gLSAgICAgICAgcDJtLT5sb2dkaXJ0eV9yYW5nZXMgPSByYW5n
ZXNldF9uZXcoZCwgImxvZy1kaXJ0eSIsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgUkFOR0VTRVRGX3ByZXR0eXByaW50X2hleCk7Cj4gLSAgICAgICAgaWYg
KCBwMm0tPmxvZ2RpcnR5X3JhbmdlcyApCj4gLSAgICAgICAgewo+IC0gICAgICAgICAgICBkLT5h
cmNoLnAybSA9IHAybTsKPiAtICAgICAgICAgICAgcmV0dXJuIDA7Cj4gLSAgICAgICAgfQo+ICsg
ICAgaWYgKCAhcDJtICkKPiArICAgICAgICByZXR1cm4gLUVOT01FTTsKPiArCj4gKyAgICByYyA9
IHAybV9pbml0X2xvZ2RpcnR5KHAybSk7Cj4gKwo+ICsgICAgaWYgKCAhcmMgKQo+ICsgICAgICAg
IGQtPmFyY2gucDJtID0gcDJtOwo+ICsgICAgZWxzZQo+ICAgICAgICAgIHAybV9mcmVlX29uZShw
Mm0pOwo+IC0gICAgfQo+IC0gICAgcmV0dXJuIC1FTk9NRU07Cj4gKwo+ICsgICAgcmV0dXJuIHJj
Owo+ICB9Cj4gIAo+ICBzdGF0aWMgdm9pZCBwMm1fdGVhcmRvd25faG9zdHAybShzdHJ1Y3QgZG9t
YWluICpkKQo+IEBAIC0xMzgsNyArMTYxLDYgQEAgc3RhdGljIHZvaWQgcDJtX3RlYXJkb3duX2hv
c3RwMm0oc3RydWN0IGRvbWFpbiAqZCkKPiAgCj4gICAgICBpZiAoIHAybSApCj4gICAgICB7Cj4g
LSAgICAgICAgcmFuZ2VzZXRfZGVzdHJveShwMm0tPmxvZ2RpcnR5X3Jhbmdlcyk7Cj4gICAgICAg
ICAgcDJtX2ZyZWVfb25lKHAybSk7Cj4gICAgICAgICAgZC0+YXJjaC5wMm0gPSBOVUxMOwo+ICAg
ICAgfQo+IEBAIC0yMjc5LDYgKzIzMDEsMTggQEAgdm9pZCBwMm1fZmx1c2hfYWx0cDJtKHN0cnVj
dCBkb21haW4gKmQpCj4gICAgICBhbHRwMm1fbGlzdF91bmxvY2soZCk7Cj4gIH0KCkkgdGhpbmsg
ZXZlcnl0aGluZyBhYm92ZSBoZXJlIGNvdWxkIHVzZWZ1bGx5IGJlIGluIGl0cyBvd24gcGF0Y2g7
IGl0CndvdWxkIG1ha2UgaXQgZWFzaWVyIHRvIHZlcmlmeSB0aGF0IHRoZXJlIHdlcmUgbm8gZnVu
Y3Rpb25hbCBjaGFuZ2VzIGluCnRoZSByZWZhY3RvcmluZy4KCj4gK3N0YXRpYyBpbnQgcDJtX2lu
aXRfYWx0cDJtX2xvZ2RpcnR5KHN0cnVjdCBwMm1fZG9tYWluICpwMm0pCj4gK3sKPiArICAgIHN0
cnVjdCBwMm1fZG9tYWluICpob3N0cDJtID0gcDJtX2dldF9ob3N0cDJtKHAybS0+ZG9tYWluKTsK
PiArICAgIGludCByYyA9IHAybV9pbml0X2xvZ2RpcnR5KHAybSk7Cj4gKwo+ICsgICAgaWYgKCBy
YyApCj4gKyAgICAgICAgcmV0dXJuIHJjOwo+ICsKPiArICAgIC8qIFRoZSBmb2xsb3dpbmcgaXMg
cmVhbGx5IGp1c3QgYSByYW5nZXNldCBjb3B5LiAqLwo+ICsgICAgcmV0dXJuIHJhbmdlc2V0X21l
cmdlKHAybS0+bG9nZGlydHlfcmFuZ2VzLCBob3N0cDJtLT5sb2dkaXJ0eV9yYW5nZXMpOwo+ICt9
Cj4gKwo+ICBpbnQgcDJtX2luaXRfYWx0cDJtX2J5X2lkKHN0cnVjdCBkb21haW4gKmQsIHVuc2ln
bmVkIGludCBpZHgpCj4gIHsKPiAgICAgIGludCByYyA9IC1FSU5WQUw7Cj4gQEAgLTIyOTAsOCAr
MjMyNCw5IEBAIGludCBwMm1faW5pdF9hbHRwMm1fYnlfaWQoc3RydWN0IGRvbWFpbiAqZCwgdW5z
aWduZWQgaW50IGlkeCkKPiAgCj4gICAgICBpZiAoIGQtPmFyY2guYWx0cDJtX2VwdHBbaWR4XSA9
PSBtZm5feChJTlZBTElEX01GTikgKQo+ICAgICAgewo+IC0gICAgICAgIHAybV9pbml0X2FsdHAy
bV9lcHQoZCwgaWR4KTsKPiAtICAgICAgICByYyA9IDA7Cj4gKyAgICAgICAgcmMgPSBwMm1faW5p
dF9hbHRwMm1fbG9nZGlydHkoZC0+YXJjaC5hbHRwMm1fcDJtW2lkeF0pOwo+ICsgICAgICAgIGlm
ICggIXJjICkKPiArICAgICAgICAgICAgcDJtX2luaXRfYWx0cDJtX2VwdChkLCBpZHgpOwo+ICAg
ICAgfQo+ICAKPiAgICAgIGFsdHAybV9saXN0X3VubG9jayhkKTsKPiBAQCAtMjMxMCw5ICsyMzQ1
LDEzIEBAIGludCBwMm1faW5pdF9uZXh0X2FsdHAybShzdHJ1Y3QgZG9tYWluICpkLCB1aW50MTZf
dCAqaWR4KQo+ICAgICAgICAgIGlmICggZC0+YXJjaC5hbHRwMm1fZXB0cFtpXSAhPSBtZm5feChJ
TlZBTElEX01GTikgKQo+ICAgICAgICAgICAgICBjb250aW51ZTsKPiAgCj4gLSAgICAgICAgcDJt
X2luaXRfYWx0cDJtX2VwdChkLCBpKTsKPiAtICAgICAgICAqaWR4ID0gaTsKPiAtICAgICAgICBy
YyA9IDA7Cj4gKyAgICAgICAgcmMgPSBwMm1faW5pdF9hbHRwMm1fbG9nZGlydHkoZC0+YXJjaC5h
bHRwMm1fcDJtW2ldKTsKPiArCj4gKyAgICAgICAgaWYgKCAhcmMgKQo+ICsgICAgICAgIHsKPiAr
ICAgICAgICAgICAgcDJtX2luaXRfYWx0cDJtX2VwdChkLCBpKTsKPiArICAgICAgICAgICAgKmlk
eCA9IGk7Cj4gKyAgICAgICAgfQoKSXQgbG9va3MgbGlrZSB0aGVyZSdzIGEgMS0xIGNvcnJlc3Bv
bmRlbmNlIGJldHdlZW4KcDJtX2luaXRfYWx0cDJtX2xvZ2RpcnR5KCkgc3VjY2VlZGluZyBhbmQg
Y2FsbGluZyBwMm1faW50aV9hbHRwMm1fZXB0KCkuCiBXb3VsZCBpdCBtYWtlIHNlbnNlIHRvIGNv
bWJpbmUgdGhlbSBpbnRvIHRoZSBzYW1lIGZ1bmN0aW9uLCBtYXliZSBuYW1lZAoicDJtX2FjdGl2
YXRlX2FsdHAybSgpIiBvciBzb21ldGhpbmcgKHRvIGRpc3Rpbmd1aXNoIGl0IGZyb20KcDJtX2lu
aXRfYWx0cDJtKCkpPwoKPiBAQCAtMjM0MSw2ICsyMzgwLDcgQEAgaW50IHAybV9kZXN0cm95X2Fs
dHAybV9ieV9pZChzdHJ1Y3QgZG9tYWluICpkLCB1bnNpZ25lZCBpbnQgaWR4KQo+ICAgICAgICAg
IHsKPiAgICAgICAgICAgICAgcDJtX2ZsdXNoX3RhYmxlKGQtPmFyY2guYWx0cDJtX3AybVtpZHhd
KTsKPiAgICAgICAgICAgICAgLyogVW5pbml0IGFuZCByZWluaXQgZXB0IHRvIGZvcmNlIFRMQiBz
aG9vdGRvd24gKi8KPiArICAgICAgICAgICAgcDJtX2ZyZWVfbG9nZGlydHkoZC0+YXJjaC5hbHRw
Mm1fcDJtW2lkeF0pOwo+ICAgICAgICAgICAgICBlcHRfcDJtX3VuaW5pdChkLT5hcmNoLmFsdHAy
bV9wMm1baWR4XSk7Cj4gICAgICAgICAgICAgIGVwdF9wMm1faW5pdChkLT5hcmNoLmFsdHAybV9w
Mm1baWR4XSk7Cj4gICAgICAgICAgICAgIGQtPmFyY2guYWx0cDJtX2VwdHBbaWR4XSA9IG1mbl94
KElOVkFMSURfTUZOKTsKCihJbiBjYXNlIEkgZm9yZ2V0OiBBbHNvLCB0aGlzIGlzIGNhbGxlZCB3
aXRob3V0IGhvbGRpbmcgdGhlIGFwcHJvcHJpYXRlCnAybSBsb2NrLiApCgpJJ20gYSBiaXQgc3Vz
cGljaW91cyBvZiBsb25nIHN0cmluZ3Mgb2YgdGhlc2Ugc29ydHMgb2YgZnVuY3Rpb25zIGluIHRo
ZQptaWRkbGUgb2YgYW5vdGhlciBmdW5jdGlvbi4gIEl0IHR1cm5zIG91dCB0aGF0IHRoZXJlIGFy
ZSB0aHJlZSBjb3BpZXMgb2YKdGhpcyBzZXF1ZW5jZSBvZiBmdW5jdGlvbiBjYWxscyAocDJtX2Zs
dXNoX3RhYmxlIC0+IGVwdF9wMm1fdW5pbml0IC0+CmVwdF9wMm1faW5pdCk6CgoqIEhlcmUgKHAy
bV9kZXN0cm95X2FsdHAybV9pZCksIHdoZW4gdGhlIHVzZXIgYXNrcyBmb3IgdGhlIGFsdDJtIGlu
ZGV4CnRvIGJlIGRlc3Ryb3llZAoKKiBJbiBwMm1fZmx1c2hfYWx0cDJtKCksIHdoaWNoIGlzIGNh
bGxlZCB3aGVuIGFsdHAybSBpcyBkaXNhYmxlZCBmb3IgYQpkb21haW4KCiogSW4gcDJtX3Jlc2V0
X2FsdHAybSgpLCB3aGljaCBpcyBjYWxsZWQgd2hlbiBhbiBlbnRyeSBpbiB0aGUgaG9zdHAybSBp
cwpzZXQgdG8gSU5WQUxJRF9NRk4uCgpQcmVzdW1hYmx5IGluIHAybV9yZXNldF9hbHRwMm0oKSB3
ZSBkb24ndCB3YW50IHRvIGNhbGwKcDJtX2ZyZWVfbG9nZGlydHkoKSwgYXMgdGhlIGFsdHAybSBp
cyBzdGlsbCBhY3RpdmUgYW5kIHdlIHdhbnQgdG8ga2VlcAp0aGUgbG9nZGlydHkgcmFuZ2VzIGFy
b3VuZC4gIEJ1dCBpbiBwMm1fZmx1c2hfYWx0cDJtKCksIEknbSBwcmV0dHkgc3VyZQp3ZSBkbyB3
YW50IHRvIGRpc2NhcmQgdGhlbTogd2hlbiBhbHRwMm0gaXMgZW5hYmxlZCBhZ2FpbiwKcDJtX2lu
aXRfbG9nZGlydHkoKSB3aWxsIHJldHVybiBlYXJseSwgbGVhdmluZyB0aGUgb2xkIHJhbmdlc2V0
cyBpbgpwbGFjZTsgaWYgdGhlIGhvc3RwMm0gcmFuZ2VzZXRzIGhhdmUgY2hhbmdlZCBiZXR3ZWVu
IHRoZSB0aW1lIGFsdHAybSB3YXMKZGlzYWJsZWQgYW5kIGVuYWJsZWQgYWdhaW4sIHRoZSByYW5n
ZXNldF9tZXJnZSgpIG1heSBoYXZlIGluY29ycmVjdCByZXN1bHRzLgoKQXQgdGhlIG1vbWVudCB3
ZSBlc3NlbnRpYWxseSBoYXZlIHR3byAiaW5pdCIgc3RhdGVzOgoqIEFmdGVyIGRvbWFpbiBjcmVh
dGlvbjsgYWx0cDJtIHN0cnVjdHVyZXMgYWxsb2NhdGVkLCBidXQgbm8gcmFuZ2VzZXRzLCAmIGMK
KiBBZnRlciBiZWluZyBlbmFibGVkIGZvciB0aGUgZmlyc3QgdGltZTogcmFuZ2VzZXRzIG1pcnJv
cmluZyBob3N0cDJtLApwMm1faW5pdF9hbHRwMm1fZXB0KCkgaW5pdGlhbGl6YXRpb24gZG9uZQoK
SXMgdGhlcmUgYW55IHBhcnRpY3VsYXIgcmVhc29uIHdlIGFsbG9jYXRlIHRoZSBwMm0gc3RydWN0
dXJlcyBvbiBkb21haW4KY3JlYXRpb24sIGJ1dCBub3QgbG9nZGlydHkgcmFuZ2Ugc3RydWN0dXJl
cz8gIEl0IHNlZW1zIGxpa2UgYWxsb2NhdGluZwphbHRwMm0gc3RydWN0dXJlcyBvbi1kZW1hbmQs
IHJhdGhlciB0aGFuIGF0IGRvbWFpbiBjcmVhdGlvbiB0aW1lLCBtaWdodAptYWtlIGEgbG90IG9m
IHRoZSByZWFzb25pbmcgaGVyZSBzaW1wbGVyLgoKIC1HZW9yZ2UKCl9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVu
LWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcv
bWFpbG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=
