Return-Path: <virtualization-bounces@lists.linux-foundation.org>
Delivered-To: unknown
Received: from linux.intel.com (10.54.29.200:995) by i7-8700 with POP3-SSL;
  16 Dec 2018 10:41:43 -0000
X-Original-To: like.xu@linux.intel.com
Delivered-To: like.xu@linux.intel.com
Received: from FMSMGA003.fm.intel.com (fmsmga003.fm.intel.com [10.253.24.29])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by linux.intel.com (Postfix) with ESMTPS id 7BC1E5805F0
	for <like.xu@linux.intel.com>; Sat, 15 Dec 2018 04:41:54 -0800 (PST)
Received: from fmsmga105.fm.intel.com ([10.1.193.10])
  by FMSMGA003-1.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384; 15 Dec 2018 04:41:54 -0800
IronPort-PHdr: =?us-ascii?q?9a23=3A9OvhqBQAEaWnY3kQf6v2H9InxNpsv+yvbD5Q0YIu?=
 =?us-ascii?q?jvd0So/mwa67ZBOGt8tkgFKBZ4jH8fUM07OQ7/iwHzRYqb+681k6OKRWUBEEjc?=
 =?us-ascii?q?hE1ycBO+WiTXPBEfjxciYhF95DXlI2t1uyMExSBdqsLwaK+i764jEdAAjwOhRo?=
 =?us-ascii?q?LerpBIHSk9631+ev8JHPfglEnjWwba9xIRmssQndqtQdjJd/JKo21hbHuGZDdf?=
 =?us-ascii?q?5MxWNvK1KTnhL86dm18ZV+7SleuO8v+tBZX6nicKs2UbJXDDI9M2Ao/8LrrgXM?=
 =?us-ascii?q?TRGO5nQHTGoblAdDDhXf4xH7WpfxtTb6tvZ41SKHM8D6Uaw4VDK/5KpwVhTmlD?=
 =?us-ascii?q?kIOCI48GHPi8x/kqRboA66pxdix4LYeZyZOOZicq/Ye94RWGhPUdtLVyFZH42y?=
 =?us-ascii?q?cYUPAeoCM+hWoYbyqFkBrQO8CAeuC+7j1zFFimP506ImyOQuDxrL3BA7EN8UrH?=
 =?us-ascii?q?jYsNv4OaUUXOuozKfI1zLDb/ZO1Dn58ofIaRchofeRVr1wa8XRz0YvHB7Cg1WS?=
 =?us-ascii?q?s4PlJDSV1+oXvGid4OptTvivhHA6pAFxuDev2t0ghZXOhoIQ013J8zhyzogyJd?=
 =?us-ascii?q?29UkF7YNikHYNUtyGbMYt2X8wjQ29vuCYnzL0JpIS0fDQLyJQgwR7TcfuHc5KH?=
 =?us-ascii?q?4h/lSe2fIi94iWp4dL+wmxq+61asxvDhWsWuzVpHry5InsPRunwTzxDf9NSLR/?=
 =?us-ascii?q?9n8ku81zuDyRrf5vxHLE06j6bXNZ0sz7gtnZQJq0vDBDX5mEDuga+WaEok/u+o?=
 =?us-ascii?q?5vziYrr8p5+cM5V4igX/MqQoh8y+Duo4Mg8TX2id5OuzzqHj/Uz+QLVMlPE2lb?=
 =?us-ascii?q?PZsJ/CKcQaoK62HRNV354+5xuwEzuqysoUkWQaIF5fZR6KjozkN0vTLPzmFfu/?=
 =?us-ascii?q?hk6jkDZvx/DIJL3hBZDNI2DdkLfgZ7Z991NcxxA3zdBe5pNbEK0BIPP0Wk/3rd?=
 =?us-ascii?q?DXFRg5MxGyw+n7Ftp9zZgTWWaOAq+CLKPSqkWE5uYuI+mKeY8Uty/xK/Yi5/7z?=
 =?us-ascii?q?i382hEUSfbWo3ZsQbnC0BPNmI1+WYXb0mNcODX8KvhYiTOztkFCCVT9TZ3WsUK?=
 =?us-ascii?q?4m6TA7FZmrDYPCRoCrnbyA0z23HpxQZmBaFF+MFW3keJmDW/cJO2qvJNR8mGkE?=
 =?us-ascii?q?SaS5UN1mkhWvrxPhjb5mKPfE9CoFs57qyNly4avUjx518DV1C8GU1SaKV311mW?=
 =?us-ascii?q?UTACE3xrxiqEh82F6f0K9+0MFeDsFZsvZAUwMmMszCzvZmFtn2WxDIYtaOThO8?=
 =?us-ascii?q?T8y7DCotZtYw2MMVJUJ8Hciyyx7EwiymCqMUkLrNA4Y7pbnB1Xr8LNoo1nDdya?=
 =?us-ascii?q?M6hEMnSMYcCWrzzIt+/AjaCoqBqAPRq72rb6cd2mSFoGKY0UKUsU1YWRI2WqLA?=
 =?us-ascii?q?CyMxfEzT+Pbw/UTEB4CnD7tvZglI0smdI61FQsfkgVVPWLHoP9GIMDH5oHu5GR?=
 =?us-ascii?q?vdnuDEV4HtYWhImXyFUEU=3D?=
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A0AHAAAV9hRchwyp04xkGwEBAQEDAQEBB?=
 =?us-ascii?q?wMBAQGBUQYBAQELAYFagQ+BFhODfIgZX4sZgWAtgSGWN4FzFBgLCYN6X4JuIjQ?=
 =?us-ascii?q?JDQEDAQEBAQEBAgETAQEBCgsJCCkjDII2BQIDGgEGglsBAQEBAgEBAQEgBA0SC?=
 =?us-ascii?q?h4LAwMBAgYBAQgCGAICHgQEAgICAQEjAR8QBg0GAgEBAYJSSwGBeAgFColHm1N?=
 =?us-ascii?q?8M4VAhGoFgQuLMxeBQD+BESeCa4MeAQSEZoJXAoZ4iVKQCEcJhw2GLTODZwYYg?=
 =?us-ascii?q?V2FHIJ4AhGHTopBg3GLMoFGgg4zGggbFTuCbIInF4hehUwyAQExgSOKX4F3AQE?=
X-IPAS-Result: =?us-ascii?q?A0AHAAAV9hRchwyp04xkGwEBAQEDAQEBBwMBAQGBUQYBAQE?=
 =?us-ascii?q?LAYFagQ+BFhODfIgZX4sZgWAtgSGWN4FzFBgLCYN6X4JuIjQJDQEDAQEBAQEBA?=
 =?us-ascii?q?gETAQEBCgsJCCkjDII2BQIDGgEGglsBAQEBAgEBAQEgBA0SCh4LAwMBAgYBAQg?=
 =?us-ascii?q?CGAICHgQEAgICAQEjAR8QBg0GAgEBAYJSSwGBeAgFColHm1N8M4VAhGoFgQuLM?=
 =?us-ascii?q?xeBQD+BESeCa4MeAQSEZoJXAoZ4iVKQCEcJhw2GLTODZwYYgV2FHIJ4AhGHTop?=
 =?us-ascii?q?Bg3GLMoFGgg4zGggbFTuCbIInF4hehUwyAQExgSOKX4F3AQE?=
X-IronPort-AV: E=Sophos;i="5.56,357,1539673200"; 
   d="scan'208";a="142255071"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from mail.linuxfoundation.org ([140.211.169.12])
  by mtab.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384; 15 Dec 2018 04:41:53 -0800
Received: from mail.linux-foundation.org (localhost [127.0.0.1])
	by mail.linuxfoundation.org (Postfix) with ESMTP id 2D32A8B1;
	Thu, 13 Dec 2018 02:39:59 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@mail.linuxfoundation.org
Received: from smtp1.linuxfoundation.org (smtp1.linux-foundation.org
	[172.17.192.35])
	by mail.linuxfoundation.org (Postfix) with ESMTPS id 849608B1
	for <virtualization@lists.linux-foundation.org>;
	Thu, 13 Dec 2018 02:39:54 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.7.6
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
	by smtp1.linuxfoundation.org (Postfix) with ESMTPS id 9CC2B71C
	for <virtualization@lists.linux-foundation.org>;
	Thu, 13 Dec 2018 02:39:53 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx07.intmail.prod.int.phx2.redhat.com
	[10.5.11.22])
	(using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mx1.redhat.com (Postfix) with ESMTPS id 0884430013DF;
	Thu, 13 Dec 2018 02:39:53 +0000 (UTC)
Received: from [10.72.12.167] (ovpn-12-167.pek2.redhat.com [10.72.12.167])
	by smtp.corp.redhat.com (Postfix) with ESMTPS id 9AF0E105706E;
	Thu, 13 Dec 2018 02:39:46 +0000 (UTC)
Subject: Re: [PATCH net V2 4/4] vhost: log dirty page correctly
To: "Michael S. Tsirkin" <mst@redhat.com>
References: <20181212100819.21295-1-jasowang@redhat.com>
	<20181212100819.21295-5-jasowang@redhat.com>
	<20181212092435-mutt-send-email-mst@kernel.org>
From: Jason Wang <jasowang@redhat.com>
Message-ID: <0239c220-e7ca-c08f-be26-eb9be63fced3@redhat.com>
Date: Thu, 13 Dec 2018 10:39:41 +0800
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
	Thunderbird/60.2.1
MIME-Version: 1.0
In-Reply-To: <20181212092435-mutt-send-email-mst@kernel.org>
Content-Language: en-US
X-Scanned-By: MIMEDefang 2.84 on 10.5.11.22
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
	(mx1.redhat.com [10.5.110.44]);
	Thu, 13 Dec 2018 02:39:53 +0000 (UTC)
X-Spam-Status: No, score=-6.9 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_HI
	autolearn=ham version=3.3.1
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on
	smtp1.linux-foundation.org
Cc: Jintack Lim <jintack@cs.columbia.edu>, netdev@vger.kernel.org,
	linux-kernel@vger.kernel.org, kvm@vger.kernel.org,
	virtualization@lists.linux-foundation.org
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.12
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>,
	<mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>,
	<mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Sender: virtualization-bounces@lists.linux-foundation.org
Errors-To: virtualization-bounces@lists.linux-foundation.org

Ck9uIDIwMTgvMTIvMTIg5LiL5Y2IMTA6MzIsIE1pY2hhZWwgUy4gVHNpcmtpbiB3cm90ZToKPiBP
biBXZWQsIERlYyAxMiwgMjAxOCBhdCAwNjowODoxOVBNICswODAwLCBKYXNvbiBXYW5nIHdyb3Rl
Ogo+PiBWaG9zdCBkaXJ0eSBwYWdlIGxvZ2dpbmcgQVBJIGlzIGRlc2lnbmVkIHRvIHN5bmMgdGhy
b3VnaCBHUEEuIEJ1dCB3ZQo+PiB0cnkgdG8gbG9nIEdJT1ZBIHdoZW4gZGV2aWNlIElPVExCIGlz
IGVuYWJsZWQuIFRoaXMgaXMgd3JvbmcgYW5kIG1heQo+PiBsZWFkIHRvIG1pc3NpbmcgZGF0YSBh
ZnRlciBtaWdyYXRpb24uCj4+Cj4+IFRvIHNvbHZlIHRoaXMgaXNzdWUsIHdoZW4gbG9nZ2luZyB3
aXRoIGRldmljZSBJT1RMQiBlbmFibGVkLCB3ZSB3aWxsOgo+Pgo+PiAxKSByZXVzZSB0aGUgZGV2
aWNlIElPVExCIHRyYW5zbGF0aW9uIHJlc3VsdCBvZiBHSU9WQS0+SFZBIG1hcHBpbmcgdG8KPj4g
ICAgIGdldCBIVkEsIGZvciB3cml0YWJsZSBkZXNjcmlwdG9yLCBnZXQgSFZBIHRocm91Z2ggaW92
ZWMuIEZvciB1c2VkCj4+ICAgICByaW5nIHVwZGF0ZSwgdHJhbnNsYXRlIGl0cyBHSU9WQSB0byBI
VkEKPj4gMikgdHJhdmVyc2UgdGhlIEdQQS0+SFZBIG1hcHBpbmcgdG8gZ2V0IHRoZSBwb3NzaWJs
ZSBHUEEgYW5kIGxvZwo+PiAgICAgdGhyb3VnaCBHUEEuIFBheSBhdHRlbnRpb24gdGhpcyByZXZl
cnNlIG1hcHBpbmcgaXMgbm90IGd1YXJhbnRlZWQKPj4gICAgIHRvIGJlIHVuaXF1ZSwgc28gd2Ug
c2hvdWxkIGxvZyBlYWNoIHBvc3NpYmxlIEdQQSBpbiB0aGlzIGNhc2UuCj4+Cj4+IFRoaXMgZml4
IHRoZSBmYWlsdXJlIG9mIHNjcCB0byBndWVzdCBkdXJpbmcgbWlncmF0aW9uLiBJbiAtbmV4dCwg
d2UKPj4gd2lsbCBwcm9iYWJseSBzdXBwb3J0IHBhc3NpbmcgR0lPVkEtPkdQQSBpbnN0ZWFkIG9m
IEdJT1ZBLT5IVkEuCj4+Cj4+IEZpeGVzOiA2YjFlNmNjNzg1NWIgKCJ2aG9zdDogbmV3IGRldmlj
ZSBJT1RMQiBBUEkiKQo+PiBSZXBvcnRlZC1ieTogSmludGFjayBMaW0gPGppbnRhY2tAY3MuY29s
dW1iaWEuZWR1Pgo+PiBDYzogSmludGFjayBMaW0gPGppbnRhY2tAY3MuY29sdW1iaWEuZWR1Pgo+
PiBTaWduZWQtb2ZmLWJ5OiBKYXNvbiBXYW5nIDxqYXNvd2FuZ0ByZWRoYXQuY29tPgo+IEl0J3Mg
YSBuYXN0eSBidWcgZm9yIHN1cmUgYnV0IGl0J3MgYmVlbiBsaWtlIHRoaXMgZm9yIGEgbG9uZwo+
IHRpbWUgc28gSSdtIGluY2xpbmVkIHRvIHNheSBsZXQncyBwdXQgaXQgaW4gNC4yMSwKPiBhbmQg
cXVldWUgZm9yIHN0YWJsZS4KPgo+IFNvIHBsZWFzZSBzcGxpdCB0aGlzIG91dCBmcm9tIHRoaXMg
c2VyaWVzLgoKCk9rLgoKCj4KPiBBbHNvLCBJJ2QgbGlrZSB0byBzZWUgYSBmZWF0dXJlIGJpdCB0
aGF0IGFsbG93cyBHUEEgaW4gSU9UTEJzLgoKCkp1c3QgdG8gbWFrZSBzdXJlIEkgdW5kZXJzdGFu
ZCB0aGlzLiBJdCBsb29rcyB0byBtZSB3ZSBzaG91bGQ6CgotIGFsbG93IHBhc3NpbmcgR0lPVkEt
PkdQQSB0aHJvdWdoIFVBUEkKCi0gY2FjaGUgR0lPVkEtPkdQQSBzb21ld2hlcmUgYnV0IHN0aWxs
IHVzZSBHSU9WQS0+SFZBIGluIGRldmljZSBJT1RMQiAKZm9yIHBlcmZvcm1hbmNlCgpJcyB0aGlz
IHdoYXQgeW91IHN1Z2dlc3Q/CgpUaGFua3MKCgo+Cj4+IC0tLQo+PiAgIGRyaXZlcnMvdmhvc3Qv
bmV0LmMgICB8ICAzICstCj4+ICAgZHJpdmVycy92aG9zdC92aG9zdC5jIHwgNzkgKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKystLS0tLS0tLQo+PiAgIGRyaXZlcnMvdmhvc3Qvdmhv
c3QuaCB8ICAzICstCj4+ICAgMyBmaWxlcyBjaGFuZ2VkLCA2OSBpbnNlcnRpb25zKCspLCAxNiBk
ZWxldGlvbnMoLSkKPj4KPj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmhvc3QvbmV0LmMgYi9kcml2
ZXJzL3Zob3N0L25ldC5jCj4+IGluZGV4IGFkN2E2ZjQ3NWE0NC4uNzg0ZGYyYjQ5NjI4IDEwMDY0
NAo+PiAtLS0gYS9kcml2ZXJzL3Zob3N0L25ldC5jCj4+ICsrKyBiL2RyaXZlcnMvdmhvc3QvbmV0
LmMKPj4gQEAgLTExOTIsNyArMTE5Miw4IEBAIHN0YXRpYyB2b2lkIGhhbmRsZV9yeChzdHJ1Y3Qg
dmhvc3RfbmV0ICpuZXQpCj4+ICAgCQlpZiAobnZxLT5kb25lX2lkeCA+IFZIT1NUX05FVF9CQVRD
SCkKPj4gICAJCQl2aG9zdF9uZXRfc2lnbmFsX3VzZWQobnZxKTsKPj4gICAJCWlmICh1bmxpa2Vs
eSh2cV9sb2cpKQo+PiAtCQkJdmhvc3RfbG9nX3dyaXRlKHZxLCB2cV9sb2csIGxvZywgdmhvc3Rf
bGVuKTsKPj4gKwkJCXZob3N0X2xvZ193cml0ZSh2cSwgdnFfbG9nLCBsb2csIHZob3N0X2xlbiwK
Pj4gKwkJCQkJdnEtPmlvdiwgaW4pOwo+PiAgIAkJdG90YWxfbGVuICs9IHZob3N0X2xlbjsKPj4g
ICAJCWlmICh1bmxpa2VseSh2aG9zdF9leGNlZWRzX3dlaWdodCgrK3JlY3ZfcGt0cywgdG90YWxf
bGVuKSkpIHsKPj4gICAJCQl2aG9zdF9wb2xsX3F1ZXVlKCZ2cS0+cG9sbCk7Cj4+IGRpZmYgLS1n
aXQgYS9kcml2ZXJzL3Zob3N0L3Zob3N0LmMgYi9kcml2ZXJzL3Zob3N0L3Zob3N0LmMKPj4gaW5k
ZXggNTVlNWFhNjYyYWQ1Li4zNjYwMzEwNjA0ZmQgMTAwNjQ0Cj4+IC0tLSBhL2RyaXZlcnMvdmhv
c3Qvdmhvc3QuYwo+PiArKysgYi9kcml2ZXJzL3Zob3N0L3Zob3N0LmMKPj4gQEAgLTE3MzMsMTEg
KzE3MzMsNjcgQEAgc3RhdGljIGludCBsb2dfd3JpdGUodm9pZCBfX3VzZXIgKmxvZ19iYXNlLAo+
PiAgIAlyZXR1cm4gcjsKPj4gICB9Cj4+ICAgCj4+ICtzdGF0aWMgaW50IGxvZ193cml0ZV9odmEo
c3RydWN0IHZob3N0X3ZpcnRxdWV1ZSAqdnEsIHU2NCBodmEsIHU2NCBsZW4pCj4+ICt7Cj4+ICsJ
c3RydWN0IHZob3N0X3VtZW0gKnVtZW0gPSB2cS0+dW1lbTsKPj4gKwlzdHJ1Y3Qgdmhvc3RfdW1l
bV9ub2RlICp1Owo+PiArCXU2NCBncGE7Cj4+ICsJaW50IHI7Cj4+ICsJYm9vbCBoaXQgPSBmYWxz
ZTsKPj4gKwo+PiArCWxpc3RfZm9yX2VhY2hfZW50cnkodSwgJnVtZW0tPnVtZW1fbGlzdCwgbGlu
aykgewo+PiArCQlpZiAodS0+dXNlcnNwYWNlX2FkZHIgPCBodmEgJiYKPj4gKwkJICAgIHUtPnVz
ZXJzcGFjZV9hZGRyICsgdS0+c2l6ZSA+PQo+PiArCQkgICAgaHZhICsgbGVuKSB7Cj4+ICsJCQln
cGEgPSB1LT5zdGFydCArIGh2YSAtIHUtPnVzZXJzcGFjZV9hZGRyOwo+PiArCQkJciA9IGxvZ193
cml0ZSh2cS0+bG9nX2Jhc2UsIGdwYSwgbGVuKTsKPj4gKwkJCWlmIChyIDwgMCkKPj4gKwkJCQly
ZXR1cm4gcjsKPj4gKwkJCWhpdCA9IHRydWU7Cj4+ICsJCX0KPj4gKwl9Cj4+ICsKPj4gKwkvKiBO
byByZXZlcnNlIG1hcHBpbmcsIHNob3VsZCBiZSBhIGJ1ZyAqLwo+PiArCVdBUk5fT04oIWhpdCk7
Cj4gTWF5YmUgaXQgc2hvdWxkIGJ1dCB1c2Vyc3BhY2UgY2FuIHRyaWdnZXIgdGhpcyBlYXNpbHkg
SSB0aGluay4KPiBXZSBuZWVkIHRvIHN0b3AgdGhlIGRldmljZSBub3Qgd2FybiBpbiBrZXJuZWwg
bG9nLgo+Cj4gQWxzbyB0aGVyZSdzIGFuIGVycm9yIGZkOiBWSE9TVF9TRVRfVlJJTkdfRVJSLCBu
ZWVkIHRvIHdha2UgaXQgdXAuCj4KCk9rLgoKCj4+ICsJcmV0dXJuIDA7Cj4+ICt9Cj4+ICsKPj4g
K3N0YXRpYyB2b2lkIGxvZ191c2VkKHN0cnVjdCB2aG9zdF92aXJ0cXVldWUgKnZxLCB1NjQgdXNl
ZF9vZmZzZXQsIHU2NCBsZW4pCj4+ICt7Cj4+ICsJc3RydWN0IGlvdmVjIGlvdls2NF07Cj4+ICsJ
aW50IGksIHJldDsKPj4gKwo+PiArCWlmICghdnEtPmlvdGxiKSB7Cj4+ICsJCWxvZ193cml0ZSh2
cS0+bG9nX2Jhc2UsIHZxLT5sb2dfYWRkciArIHVzZWRfb2Zmc2V0LCBsZW4pOwo+PiArCQlyZXR1
cm47Cj4+ICsJfQo+IFRoaXMgY2hhbmdlIHNlZW1zIHF1ZXN0aW9uYWJsZS4gdXNlZCByaW5nIHdy
aXRlcwo+IHVzZSB0aGVpciBvd24gbWFjaGluZXJ5IGl0IGRvZXMgbm90IGdvIHRocm91Z2ggaW90
bGIuCj4gU2FtZSBzaG91bGQgYXBwbHkgdG8gbG9nIEkgdGhpbmsuCgoKVGhlIHByb2JsZW0gaXMg
dXNlZCByaW5nIG1heSBub3QgYmUgcGh5c2ljYWxseSBjb250aWd1b3VzIHdpdGggRGV2aWNlIApJ
T1RMQiBlbmFibGVkLiBTbyBpdCBzaG91bGQgZ28gdGhyb3VnaCBpdC4KCgo+Cj4+ICsKPj4gKwly
ZXQgPSB0cmFuc2xhdGVfZGVzYyh2cSwgKHU2NCkodWludHB0cl90KXZxLT51c2VkICsgdXNlZF9v
ZmZzZXQsCj4+ICsJCQkgICAgIGxlbiwgaW92LCA2NCwgVkhPU1RfQUNDRVNTX1dPKTsKPj4gKwlX
QVJOX09OKHJldCA8IDApOwo+Cj4gU2FtZSB0aGluZyBoZXJlLiB0cmFuc2xhdGlvbiBmYWlsdXJl
cyBjYW4gYmUgdHJpZ2dlcmVkIGZyb20gZ3Vlc3QuCj4gd2FybiBvbiBpcyBub3QgYSBnb29kIGVy
cm9yIGhhbmRsaW5nIHN0cmF0ZWd5IC4uLgoKCk9rLiBMZXQgbWUgZml4IGl0LgoKClRoYW5rcwoK
Cj4+ICsKPj4gKwlmb3IgKGkgPSAwOyBpIDwgcmV0OyBpKyspIHsKPj4gKwkJcmV0ID0gbG9nX3dy
aXRlX2h2YSh2cSwJKHU2NCkodWludHB0cl90KWlvdltpXS5pb3ZfYmFzZSwKPj4gKwkJCQkgICAg
aW92W2ldLmlvdl9sZW4pOwo+PiArCQlXQVJOX09OKHJldCk7Cj4+ICsJfQo+PiArfQo+PiArCj4+
ICAgaW50IHZob3N0X2xvZ193cml0ZShzdHJ1Y3Qgdmhvc3RfdmlydHF1ZXVlICp2cSwgc3RydWN0
IHZob3N0X2xvZyAqbG9nLAo+PiAtCQkgICAgdW5zaWduZWQgaW50IGxvZ19udW0sIHU2NCBsZW4p
Cj4+ICsJCSAgICB1bnNpZ25lZCBpbnQgbG9nX251bSwgdTY0IGxlbiwgc3RydWN0IGlvdmVjICpp
b3YsIGludCBjb3VudCkKPj4gICB7Cj4+ICAgCWludCBpLCByOwo+PiAgIAo+PiArCWlmICh2cS0+
aW90bGIpIHsKPj4gKwkJZm9yIChpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKPj4gKwkJCXIgPSBs
b2dfd3JpdGVfaHZhKHZxLCAodTY0KSh1aW50cHRyX3QpaW92W2ldLmlvdl9iYXNlLAo+PiArCQkJ
CQkgIGlvdltpXS5pb3ZfbGVuKTsKPj4gKwkJCWlmIChyIDwgMCkKPj4gKwkJCQlyZXR1cm4gcjsK
Pj4gKwkJfQo+PiArCQlyZXR1cm4gMDsKPj4gKwl9Cj4+ICsKPj4gICAJLyogTWFrZSBzdXJlIGRh
dGEgd3JpdHRlbiBpcyBzZWVuIGJlZm9yZSBsb2cuICovCj4+ICAgCXNtcF93bWIoKTsKPj4gICAJ
Zm9yIChpID0gMDsgaSA8IGxvZ19udW07ICsraSkgewo+PiBAQCAtMTc2OSw5ICsxODI1LDggQEAg
c3RhdGljIGludCB2aG9zdF91cGRhdGVfdXNlZF9mbGFncyhzdHJ1Y3Qgdmhvc3RfdmlydHF1ZXVl
ICp2cSkKPj4gICAJCXNtcF93bWIoKTsKPj4gICAJCS8qIExvZyB1c2VkIGZsYWcgd3JpdGUuICov
Cj4+ICAgCQl1c2VkID0gJnZxLT51c2VkLT5mbGFnczsKPj4gLQkJbG9nX3dyaXRlKHZxLT5sb2df
YmFzZSwgdnEtPmxvZ19hZGRyICsKPj4gLQkJCSAgKHVzZWQgLSAodm9pZCBfX3VzZXIgKil2cS0+
dXNlZCksCj4+IC0JCQkgIHNpemVvZiB2cS0+dXNlZC0+ZmxhZ3MpOwo+PiArCQlsb2dfdXNlZCh2
cSwgKHVzZWQgLSAodm9pZCBfX3VzZXIgKil2cS0+dXNlZCksCj4+ICsJCQkgc2l6ZW9mIHZxLT51
c2VkLT5mbGFncyk7Cj4+ICAgCQlpZiAodnEtPmxvZ19jdHgpCj4+ICAgCQkJZXZlbnRmZF9zaWdu
YWwodnEtPmxvZ19jdHgsIDEpOwo+PiAgIAl9Cj4+IEBAIC0xNzg5LDkgKzE4NDQsOCBAQCBzdGF0
aWMgaW50IHZob3N0X3VwZGF0ZV9hdmFpbF9ldmVudChzdHJ1Y3Qgdmhvc3RfdmlydHF1ZXVlICp2
cSwgdTE2IGF2YWlsX2V2ZW50KQo+PiAgIAkJc21wX3dtYigpOwo+PiAgIAkJLyogTG9nIGF2YWls
IGV2ZW50IHdyaXRlICovCj4+ICAgCQl1c2VkID0gdmhvc3RfYXZhaWxfZXZlbnQodnEpOwo+PiAt
CQlsb2dfd3JpdGUodnEtPmxvZ19iYXNlLCB2cS0+bG9nX2FkZHIgKwo+PiAtCQkJICAodXNlZCAt
ICh2b2lkIF9fdXNlciAqKXZxLT51c2VkKSwKPj4gLQkJCSAgc2l6ZW9mICp2aG9zdF9hdmFpbF9l
dmVudCh2cSkpOwo+PiArCQlsb2dfdXNlZCh2cSwgKHVzZWQgLSAodm9pZCBfX3VzZXIgKil2cS0+
dXNlZCksCj4+ICsJCQkgc2l6ZW9mICp2aG9zdF9hdmFpbF9ldmVudCh2cSkpOwo+PiAgIAkJaWYg
KHZxLT5sb2dfY3R4KQo+PiAgIAkJCWV2ZW50ZmRfc2lnbmFsKHZxLT5sb2dfY3R4LCAxKTsKPj4g
ICAJfQo+PiBAQCAtMjE5MSwxMCArMjI0NSw4IEBAIHN0YXRpYyBpbnQgX192aG9zdF9hZGRfdXNl
ZF9uKHN0cnVjdCB2aG9zdF92aXJ0cXVldWUgKnZxLAo+PiAgIAkJLyogTWFrZSBzdXJlIGRhdGEg
aXMgc2VlbiBiZWZvcmUgbG9nLiAqLwo+PiAgIAkJc21wX3dtYigpOwo+PiAgIAkJLyogTG9nIHVz
ZWQgcmluZyBlbnRyeSB3cml0ZS4gKi8KPj4gLQkJbG9nX3dyaXRlKHZxLT5sb2dfYmFzZSwKPj4g
LQkJCSAgdnEtPmxvZ19hZGRyICsKPj4gLQkJCSAgICgodm9pZCBfX3VzZXIgKil1c2VkIC0gKHZv
aWQgX191c2VyICopdnEtPnVzZWQpLAo+PiAtCQkJICBjb3VudCAqIHNpemVvZiAqdXNlZCk7Cj4+
ICsJCWxvZ191c2VkKHZxLCAoKHZvaWQgX191c2VyICopdXNlZCAtICh2b2lkIF9fdXNlciAqKXZx
LT51c2VkKSwKPj4gKwkJCSBjb3VudCAqIHNpemVvZiAqdXNlZCk7Cj4+ICAgCX0KPj4gICAJb2xk
ID0gdnEtPmxhc3RfdXNlZF9pZHg7Cj4+ICAgCW5ldyA9ICh2cS0+bGFzdF91c2VkX2lkeCArPSBj
b3VudCk7Cj4+IEBAIC0yMjM2LDkgKzIyODgsOCBAQCBpbnQgdmhvc3RfYWRkX3VzZWRfbihzdHJ1
Y3Qgdmhvc3RfdmlydHF1ZXVlICp2cSwgc3RydWN0IHZyaW5nX3VzZWRfZWxlbSAqaGVhZHMsCj4+
ICAgCQkvKiBNYWtlIHN1cmUgdXNlZCBpZHggaXMgc2VlbiBiZWZvcmUgbG9nLiAqLwo+PiAgIAkJ
c21wX3dtYigpOwo+PiAgIAkJLyogTG9nIHVzZWQgaW5kZXggdXBkYXRlLiAqLwo+PiAtCQlsb2df
d3JpdGUodnEtPmxvZ19iYXNlLAo+PiAtCQkJICB2cS0+bG9nX2FkZHIgKyBvZmZzZXRvZihzdHJ1
Y3QgdnJpbmdfdXNlZCwgaWR4KSwKPj4gLQkJCSAgc2l6ZW9mIHZxLT51c2VkLT5pZHgpOwo+PiAr
CQlsb2dfdXNlZCh2cSwgb2Zmc2V0b2Yoc3RydWN0IHZyaW5nX3VzZWQsIGlkeCksCj4+ICsJCQkg
c2l6ZW9mIHZxLT51c2VkLT5pZHgpOwo+PiAgIAkJaWYgKHZxLT5sb2dfY3R4KQo+PiAgIAkJCWV2
ZW50ZmRfc2lnbmFsKHZxLT5sb2dfY3R4LCAxKTsKPj4gICAJfQo+PiBkaWZmIC0tZ2l0IGEvZHJp
dmVycy92aG9zdC92aG9zdC5oIGIvZHJpdmVycy92aG9zdC92aG9zdC5oCj4+IGluZGV4IDQ2NmVm
NzU0MjI5MS4uMWI2NzVkYWQ1ZTA1IDEwMDY0NAo+PiAtLS0gYS9kcml2ZXJzL3Zob3N0L3Zob3N0
LmgKPj4gKysrIGIvZHJpdmVycy92aG9zdC92aG9zdC5oCj4+IEBAIC0yMDUsNyArMjA1LDggQEAg
Ym9vbCB2aG9zdF92cV9hdmFpbF9lbXB0eShzdHJ1Y3Qgdmhvc3RfZGV2ICosIHN0cnVjdCB2aG9z
dF92aXJ0cXVldWUgKik7Cj4+ICAgYm9vbCB2aG9zdF9lbmFibGVfbm90aWZ5KHN0cnVjdCB2aG9z
dF9kZXYgKiwgc3RydWN0IHZob3N0X3ZpcnRxdWV1ZSAqKTsKPj4gICAKPj4gICBpbnQgdmhvc3Rf
bG9nX3dyaXRlKHN0cnVjdCB2aG9zdF92aXJ0cXVldWUgKnZxLCBzdHJ1Y3Qgdmhvc3RfbG9nICps
b2csCj4+IC0JCSAgICB1bnNpZ25lZCBpbnQgbG9nX251bSwgdTY0IGxlbik7Cj4+ICsJCSAgICB1
bnNpZ25lZCBpbnQgbG9nX251bSwgdTY0IGxlbiwKPj4gKwkJICAgIHN0cnVjdCBpb3ZlYyAqaW92
LCBpbnQgY291bnQpOwo+PiAgIGludCB2cV9pb3RsYl9wcmVmZXRjaChzdHJ1Y3Qgdmhvc3Rfdmly
dHF1ZXVlICp2cSk7Cj4+ICAgCj4+ICAgc3RydWN0IHZob3N0X21zZ19ub2RlICp2aG9zdF9uZXdf
bXNnKHN0cnVjdCB2aG9zdF92aXJ0cXVldWUgKnZxLCBpbnQgdHlwZSk7Cj4+IC0tIAo+PiAyLjE3
LjEKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KVmlydHVh
bGl6YXRpb24gbWFpbGluZyBsaXN0ClZpcnR1YWxpemF0aW9uQGxpc3RzLmxpbnV4LWZvdW5kYXRp
b24ub3JnCmh0dHBzOi8vbGlzdHMubGludXhmb3VuZGF0aW9uLm9yZy9tYWlsbWFuL2xpc3RpbmZv
L3ZpcnR1YWxpemF0aW9u
