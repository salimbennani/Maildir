Return-Path: <linux-kernel-owner@vger.kernel.org>
Delivered-To: unknown
Received: from linux.intel.com (10.54.29.200:995) by likexu-workstation with
  POP3-SSL; 23 Nov 2018 23:36:29 -0000
X-Original-To: like.xu@linux.intel.com
Delivered-To: like.xu@linux.intel.com
Received: from FMSMGA003.fm.intel.com (fmsmga003.fm.intel.com [10.253.24.29])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by linux.intel.com (Postfix) with ESMTPS id B159A58037D;
	Fri, 23 Nov 2018 07:06:09 -0800 (PST)
Received: from fmsmga102.fm.intel.com ([10.1.193.69])
  by FMSMGA003-1.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384; 23 Nov 2018 07:06:09 -0800
X-SG-BADATTACHMENTNOREPLY: True
IronPort-PHdr: =?us-ascii?q?9a23=3ALt8n5BI08/iRKqeHONmcpTZWNBhigK39O0sv0rFi?=
 =?us-ascii?q?tYgULv/9rarrMEGX3/hxlliBBdydt6oUzbKO+4nbGkU4qa6bt34DdJEeHzQksu?=
 =?us-ascii?q?4x2zIaPcieFEfgJ+TrZSFpVO5LVVti4m3peRMNQJW2aFLduGC94iAPERvjKwV1?=
 =?us-ascii?q?Ov71GonPhMiryuy+4ZLebxlLiTanfb9+MAi9oBnMuMURnYZsMLs6xAHTontPde?=
 =?us-ascii?q?RWxGdoKkyWkh3h+Mq+/4Nt/jpJtf45+MFOTav1f6IjTbxFFzsmKHw65NfqtRbY?=
 =?us-ascii?q?UwSC4GYXX3gMnRpJBwjF6wz6Xov0vyDnuOdxxDWWMMvrRr0yRD+s7bpkSAXwhS?=
 =?us-ascii?q?kHKTA37W/ZhM93gqJAuBKspQdyz5LIbIyPKPZzZL/Rcc8cSGFcXshRTStBAoak?=
 =?us-ascii?q?YoQNFeUBO+lYr5XnqFsJsBCwAwisD/7oxz9Uh3/226073/4vEAHH2gwvAtMPsX?=
 =?us-ascii?q?XPodX6MacdS+G1zK3SwTrfaPNW3C7w5Y7VeR4iufGBRax8fdbVxEU1Cg/IgEuc?=
 =?us-ascii?q?pZb4Mz6WyugBqWmW4uh4We+uiGMrsRx9rzmsy8s2l4XEiJ4ZxkrG+Ch7xos+OM?=
 =?us-ascii?q?e2R1RhYdG+FZtdryGaOJVyQsMlW2xopik6xaMcuZKhfygF1o4nxxjBZPyDaYSI?=
 =?us-ascii?q?5QjjVOmJLTd5gnJqZq6/ig6s/US8zuDwTNS43VhUoiZfj9XBtWwB2wbS58WFUv?=
 =?us-ascii?q?d9+12u2TeL1wDd8OFEJkU0mLLfK54gxL4wi5USvV3AHiDogkX2irGZdkE99uiv?=
 =?us-ascii?q?5eXnZKvppoWHOo9qhQHxLL4ulta8AesmKAgOWXaU+eCm2L3k5035T61Gjucqna?=
 =?us-ascii?q?nBrJDaOcMbq7a9Aw9U0YYs9QyzDji70NkDmXkHLVRFeA+IjoTzOlHOJuz4Aum7?=
 =?us-ascii?q?g1i2jDhrwPXGNKX7AprRNnjDjKvhfbFl5k5c0gUzzMxf6IhTCr0bIPLzR1X+tN?=
 =?us-ascii?q?rXDhIiNwy0wuDnCMhy148EWGKPBLOZP73WsVOS+u0vJOyMbpcPuDnhM/gl++Lu?=
 =?us-ascii?q?jXghlF8feqmmw4EbaHO/HvRgJUWZZmHhgtMAEWcMowo/Q/bmiFyEUT5PeXmyW7?=
 =?us-ascii?q?gw6S08CIKjFY3DXJyigKSd3CenGZ1bfnpJCkuMEXfvdIWIQe0MZziQIsJ6ljwE?=
 =?us-ascii?q?VL6hS5Iu1B20tQ/6zaZnIfTQ+iECqZ3j09117fXJlR4u7Tx0E9id02aVQmF3hG?=
 =?us-ascii?q?wIQSU63KR+oUNnzFeD3rN1g/hZFdxV+vNIXR02NZ/az+xmFd/yXhjNccuOSFaj?=
 =?us-ascii?q?Wt+mGy0+Tsotw98SZEZwA8itgQrd3yW0GbMVl6aEBJov8q3C2Xj9IMJ9y3XD1K?=
 =?us-ascii?q?kllFQmRspPNWu7hq9w7QTTBojJk1mHmKaub6gTwCnN9GKbx2qUoE5YSBJwUbnC?=
 =?us-ascii?q?XX0He0TZt8r56V3YQ7+uE7snNBBBxtCEKqZRbt3pjFNGROrsOdjEYmKxnXuwCg?=
 =?us-ascii?q?iMxr+WcIXqfGAd1j3HCEcYiwAT4WqGNQ8mCye9omLeCTtuFU7vY0Ls6+V+tGm3?=
 =?us-ascii?q?TkguzwGObk1h0bW19wURhfydTfMTw70FtD0gqzVyAFaywdbWB8CcqApmeaVWec?=
 =?us-ascii?q?k970tf1WLFqwx9OYStILpmhlEAfAV4oUPv2w9sBYVdjMcltnUqzAl1KaKGy15B?=
 =?us-ascii?q?czKY3ZbtOrzYMGXy/Rava7LI1VHaytqZ5qAP6PEgoVX5oA6pDlYi82lg09RN03?=
 =?us-ascii?q?qc+4/GAxYIXZPwUkY47R56p77Bbyk55oPU02BsMKauvj/D3dIpGPUqyhK6c9hD?=
 =?us-ascii?q?N6OEERf4E9cGCMi2NOwqh1+pYwoePOBT6KE7JdmmeOaB2KKxOuZvgiimjWVe7I?=
 =?us-ascii?q?9hyE2M8zdzRfDS35YCxfGVxQ+HVzb6jFe8vcH7g4FEZTcOHmWhzSjoHpJeZqp3?=
 =?us-ascii?q?fYwTE2ehP9W3xslih57qQ3NZ9F+jC0kG2cOzYhqSclr90BZU1UQWp3ynhCS5wy?=
 =?us-ascii?q?Z1kzEvsqqQwijOz/7+exoAP25BXHNigkv0IYiok9AaW1Clbwozmxu/5kb6xK9b?=
 =?us-ascii?q?qL5kL2bJQkdIfCn2L2d8Xau2rbeCZ89P6JU1sSRYSui8YFaaSqLjrBseyS/sA2?=
 =?us-ascii?q?xexDUjfTGwppr5hwB6iH6aLHtrrHvWY8ZwyQ3d5NzdQ/5cxT4GRCh+iTnKCVmw?=
 =?us-ascii?q?Jdip/dOIl5jdtuCyTX6uVppWcSPz14OPqDO75XF2AR24h/2zmcfoEQkg3S/7yt?=
 =?us-ascii?q?llTyPIrBnnb4nv1qS6N/9nf0ZyCF/97cp6Bp9xko8qiJ4M3ngag42f/WAbnmfr?=
 =?us-ascii?q?LdVbxaX+YWIIRT4KwN7a+hLp2UN9IXKS24L2SG+dzdB/aNmgbWMbwSY978FMCK?=
 =?us-ascii?q?eJ471Ihyp1olykrQ3PZfhxhCsSyfwr6HQCmeEGpBItzjmBArAVBURYISvslxGS?=
 =?us-ascii?q?49G/tqpXYnuvcaOr1Ep/ht2hCLCCogdBWHf2YJsiHClw7tlhP1LIynH89obkeN?=
 =?us-ascii?q?zIZ9IJqhKUiwvAj/RSKJ8pjfUFny1nOWbgvXE/z+47kAdj3ZW7vIiBNmVs87i1?=
 =?us-ascii?q?Ah9eNj3pecwT/ivhgrpZnsaTx4qvBIluGi0XXJv0SvKlCDASuu7iNwmQCz0wsG?=
 =?us-ascii?q?ubFaDcHQ+C60dmsnTPHIqwN3yMIHkZzNNiRASSJUBFgQAUWik6kYA9Fgyw2MPh?=
 =?us-ascii?q?d0J57CgL5lHkshtM1v5oNx7nX2bfoweody40SIWFIxpQ9A1C/EDVMcqR7u9oGy?=
 =?us-ascii?q?FY/5uhrBGCK2CBZgRIC30JVVKAB1z5Irau4tzA+fCCBuWiN/vOfamOqetGWveI?=
 =?us-ascii?q?252v04hm/zWNNsmVPXliFfo72kVdUnBjBsTZgC4CSygWlyLLcs6aqw2w+ixxrs?=
 =?us-ascii?q?Cj7vvrXBjj6peIC7tXKd9v4Qy5gb+fN+6MgyZ0MSxX1o4Xyn/S1rce3EQeiyVv?=
 =?us-ascii?q?dzS2FbQAtCjNTL/fm6NNDh4bbT9zO9VM764mwgZNPsvbgMvv1rFklv41F0tFVV?=
 =?us-ascii?q?v5l8G1ZMwKJnuxO0/dCEmXNLSJOzvLztrzYaO9T71QkepVuwexuTadD0/sIDCD?=
 =?us-ascii?q?myP1WBCoNOFGlDubMwBGuIGhbhZtDnDuTdL8ZR29Nd93jDs2zqU1h3PKL2EcNz?=
 =?us-ascii?q?d8flhJrr2R6yNYn/p+F3ZA7npjMemLhSKZ4/PEJZYRtPs4ShhzwuZb5mkhjaRc?=
 =?us-ascii?q?6CVJRf5dnCrUp8Rp5Va8na3HzyZ6SgNTpypXiaqBtFRmOK/D+99LXnOAtAkH6n?=
 =?us-ascii?q?ScIxcHvd1oDpvooa8D5MLIkffCITFN79vTte8dT5zIKcSWdmUgNxb7ChbbCQIE?=
 =?us-ascii?q?SXigMmSJ1B8Vq+2b6nDA9stykZPrgpdbErI=3D?=
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A0ASAABNFvhbh0O0hNFjHAEBAQQBAQcEA?=
 =?us-ascii?q?QGBUQcBAQsBgl2BDieMEV+LIVABAQaBSYkFA4U4g3CEd4FwFQEBGBMBiFoiNAk?=
 =?us-ascii?q?NAQMBAQEBAQECARMBAQEIDQkIKSMMgjYigmwCPQEbHQEDAgkCBRA7Ax4CEQEFA?=
 =?us-ascii?q?SMSBYMcgWkBAwgNBZtDPIwfBQEXgncFhC0KGScNWoE3AgYSh0yDD4EcgQ+BB4E?=
 =?us-ascii?q?RhWiIAwKJI4ZthSaKHi4HAg2Nd4MgCxiBWYd4NocAASyOIYk8BgIJBw8hgSWCD?=
 =?us-ascii?q?XCBAYI7ghsMF4NKinAiMoECAwEBIROLbQEB?=
X-IPAS-Result: =?us-ascii?q?A0ASAABNFvhbh0O0hNFjHAEBAQQBAQcEAQGBUQcBAQsBgl2?=
 =?us-ascii?q?BDieMEV+LIVABAQaBSYkFA4U4g3CEd4FwFQEBGBMBiFoiNAkNAQMBAQEBAQECA?=
 =?us-ascii?q?RMBAQEIDQkIKSMMgjYigmwCPQEbHQEDAgkCBRA7Ax4CEQEFASMSBYMcgWkBAwg?=
 =?us-ascii?q?NBZtDPIwfBQEXgncFhC0KGScNWoE3AgYSh0yDD4EcgQ+BB4ERhWiIAwKJI4Zth?=
 =?us-ascii?q?SaKHi4HAg2Nd4MgCxiBWYd4NocAASyOIYk8BgIJBw8hgSWCDXCBAYI7ghsMF4N?=
 =?us-ascii?q?KinAiMoECAwEBIROLbQEB?=
X-IronPort-AV: E=Sophos;i="5.56,270,1539673200"; 
   d="scan'208";a="54068362"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from vger.kernel.org ([209.132.180.67])
  by mtab.intel.com with ESMTP; 23 Nov 2018 07:06:08 -0800
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S2504744AbeKXBue (ORCPT <rfc822;like.xu@linux.intel.com>
        + 23 others); Fri, 23 Nov 2018 20:50:34 -0500
Received: from mail-pl1-f193.google.com ([209.85.214.193]:43542 "EHLO
        mail-pl1-f193.google.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1732166AbeKXBue (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Fri, 23 Nov 2018 20:50:34 -0500
Received: by mail-pl1-f193.google.com with SMTP id gn14so10766973plb.10;
        Fri, 23 Nov 2018 07:06:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20161025;
        h=from:to:cc:subject:date:message-id;
        bh=o93J3BNmQ1ja0KQUj6SiJX6FygDGjFCA6M1dZJot1uE=;
        b=mFRwRuCPqjoymA4JuaqepvwJHuV1PDSoKmqcgFOKuswVOTcfSBWBaKCSUCnEt5YBtX
         fwEMM/EVakz5gk4LrX2s8c1ysRJa8qF2cjK4LDRGYHLYPwzuVGZDJ5Y4wEi+kiTiz4EA
         q3Lz0uMYioJCVy0phEuJvICLf3r3Q4c8R1fVICYcNbH/0XU3xAVk8owuuef608PDr82m
         mMxDRLbMc5nP5yv6jNw5UX/jGdfDDu6EuCyvdqNSwxGikV4XfPSOT3dfNyIwXl7GiTzm
         oAX4ZXyU5cGJSVa87Nb6YT8TXxNocp29ySApVipt59dZSAK7oLfSmJ7as5ri6tRLr68X
         Vlfw==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20161025;
        h=x-gm-message-state:from:to:cc:subject:date:message-id;
        bh=o93J3BNmQ1ja0KQUj6SiJX6FygDGjFCA6M1dZJot1uE=;
        b=dzCd4u0P2qI64vAZCWwA1CNXtsKo1AAVSzVSnVJcn5CT6iPmmZglyZOJ/NYr3afO9j
         FEZU4Uj614tPnFvIq9pEWqiYa0ujAASuE1vQZ6Q7Ip7KKWLesT8YhKgStAMy0nOtRQJZ
         QCbjTubauNj359AM+66pEhoW+YfA4yiqBJ0IJkbuxHM7GCiR3jD5wu8c4RfEUSNqtIJj
         R/18dTJdKj1e2A/lCAAcRYHxa6aWLGOO/q98V7iT43TlY4cdM4SZ48PL1V9njfkTg0VX
         qackLIk/AY2aXIr5DadK17YqUgKOJcYiln7ZCBFX6Q69jsjjI8v/vb+lg7DGwTRzFGXy
         L/NA==
X-Gm-Message-State: AA+aEWYME7s6KwopuRlQ92AKoD7LGqNB2EiTbVTl9Cd2MAeQ+LvMS+VF
        Z/oZXkvSYgy190x1HJ8Z8/E=
X-Google-Smtp-Source: AFSGD/UTuZcoUTgvcKZD8g8ZJhdVgVKkGwCPqTfRkk2QrIYj6gUJ0dlZymb2tUE69mD85Dnk1vdRsw==
X-Received: by 2002:a17:902:12b:: with SMTP id 40mr1893146plb.72.1542985563210;
        Fri, 23 Nov 2018 07:06:03 -0800 (PST)
Received: from localhost (68.168.130.77.16clouds.com. [68.168.130.77])
        by smtp.gmail.com with ESMTPSA id u127-v6sm62690898pfb.47.2018.11.23.07.06.02
        (version=TLS1_2 cipher=ECDHE-RSA-CHACHA20-POLY1305 bits=256/256);
        Fri, 23 Nov 2018 07:06:02 -0800 (PST)
From: Yangtao Li <tiny.windzz@gmail.com>
To: linus.walleij@linaro.org, mturquette@baylibre.com, sboyd@kernel.org
Cc: linux-arm-kernel@lists.infradead.org, linux-clk@vger.kernel.org,
        linux-kernel@vger.kernel.org, Yangtao Li <tiny.windzz@gmail.com>
Subject: [PATCH] clk: nomadik: Change to use DEFINE_SHOW_ATTRIBUTE macro
Date: Fri, 23 Nov 2018 10:06:00 -0500
Message-Id: <20181123150600.27445-1-tiny.windzz@gmail.com>
X-Mailer: git-send-email 2.17.0
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

Use macro to simplify the code.

Signed-off-by: Yangtao Li <tiny.windzz@gmail.com>
---
 drivers/clk/clk-nomadik.c | 14 ++------------
 1 file changed, 2 insertions(+), 12 deletions(-)

diff --git a/drivers/clk/clk-nomadik.c b/drivers/clk/clk-nomadik.c
index 84a24875c629..e331634d34df 100644
--- a/drivers/clk/clk-nomadik.c
+++ b/drivers/clk/clk-nomadik.c
@@ -479,17 +479,7 @@ static int nomadik_src_clk_show(struct seq_file *s, void *what)
 	return 0;
 }
 
-static int nomadik_src_clk_open(struct inode *inode, struct file *file)
-{
-	return single_open(file, nomadik_src_clk_show, NULL);
-}
-
-static const struct file_operations nomadik_src_clk_debugfs_ops = {
-	.open           = nomadik_src_clk_open,
-	.read           = seq_read,
-        .llseek         = seq_lseek,
-	.release        = single_release,
-};
+DEFINE_SHOW_ATTRIBUTE(nomadik_src_clk_debugfs);
 
 static int __init nomadik_src_clk_init_debugfs(void)
 {
@@ -499,7 +489,7 @@ static int __init nomadik_src_clk_init_debugfs(void)
 	src_pcksr0_boot = readl(src_base + SRC_PCKSR0);
 	src_pcksr1_boot = readl(src_base + SRC_PCKSR1);
 	debugfs_create_file("nomadik-src-clk", S_IFREG | S_IRUGO,
-			    NULL, NULL, &nomadik_src_clk_debugfs_ops);
+			    NULL, NULL, &nomadik_src_clk_debugfs_fops);
 	return 0;
 }
 device_initcall(nomadik_src_clk_init_debugfs);
-- 
2.17.0

