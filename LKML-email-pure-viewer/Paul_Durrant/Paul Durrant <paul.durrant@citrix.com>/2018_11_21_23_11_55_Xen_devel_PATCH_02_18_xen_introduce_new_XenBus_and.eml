Return-Path: <xen-devel-bounces@lists.xenproject.org>
Delivered-To: unknown
Received: from pop3.zju.edu.cn (124.160.105.205:110) by
  likexu-MOBL1.ccr.corp.intel.com with POP3; 22 Nov 2018 00:34:11 -0000
Received: from icoremail.net (unknown [209.85.214.182])
	by mail-app2 (Coremail) with SMTP id by_KCgDXv+5advVbGAbJAQ--.58808S3;
	Wed, 21 Nov 2018 23:14:35 +0800 (CST)
Received: from mail-pl1-f182.google.com (unknown [209.85.214.182])
	by mx2.icoremail.net (Coremail) with SMTP id AQAAfwDHrEhUdvVb3wxkAA--.2211S3;
	Wed, 21 Nov 2018 23:14:28 +0800 (CST)
Received: by mail-pl1-f182.google.com with SMTP id f12-v6so5959128plo.1
        for <xuliker@zju.edu.cn>; Wed, 21 Nov 2018 07:14:28 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20161025;
        h=x-original-authentication-results:x-gm-message-state:delivered-to
         :from:to:date:message-id:in-reply-to:references:mime-version:subject
         :precedence:list-id:list-unsubscribe:list-post:list-help
         :list-subscribe:cc:content-transfer-encoding:errors-to:sender;
        bh=qUuHKB/HsckaIOm7O4x9mLLx6PQQRjujt3g+5QOBKpU=;
        b=J7NcX8PGCL25jd2FLPgnb6MfdwJBSgfU/O+tmwoNBkTDICkMQodGeTPLHKW9TPAwi4
         0Z+p/pAN+qoq6dA+noO5ZxWywjQlVxUcSgXUI5dAi/JdRc4rCbYhNPdMmw9iFFp68uAB
         rFYvmd0/sqBrcyPluRbi4REsh8R5xlNp3NdulVCjCpsBqlKpNlDXQ+BcUyacAFGFLDtW
         lsHvl/RDWamYhNx6Gc26tWiYtOB3PyNdD3qacN+hV/Q8H6C84c7Lbu9GwDbEuZf9uebt
         i+PFWn8m62wazj9x7TG4CrPzHC0NCAMYWv1h02WjXihk5mp8yeT7qPlgVDAlHzE81okj
         jp5A==
X-Original-Authentication-Results: mx.google.com;       spf=pass (google.com: best guess record for domain of xen-devel-bounces@lists.xenproject.org designates 192.237.175.120 as permitted sender) smtp.mailfrom=xen-devel-bounces@lists.xenproject.org
X-Gm-Message-State: AA+aEWaZVzIMD5PdSpxuWVaYY/y+yXOkOJctdEZ5HlhKFs1tzB0leQYT
	aR9fcm831fsvpIqvQi/UbQbkUOMClGxwcdUBiUsSA9FxTRHJ5c4=
X-Received: by 2002:a17:902:560f:: with SMTP id h15-v6mr7397631pli.160.1542813268508;
        Wed, 21 Nov 2018 07:14:28 -0800 (PST)
X-Forwarded-To: xuliker@zju.edu.cn
X-Forwarded-For: liker.xu@gmail.com xuliker@zju.edu.cn
Delivered-To: liker.xu@gmail.com
Received: by 2002:a17:90a:d106:0:0:0:0 with SMTP id l6-v6csp2080072pju;
        Wed, 21 Nov 2018 07:14:27 -0800 (PST)
X-Google-Smtp-Source: AFSGD/VicdCwqkVkdjnC6FZKCUPfIKXYlpp9VDuoRYyFhRNFNYa0HJMCY/MQhd8uwySnR7GbjGx2
X-Received: by 2002:a81:3016:: with SMTP id w22mr3379296yww.30.1542813267697;
        Wed, 21 Nov 2018 07:14:27 -0800 (PST)
ARC-Seal: i=1; a=rsa-sha256; t=1542813267; cv=none;
        d=google.com; s=arc-20160816;
        b=Ga4CyrZZU3OpTvQvNwL0zCA45klmpzJcUL1sW23jEFCFNUn8W8cwWPb85i0gDeMx3z
         9/R5zKGMvZrDlM1dhF99ozB1LDNHg6mOy+vNuiNS1fNL3KqT5otcdKbPAYmJEJ0lRekE
         8zbmGhGxLVocWeyEcSCJFhdN6+joBQ2NgcZbuLlar6qMaAZ/QrtYCErBOaNQF8bz4Up4
         AAdYAWu4W8IT17EJEZyBRQHFGSoNaui6eUAuGZVr5PWNykZ88xp1KtMuTHeDE0xmJON1
         xQnrgRpRK5D9uJIlcWZzETc1gYFg/TxDn4+Y40UIKEnMTkJteCMy/hvwGEWV5ONa1U6c
         AOOA==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;
        h=sender:errors-to:content-transfer-encoding:cc:list-subscribe
         :list-help:list-post:list-unsubscribe:list-id:precedence:subject
         :mime-version:references:in-reply-to:message-id:date:to:from;
        bh=qUuHKB/HsckaIOm7O4x9mLLx6PQQRjujt3g+5QOBKpU=;
        b=kr0URdCSEBSfEJsyRY089+t7Bzn/b5xGlqEN0Q4ofTk8oRNslYCHVehQ7MUIX8B1eU
         YugkAfpQvY6FsEX4tUaRw6hBKniikJrbIyI0sO6TbJ0Sg/lMAlOFArakU/xfNhTcgBk1
         Wlo8AmmSY0OTDH0Xl5Ni/zSHAPCRMxXWjomG3zNX93lwuaLXwz+8sNwWDu94xBIUhpPG
         OEUVYNhWhpZF/KTnyqSLo9fd+IC+BTh46LddUaXL1zaLtWv/OxjIg9QaJLFbbvpIUaRq
         xrFf2c6JPocKZa1zwP/xEdtNMbtyBtZTBQMKwwoohZjkHFJhOBYufFiNZ7GosfAyjH/0
         wwxg==
ARC-Authentication-Results: i=1; mx.google.com;
       spf=pass (google.com: best guess record for domain of xen-devel-bounces@lists.xenproject.org designates 192.237.175.120 as permitted sender) smtp.mailfrom=xen-devel-bounces@lists.xenproject.org
Received: from lists.xenproject.org (lists.xenproject.org. [192.237.175.120])
        by mx.google.com with ESMTPS id p2-v6si8008059ybk.262.2018.11.21.07.14.15
        (version=TLS1_2 cipher=ECDHE-RSA-CHACHA20-POLY1305 bits=256/256);
        Wed, 21 Nov 2018 07:14:27 -0800 (PST)
Received-SPF: pass (google.com: best guess record for domain of xen-devel-bounces@lists.xenproject.org designates 192.237.175.120 as permitted sender) client-ip=192.237.175.120;
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1gPUB3-0007O4-8N; Wed, 21 Nov 2018 15:12:29 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=wVSe=OA=citrix.com=prvs=856356900=paul.durrant@srs-us1.protection.inumbo.net>)
 id 1gPUB1-0007Mi-TC
 for xen-devel@lists.xenproject.org; Wed, 21 Nov 2018 15:12:27 +0000
X-Inumbo-ID: d972c3c8-ed9f-11e8-b7a8-12d6303a7972
Received: from SMTP03.CITRIX.COM (unknown [162.221.156.55])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id d972c3c8-ed9f-11e8-b7a8-12d6303a7972;
 Wed, 21 Nov 2018 15:12:24 +0000 (UTC)
X-IronPort-AV: E=Sophos;i="5.56,261,1539648000"; d="scan'208";a="71205806"
From: Paul Durrant <paul.durrant@citrix.com>
To: <qemu-block@nongnu.org>, <qemu-devel@nongnu.org>,
 <xen-devel@lists.xenproject.org>
Date: Wed, 21 Nov 2018 15:11:55 +0000
Message-ID: <20181121151211.15997-3-paul.durrant@citrix.com>
X-Mailer: git-send-email 2.11.0
In-Reply-To: <20181121151211.15997-1-paul.durrant@citrix.com>
References: <20181121151211.15997-1-paul.durrant@citrix.com>
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH 02/18] xen: introduce new 'XenBus' and
 'XenDevice' object hierarchy
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <sstabellini@kernel.org>,
 Eduardo Habkost <ehabkost@redhat.com>, "Michael S. Tsirkin" <mst@redhat.com>,
 Paul Durrant <paul.durrant@citrix.com>,
 Marcel Apfelbaum <marcel.apfelbaum@gmail.com>,
 Anthony Perard <anthony.perard@citrix.com>,
 Paolo Bonzini <pbonzini@redhat.com>, Richard Henderson <rth@twiddle.net>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: liker.xu+caf_=xuliker=zju.edu.cn@gmail.com
X-CM-TRANSID: AQAAfwDHrEhUdvVb3wxkAA--.2211S3
Authentication-Results: mail-app2; spf=pass smtp.mail=liker.xu+caf_=xu
	liker=zju.edu.cn@gmail.com;
X-Coremail-Antispam: 1UD129KBjvJXoW3XFy8Gr48Zw45Gw4xArWxCrg_yoWfAr17p3
	WxWFZ0krWUGF4Ikwsagrn2gF1UGan7GryrWr98Ww1IkrZ7Xr18Jr4kKrW5ua48urs2yF1r
	X39xtrykJw1xGw7anT9S1TB71UUUUUUqnTZGkaVYY2UrUUUUjbIjqfuFe4nvWSU8nxnvy2
	9KBjDU0xBIdaVrnRJUUUdYb7Iv0xC_KF4lb4IE77IF4wAFF20E14v26r1j6r4UM7CIcVAF
	z4kK6r1j6r18M28lY4IEw2IIxxk0rwA2F7IY1VAKz4vEj48ve4kI8wA2z4x0Y4vE2Ix0cI
	8IcVAFwI0_tr0E3s1l84ACjcxK6xIIjxv20xvEc7CjxVAFwI0_Gr1j6F4UJwA2z4x0Y4vE
	x4A2jsIE14v26rxl6s0DM28EF7xvwVC2z280aVCY1x0267AKxVW0oVCq3wAa7VCE64xvF2
	IEb7IF0Fy264xvF2IEb7IF0Fy264kE64k0F2IE7I0Y6sxI4wAS0I0E0xvYzxvE52x082IY
	62kv0487Mc02F40EFcxC0VAKzVAqx4xG6I80ewAv7VC0I7IYx2IY67AKxVWUGVWUXwAv7V
	C2z280aVAFwI0_Cr0_Gr1UMcvjeVCFs4IE7xkEbVWUJVW8JwACjcxG0xvY0x0EwIxGrwAC
	Y4xI67k04243AVAKzVAKj4xxMx02cVCv0xWlc7CjxVAKzI0EY4vE52x082I5MxkIecxEwV
	CI4VW5WwCY0x0Ix7I2Y4AK64vIr41lcIIF0xvE2Ix0cI8IcVAFwI0_Xr0_Ar1lcIIF0xvE
	2Ix0cI8IcVCY1x0267AKxVW8JVWxJwCYIxAIcVC2z280aVAFwI0_GcCE3s1lcIIF0xvEx4
	A2jsIEc7CjxVAFwI0_GcCE3s1l42xK82IYc2Ij64vIr41l42xK82IY64kExVAvwVAq07x2
	0xyl4x8a6x804xWl4I8I3I0E4IkC6x0Yz7v_Jr0_Gr1lx2IqxVAqx4xG67AKxVWUJVWUGw
	C20s026x8GjcxK67AKxVWUGVWUWwC2zVAF1VAY17CE14v26r1q6r43MIIYrxkI7VAKI48J
	MIIF0xvE42xK8VAvwI8IcIk0rVW3JVWrJr1l6VACY4xI67k04243AbIYCTnIWIevJa73Uj
	IFyTuYvjxU3xhLDUUUU

VGhpcyBwYXRjaCBhZGRzIHRoZSBiYXNpYyBib2lsZXJwbGF0ZSBmb3IgYSAnWGVuQnVzJyBvYmpl
Y3QgdGhhdCB3aWxsIGFjdAphcyBhIHBhcmVudCB0byAnWGVuRGV2aWNlJyBQViBiYWNrZW5kcy4K
QSBuZXcgJ1hlbkJyaWRnZScgb2JqZWN0IGlzIGFsc28gYWRkZWQgdG8gY29ubmVjdCBYZW5CdXMg
dG8gdGhlIHN5c3RlbSBidXMuCgpUaGUgWGVuQnVzIG9iamVjdCBpcyBpbnN0YW50aWF0ZWQgYnkg
YSBuZXcgeGVuX2J1c19pbml0KCkgZnVuY3Rpb24gY2FsbGVkCmZyb20gdGhlIHNhbWUgc2l0ZXMg
YXMgdGhlIGxlZ2FjeSB4ZW5fYmVfaW5pdCgpIGZ1bmN0aW9uLgoKU3Vic2VxdWVudCBwYXRjaGVz
IHdpbGwgZmxlc2gtb3V0IHRoZSBmdW5jdGlvbmFsaXR5IG9mIHRoZXNlIG9iamVjdHMuCgpTaWdu
ZWQtb2ZmLWJ5OiBQYXVsIER1cnJhbnQgPHBhdWwuZHVycmFudEBjaXRyaXguY29tPgotLS0KQ2M6
IFN0ZWZhbm8gU3RhYmVsbGluaSA8c3N0YWJlbGxpbmlAa2VybmVsLm9yZz4KQ2M6IEFudGhvbnkg
UGVyYXJkIDxhbnRob255LnBlcmFyZEBjaXRyaXguY29tPgpDYzogIk1pY2hhZWwgUy4gVHNpcmtp
biIgPG1zdEByZWRoYXQuY29tPgpDYzogTWFyY2VsIEFwZmVsYmF1bSA8bWFyY2VsLmFwZmVsYmF1
bUBnbWFpbC5jb20+CkNjOiBQYW9sbyBCb256aW5pIDxwYm9uemluaUByZWRoYXQuY29tPgpDYzog
UmljaGFyZCBIZW5kZXJzb24gPHJ0aEB0d2lkZGxlLm5ldD4KQ2M6IEVkdWFyZG8gSGFia29zdCA8
ZWhhYmtvc3RAcmVkaGF0LmNvbT4KLS0tCiBody9pMzg2L3hlbi94ZW4taHZtLmMgICAgIHwgICAz
ICsrCiBody94ZW4vTWFrZWZpbGUub2JqcyAgICAgIHwgICAyICstCiBody94ZW4vdHJhY2UtZXZl
bnRzICAgICAgIHwgICA2ICsrKwogaHcveGVuL3hlbi1idXMuYyAgICAgICAgICB8IDEyNSArKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCiBody94ZW5wdi94ZW5f
bWFjaGluZV9wdi5jIHwgICAzICsrCiBpbmNsdWRlL2h3L3hlbi94ZW4tYnVzLmggIHwgIDUzICsr
KysrKysrKysrKysrKysrKysrCiA2IGZpbGVzIGNoYW5nZWQsIDE5MSBpbnNlcnRpb25zKCspLCAx
IGRlbGV0aW9uKC0pCiBjcmVhdGUgbW9kZSAxMDA2NDQgaHcveGVuL3hlbi1idXMuYwogY3JlYXRl
IG1vZGUgMTAwNjQ0IGluY2x1ZGUvaHcveGVuL3hlbi1idXMuaAoKZGlmZiAtLWdpdCBhL2h3L2kz
ODYveGVuL3hlbi1odm0uYyBiL2h3L2kzODYveGVuL3hlbi1odm0uYwppbmRleCAxZDYzNzYzOWM3
Li40NDk3Zjc1MWQyIDEwMDY0NAotLS0gYS9ody9pMzg2L3hlbi94ZW4taHZtLmMKKysrIGIvaHcv
aTM4Ni94ZW4veGVuLWh2bS5jCkBAIC0xNyw2ICsxNyw3IEBACiAjaW5jbHVkZSAiaHcvaTM4Ni9h
cGljLW1zaWRlZi5oIgogI2luY2x1ZGUgImh3L3hlbi94ZW5fY29tbW9uLmgiCiAjaW5jbHVkZSAi
aHcveGVuL3hlbi1sZWdhY3ktYmFja2VuZC5oIgorI2luY2x1ZGUgImh3L3hlbi94ZW4tYnVzLmgi
CiAjaW5jbHVkZSAicWFwaS9lcnJvci5oIgogI2luY2x1ZGUgInFhcGkvcWFwaS1jb21tYW5kcy1t
aXNjLmgiCiAjaW5jbHVkZSAicWVtdS9lcnJvci1yZXBvcnQuaCIKQEAgLTE0NzksNiArMTQ4MCw4
IEBAIHZvaWQgeGVuX2h2bV9pbml0KFBDTWFjaGluZVN0YXRlICpwY21zLCBNZW1vcnlSZWdpb24g
KipyYW1fbWVtb3J5KQogICAgIFFMSVNUX0lOSVQoJnN0YXRlLT5kZXZfbGlzdCk7CiAgICAgZGV2
aWNlX2xpc3RlbmVyX3JlZ2lzdGVyKCZzdGF0ZS0+ZGV2aWNlX2xpc3RlbmVyKTsKIAorICAgIHhl
bl9idXNfaW5pdCgpOworCiAgICAgLyogSW5pdGlhbGl6ZSBiYWNrZW5kIGNvcmUgJiBkcml2ZXJz
ICovCiAgICAgaWYgKHhlbl9iZV9pbml0KCkgIT0gMCkgewogICAgICAgICBlcnJvcl9yZXBvcnQo
InhlbiBiYWNrZW5kIGNvcmUgc2V0dXAgZmFpbGVkIik7CmRpZmYgLS1naXQgYS9ody94ZW4vTWFr
ZWZpbGUub2JqcyBiL2h3L3hlbi9NYWtlZmlsZS5vYmpzCmluZGV4IDNmNjRhNDQwNTEuLmQ5ZDZk
N2I0ZjkgMTAwNjQ0Ci0tLSBhL2h3L3hlbi9NYWtlZmlsZS5vYmpzCisrKyBiL2h3L3hlbi9NYWtl
ZmlsZS5vYmpzCkBAIC0xLDUgKzEsNSBAQAogIyB4ZW4gYmFja2VuZCBkcml2ZXIgc3VwcG9ydAot
Y29tbW9uLW9iai0kKENPTkZJR19YRU4pICs9IHhlbi1sZWdhY3ktYmFja2VuZC5vIHhlbl9kZXZj
b25maWcubyB4ZW5fcHZkZXYubyB4ZW4tY29tbW9uLm8KK2NvbW1vbi1vYmotJChDT05GSUdfWEVO
KSArPSB4ZW4tbGVnYWN5LWJhY2tlbmQubyB4ZW5fZGV2Y29uZmlnLm8geGVuX3B2ZGV2Lm8geGVu
LWNvbW1vbi5vIHhlbi1idXMubwogCiBvYmotJChDT05GSUdfWEVOX1BDSV9QQVNTVEhST1VHSCkg
Kz0geGVuLWhvc3QtcGNpLWRldmljZS5vCiBvYmotJChDT05GSUdfWEVOX1BDSV9QQVNTVEhST1VH
SCkgKz0geGVuX3B0Lm8geGVuX3B0X2NvbmZpZ19pbml0Lm8geGVuX3B0X2dyYXBoaWNzLm8geGVu
X3B0X21zaS5vCmRpZmYgLS1naXQgYS9ody94ZW4vdHJhY2UtZXZlbnRzIGIvaHcveGVuL3RyYWNl
LWV2ZW50cwppbmRleCBjN2U3YTNiNTIzLi4wMTcyY2Q0ZTI2IDEwMDY0NAotLS0gYS9ody94ZW4v
dHJhY2UtZXZlbnRzCisrKyBiL2h3L3hlbi90cmFjZS1ldmVudHMKQEAgLTEyLDMgKzEyLDkgQEAg
eGVuX3VubWFwX3BvcnRpb19yYW5nZSh1aW50MzJfdCBpZCwgdWludDY0X3Qgc3RhcnRfYWRkciwg
dWludDY0X3QgZW5kX2FkZHIpICJpZDoKIHhlbl9tYXBfcGNpZGV2KHVpbnQzMl90IGlkLCB1aW50
OF90IGJ1cywgdWludDhfdCBkZXYsIHVpbnQ4X3QgZnVuYykgImlkOiAldSBiZGY6ICUwMnguJTAy
eC4lMDJ4IgogeGVuX3VubWFwX3BjaWRldih1aW50MzJfdCBpZCwgdWludDhfdCBidXMsIHVpbnQ4
X3QgZGV2LCB1aW50OF90IGZ1bmMpICJpZDogJXUgYmRmOiAlMDJ4LiUwMnguJTAyeCIKIHhlbl9k
b21pZF9yZXN0cmljdChpbnQgZXJyKSAiZXJyOiAldSIKKworIyBpbmNsdWRlL2h3L3hlbi94ZW4t
YnVzLmMKK3hlbl9idXNfcmVhbGl6ZSh2b2lkKSAiIgoreGVuX2J1c191bnJlYWxpemUodm9pZCkg
IiIKK3hlbl9kZXZpY2VfcmVhbGl6ZShjb25zdCBjaGFyICp0eXBlKSAidHlwZTogJXMiCit4ZW5f
ZGV2aWNlX3VucmVhbGl6ZShjb25zdCBjaGFyICp0eXBlKSAidHlwZTogJXMiCmRpZmYgLS1naXQg
YS9ody94ZW4veGVuLWJ1cy5jIGIvaHcveGVuL3hlbi1idXMuYwpuZXcgZmlsZSBtb2RlIDEwMDY0
NAppbmRleCAwMDAwMDAwMDAwLi5kZWRlMmQ5MTRhCi0tLSAvZGV2L251bGwKKysrIGIvaHcveGVu
L3hlbi1idXMuYwpAQCAtMCwwICsxLDEyNSBAQAorLyoKKyAqIENvcHlyaWdodCAoYykgQ2l0cml4
IFN5c3RlbXMgSW5jLgorICogQWxsIHJpZ2h0cyByZXNlcnZlZC4KKyAqLworCisjaW5jbHVkZSAi
cWVtdS9vc2RlcC5oIgorI2luY2x1ZGUgImh3L2h3LmgiCisjaW5jbHVkZSAiaHcvc3lzYnVzLmgi
CisjaW5jbHVkZSAiaHcveGVuL3hlbi1idXMuaCIKKyNpbmNsdWRlICJxYXBpL2Vycm9yLmgiCisj
aW5jbHVkZSAidHJhY2UuaCIKKworc3RhdGljIHZvaWQgeGVuX2J1c191bnJlYWxpemUoQnVzU3Rh
dGUgKmJ1cywgRXJyb3IgKiplcnJwKQoreworICAgIHRyYWNlX3hlbl9idXNfdW5yZWFsaXplKCk7
Cit9CisKK3N0YXRpYyB2b2lkIHhlbl9idXNfcmVhbGl6ZShCdXNTdGF0ZSAqYnVzLCBFcnJvciAq
KmVycnApCit7CisgICAgdHJhY2VfeGVuX2J1c19yZWFsaXplKCk7Cit9CisKK3N0YXRpYyB2b2lk
IHhlbl9idXNfY2xhc3NfaW5pdChPYmplY3RDbGFzcyAqY2xhc3MsIHZvaWQgKmRhdGEpCit7Cisg
ICAgQnVzQ2xhc3MgKmJ1c19jbGFzcyA9IEJVU19DTEFTUyhjbGFzcyk7CisKKyAgICBidXNfY2xh
c3MtPnJlYWxpemUgPSB4ZW5fYnVzX3JlYWxpemU7CisgICAgYnVzX2NsYXNzLT51bnJlYWxpemUg
PSB4ZW5fYnVzX3VucmVhbGl6ZTsKK30KKworc3RhdGljIGNvbnN0IFR5cGVJbmZvIHhlbl9idXNf
dHlwZV9pbmZvID0geworICAgIC5uYW1lID0gVFlQRV9YRU5fQlVTLAorICAgIC5wYXJlbnQgPSBU
WVBFX0JVUywKKyAgICAuaW5zdGFuY2Vfc2l6ZSA9IHNpemVvZihYZW5CdXMpLAorICAgIC5jbGFz
c19zaXplID0gc2l6ZW9mKFhlbkJ1c0NsYXNzKSwKKyAgICAuY2xhc3NfaW5pdCA9IHhlbl9idXNf
Y2xhc3NfaW5pdCwKK307CisKK3N0YXRpYyB2b2lkIHhlbl9kZXZpY2VfdW5yZWFsaXplKERldmlj
ZVN0YXRlICpkZXYsIEVycm9yICoqZXJycCkKK3sKKyAgICBYZW5EZXZpY2UgKnhlbmRldiA9IFhF
Tl9ERVZJQ0UoZGV2KTsKKyAgICBYZW5EZXZpY2VDbGFzcyAqeGVuZGV2X2NsYXNzID0gWEVOX0RF
VklDRV9HRVRfQ0xBU1MoeGVuZGV2KTsKKyAgICBjb25zdCBjaGFyICp0eXBlID0gb2JqZWN0X2dl
dF90eXBlbmFtZShPQkpFQ1QoeGVuZGV2KSk7CisgICAgRXJyb3IgKmxvY2FsX2VyciA9IE5VTEw7
CisKKyAgICB0cmFjZV94ZW5fZGV2aWNlX3VucmVhbGl6ZSh0eXBlKTsKKworICAgIGlmICh4ZW5k
ZXZfY2xhc3MtPnVucmVhbGl6ZSkgeworICAgICAgICB4ZW5kZXZfY2xhc3MtPnVucmVhbGl6ZSh4
ZW5kZXYsICZsb2NhbF9lcnIpOworICAgICAgICBpZiAobG9jYWxfZXJyKSB7CisgICAgICAgICAg
ICBlcnJvcl9wcm9wYWdhdGUoZXJycCwgbG9jYWxfZXJyKTsKKyAgICAgICAgICAgIHJldHVybjsK
KyAgICAgICAgfQorICAgIH0KK30KKworc3RhdGljIHZvaWQgeGVuX2RldmljZV9yZWFsaXplKERl
dmljZVN0YXRlICpkZXYsIEVycm9yICoqZXJycCkKK3sKKyAgICBYZW5EZXZpY2UgKnhlbmRldiA9
IFhFTl9ERVZJQ0UoZGV2KTsKKyAgICBYZW5EZXZpY2VDbGFzcyAqeGVuZGV2X2NsYXNzID0gWEVO
X0RFVklDRV9HRVRfQ0xBU1MoeGVuZGV2KTsKKyAgICBjb25zdCBjaGFyICp0eXBlID0gb2JqZWN0
X2dldF90eXBlbmFtZShPQkpFQ1QoeGVuZGV2KSk7CisgICAgRXJyb3IgKmxvY2FsX2VyciA9IE5V
TEw7CisKKyAgICB0cmFjZV94ZW5fZGV2aWNlX3JlYWxpemUodHlwZSk7CisKKyAgICBpZiAoeGVu
ZGV2X2NsYXNzLT5yZWFsaXplKSB7CisgICAgICAgIHhlbmRldl9jbGFzcy0+cmVhbGl6ZSh4ZW5k
ZXYsICZsb2NhbF9lcnIpOworICAgICAgICBpZiAobG9jYWxfZXJyKSB7CisgICAgICAgICAgICBl
cnJvcl9wcm9wYWdhdGUoZXJycCwgbG9jYWxfZXJyKTsKKyAgICAgICAgICAgIGdvdG8gdW5yZWFs
aXplOworICAgICAgICB9CisgICAgfQorCisgICAgcmV0dXJuOworCit1bnJlYWxpemU6CisgICAg
eGVuX2RldmljZV91bnJlYWxpemUoZGV2LCAmZXJyb3JfYWJvcnQpOworfQorCitzdGF0aWMgdm9p
ZCB4ZW5fZGV2aWNlX2NsYXNzX2luaXQoT2JqZWN0Q2xhc3MgKmNsYXNzLCB2b2lkICpkYXRhKQor
eworICAgIERldmljZUNsYXNzICpkZXZfY2xhc3MgPSBERVZJQ0VfQ0xBU1MoY2xhc3MpOworCisg
ICAgZGV2X2NsYXNzLT5yZWFsaXplID0geGVuX2RldmljZV9yZWFsaXplOworICAgIGRldl9jbGFz
cy0+dW5yZWFsaXplID0geGVuX2RldmljZV91bnJlYWxpemU7CisgICAgZGV2X2NsYXNzLT5idXNf
dHlwZSA9IFRZUEVfWEVOX0JVUzsKK30KKworc3RhdGljIGNvbnN0IFR5cGVJbmZvIHhlbl9kZXZp
Y2VfdHlwZV9pbmZvID0geworICAgIC5uYW1lID0gVFlQRV9YRU5fREVWSUNFLAorICAgIC5wYXJl
bnQgPSBUWVBFX0RFVklDRSwKKyAgICAuaW5zdGFuY2Vfc2l6ZSA9IHNpemVvZihYZW5EZXZpY2Up
LAorICAgIC5hYnN0cmFjdCA9IHRydWUsCisgICAgLmNsYXNzX3NpemUgPSBzaXplb2YoWGVuRGV2
aWNlQ2xhc3MpLAorICAgIC5jbGFzc19pbml0ID0geGVuX2RldmljZV9jbGFzc19pbml0LAorfTsK
KwordHlwZWRlZiBzdHJ1Y3QgWGVuQnJpZGdlIHsKKyAgICBTeXNCdXNEZXZpY2UgYnVzZGV2Owor
fSBYZW5CcmlkZ2U7CisKKyNkZWZpbmUgVFlQRV9YRU5fQlJJREdFICJ4ZW4tYnJpZGdlIgorCitz
dGF0aWMgY29uc3QgVHlwZUluZm8geGVuX2JyaWRnZV90eXBlX2luZm8gPSB7CisgICAgLm5hbWUg
PSBUWVBFX1hFTl9CUklER0UsCisgICAgLnBhcmVudCA9IFRZUEVfU1lTX0JVU19ERVZJQ0UsCisg
ICAgLmluc3RhbmNlX3NpemUgPSBzaXplb2YoWGVuQnJpZGdlKSwKK307CisKK3N0YXRpYyB2b2lk
IHhlbl9yZWdpc3Rlcl90eXBlcyh2b2lkKQoreworICAgIHR5cGVfcmVnaXN0ZXJfc3RhdGljKCZ4
ZW5fYnJpZGdlX3R5cGVfaW5mbyk7CisgICAgdHlwZV9yZWdpc3Rlcl9zdGF0aWMoJnhlbl9idXNf
dHlwZV9pbmZvKTsKKyAgICB0eXBlX3JlZ2lzdGVyX3N0YXRpYygmeGVuX2RldmljZV90eXBlX2lu
Zm8pOworfQorCit0eXBlX2luaXQoeGVuX3JlZ2lzdGVyX3R5cGVzKQorCit2b2lkIHhlbl9idXNf
aW5pdCh2b2lkKQoreworICAgIERldmljZVN0YXRlICpkZXYgPSBxZGV2X2NyZWF0ZShOVUxMLCBU
WVBFX1hFTl9CUklER0UpOworCisgICAgcWJ1c19jcmVhdGUoVFlQRV9YRU5fQlVTLCBkZXYsIE5V
TEwpOworICAgIHFkZXZfaW5pdF9ub2ZhaWwoZGV2KTsKK30KZGlmZiAtLWdpdCBhL2h3L3hlbnB2
L3hlbl9tYWNoaW5lX3B2LmMgYi9ody94ZW5wdi94ZW5fbWFjaGluZV9wdi5jCmluZGV4IDhjODZm
YjcwMzEuLjYwOGU1OTFiY2MgMTAwNjQ0Ci0tLSBhL2h3L3hlbnB2L3hlbl9tYWNoaW5lX3B2LmMK
KysrIGIvaHcveGVucHYveGVuX21hY2hpbmVfcHYuYwpAQCAtMjcsNiArMjcsNyBAQAogI2luY2x1
ZGUgImh3L2h3LmgiCiAjaW5jbHVkZSAiaHcvYm9hcmRzLmgiCiAjaW5jbHVkZSAiaHcveGVuL3hl
bi1sZWdhY3ktYmFja2VuZC5oIgorI2luY2x1ZGUgImh3L3hlbi94ZW4tYnVzLmgiCiAjaW5jbHVk
ZSAieGVuX2RvbWFpbmJ1aWxkLmgiCiAjaW5jbHVkZSAic3lzZW11L2Jsb2NrLWJhY2tlbmQuaCIK
IApAQCAtOTMsNiArOTQsOCBAQCBzdGF0aWMgdm9pZCB4ZW5faW5pdF9wdihNYWNoaW5lU3RhdGUg
Km1hY2hpbmUpCiAgICAgICAgIHhlbl9jb25maWdfZGV2X25pYyhuZF90YWJsZSArIGkpOwogICAg
IH0KIAorICAgIHhlbl9idXNfaW5pdCgpOworCiAgICAgLyogY29uZmlnIGNsZWFudXAgaG9vayAq
LwogICAgIGF0ZXhpdCh4ZW5fY29uZmlnX2NsZWFudXApOwogfQpkaWZmIC0tZ2l0IGEvaW5jbHVk
ZS9ody94ZW4veGVuLWJ1cy5oIGIvaW5jbHVkZS9ody94ZW4veGVuLWJ1cy5oCm5ldyBmaWxlIG1v
ZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAuLjQxNzcyZGM3M2EKLS0tIC9kZXYvbnVsbAorKysg
Yi9pbmNsdWRlL2h3L3hlbi94ZW4tYnVzLmgKQEAgLTAsMCArMSw1MyBAQAorLyoKKyAqIENvcHly
aWdodCAoYykgQ2l0cml4IFN5c3RlbXMgSW5jLgorICogQWxsIHJpZ2h0cyByZXNlcnZlZC4KKyAq
LworCisjaWZuZGVmIEhXX1hFTl9CVVNfSAorI2RlZmluZSBIV19YRU5fQlVTX0gKKworI2luY2x1
ZGUgImh3L3N5c2J1cy5oIgorCit0eXBlZGVmIHN0cnVjdCBYZW5EZXZpY2UgeworICAgIERldmlj
ZVN0YXRlIHFkZXY7Cit9IFhlbkRldmljZTsKKwordHlwZWRlZiB2b2lkICgqWGVuRGV2aWNlUmVh
bGl6ZSkoWGVuRGV2aWNlICp4ZW5kZXYsIEVycm9yICoqZXJycCk7Cit0eXBlZGVmIHZvaWQgKCpY
ZW5EZXZpY2VVbnJlYWxpemUpKFhlbkRldmljZSAqeGVuZGV2LCBFcnJvciAqKmVycnApOworCit0
eXBlZGVmIHN0cnVjdCBYZW5EZXZpY2VDbGFzcyB7CisgICAgLyo8IHByaXZhdGUgPiovCisgICAg
RGV2aWNlQ2xhc3MgcGFyZW50X2NsYXNzOworICAgIC8qPCBwdWJsaWMgPiovCisgICAgWGVuRGV2
aWNlUmVhbGl6ZSByZWFsaXplOworICAgIFhlbkRldmljZVVucmVhbGl6ZSB1bnJlYWxpemU7Cit9
IFhlbkRldmljZUNsYXNzOworCisjZGVmaW5lIFRZUEVfWEVOX0RFVklDRSAieGVuLWRldmljZSIK
KyNkZWZpbmUgWEVOX0RFVklDRShvYmopIFwKKyAgICAgT0JKRUNUX0NIRUNLKFhlbkRldmljZSwg
KG9iaiksIFRZUEVfWEVOX0RFVklDRSkKKyNkZWZpbmUgWEVOX0RFVklDRV9DTEFTUyhjbGFzcykg
XAorICAgICBPQkpFQ1RfQ0xBU1NfQ0hFQ0soWGVuRGV2aWNlQ2xhc3MsIChjbGFzcyksIFRZUEVf
WEVOX0RFVklDRSkKKyNkZWZpbmUgWEVOX0RFVklDRV9HRVRfQ0xBU1Mob2JqKSBcCisgICAgIE9C
SkVDVF9HRVRfQ0xBU1MoWGVuRGV2aWNlQ2xhc3MsIChvYmopLCBUWVBFX1hFTl9ERVZJQ0UpCisK
K3R5cGVkZWYgc3RydWN0IFhlbkJ1cyB7CisgICAgQnVzU3RhdGUgcWJ1czsKK30gWGVuQnVzOwor
Cit0eXBlZGVmIHN0cnVjdCBYZW5CdXNDbGFzcyB7CisgICAgLyo8IHByaXZhdGUgPiovCisgICAg
QnVzQ2xhc3MgcGFyZW50X2NsYXNzOworfSBYZW5CdXNDbGFzczsKKworI2RlZmluZSBUWVBFX1hF
Tl9CVVMgInhlbi1idXMiCisjZGVmaW5lIFhFTl9CVVMob2JqKSBcCisgICAgT0JKRUNUX0NIRUNL
KFhlbkJ1cywgKG9iaiksIFRZUEVfWEVOX0JVUykKKyNkZWZpbmUgWEVOX0JVU19DTEFTUyhjbGFz
cykgXAorICAgIE9CSkVDVF9DTEFTU19DSEVDSyhYZW5CdXNDbGFzcywgKGNsYXNzKSwgVFlQRV9Y
RU5fQlVTKQorI2RlZmluZSBYRU5fQlVTX0dFVF9DTEFTUyhvYmopIFwKKyAgICBPQkpFQ1RfR0VU
X0NMQVNTKFhlbkJ1c0NsYXNzLCAob2JqKSwgVFlQRV9YRU5fQlVTKQorCit2b2lkIHhlbl9idXNf
aW5pdCh2b2lkKTsKKworI2VuZGlmIC8qIEhXX1hFTl9CVVNfSCAqLwotLSAKMi4xMS4wCgoKX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVsIG1h
aWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54
ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==
