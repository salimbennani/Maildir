Return-Path: <linux-kernel-owner@vger.kernel.org>
Delivered-To: unknown
Received: from linux.intel.com (10.54.29.200:995) by likexu-workstation with
  POP3-SSL; 23 Nov 2018 08:29:23 -0000
X-Original-To: like.xu@linux.intel.com
Delivered-To: like.xu@linux.intel.com
Received: from orsmga006.jf.intel.com (orsmga006.jf.intel.com [10.7.209.51])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by linux.intel.com (Postfix) with ESMTPS id DBBB858037D;
	Thu, 22 Nov 2018 08:19:20 -0800 (PST)
Received: from orsmga101.jf.intel.com ([10.7.208.22])
  by orsmga006-1.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384; 22 Nov 2018 08:19:20 -0800
X-SG-BADATTACHMENTNOREPLY: True
IronPort-PHdr: =?us-ascii?q?9a23=3AwGYMiRFohuHkUs1jwuV1t51GYnF86YWxBRYc798d?=
 =?us-ascii?q?s5kLTJ75osy6bnLW6fgltlLVR4KTs6sC17KG9fi4EUU7or+5+EgYd5JNUxJXwe?=
 =?us-ascii?q?43pCcHRPC/NEvgMfTxZDY7FskRHHVs/nW8LFQHUJ2mPw6arXK99yMdFQviPgRp?=
 =?us-ascii?q?OOv1BpTSj8Oq3Oyu5pHfeQpFiCa+bL9oMBm6sRjau9ULj4dlNqs/0AbCrGFSe+?=
 =?us-ascii?q?RRy2NoJFaTkAj568yt4pNt8Dletuw4+cJYXqr0Y6o3TbpDDDQ7KG81/9HktQPC?=
 =?us-ascii?q?TQSU+HQRVHgdnwdSDAjE6BH6WYrxsjf/u+Fg1iSWIdH6QLYpUjm58axlVAHnhz?=
 =?us-ascii?q?sGNz4h8WHYlMpwjL5AoBm8oxBz2pPYbJ2JOPZ7eK7WYNEUSndbXstJWSJPAp2y?=
 =?us-ascii?q?YZYMAeUDM+ZWqIbyqEcBoxulHQmhBvjiyiNRhnLswaE3yfgtHAPA0Qc9H9wOqn?=
 =?us-ascii?q?PUrNDtOakVS++10bPIzTLeZP5Iwzj98pbIfQolofGMWrJ7bNTcyUkxGAPFlFqf?=
 =?us-ascii?q?spHuMjSQ1usRs2iU8epgWvi0hGIgsAF+uD2vxtwxionPiYIY0VPE+jtjwIYzO9?=
 =?us-ascii?q?K4TFR3Ydm+EJtfriyXMZZ9TMA6Q2xwpio21rkLtYSmcCUE1pgr3QPTZv+bf4SS?=
 =?us-ascii?q?4x/uVv6dLSlkiH54Yr6yiBS//VK9xuD9WMS4ykhGojdZntTKq3sDzQbc6tKdRf?=
 =?us-ascii?q?t45kqh2SiA1wTU6uxcP0A0mrTUK4Q7zr4ziJUTq0LDETHymEnsi6+WbEok9vCp?=
 =?us-ascii?q?6+ThfLrmuoeRO5Fohgz6KKgih8KyDfoiPgQTXGWX5f6w2bzh8EHhRbVFlPw2kq?=
 =?us-ascii?q?3XsJDAIsQbo7a0AwtU0oYl9ha+AC6q0NcGknkdKlJKZhaHg5HuO1DAJvD3E+2/?=
 =?us-ascii?q?jk+ykDdk2f/GJKftApbTIXjZlrfuY7J951RbyAopwtBT/4hUBa0ZIPLvRk/xs8?=
 =?us-ascii?q?TVDhs4Mwy33enrEtp81p4FVGKLA6+ZNr7SsFCS6uIuJemMeJEauDLnJ/c54P7u?=
 =?us-ascii?q?iGczmUUBcqmxwZsXdHe4E+xmI0qDYHrsns0OEWAQsgo+UezlkluCUTFIana2Xq?=
 =?us-ascii?q?I84Cw7CY28AYfCQICtnKKO3COhEpJKYWBGD0iGEW30eIWcR/cMdCWSL9djkjwD?=
 =?us-ascii?q?S7etUYwh1RaotA/8zLpqNe7U+iwetZL+29l5/ezTlRcu9TNqC8SRyX2CT2Zxnm?=
 =?us-ascii?q?kQXT85wLh/oVBhyleEyaV3medYFdxU5/NKSAs6L4TTz+5hBtD2WwLBeMqJSVm8?=
 =?us-ascii?q?TtWnBzExUsw+w9sUb0lhHNWiiwjJ3zC2DL8Ni7yLGJs0/7rf33frIcZx0XLG1K?=
 =?us-ascii?q?g7gFkgTctCLmmmhq959wjOCI/FiUSZl6C2dasC2C7B7nuMzW2LvEtASg5/Tb3F?=
 =?us-ascii?q?XWwDZkvRtdn2+1nNT6GwBrg9MgtO08iCKrBUZd3villGQPTjONHaY2+qn2ewBB?=
 =?us-ascii?q?CIxq6DbYbwemUd2jndB1YAkwwJ4XmGMg0+DD+7o23CFDxuCU7vY0T0/OZjsny7?=
 =?us-ascii?q?UFE7wxuKb0J70bq14QAahfqHRvMX37IEvjohqjpuEFa82dLWF8SPpw57cKpAZt?=
 =?us-ascii?q?M95U9N1XjFuAxlIpygM6dii0YCcwR2ukPu0Al3CoVAkMQwsHMm1g1yKbic0FNA?=
 =?us-ascii?q?cTOY0ov9OrnWKmn04RCuZLTa2lDY0NaK5KgP7O40pEnkvAGsDkAi6Wlo08FJ03?=
 =?us-ascii?q?uA4ZXHFBAdUZbvXUc46Rd7p6vWbTIg54zJz3JsN6q0sjjc298yAOslyxCgf8pQ?=
 =?us-ascii?q?Ma+eFQ/yFdEaCNaqKOAwh1epaRcENvhI9KEoJ8Oma+eG2KmzMedggTKql3hI7J?=
 =?us-ascii?q?p800KM7SV8TOHI0o0Bw/GZ2AuHSjj9gE2gssDxhYBLezUSEnCjxijjAY5bfrdy?=
 =?us-ascii?q?cpoTCWeyP823wc1zh4TsW3FE7lGjHU4J2MizdRqUcVP9xwxQ2V0LrnO9nSu30i?=
 =?us-ascii?q?J7kysurqqZxyHOx+XidBwaOm9EXmVijFHsIZSqgNAeRkSncw8plB6970bg26db?=
 =?us-ascii?q?vLh/L3XUQUpQfyn2LntuU6uqurqZfs5P7oglsSFWUOS6fFCbRaTxoxoc0yP/AW?=
 =?us-ascii?q?RewCo3eC2tupX8hxZ6kn6SLG5vrHrFfsF93RXf68bGRf5S3ToGQzN0iSLNCVi/?=
 =?us-ascii?q?PNmp/NOUmInFsu2lU2KhV5tTcTTkzI+atSu743FqDgO7n/yphtLnFg062zfh19?=
 =?us-ascii?q?Z2TSXIsAr8Yo7z2qW6K+1neVNkBF3968p8AYx+loowhJcN2XkVnJmV/HwHkXvt?=
 =?us-ascii?q?PtVfw67xcH0NRTsTyd7P/AflwFFjLm6Ox4/hVXWS2Mpha8O6YmMLwC096c9KBb?=
 =?us-ascii?q?yQ7LxFmyt1v1W5oRjQYfh7gjcS1/8u5GQGjOEOvQon1j+dDawKHUlEISzskAyF?=
 =?us-ascii?q?79W/rKVUfmmja7ax21RlndC9Er6CuBpTV2jjepctBiJw6sR/MFTR0Hz88I3ked?=
 =?us-ascii?q?/Qbc4NuR2QiRvPk+9VKJcpnPoQmSVnIX79vWEiy+MjkRxu2pS6sJKGKmp3+qK5?=
 =?us-ascii?q?HwVYNib0Z84I/jHtjKBentuZ3oy1H5VhHCkLU4XsTf6yDD0SsvHnPR6UEDIgsn?=
 =?us-ascii?q?ebBabfHQiH5Uh9tX3PFJSrN2yNKHkd0NVvXx2dJE1ZgAAJUzQ2hJ85Fga2xMP/?=
 =?us-ascii?q?dEd1/Cwe5ln9qhFU0OJnKwH/UnvDpAevcjo0SoKQLB9I4QFZ/UvVLdaS7uFuHy?=
 =?us-ascii?q?Fb452hqhaCKneAagRMDGEJXFGEBl/5Mrmv49nA7/aXBu6kI/TSZrWOrPRUV+2U?=
 =?us-ascii?q?ypK3zotm4zGMO92PP3llEv07w1dDUmp/G8jDgDUPTCoXly3WYs6fpRe8/DB3r8?=
 =?us-ascii?q?+l/PTqXgLv+ZWAC79IPdpz/BC2hL+JN/SMiyZhNTZYypQMyGfIyLcB3V4SiCJu?=
 =?us-ascii?q?dzi3HbQDry7NS63QlbFNDx4GcCN+L89I76M63glQNs/XkNL11rhkjvErD1dJT0?=
 =?us-ascii?q?DumsasZcYSOWGyKEvHBFqXNLSBPTDE2dz3brimSbJOjORYrRmwuTeAHk/nPzSD?=
 =?us-ascii?q?kSTpVh+1PeFNiiGbIAJRuIWnfhlxDmjjScrsagenP99vkT023bo0i2vWNW4dND?=
 =?us-ascii?q?hwaV9CoqeM4iNYnPp/HXdM7n5kLemChiaY4PPUKpcQsft3HCt0k/hW72g9y7tQ?=
 =?us-ascii?q?9CtEXuB6mDPOrt5ypFGriumOxSBhUBpLqzZLgpqEvERiOarD8JlAVm3J/BYM7W?=
 =?us-ascii?q?WWFhQLqMFpCtzpu6BM1NfPkLj/JytF89LRroMgAJ3PNMuEOXwmL1K9AyLdDwID?=
 =?us-ascii?q?SiCDOGrbhlRGl7ef6yvGgII9r83JkYcUTfdwXUYrH/caDQxOHNECKZ0/CjYvkb?=
 =?us-ascii?q?ObhcRL/nO7twTXS+1Zs4rBW/bUBu/gfmXKxYJYbgcFlOurZb8YMZf2jgk7MgF3?=
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A0AYAADL1fZbh0O0hNFiHgEGBwaBUQkLA?=
 =?us-ascii?q?YNrJ4N4iHeLIoINFGaWQIFzLBMBhDwCAoQSIjQJDQEDAQEBAQEBAgETAQEBCA0?=
 =?us-ascii?q?JCCkjDII2JAGCYgECAgEBAiAdAQE3AQQBCQEBChoCBQ8EDgICAwxIBhMFgxyBe?=
 =?us-ascii?q?ggCAgGoQ3CBL4J2AQEFhxoIgQuKYR2CFoEQgl41gUEBgxYSFE+CNYJXh1eYLQm?=
 =?us-ascii?q?KKYMeg10LGIFZI4RoiiSZdoINTTCDL4IbDAwLiF6FVigygQQBAQGKCCOCKQEB?=
X-IPAS-Result: =?us-ascii?q?A0AYAADL1fZbh0O0hNFiHgEGBwaBUQkLAYNrJ4N4iHeLIoI?=
 =?us-ascii?q?NFGaWQIFzLBMBhDwCAoQSIjQJDQEDAQEBAQEBAgETAQEBCA0JCCkjDII2JAGCY?=
 =?us-ascii?q?gECAgEBAiAdAQE3AQQBCQEBChoCBQ8EDgICAwxIBhMFgxyBeggCAgGoQ3CBL4J?=
 =?us-ascii?q?2AQEFhxoIgQuKYR2CFoEQgl41gUEBgxYSFE+CNYJXh1eYLQmKKYMeg10LGIFZI?=
 =?us-ascii?q?4RoiiSZdoINTTCDL4IbDAwLiF6FVigygQQBAQGKCCOCKQEB?=
X-IronPort-AV: E=Sophos;i="5.56,266,1539673200"; 
   d="scan'208";a="41902063"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from vger.kernel.org ([209.132.180.67])
  by mtab.intel.com with ESMTP; 22 Nov 2018 08:19:19 -0800
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S2405913AbeKWC7S (ORCPT <rfc822;like.xu@linux.intel.com>
        + 23 others); Thu, 22 Nov 2018 21:59:18 -0500
Received: from casper.infradead.org ([85.118.1.10]:59254 "EHLO
        casper.infradead.org" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S2392027AbeKWC7S (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Thu, 22 Nov 2018 21:59:18 -0500
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
        d=infradead.org; s=casper.20170209; h=Content-Transfer-Encoding:Content-Type:
        MIME-Version:References:In-Reply-To:Message-ID:Subject:Cc:To:From:Date:Sender
        :Reply-To:Content-ID:Content-Description:Resent-Date:Resent-From:
        Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:List-Id:List-Help:
        List-Unsubscribe:List-Subscribe:List-Post:List-Owner:List-Archive;
        bh=zVpGCxQkCuqqxxBqN/r6t1qB2KV38qGFsNbibAu3vds=; b=JPwdDobXttezkYdC+obVV8AcA8
        t96xuP7fDYCo4R9s0hGIxyAM5VePZR94cU9aSHg+Kml11kCZAevagEvuENllA0MeeNNdhNVVIe/y7
        czT8v6+DV407XfBk1OCZGkn600a2hUSdwJ3QMfLUSJkppJisx3p+TiPueb26sE4U4+MwgPZHUxCLx
        iFklxun4tW2SWeE52uFnY5hZr0632MzGJ9DaDJFfFjx5ddLqK8wIYaGzwdHg4cEQycouc6UEvsZaL
        e9bqnIeYC/5GHfCJ1+OnXPim65snVzq3ySldUANNwYtwU5IqbK0qNVvbSgwKiQUhxX6jZWT3ZNsNZ
        JXJN+VVg==;
Received: from 201.47.163.210.dynamic.adsl.gvt.net.br ([201.47.163.210] helo=coco.lan)
        by casper.infradead.org with esmtpsa (Exim 4.90_1 #2 (Red Hat Linux))
        id 1gPrhA-0005uL-Lg; Thu, 22 Nov 2018 16:19:13 +0000
Date: Thu, 22 Nov 2018 14:19:08 -0200
From: Mauro Carvalho Chehab <mchehab+samsung@kernel.org>
To: stakanov <stakanov@eclipso.eu>
Cc: Takashi Iwai <tiwai@suse.de>, linux-media@vger.kernel.org,
        linux-kernel@vger.kernel.org
Subject: Re: DVB-S PCI card regression on 4.19 / 4.20
Message-ID: <20181122141908.1ef2bcae@coco.lan>
In-Reply-To: <20181120140855.29f5dc3f@coco.lan>
References: <4e0356d6303c128a3e6d0bcc453ba1be@mail.eclipso.de>
        <20181120104217.5b487bcd@coco.lan>
        <1593929.t9Y74Rdlh1@roadrunner.suse>
        <20181120140855.29f5dc3f@coco.lan>
X-Mailer: Claws Mail 3.16.0 (GTK+ 2.24.32; x86_64-redhat-linux-gnu)
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

Stakanov,

Em Tue, 20 Nov 2018 14:08:55 -0200
Mauro Carvalho Chehab <mchehab+samsung@kernel.org> escreveu:

> Em Tue, 20 Nov 2018 14:20:01 +0100
> stakanov <stakanov@eclipso.eu> escreveu:
>=20
> > In data marted=C3=AC 20 novembre 2018 13:42:17 CET, Mauro Carvalho Cheh=
ab ha=20
> > scritto: =20
> > > Em Tue, 20 Nov 2018 13:11:58 +0100
> > >=20
> > > "Stakanov Schufter" <stakanov@eclipso.eu> escreveu:   =20
> > > > Sorry for the delay. Apparently my smtp exits are blocking me (for
> > > > whatever reason). I am trying now via web mailer.
> > > >=20
> > > >=20
> > > > In short, no it does not work. Only EPG, no pic no sound.
> > > > But the error message in dmesg is gone I think.
> > > >=20
> > > > uname -a
> > > > Linux silversurfer 4.20.0-rc3-2.gfe5d771-default #1 SMP PREEMPT Tue=
 Nov 20
> > > > 09:35:04 UTC 2018 (fe5d771) x86_64 x86_64 x86_64 GNU
> > > >=20
> > > > dmesg:
> > > >=20
> > > > [    6.412792] b2c2-flexcop: B2C2 FlexcopII/II(b)/III digital TV re=
ceiver
> > > > chip loaded successfully
> > > > [    6.416645] flexcop-pci: will use the HW PID filter.
> > > > [    6.416648] flexcop-pci: card revision 2
> > > > [    6.423749] scsi host10: usb-storage 9-3.1:1.0
> > > > [    6.423842] usbcore: registered new interface driver usb-storage
> > > > [    6.426029] usbcore: registered new interface driver uas
> > > > [    6.439251] dvbdev: DVB: registering new adapter (FlexCop Digita=
l TV
> > > > device)
> > > > [    6.440845] b2c2-flexcop: MAC address =3D 00:d0:d7:11:8b:58
> > > >=20
> > > > [    6.694999] dvb_pll_attach: delsys: 0, frequency range:
> > > > 950000000..2150000000
> > > > [    6.695001] b2c2-flexcop: found 'ST STV0299 DVB-S' .
> > > > [    6.695004] b2c2_flexcop_pci 0000:06:06.0: DVB: registering adap=
ter 0
> > > > frontend 0 (ST STV0299 DVB-S)...
> > > > [    6.695050] b2c2-flexcop: initialization of 'Sky2PC/SkyStar 2 DV=
B-S rev
> > > > 2.6' at the 'PCI' bus controlled by a 'FlexCopIIb' complete   =20
> > >=20
> > > Well, the Kernel bug is probably gone. I don't see any other recent
> > > changes that would be affecting the b2c2 flexcop driver.
> > >=20
> > > If you're successfully getting EPG data from the transponders, then it
> > > should also be receiving audio and video channels too, as, for the Ke=
rnel,
> > > there's no difference if a given program ID (PID) contains EPG, audio=
 or
> > > video.
> > >=20
> > > At the BZ, you're saying that you're using Kaffeine, right?
> > >=20
> > > There are a few reasons why you can't watch audio/video, but you're
> > > able to get EPG tables:
> > >=20
> > > 	- the audio/video PID had changed;
> > > 	- the audio/video is now encrypted;
> > > 	- too weak signal (or bad cabling).
> > >=20
> > > The EPG data comes several times per second on well known PIDs, via a=
 low
> > > bandwidth PID and it is not encrypted. So, it is usually trivial to g=
et
> > > it.
> > >=20
> > > I suggest you to re-scan your channels on Kaffeine, in order to force
> > > it to get the new PIDs. Also, please check that the channels you're
> > > trying to use are Free to the Air (FTA).
> > >=20
> > > You can also use libdvbv5 tools in order to check if you're not
> > > losing data due to weak signal/bad cabling. The newer versions
> > > of dvbv5-zap have a logic with detects and report data loses, when
> > > started on monitor mode (-m command line option). It also prints
> > > the transponder bandwidth, and check what PIDs are received.
> > >=20
> > > It is very useful to debug problems.
> > >=20
> > > Thanks,
> > > Mauro   =20
> >=20
> > I checked again and:
> > [sudo] password di root:=20
> > [    6.412792] b2c2-flexcop: B2C2 FlexcopII/II(b)/III digital TV receiv=
er chip=20
> > loaded successfully
> > [    6.440845] b2c2-flexcop: MAC address =3D 00:d0:d7:11:8b:58
> > [    6.695001] b2c2-flexcop: found 'ST STV0299 DVB-S' .
> > [    6.695004] b2c2_flexcop_pci 0000:06:06.0: DVB: registering adapter =
0=20
> > frontend 0 (ST STV0299 DVB-S)...
> > [    6.695050] b2c2-flexcop: initialization of 'Sky2PC/SkyStar 2 DVB-S =
rev=20
> > 2.6' at the 'PCI' bus controlled by a 'FlexCopIIb' complete
> > [ 6265.403360] b2c2_flexcop_pci 0000:06:06.0: DVB: adapter 0 frontend 0=
=20
> > frequency 10719000 out of range (950000..2150000)
> > [ 6265.405702] b2c2_flexcop_pci 0000:06:06.0: DVB: adapter 0 frontend 0=
=20
> > frequency 10723000 out of range (950000..2150000)
> > [ 6265.407120] b2c2_flexcop_pci 0000:06:06.0: DVB: adapter 0 frontend 0=
=20
> > frequency 10757000 out of range (950000..2150000)
> > [ 6265.408556] b2c2_flexcop_pci 0000:06:06.0: DVB: adapter 0 frontend 0=
=20
> > frequency 10775000 out of range (950000..2150000)
> > [ 6265.409754] b2c2_flexcop_pci 0000:06:06.0: DVB: adapter 0 frontend 0=
=20
> > frequency 10795000 out of range (950000..2150000)
> > [ 6399.837806] b2c2_flexcop_pci 0000:06:06.0: DVB: adapter 0 frontend 0=
=20
> > frequency 12713000 out of range (950000..2150000)
> > [ 6399.839144] b2c2_flexcop_pci 0000:06:06.0: DVB: adapter 0 frontend 0=
=20
> > frequency 12731000 out of range (950000..2150000) =20
>=20
> Ok. Now, min/max frequencies are at the same scale. For DVB-S,=20
> dvb_frontend_get_frequency_limits() returns both in kHz, so the frequency
> range is now OK.
>=20
> The tuning frequency is wrong through. 10,719,000 kHz - e. g. 10,719 MHz
> seems to be the transponder frequency you're trying to tune, and not the
> intermediate frequency used at the DVB-S board.
>=20
> That sounds to me either a wrong LNBf setting or a bug at libdvbv5 or
> at Kaffeine's side. What happens is that the typical European LNBFs are:
>=20
> 1) the "old" universal one:
>=20
> UNIVERSAL
> 	Universal, Europe
> 	Freqs     : 10800 to 11800 MHz, LO: 9750 MHz
> 	Freqs     : 11600 to 12700 MHz, LO: 10600 MHz
>=20
> 2) the "new" universal one, with seems to be used by most modern
> satellite dishes in Europe nowadays:
>=20
> EXTENDED
> 	Astra 1E, European Universal Ku (extended)
> 	Freqs     : 10700 to 11700 MHz, LO: 9750 MHz
> 	Freqs     : 11700 to 12750 MHz, LO: 10600 MHz
>=20
> Assuming that your satellite dish is equipped with an Astra-1E compatible
> LNBf, as you're trying to tune 10,719 MHz, you need to setup Kaffeine
> to use the EXTENDED LNBf, with covers the extended frequency range.
>=20
> Kaffeine/libdvbv5 will subtract this value from the LO frequency:
>=20
> 	10719 MHz - 9750 MHz =3D 969 MHz
>=20
> And pass the 969 MHz frequency for the Kernel to tune. As this
> is between the 950MHz..2150MHz limit, it won't produce any Kernel
> messages.
>=20
> Please notice that there were some bugs at v4l-utils and DVB-S/S2,
> so be sure to check the v4l-utils version you're using. The last
> one is 1.14.2 (released on Feb, 10 2018). I recommend you to have
> at least version 1.12.4 (released on May, 6 2017).

Did it work after using the EXTENDED LNBf on Kaffeine?


Thanks,
Mauro
