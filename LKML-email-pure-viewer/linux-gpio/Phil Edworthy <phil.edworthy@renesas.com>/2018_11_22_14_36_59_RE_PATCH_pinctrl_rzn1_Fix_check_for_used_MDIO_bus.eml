Return-Path: <linux-kernel-owner@vger.kernel.org>
Delivered-To: unknown
Received: from linux.intel.com (10.54.29.200:995) by likexu-workstation with
  POP3-SSL; 22 Nov 2018 22:45:34 -0000
X-Original-To: like.xu@linux.intel.com
Delivered-To: like.xu@linux.intel.com
Received: from orsmga008.jf.intel.com (orsmga008.jf.intel.com [10.7.209.65])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by linux.intel.com (Postfix) with ESMTPS id 3652558037D;
	Thu, 22 Nov 2018 06:37:08 -0800 (PST)
Received: from fmsmga102.fm.intel.com ([10.1.193.69])
  by orsmga008-1.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384; 22 Nov 2018 06:37:07 -0800
X-SG-BADATTACHMENTNOREPLY: True
IronPort-PHdr: =?us-ascii?q?9a23=3A3KehYxVltNpLGbUch1Wqbc1JghHV8LGtZVwlr6E/?=
 =?us-ascii?q?grcLSJyIuqrYZhGFtadThVPEFb/W9+hDw7KP9fy4CSpYud6oizMrSNR0TRgLiM?=
 =?us-ascii?q?EbzUQLIfWuLgnFFsPsdDEwB89YVVVorDmROElRH9viNRWJ+iXhpTEdFQ/iOgVr?=
 =?us-ascii?q?O+/7BpDdj9it1+C15pbffxhEiCCybL9uLxi6txndutULioZ+N6g9zQfErGFVcO?=
 =?us-ascii?q?pM32NoIlyTnxf45siu+ZNo7jpdtfE8+cNeSKv2Z6s3Q6BWAzQgKGA1+dbktQLf?=
 =?us-ascii?q?QguV53sTSXsZnxxVCAXY9h76X5Pxsizntuph3SSRIMP7QawoVTmk8qxmUwHjhj?=
 =?us-ascii?q?sZODEl8WHXks1wg7xdoBK9vBx03orYbJiIOPZiYq/ReNUXTndDUMlMTSxMGoOy?=
 =?us-ascii?q?YZUSAeodM+hWrIf9qFkPrRSiCgejC/jvyidKi3Ltwa06yvgtHR3a0AA8Ad4Dtm?=
 =?us-ascii?q?nfotXvNKcVVOC41LPGzTXCb/NSxDzz55XHcx4mofGWQbJwccrQwlQoGgPdjlWQ?=
 =?us-ascii?q?qIjlMymL2esQvWmb6PBgVf6vi28nsAxxuCagxsEyhYnSnI0V0UrI+jl+wIYwPN?=
 =?us-ascii?q?C1TlNwb928EJZIqS2WK497Ttk/T2xmpio20KAKtJ2ncCQQyZkqxQbTZ+GDfoWG?=
 =?us-ascii?q?+B7vSemcLSpiiH57Zr6zmwy+/Va9xuHkWMm7zlVHojZAn9TJtH0A2B/e58eCR/?=
 =?us-ascii?q?tz4EuuwjeC2gXX5+5fL004i6/WJ4A9zbMxkJcYrF7NETXsmErsia+bbkUk9fas?=
 =?us-ascii?q?6+TgerjmuJCcOJFuig3kMaQhhNa/AeImPQgKRWSb/v681LL78U34RrVFkOE2n7?=
 =?us-ascii?q?HHvJzGIckXvLO1DgFL3oo59hqyDCuq3M4ZkHQFNF5FfQiIj4ntO1HAOvD4CvK/?=
 =?us-ascii?q?jkyokDdqwfDGI7LgDozOLnfdirfhe6hy60pFxAo0w9Ff4YxbCqsaLfLtVU/+qs?=
 =?us-ascii?q?bYAgU6MwOq2ebnDsty1ocEVWKIGK+ZP7vesUWU6eI3P+mMeIgVtS75K/gk5P7h?=
 =?us-ascii?q?k2U1mFAAfaSy2ZsXaXa4HulpIkmDYHrshMsBHnkOvgYkUOPqj1iCWyZJZ3muR6?=
 =?us-ascii?q?I8+i07CIW+AIfDXI+tgaCB0z28HpFMZmBGF0qDEXHnd4ifX/cMaSSSItJukzAe?=
 =?us-ascii?q?VLihTZMh2g+qtAPg17VnKe/U8DUCtZ3/zNh1+/HTlRYq+Dx2CMSSzXuBT2Jznm?=
 =?us-ascii?q?MOQT8227tyoUh8yleFzKh5jOZUFd1V5/NVTAg6MYTQwPB9C9D3QgjBZMuGSE66?=
 =?us-ascii?q?QtW6BjE8Vsg+w8QOY0Z6GNWulArD0DCoA7IOk7yLBZo08r/T3nTrJsZ9zWrG27?=
 =?us-ascii?q?clj1U8XsRPMmimjLZl9wfPH47Jj1mZl6GyeKQfxiHN8n2PzW6PvE5CVg5wXr7I?=
 =?us-ascii?q?XXQeZkvQsNT46VnOT76oCbQ7LARBzdSOJbdNat3slV9GXuvsOMzCY2KtnGe9HQ?=
 =?us-ascii?q?uHyamSbIX0YWkd3D/SCE4fkw8N+3aKMgw+BiSko2LaFzFuEVPvY0Xx8ehxsn+7?=
 =?us-ascii?q?T0k0zx2UYE1lzba65hkVhfmEQfMJwr0EoDshqylzHFulwt3ZEcSAqBR7cKVce9?=
 =?us-ascii?q?w95kxH2nzftwFmOpygLqZihkMRcghtvkPu0Ql3BZtEkcQwsHwqyw9yI7qC0Fxd?=
 =?us-ascii?q?bzOYwYzwOrrPJ2nu/RCvbqnW2k3e0NeW4KsP9O40q1L5vAGtF0oi9Xpn3sJR03?=
 =?us-ascii?q?ud4JXKEQUTXYjwUkYx6xh1ubXabjMh6IPT0H1mKbO0vSPa29I1GOslzQ6tcM1b?=
 =?us-ascii?q?MKyaGw79Dc0bC9K1J+w3hlemdBQEPONV9K4qJM6mc/qG2Ki2POdvhj6mjGJH4J?=
 =?us-ascii?q?xj3UKI7SZzVunI35MdyfGCwgSHTyv8jEumss3vmYFEeCseEXalxSnlBI5efKty?=
 =?us-ascii?q?fYkQBGeqIs23wMh+hpH3V35Z8l6jG00J2MuzdRWOaFz92BVa1V4Lrny/hSu40z?=
 =?us-ascii?q?t0nikzrqqewCPB2f7iewcAOmJRQmltk03sIYmtg98GRkeoaxUmmwW/5Ub9wahW?=
 =?us-ascii?q?v6B/L2jVQUdVcCn6NWBiUq2strWcZ85D8o8nsSJSUO6ke1CVVqb9owcG0yPkB2?=
 =?us-ascii?q?ZfxDE7eyuqu5njhBx6lWSdIW13rHrYf8Fw2Bje6MbdRf5XwjoJWi14hSPLCVi7?=
 =?us-ascii?q?Otmj5c+UmIvbsuCiS2KhUYVecSvxwoOatyu75mpqDQekn/+pmd3nEgk60Snl2N?=
 =?us-ascii?q?lsTijIqBf8Yo/216W1K+5nf09oBEPi5Mp+AI1xjowwhJQI03gAmpqV5WYHkXv0?=
 =?us-ascii?q?MdhD2aPxdn0NSSQJw97U5gjow0ljLnOPx4LkWXSR2MphZ9+mYmwI3iIx9dxFCK?=
 =?us-ascii?q?CR7LZchyt6vkK4rR7NYfh6hjodyuEh6H8Aj+EJpQoi1COdAr8JEElcPCzskQmI?=
 =?us-ascii?q?7t+koKVWYmavbaa/1E5kkd+9C7GCpxlWWGzldZc6AS9w8sJ/PUrJ0H3y6YHrYs?=
 =?us-ascii?q?PcbNwNuR2PjxfPkfJVJ4kvmfoQiipqImb9vXwjy+4mgh1ix5C6vI6bK2pz+KK1?=
 =?us-ascii?q?GAJXNjrwZ8kL4DHikb5entqK34CoBphhBjILXJ7yQfOpCj0Ss+nnNx2VED09sX?=
 =?us-ascii?q?qbHbvfHQmC6EZptX7PEparN22JK3kd19ltWB6dJElHigAOQDo6hoI5FhytxMH5?=
 =?us-ascii?q?a0h2/DcR5lrlqhdWzuJoKgLyUmPepAeudzc1R4KTLBtQ7gFe+UjVNdaS4f50Hy?=
 =?us-ascii?q?Fd5pehthCCKnSHZwRUCmEEQk6ECErmPraw/tnM6fSYCvC9L/vTYrWOtOpeWO2T?=
 =?us-ascii?q?xZ+01otm/jCMNtiAP3V4Dv073FZDUm59G8jDhzoPTCkXnTrXb8GHvBe85jF3rs?=
 =?us-ascii?q?en/fXrXwLv+JKPC6ZIPtVp4Ry2mqCDN+ifhCtiLTZY15UMxWLHybQF3V4SjT1u?=
 =?us-ascii?q?eCepEbgaqSHNS6fQkLdNDxEHcyNzKNdI76Uk0wlNJ8Hbi9D11r15jvIvCFdFT1?=
 =?us-ascii?q?vhms63aswQPmG9L0jKBEKKNLSAOD3KzNv7YaK6Sb1MkupUswe8tiqcE0/mJj6D?=
 =?us-ascii?q?jSXmVwizMeFQiyGWJAZRuJymfRZ3F2fiTMjqahm6MNJsiT02wLs0hm7FNGIGMD?=
 =?us-ascii?q?h8dV9NoaOU7S9Cnvp/HGlB5GJ/LeaYgyaZ8/XYKpEOvPt3AyR0kvhW72ggx7RJ?=
 =?us-ascii?q?7CFLWvp1lTDWrt5vpVGmj+aOxiBmUBpItjZEmoaLsV9+NqXe85lKQWzE8w4V7W?=
 =?us-ascii?q?WMFxQKoMNoC931tKBWz9jPlaTzJy9D8tLU58QcAcfUJdmDMHogNxrpBTHVABEE?=
 =?us-ascii?q?TT6tKWHQmUhdnOuO+X2Sq5hp4qTrzaEPT7hdHHwyDPYTDAwxHNsYJYxfQD4+nr?=
 =?us-ascii?q?PdisMUo3Oj+kr/XsJf66jHV/baLPnwLyyFjagMMwMIwLe+IIgMMZfn211KcFR8?=
 =?us-ascii?q?kZ/DAAzbWtUb8X4pVRM9vEgYqCs2dWY0wU+wL1r1uHI=3D?=
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A0AUAACdvvZbh0O0hNFiHQEBBQEHBQGBU?=
 =?us-ascii?q?QgBCwGBMFCBXAQLJwqHNQOETos3SoINFJcmgSQDRxgBGBMBiFIiNAkNAQMBAQE?=
 =?us-ascii?q?BAQECARMBAQEIDQkIKSMMgjYkAYJhAQEBAQIBAQIkEwYBATcBBQkBAQEBCA4KH?=
 =?us-ascii?q?hADLyUCBA4FBQODGYFqAw0IAQIBAZ5pAooHgWwzgnYBAQWFAhiCBgiMCYFXP4E?=
 =?us-ascii?q?RRoIeLogzgiaLE5RxBwKCHASPJ4FZiC6HAZgJAgQCBAUCDQEBBYFGgg1NI4M8g?=
 =?us-ascii?q?huDbYpScoEFAQEhixQBgR4BAQ?=
X-IPAS-Result: =?us-ascii?q?A0AUAACdvvZbh0O0hNFiHQEBBQEHBQGBUQgBCwGBMFCBXAQ?=
 =?us-ascii?q?LJwqHNQOETos3SoINFJcmgSQDRxgBGBMBiFIiNAkNAQMBAQEBAQECARMBAQEID?=
 =?us-ascii?q?QkIKSMMgjYkAYJhAQEBAQIBAQIkEwYBATcBBQkBAQEBCA4KHhADLyUCBA4FBQO?=
 =?us-ascii?q?DGYFqAw0IAQIBAZ5pAooHgWwzgnYBAQWFAhiCBgiMCYFXP4ERRoIeLogzgiaLE?=
 =?us-ascii?q?5RxBwKCHASPJ4FZiC6HAZgJAgQCBAUCDQEBBYFGgg1NI4M8ghuDbYpScoEFAQE?=
 =?us-ascii?q?hixQBgR4BAQ?=
X-IronPort-AV: E=Sophos;i="5.56,266,1539673200"; 
   d="scan'208";a="53963589"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from vger.kernel.org ([209.132.180.67])
  by mtab.intel.com with ESMTP; 22 Nov 2018 06:37:05 -0800
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S2437488AbeKWBQk (ORCPT <rfc822;like.xu@linux.intel.com>
        + 23 others); Thu, 22 Nov 2018 20:16:40 -0500
Received: from mail-eopbgr1410100.outbound.protection.outlook.com ([40.107.141.100]:29462
        "EHLO JPN01-OS2-obe.outbound.protection.outlook.com"
        rhost-flags-OK-OK-OK-FAIL) by vger.kernel.org with ESMTP
        id S2395565AbeKWBQk (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
        Thu, 22 Nov 2018 20:16:40 -0500
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=renesasgroup.onmicrosoft.com; s=selector1-renesas-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=coS/fMQPkR23/A7HbbtJM6cBr8oyoId0NSvzlbF8quo=;
 b=Z/J7rMiZLhRC6IZRg5j20VGbuq8X2Hu3h2+xtJ6RZL+7R/Nu34yFqHxlQ3kHTcHDLPazdyxQl+HQRii2QcclqPi18uFoYCpjHseYBYzAnecdRtWZWhtf5m0kVqwupjMSsxl14MNvFVeu25q1FPnaqPdb4I7TJsWp3EYjw/jlwVQ=
Received: from TY1PR01MB1769.jpnprd01.prod.outlook.com (52.133.163.146) by
 TY1PR01MB1802.jpnprd01.prod.outlook.com (52.133.164.13) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.1361.15; Thu, 22 Nov 2018 14:36:59 +0000
Received: from TY1PR01MB1769.jpnprd01.prod.outlook.com
 ([fe80::7484:f2b6:9b32:2c6]) by TY1PR01MB1769.jpnprd01.prod.outlook.com
 ([fe80::7484:f2b6:9b32:2c6%5]) with mapi id 15.20.1294.048; Thu, 22 Nov 2018
 14:36:59 +0000
From: Phil Edworthy <phil.edworthy@renesas.com>
To: Simon Horman <horms@verge.net.au>
CC: Geert Uytterhoeven <geert@linux-m68k.org>,
        Jacopo Mondi <jacopo@jmondi.org>,
        Linus Walleij <linus.walleij@linaro.org>,
        "linux-gpio@vger.kernel.org" <linux-gpio@vger.kernel.org>,
        "linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>,
        "linux-renesas-soc@vger.kernel.org" 
        <linux-renesas-soc@vger.kernel.org>
Subject: RE: [PATCH] pinctrl: rzn1: Fix check for used MDIO bus
Thread-Topic: [PATCH] pinctrl: rzn1: Fix check for used MDIO bus
Thread-Index: AQHUgCOKwJ2xop+DoEaLvwVyl7+lsaVb2W2AgAAF5bA=
Date: Thu, 22 Nov 2018 14:36:59 +0000
Message-ID: <TY1PR01MB176930707EE4A5F730F1BF99F5DB0@TY1PR01MB1769.jpnprd01.prod.outlook.com>
References: <20181119161838.10610-1-phil.edworthy@renesas.com>
 <20181122140832.qcrhmmybdzbvfv6s@verge.net.au>
In-Reply-To: <20181122140832.qcrhmmybdzbvfv6s@verge.net.au>
Accept-Language: en-GB, en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
authentication-results: spf=none (sender IP is )
 smtp.mailfrom=phil.edworthy@renesas.com; 
x-originating-ip: [193.141.220.21]
x-ms-publictraffictype: Email
x-microsoft-exchange-diagnostics: 1;TY1PR01MB1802;20:ncttgdXO2oS71JB6Dvv0r24hhrh4RGhDDu2rjKq7R2UfQsg7U1HxVmgqC+s7PMcy7QvGGp9B7npb6HMSPw4lagAjBAfc3W4XFnieUUdxlaFnSRVLm/gIXKg7pMxqw+2FGtL2ZcQXGxOOCy5OoIJbVt6kUldYhi9zKIixbPnCzws=
x-ms-exchange-antispam-srfa-diagnostics: SOS;
x-ms-office365-filtering-correlation-id: 280ba10c-672b-4779-d508-08d65087f5ca
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0;PCL:0;RULEID:(2390098)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600074)(711020)(4618075)(2017052603328)(7153060)(7193020);SRVR:TY1PR01MB1802;
x-ms-traffictypediagnostic: TY1PR01MB1802:
x-microsoft-antispam-prvs: <TY1PR01MB18020EEBDCB2F32AAF4CE5BBF5DB0@TY1PR01MB1802.jpnprd01.prod.outlook.com>
x-ms-exchange-senderadcheck: 1
x-exchange-antispam-report-cfa-test: BCL:0;PCL:0;RULEID:(8211001083)(6040522)(2401047)(5005006)(8121501046)(3231442)(944501410)(52105112)(3002001)(10201501046)(93006095)(93001095)(6055026)(148016)(149066)(150057)(6041310)(201703131423095)(201702281528075)(20161123555045)(201703061421075)(201703061406153)(20161123564045)(20161123562045)(20161123558120)(20161123560045)(201708071742011)(7699051)(76991095);SRVR:TY1PR01MB1802;BCL:0;PCL:0;RULEID:;SRVR:TY1PR01MB1802;
x-forefront-prvs: 0864A36BBF
x-forefront-antispam-report: SFV:NSPM;SFS:(10019020)(366004)(396003)(346002)(39860400002)(376002)(136003)(199004)(189003)(105586002)(575784001)(2906002)(486006)(86362001)(14454004)(476003)(102836004)(53936002)(316002)(76176011)(7696005)(256004)(14444005)(6436002)(446003)(71200400001)(71190400001)(44832011)(11346002)(68736007)(2900100001)(106356001)(478600001)(8676002)(6116002)(186003)(25786009)(97736004)(229853002)(55016002)(4326008)(54906003)(9686003)(3846002)(6916009)(26005)(5660300001)(53546011)(7736002)(33656002)(66066001)(6506007)(8936002)(74316002)(99286004)(305945005)(6246003)(81156014)(81166006);DIR:OUT;SFP:1102;SCL:1;SRVR:TY1PR01MB1802;H:TY1PR01MB1769.jpnprd01.prod.outlook.com;FPR:;SPF:None;LANG:en;PTR:InfoNoRecords;A:1;MX:1;
x-microsoft-antispam-message-info: Ql1bbQ9NmILJK8DfbNO5v8fsyMNllMr4NIwJQVUKi72BehijYAFuJwjflKdmB9iKx5ZtSf2GQb5ILjlHVweYz1r8o9aLavIu0QPsaeBWU5o2TT3bvt+FE8n3nCRJqt2m/OZXVPXZmKVZ5gtWyrUN/D2GHbefLP7gxzpeBBc9aVdS+o8WF0fsPAcopLyUzsz5AkRrWHGYYU/rqaHBBtkciPtOcML7JGFizK+wY954L5ZjLrBlCU8XhRCo4raDy0j56vLdSJFUIYltspFYFaGomlZYTGfjbo+3Uhl7wbyulHRHAQV+jsMC0/w/xVYbBLPz/xDkWzJvyCcMsQ6vmQzrun3/A6DmRxUPpz/0spLsqQg=
spamdiagnosticoutput: 1:99
spamdiagnosticmetadata: NSPM
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-OriginatorOrg: renesas.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 280ba10c-672b-4779-d508-08d65087f5ca
X-MS-Exchange-CrossTenant-originalarrivaltime: 22 Nov 2018 14:36:59.2200
 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 53d82571-da19-47e4-9cb4-625a166a4a2a
X-MS-Exchange-Transport-CrossTenantHeadersStamped: TY1PR01MB1802
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

Hi Simon,

On 22 November 2018 14:09 Simon Horman wrote:
> On Mon, Nov 19, 2018 at 04:18:38PM +0000, Phil Edworthy wrote:
> > This fixes the check for unused mdio bus setting and the following
> > static checker warning:
> >  drivers/pinctrl/pinctrl-rzn1.c:198 rzn1_pinctrl_mdio_select()
> >  warn: always true condition '(ipctl->mdio_func[mdio] >=3D 0) =3D> (0-u=
32max
> >=3D 0)'
> >
> > It also fixes the return var when calling of_get_child_count()
> >
> > Reported-by: Dan Carpenter <dan.carpenter@oracle.com>
> > Signed-off-by: Phil Edworthy <phil.edworthy@renesas.com>
> > ---
> > v2:
> >  - Don't rely on rely on the implicit typecast from -1 to uint
> > ---
> >  drivers/pinctrl/pinctrl-rzn1.c | 4 ++--
> >  1 file changed, 2 insertions(+), 2 deletions(-)
> >
> > diff --git a/drivers/pinctrl/pinctrl-rzn1.c
> > b/drivers/pinctrl/pinctrl-rzn1.c index 57886dcff53d..cc0e5aa9128a
> > 100644
> > --- a/drivers/pinctrl/pinctrl-rzn1.c
> > +++ b/drivers/pinctrl/pinctrl-rzn1.c
> > @@ -112,7 +112,7 @@ struct rzn1_pinctrl {
> >  	struct rzn1_pinctrl_regs __iomem *lev2;
> >  	u32 lev1_protect_phys;
> >  	u32 lev2_protect_phys;
> > -	u32 mdio_func[2];
> > +	int mdio_func[2];
>=20
> Hi Phil,
>=20
> rzn1_pinctrl_mdio_select() assigns values of type u32 to elements of
> mdio_func. Perhaps that warrants cleaning up too?
The source of the 'u32 func' arg is ultimately u32 values read from DT.
The code already ensures that these cannot be bigger than 7, so is fine
I think.

Thanks
Phil


> >  	struct rzn1_pin_group *groups;
> >  	unsigned int ngroups;
> > @@ -810,8 +810,8 @@ static int rzn1_pinctrl_probe_dt(struct
> platform_device *pdev,
> >  	struct device_node *np =3D pdev->dev.of_node;
> >  	struct device_node *child;
> >  	unsigned int maxgroups =3D 0;
> > -	unsigned int nfuncs =3D 0;
> >  	unsigned int i =3D 0;
> > +	int nfuncs =3D 0;
> >  	int ret;
> >
> >  	nfuncs =3D of_get_child_count(np);
> > --
> > 2.17.1
> >
