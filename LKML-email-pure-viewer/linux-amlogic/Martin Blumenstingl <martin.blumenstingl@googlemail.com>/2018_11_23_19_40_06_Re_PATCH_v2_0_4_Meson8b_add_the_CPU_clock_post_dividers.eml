Return-Path: <linux-kernel-owner@vger.kernel.org>
Delivered-To: unknown
Received: from linux.intel.com (10.54.29.200:995) by likexu-workstation with
  POP3-SSL; 24 Nov 2018 12:37:12 -0000
X-Original-To: like.xu@linux.intel.com
Delivered-To: like.xu@linux.intel.com
Received: from FMSMGA003.fm.intel.com (fmsmga003.fm.intel.com [10.253.24.29])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by linux.intel.com (Postfix) with ESMTPS id BCDD958037D;
	Fri, 23 Nov 2018 11:40:24 -0800 (PST)
Received: from fmsmga102.fm.intel.com ([10.1.193.69])
  by FMSMGA003-1.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384; 23 Nov 2018 11:40:24 -0800
X-SG-BADATTACHMENTNOREPLY: True
IronPort-PHdr: =?us-ascii?q?9a23=3Aa05BYBcnA1nUmnxVfRAmYDjnlGMj4u6mDksu8pMi?=
 =?us-ascii?q?zoh2WeGdxc68ZRaN2/xhgRfzUJnB7Loc0qyK6/CmATRIyK3CmUhKSIZLWR4BhJ?=
 =?us-ascii?q?detC0bK+nBN3fGKuX3ZTcxBsVIWQwt1Xi6NU9IBJS2PAWK8TW94jEIBxrwKxd+?=
 =?us-ascii?q?KPjrFY7OlcS30P2594HObwlSizexfbB/IA+qoQnNq8IbnZZsJqEtxxXTv3BGYf?=
 =?us-ascii?q?5WxWRmJVKSmxbz+MK994N9/ipTpvws6ddOXb31cKokQ7NYCi8mM30u683wqRbD?=
 =?us-ascii?q?VwqP6WACXWgQjxFFHhLK7BD+Xpf2ryv6qu9w0zSUMMHqUbw5Xymp4rx1QxH0li?=
 =?us-ascii?q?gIKz858HnWisNuiqJbvAmhrAF7z4LNfY2ZKOZycqbbcNgHR2ROQ9xRWjRODYOy?=
 =?us-ascii?q?bYQBD+QPM+VFoYfju1QOtgO+CAu3CePz1jNFnGP60bEm3+kjFwzNwQwuH8gJsH?=
 =?us-ascii?q?TRtNj7M70dUfqpzKnJyzXIcu5b2TPg6IjNbB8hp+qMXa5xccrXxkkvEx7Og1KV?=
 =?us-ascii?q?qYP/JTOVyuUNs26B4+V7UeKvlmsnpB93oji02scsi4/Jho0Ryl3f+iV5x4E1Jd?=
 =?us-ascii?q?K8SEFlZN6rCppQtyWAO4RqRcMiRnhltSAnwbMIvp67eTIFyJUhxxPHbPyIbpKI?=
 =?us-ascii?q?4hXiVOmMOzt3mHVleLenixax70eg0Ov8Wdew0FpQqSpFiNbMumgM1xzV5MiHUO?=
 =?us-ascii?q?Fy8Vq/1jmVyg/f8OZEIVo7lafdNpUvwaYwm4INvUjfGiL6glj6gaGIekk+5+Sl?=
 =?us-ascii?q?6Pjrbq/nq5KeL4N4lB3yP6A0lsG8Aek0KBUCUmmZ9OimybHu+Uz0TbNXhfMsiK?=
 =?us-ascii?q?bZqorVJcEDq665HQBV1oEj5g6hDzepztsYh2MLLFFbdxKdiYjmJVXOLOr/Dfel?=
 =?us-ascii?q?jFSgiDZrx/bYMb39GpjBMGTPnbP7cbpg5UNQ1hA/wc1c6p5IEL0MIfD+Vlf0tN?=
 =?us-ascii?q?PCDx85NwK0w/zgCNV4zo4eXWOPAqmEMKLdqFOI5fwgI/OKZIALvDbxMv8l5vDo?=
 =?us-ascii?q?jXAng18QZrep3ZQJZ3CiBPhmIFuWYWDqgtgfFWcGpA0+TPbliFGaSz5ce26yX7?=
 =?us-ascii?q?4g5jE8EI+mCYbDRoOzj7Cb0ya7A4ZbZmRHClCKDHfpeJ+IW/YKaCKOPMBhliYI?=
 =?us-ascii?q?WqSmS48kzRuurhP1y6J7LurI/S0VrZLj28J05+3Pjx4y8iZ4D8SA026XSWF0kX?=
 =?us-ascii?q?gFRzs33KB5vEx8xU2P0al+g/xEC9NT4+lFXRs9NZ7Z1+Z6Ecz9WhrdfteVT1ar?=
 =?us-ascii?q?WtemATYvQd4rwN8OZEB9G9Oljh3Y2yqqArkVl6GEBZAu86Lc2WTxKNh5y3rcyK?=
 =?us-ascii?q?YhiFwmSNNVNWK6nq5/6xTTB4nRnkqDjKaqdaMc3C3X+GeZ12WOvlpVUApxUaXD?=
 =?us-ascii?q?QHAeaVHardX/5kPeUbCuDa4rPRdGyc6HMqFKcMHmjU1aRPf/P9TTe2GxlH22BR?=
 =?us-ascii?q?qSwrOMbZDle2MS3CjGDEgEkgYT/WuJNAQkByehpX7eAyJqFV71f0zs9ux+omuh?=
 =?us-ascii?q?TkAo1wGKc1Fh172t9xEIn/OcVe0c0qgEuCg7rTV0B0iy39TRB9qEpApheaFcbM?=
 =?us-ascii?q?g54FdG02LZqgN8MoahL6Bkml4RbQB3s1ny2BVwD4VKidIqo28yzApuNaKY10tM?=
 =?us-ascii?q?eC6C0pDuJLLbMGny8wqpa67NxF7e1s2b+qMO6PQ+tlXisxulFksk83V7zdZV12?=
 =?us-ascii?q?GQ6YnNDAoXSZjxSFo49wBmp7HGZSkw/5/U1XxpMamzrj/C29IoCPE5yhq6eNdf?=
 =?us-ascii?q?KqeEFA70E80VHMWuLO0qm160bhMLJuxS9ag0P9+4ePuCwqKkIOFgnDe+h2Rd/I?=
 =?us-ascii?q?99yl6M9zZ7SuPQxZkFx++X3wSZWDb8lluuqd33lp1eajEUHWq/zjbkCZVVZq1z?=
 =?us-ascii?q?e4YLFGivL9e2xtV4m57iRXpY+ES/CFMB3c+jYQCSYEDl3Q1MyUQXpmSqmCulzz?=
 =?us-ascii?q?Bujz4ltKue3CzUzOTkexoKIWpLRGhkjVfxLom4ldEaXE60bwc3kBup/1r1x69e?=
 =?us-ascii?q?pK5nNWncXV9IfzTqL2FlSqawrLuCbNJV55MyrCpXV/6wYVaERb7nohsWyj/sEH?=
 =?us-ascii?q?FaxD8maT6qoJL5nxphhWKZLXZzqmfZeM5qyRfe4tzcWeBe3j4cSCZkjjnXA0C2?=
 =?us-ascii?q?P8O18tWMi5fDrue+WnqhV51SayXqzZmMtDCm5W1sGhC/m/Gzmtv6EQk1yyP71t?=
 =?us-ascii?q?9qVTnWoxb4eIXky6O6Med/dElyGFD889Z6Gp15koYohpEfw2IahpaW/XoAi2vz?=
 =?us-ascii?q?Ks9U2aH9bHoMQz4E3djV7RPh2E1iKHKJ2o34Wm+cwstne9m1fGcW1jgh4MBNDa?=
 =?us-ascii?q?ee9KZEkjdtolqksQLRZuBwnzcHxvsp8nIageAJuAw2wyWZA7ASG1RYPCP2mxSJ?=
 =?us-ascii?q?6dC+sLtYZGK1fbes00p+mMirDKuerQFERHb5ZpAiEDdz7splMVLAyn3z6pz+d9?=
 =?us-ascii?q?nWYtIerRmUkxbGj+hIJ5M9jPsKhSx7OW3juX0p0fI0jRtr3ZuipoiIN31t/L6l?=
 =?us-ascii?q?Ah5fLjD1YsIT+jL3gqpEkMeZwZuvHol/FTURR5TnU+ioED0JuPTjNgaOFiA8q3?=
 =?us-ascii?q?iBFbreGw+f9Flpr3bVH5+3MHGXIWETzc9+SxmFOExfnAcUUS0mnp4+EwCm3s3g?=
 =?us-ascii?q?f11/5jAM/V74sRpMx/lsNxn+VGffuQipZi01SJiZMBpZ8AVC613JPsyZ6+J5Bz?=
 =?us-ascii?q?tY8YG5rAyRNmybYBxFAnoTVUyDA1DjI6Oi5d3d8+WDAuq+Lv3OYaiBqOBEVveI?=
 =?us-ascii?q?w46v3ZVi/zqWKsqPOXxiBeUh2kVfRXB5B9jZmzIXRiwVjS3NatCUpAym9i1rtM?=
 =?us-ascii?q?y/8+nrWAHy5YuJEbRSKs5i+xS3gaeFKu6Rizx1KTde1pMQ23DIzKIT00IViyFr?=
 =?us-ascii?q?bzOtC6gPtTbRTKLMna9aFx4aayRuNMtR8qIzxA9NNdTAitPy0L54geU4C1NEVV?=
 =?us-ascii?q?znh8GoatYGI2C7NFPbGkmLMK6KKiHMw8Hyeam8U6FfjP1Itx2svjaWC0/jMSqC?=
 =?us-ascii?q?lznqVBCvMPtAjCKBPBxZt4GybAxtCXX4TN/9bh27Mdl3jSA5wLEuh3PKM3IcPi?=
 =?us-ascii?q?Z4c09XsrKQ6iZYiO1lG2Nd9nplMfWEmyGB4ubCN5YZquFrDTp0lu5A5HQ6yqBY?=
 =?us-ascii?q?7CVFRPxzhSvTocRio1CgkumT1DVnVABCpSpMhIKOpU9iI7nW9oFcWXbY+xIA9X?=
 =?us-ascii?q?mQCxUPp9d/FtLjobxfytjRm6L1MzpC99PU/c0BB8nbMs6HMXwhMQb3Fz7QFgcK?=
 =?us-ascii?q?UTmrNWTHjUxHjP6S7mGVroQ9qpX0mJsBULlbVFk0FvMcEktkHdwCL41xXjMrir?=
 =?us-ascii?q?ObiM8I5XyjrBjeXslav5bHVu6MDvXrMjqWkb5EZx5biY//eKIeN4mz8lZncUVg?=
 =?us-ascii?q?m4LFUx7WVMpIuTF7aQk7iE9E4Xx/RHc+nUnib1X+zmUUEKuRlwQqiw02S+Aw8T?=
 =?us-ascii?q?rq+Es2IFXO7H81mVMtmNOjizSMdTP3N7uxW45SIyXzsEc1P5byQgIzZgq3yx83?=
 =?us-ascii?q?fAzYTq5c2uMzPVtgjxXR7N4WQaZR?=
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A0CSAAAMV/hbh0O0hNFkHgEGBwaBVAYLA?=
 =?us-ascii?q?YJpgQIng3mDe5Adgg0UmRguDQYBiFoiNwYNAQMBAQEBAQECARMBAQEIDQkIKSM?=
 =?us-ascii?q?MgjYkAYJiAQIBAgECIB0BOAEDAgkBAQUFCwMKAgImAgIDHwYMAQUBHAYTBYMcA?=
 =?us-ascii?q?YFoAQMVBQqbMTyLDYEvgncFgTEBgn0KQA2CEQIGEnmKfoFXP4QjgxsDAQGEYoJ?=
 =?us-ascii?q?XAqACBwKCHASEXIYYhBsYgVlNh2GHAY1Dil4wgTuBdzQ8XQwYgjsJCoIIg22FF?=
 =?us-ascii?q?IU/PjMBAYEDAQGMIQEB?=
X-IPAS-Result: =?us-ascii?q?A0CSAAAMV/hbh0O0hNFkHgEGBwaBVAYLAYJpgQIng3mDe5A?=
 =?us-ascii?q?dgg0UmRguDQYBiFoiNwYNAQMBAQEBAQECARMBAQEIDQkIKSMMgjYkAYJiAQIBA?=
 =?us-ascii?q?gECIB0BOAEDAgkBAQUFCwMKAgImAgIDHwYMAQUBHAYTBYMcAYFoAQMVBQqbMTy?=
 =?us-ascii?q?LDYEvgncFgTEBgn0KQA2CEQIGEnmKfoFXP4QjgxsDAQGEYoJXAqACBwKCHASEX?=
 =?us-ascii?q?IYYhBsYgVlNh2GHAY1Dil4wgTuBdzQ8XQwYgjsJCoIIg22FFIU/PjMBAYEDAQG?=
 =?us-ascii?q?MIQEB?=
X-IronPort-AV: E=Sophos;i="5.56,271,1539673200"; 
   d="scan'208";a="54093204"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from vger.kernel.org ([209.132.180.67])
  by mtab.intel.com with ESMTP; 23 Nov 2018 11:40:23 -0800
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S2441430AbeKXGZ5 (ORCPT <rfc822;like.xu@linux.intel.com>
        + 23 others); Sat, 24 Nov 2018 01:25:57 -0500
Received: from mail-oi1-f196.google.com ([209.85.167.196]:40994 "EHLO
        mail-oi1-f196.google.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1729872AbeKXGZ5 (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Sat, 24 Nov 2018 01:25:57 -0500
Received: by mail-oi1-f196.google.com with SMTP id j21so10761456oii.8;
        Fri, 23 Nov 2018 11:40:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=20161025;
        h=mime-version:references:in-reply-to:from:date:message-id:subject:to
         :cc;
        bh=VnQH26rRZD7vhICcFXLasHpY+1RYNS+iVT/vBdvo2Fo=;
        b=ocw0Uu1qAVhwQ6GOWc+96V5MADv/Ai17Opf99rIiOSATAzr1eDKvPCp0MHwUavawF9
         VZDilzpp6gx3fGU71Q11K7pMt+UKWLVqNsBCTxOKnCWVzgixoW9a4HSt+ZRYd/F2SCxF
         FJ8NPTGYsFk2Sk/FGwsvYxyUMNDCW0SGqAM0dMGdmhIFGJGDQfbysGjCYYfr2/Sg2kS0
         rFKuYrRaeL9aihUMgr5WLsjFTx9LWEmctm+wdAMMTvLT1sP0/Wr2w8MApqZ6suxw45W6
         LDs/dPlbLbr4ShkwrZWpiT7O3T4U746qDzqRWehbYKecCPIRxeRGuNjpSptXgMNlU1vr
         vW8A==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20161025;
        h=x-gm-message-state:mime-version:references:in-reply-to:from:date
         :message-id:subject:to:cc;
        bh=VnQH26rRZD7vhICcFXLasHpY+1RYNS+iVT/vBdvo2Fo=;
        b=aiLOA3KuGZRh4Ih6fQVDESUwYnwrZlnLDE8QYOfjPFihia42+u+vvu9mJb7qhQ0UJq
         OpWkWN5N7qmQMMC6GBEnF60rmP0PWQUrJSZvRuxXzabOTHJj+A3Y8XmauA2kCOvNNRZy
         eyPUhIw/tO1EzlP/NuTYjruKxarHglnt/JISxdHFsg71jf7z/308fR7nbtKVESEFKZFi
         HrTNcgoJS2ExGPERlEo9suvA/AKBHxPHnLscDI4YHPBjMEXgBY0arDM84UNiKrwrpX7c
         JcGftEMX2BhRpMlx9bmTwXGkBdiswLFNQmJwwG84lsJJGULmV71r/yB1yyXLhNjA5Vio
         +Pkg==
X-Gm-Message-State: AGRZ1gIL+izypFNZ4jaJq0SUsIfOquOY1TpSqNHWQuxL6GZG2wvTU6Ht
        WBZD4FBWUnGe732Of10++DNg3IxT1KOnDtLTSgc=
X-Google-Smtp-Source: AJdET5dQ4QRmzuIf3x+2hbZYaE6LRwOEPxhzvUuJVMq0cCfn5A5Z4wNNGC/PG3gBEM5GyXiU17ekgTz9jYxpfopSeRI=
X-Received: by 2002:aca:5e85:: with SMTP id s127mr9640736oib.181.1543002017387;
 Fri, 23 Nov 2018 11:40:17 -0800 (PST)
MIME-Version: 1.0
References: <20181122214017.25643-1-martin.blumenstingl@googlemail.com> <4859b354-ade4-8172-eeb5-7a4a42045589@baylibre.com>
In-Reply-To: <4859b354-ade4-8172-eeb5-7a4a42045589@baylibre.com>
From: Martin Blumenstingl <martin.blumenstingl@googlemail.com>
Date: Fri, 23 Nov 2018 20:40:06 +0100
Message-ID: <CAFBinCBExC-ZpD4RfzESv41fUZCODrv-VFODTKLrwAUC1UO+5w@mail.gmail.com>
Subject: Re: [PATCH v2 0/4] Meson8b: add the CPU clock post-dividers
To: Neil Armstrong <narmstrong@baylibre.com>
Cc: linux-amlogic@lists.infradead.org, jbrunet@baylibre.com,
        mturquette@baylibre.com, sboyd@kernel.org,
        linux-clk@vger.kernel.org, linux-arm-kernel@lists.infradead.org,
        linux-kernel@vger.kernel.org
Content-Type: text/plain; charset="UTF-8"
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

On Fri, Nov 23, 2018 at 3:40 PM Neil Armstrong <narmstrong@baylibre.com> wrote:
>
> On 22/11/2018 22:40, Martin Blumenstingl wrote:
> > This is the successor to my previous series "meson8b: add the CPU_DIV16
> > clock for the ARM TWD" from [0]. I decided to not send this as v2 of
> > the original series because the PERIPH clock is not the CPU_DIV16 clock.
> > It's not clear whether a CPU_DIV16 clock exists.
> >
> > With this series we get all the CPU_CLK post-dividers as listed in the
> > public S805 datasheet [1] on pages 31 and 32:
> > - ABP
> > - PERIPH (used as input for the ARM global timer and ARM TWD timer)
> > - AXI
> > - L2 DRAM
> >
> > Each of these clocks has a register called "..._CLK_DIS" which is
> > documented as a "just in case" bit:
> > "Set to 1 to manually disable the [...] clock when changing the mux
> > selection. Typically this bit is set to 0 since the clock muxes can
> > switch without glitches."
> > Since we're not supposed to touch that register we're using the new
> > read-only gate clk_ops to ensure that nothing accidentally modifies
> > these bits.
> >
> > The result of this is that we can use the PERIPH clock which clocks
> > the ARM TWD timer. I will send a separate series to add the TWD timer.
> >
> >
> > changes since v1 at [2]:
> > - added new patch 2 "clk: meson: clk-regmap: add read-only gate ops"
> > - switched from CLK_IS_CRITICAL to the new clk_regmap_gate_ro_ops
> >   so we're consistent with all other read-only clocks
> > - collected Jerome's Acked-by tags (thanks!)
> >
> >
> > [0] http://lists.infradead.org/pipermail/linux-amlogic/2018-July/007890.html
> > [1] https://dn.odroid.com/S805/Datasheet/S805_Datasheet%20V0.8%2020150126.pdf
> > [2] https://patchwork.kernel.org/cover/10687023/
> >
> >
> > Martin Blumenstingl (4):
> >   dt-bindings: clock: meson8b: export the CPU post dividers
> >   clk: meson: clk-regmap: add read-only gate ops
> >   clk: meson: meson8b: rename cpu_div2/cpu_div3 to
> >     cpu_in_div2/cpu_in_div3
> >   clk: meson: meson8b: add the CPU clock post divider clocks
> >
> >  drivers/clk/meson/clk-regmap.c           |   5 +
> >  drivers/clk/meson/clk-regmap.h           |   1 +
> >  drivers/clk/meson/meson8b.c              | 264 ++++++++++++++++++++++-
> >  drivers/clk/meson/meson8b.h              |  17 +-
> >  include/dt-bindings/clock/meson8b-clkc.h |   4 +
> >  5 files changed, 278 insertions(+), 13 deletions(-)
>
>
> Applied, with the bindings on next/headers
awesome, thank you Neil!
you even gave Kevin a tag with only the headers included - good for me
since I can sent the corresponding .dts patches now.


Regards
Martin
