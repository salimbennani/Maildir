Return-Path: <linux-kernel-owner@vger.kernel.org>
Delivered-To: unknown
Received: from linux.intel.com (10.54.29.200:995) by likexu-workstation with
  POP3-SSL; 23 Nov 2018 08:32:53 -0000
X-Original-To: like.xu@linux.intel.com
Delivered-To: like.xu@linux.intel.com
Received: from orsmga004.jf.intel.com (orsmga004.jf.intel.com [10.7.209.38])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by linux.intel.com (Postfix) with ESMTPS id DACE7580460;
	Thu, 22 Nov 2018 16:09:53 -0800 (PST)
Received: from orsmga103.jf.intel.com ([10.7.208.35])
  by orsmga004-1.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384; 22 Nov 2018 16:09:53 -0800
X-SG-BADATTACHMENTNOREPLY: True
IronPort-PHdr: =?us-ascii?q?9a23=3AahH22x8IDzFSTP9uRHKM819IXTAuvvDOBiVQ1KB9?=
 =?us-ascii?q?1uMRIJqq85mqBkHD//Il1AaPAd2Lraocw8Pt8InYEVQa5piAtH1QOLdtbDQizf?=
 =?us-ascii?q?ssogo7HcSeAlf6JvO5JwYzHcBFSUM3tyrjaRsdF8nxfUDdrWOv5jAOBBr/KRB1?=
 =?us-ascii?q?JuPoEYLOksi7ze+/94HQbglSmDaxfa55IQmrownWqsQYm5ZpJLwryhvOrHtIeu?=
 =?us-ascii?q?BWyn1tKFmOgRvy5dq+8YB6/ShItP0v68BPUaPhf6QlVrNYFygpM3o05MLwqxbO?=
 =?us-ascii?q?SxaE62YGXWUXlhpIBBXF7A3/U5zsvCb2qvZx1S+HNsDtU7s6RSqt4LtqSB/wiS?=
 =?us-ascii?q?cIKTg58H3MisdtiK5XuQ+tqwBjz4LRZoyeKfhwcb7Hfd4CS2RPXthfWTFCDIOy?=
 =?us-ascii?q?YIQAE/cOMuRWoInmv1sDrwCzBRWwCO/z1jNEmmX70bM83u88EQ/GxgsgH9cWvX?=
 =?us-ascii?q?rIsdX1L7wSXv6xzKnM0D7NavJW2THy6IPVaxwqvO2BU653f8HMz0cvFgXFjkif?=
 =?us-ascii?q?qIf4OD6V0uUNs26G7+tvTu+gkXQnqwR1ojiuwMcsl4bIipgSylDe+iV12ps1Jd?=
 =?us-ascii?q?6hRUN9fNWqHpxQtySAOIt3RMMvW3tnuDw/yr0CuJ67ejUKyZs9yx7YcfyHfJKE?=
 =?us-ascii?q?4g/gVOqJITd3mmhqd6+mixmu9kigz+j8Vs6y0FpQtSpKicHAtmsV1xPN9MeIV+?=
 =?us-ascii?q?d98Vm62TaTzQzT7P9LIVwymKHGKJAh2qY9moQPvUnHBCP6hUv7gLGMekk5+eWk?=
 =?us-ascii?q?9/7rb7Tkq5OENYJ5iRvyP6owlsClD+k0LhICU3aG9em/0rDo4Ff3T69QjvIsl6?=
 =?us-ascii?q?nUqJDaKtofpq6+GwJVzIkj5AilDzu809QXg2MHLFRbdxKDlYTpPEvOIP/gAfe+?=
 =?us-ascii?q?hVSjjitryujYMrH9BpjBNGXPnbn/cbpn9kJRyxY/wcpe6p9WEr0BJej8Wk71tN?=
 =?us-ascii?q?zWFB85NAm0zv7jCNV80IMeRG2ODraaMKzMq1+I4PwgI+2VaI8Stjf9LeYq5+T1?=
 =?us-ascii?q?gH8nll8SY7Op0YEUaH+mBPRmJVuWYX72jtcGC2cKsRIyTPb2h12aTT5Te3GyUr?=
 =?us-ascii?q?o45jE6C4KpE53PR4+wgLGa2Ce7H5tWZn1JC1yWEHfocZmEVOkIaC6IPsBhlTkE?=
 =?us-ascii?q?X6C7S4A9zRGuqBP6y71/I+rU4CIYtI7j28Jy5+HJlREy6CZ7D8KS02yWS2F0n2?=
 =?us-ascii?q?UIRyI53axloEx9zEuD3rZ8g/BCCdNT4PZJWB8gNZHA1+x6F8zyWgXZc9eLT1ap?=
 =?us-ascii?q?XM+qATI2TtI3xd8OZF1wG9GjjhDFwiqrDKUZl72NBJwo7K3c22L9KNp6y3bDzK?=
 =?us-ascii?q?MhlUUpQtNTNW26ga5y7xLcB5XJk0WelKamb74c0zTP9GqYyWqOvUdYUBN/UKnf?=
 =?us-ascii?q?XHAfYFfWosr95k/YU7CuDrEnOBNbycGeMqtKdsHpjVJeSffgItveZXi9m2OxBR?=
 =?us-ascii?q?mSwLOMY5Hne2Ec3CXbFUgFnBof/XeANQgiGCihp3jSAyBpFVLqe0ns6/VxqGun?=
 =?us-ascii?q?Tk8oyAGHd1Bu2KCr+hELn/CcS+kc3rQfuCg/rTV4G1K939HTC9qEvAdheKRcYd?=
 =?us-ascii?q?Ug4FZIz27Ztgp9PoC+IKBmnFIRbwN3v0b23RVtFopAidQqrG8tzAdqNK2Xyk1B?=
 =?us-ascii?q?eC2C0ZDwILLXLHLy8w6pa6PN3lHe0dCW+roA6fgiqlXjuh2pGVQm83l9z9ZV1H?=
 =?us-ascii?q?6c7I3QDAUOSZLxTlo39x9iqrHGYyk94oTU1WFsMai0qDPCx8glBOw/yhakftdf?=
 =?us-ascii?q?NqyEGRT2E80bAciuNeMrl0KobhICIOBd6qo0M9m6ePuB3a6hJPxgky6+jWRb/I?=
 =?us-ascii?q?B91VqB+DB4SuHW0JcK3fGZ0hGcWDfhkViuqMb3mYNDZTEMBWe/zSnkBIhMZqx9?=
 =?us-ascii?q?Z4oLCGGuI9GpydV6nZLiR3lY9Fu7DVMcxMCpYQaSb0D63QBI1UUXvGarljeiwz?=
 =?us-ascii?q?11kzEmtKyf3CPVzuTmdRoHPHNLRWZ4gVftJ4i0k84VXEyyYwc1kxul4F7wx7JH?=
 =?us-ascii?q?q6RnM2nTXUBIcjDsL2FjTqS/rKCCbNNI6J8ytyVYTv68YVGDRrHhuRQa1z7sEH?=
 =?us-ascii?q?VExDA8cTGnoZH5nx18iGKAI3d/tnvZecdsxRjB4NzQX+Je3j0DRCNgkznYGkC8?=
 =?us-ascii?q?P8W1/dWTj5rCsuG+W3ihV5FJainr0IWAuTC/5W1rBx2/gv+ylsfmEQg8zS/0yd?=
 =?us-ascii?q?1qWT/Uoxb7Z4nhz766Pv5/fkl0GF/87NJ3GoNknYsqh5EQ2n8aio+O/XUdkmfz?=
 =?us-ascii?q?MtRb2aTgY3oLXjMLx9/V4A742ExsNH6JxoT5VmmDzctlfdW1fmQW2icl5cBQFK?=
 =?us-ascii?q?iU9KBEnTdyolegrQPee/99ki0fyfsv7n4XmOUJuAsrziWADbEeB0hYPSrwlxuW?=
 =?us-ascii?q?69CytrlYZGGqcbKozkpxgcihDK2eogFbQHv5eY0tHS5q4sV/LVLDynvz6o7/dd?=
 =?us-ascii?q?nUbNITsACUkhjag+hULpIxiuQFhS59NW3hun0lzvYxjQZy0pGioIiHN2Jt8bq8?=
 =?us-ascii?q?Ah5ZNT36fdkf+z/zgqZFgsaZwZqvEY5/FTURU5vlVvaoEDMUtfT6OAeCCjw8qn?=
 =?us-ascii?q?GHGbXBGQ+T8ltpr3XKE5qzLXGYOGEZzcl+RBmaPEFfnAcUXDAgkp84DA+qwtHh?=
 =?us-ascii?q?cFxi5jAQ/VP4rhpMyuR1NxjwSGvfpQGoaisqR5ibNhZZ8gZC50LNO8yE8u1zBz?=
 =?us-ascii?q?1Y/oGmrAGVMWOUfQNIDWUUWkCeA1DjI6Kj5d3B8+ieG+q/IOHCYbSIqexCSfiI?=
 =?us-ascii?q?wYij3Zdh/zaJLs+PJGVtD+Un2kpfWnB0A8bZlC8KSyMJjCLBddKbqA2/+i1qrc?=
 =?us-ascii?q?C/7fLrVxj05YaUD7tSMNNv+w25gKuZNu6Qgjp5Jihc1p8W2XDIz70f1kYIiy5y?=
 =?us-ascii?q?bzmtDagAtSnVQaPQna9XEgcbaz5pO8tO9a48xQ5NOcjUit7u0r54j/g1C0pKVF?=
 =?us-ascii?q?D7m8GpY9AKLH+5NF/dGEmLM7GGLyXRw87reaO8VaFQjOJMuh2wpzmbEkzjPjeC?=
 =?us-ascii?q?lzXzVBCvK+ZMjC6FMxxEpYG9aQ1gCWziTNLgdx26P8V7jTwwwb0omHzKMXQQPi?=
 =?us-ascii?q?R7c0NItreQ9z9Xgu1jG2xd6XpoNfOLmzuC4OnCNJkXseFnAiB1l+9B5HQ6yr1V?=
 =?us-ascii?q?7DxLRfBvmSvSqMJurE+ikuWV1jVnVx9OoC5RhI2XpUViJbnZ9p5YVHbY/RIN6H?=
 =?us-ascii?q?+cBAgQq9R5Ct3gpaZQx8PLlKLyLjdC7t3V8dEdB8jSNMKILn4hPQD1Fz7TCQsP?=
 =?us-ascii?q?VSSrOn3Hh0xBjPGS8WWYr5ggpZjqnZoOS7lbW0Q0F/MaEEtlGtMCLYxzXjMll7?=
 =?us-ascii?q?6bkcEJ6WC/rBnXWMVVoJTHWuiODvXoLTbKxYVDMiAB2rPxZaAeKIz9kxh5Y0J6?=
 =?us-ascii?q?lYDiGEfKW91J5Cp7YVlnjl9K9S1EU3Yo1kbhIiCs5nBbULadpDt+rgp4fPRloD?=
 =?us-ascii?q?Pt5UonDlPQoS8xllQh39L/jnaMc2iif++LQYhKBn+s5AAKOZThTlMwNFXqkA?=
 =?us-ascii?q?=3D=3D?=
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A0ABAADmRPdbh0O0hNFiGgEBAQEBAgEBA?=
 =?us-ascii?q?QEHAgEBAQGBUQUBAQEBCwGBMIE5gQInjBGODBSSMIR3gW4ZGAsIAYRAhBIiNAk?=
 =?us-ascii?q?NAQMBAQEBAQECARMBAQEIDQkIKSMMgjYkAYJhAQEBAQMBAjcGAQE3AQUJAQEKF?=
 =?us-ascii?q?QMJJQMMBSghEwWDHAGCAQEDAQqnB4IfgnYBAQWHFgiMCRc+gUGBEAGDEoMQghS?=
 =?us-ascii?q?FNaAECZEkCxiBWYguhwEsmASBRoINMxoILAQ7gmwJghKLZ4JYQDKBBQEBjFUBA?=
 =?us-ascii?q?Q?=
X-IPAS-Result: =?us-ascii?q?A0ABAADmRPdbh0O0hNFiGgEBAQEBAgEBAQEHAgEBAQGBUQU?=
 =?us-ascii?q?BAQEBCwGBMIE5gQInjBGODBSSMIR3gW4ZGAsIAYRAhBIiNAkNAQMBAQEBAQECA?=
 =?us-ascii?q?RMBAQEIDQkIKSMMgjYkAYJhAQEBAQMBAjcGAQE3AQUJAQEKFQMJJQMMBSghEwW?=
 =?us-ascii?q?DHAGCAQEDAQqnB4IfgnYBAQWHFgiMCRc+gUGBEAGDEoMQghSFNaAECZEkCxiBW?=
 =?us-ascii?q?YguhwEsmASBRoINMxoILAQ7gmwJghKLZ4JYQDKBBQEBjFUBAQ?=
X-IronPort-AV: E=Sophos;i="5.56,267,1539673200"; 
   d="scan'208";a="53404062"
X-Amp-Result: UNSCANNABLE
X-Amp-File-Uploaded: False
Unscannable: 2
Received: from vger.kernel.org ([209.132.180.67])
  by mtab.intel.com with ESMTP; 22 Nov 2018 16:09:52 -0800
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S2407932AbeKWKsi (ORCPT <rfc822;like.xu@linux.intel.com>
        + 23 others); Fri, 23 Nov 2018 05:48:38 -0500
Received: from pandora.armlinux.org.uk ([78.32.30.218]:42578 "EHLO
        pandora.armlinux.org.uk" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1729489AbeKWKsi (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Fri, 23 Nov 2018 05:48:38 -0500
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
        d=armlinux.org.uk; s=pandora-2014; h=Sender:In-Reply-To:Content-Type:
        MIME-Version:References:Message-ID:Subject:Cc:To:From:Date:Reply-To:
        Content-Transfer-Encoding:Content-ID:Content-Description:Resent-Date:
        Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:List-Id:
        List-Help:List-Unsubscribe:List-Subscribe:List-Post:List-Owner:List-Archive;
         bh=IMakWGmyQF2R+OfH1u3XFfFnrC1OqupFsKwM1SiQ9wg=; b=OZ9/A3tOq09wamNOzZtsz+QIn
        2mtJFoxKdRifqTa2X3ys7HjHjhVwjXbWjjPntbb8ge1SA/AskK6z45zpvRlGRkh3bYlAp2zJOt3Yp
        Zoa12AEfOa/WF+PrY6x2SNBuYTg4ENEwPBXsZzEsNulNMyatsLLe5xzibJnJNg3WtuKrY=;
Received: from n2100.armlinux.org.uk ([fd8f:7570:feb6:1:214:fdff:fe10:4f86]:40515)
        by pandora.armlinux.org.uk with esmtpsa (TLSv1.2:ECDHE-RSA-AES128-GCM-SHA256:128)
        (Exim 4.90_1)
        (envelope-from <linux@armlinux.org.uk>)
        id 1gPyzc-0004on-Iy; Fri, 23 Nov 2018 00:06:44 +0000
Received: from linux by n2100.armlinux.org.uk with local (Exim 4.90_1)
        (envelope-from <linux@n2100.armlinux.org.uk>)
        id 1gPyzZ-0007ny-Vi; Fri, 23 Nov 2018 00:06:42 +0000
Date: Fri, 23 Nov 2018 00:06:40 +0000
From: Russell King - ARM Linux <linux@armlinux.org.uk>
To: Sasha Levin <sashal@kernel.org>
Cc: stable@vger.kernel.org, linux-kernel@vger.kernel.org
Subject: Re: [PATCH AUTOSEL 4.4 3/8] ARM: make lookup_processor_type()
 non-__init
Message-ID: <20181123000640.GP30658@n2100.armlinux.org.uk>
References: <20181122195716.13961-1-sashal@kernel.org>
 <20181122195716.13961-3-sashal@kernel.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20181122195716.13961-3-sashal@kernel.org>
User-Agent: Mutt/1.5.23 (2014-03-12)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

Same comments as for the 4.9 version of these patches, and also applies
to the two 3.18 patches as well.  They aren't fixes, but preparation
for fixes, and should not be backported without the actual Spectre fix
patch (which probably requires manual backport effort.)

On Thu, Nov 22, 2018 at 02:57:10PM -0500, Sasha Levin wrote:
> From: Russell King <rmk+kernel@armlinux.org.uk>
> 
> [ Upstream commit 899a42f836678a595f7d2bc36a5a0c2b03d08cbc ]
> 
> Move lookup_processor_type() out of the __init section so it is callable
> from (eg) the secondary startup code during hotplug.
> 
> Reviewed-by: Julien Thierry <julien.thierry@arm.com>
> Signed-off-by: Russell King <rmk+kernel@armlinux.org.uk>
> Signed-off-by: Sasha Levin <sashal@kernel.org>
> ---
>  arch/arm/kernel/head-common.S | 6 +++---
>  1 file changed, 3 insertions(+), 3 deletions(-)
> 
> diff --git a/arch/arm/kernel/head-common.S b/arch/arm/kernel/head-common.S
> index 8733012d231f..7e662bdd5cb3 100644
> --- a/arch/arm/kernel/head-common.S
> +++ b/arch/arm/kernel/head-common.S
> @@ -122,6 +122,9 @@ __mmap_switched_data:
>  	.long	init_thread_union + THREAD_START_SP @ sp
>  	.size	__mmap_switched_data, . - __mmap_switched_data
>  
> +	__FINIT
> +	.text
> +
>  /*
>   * This provides a C-API version of __lookup_processor_type
>   */
> @@ -133,9 +136,6 @@ ENTRY(lookup_processor_type)
>  	ldmfd	sp!, {r4 - r6, r9, pc}
>  ENDPROC(lookup_processor_type)
>  
> -	__FINIT
> -	.text
> -
>  /*
>   * Read processor ID register (CP#15, CR0), and look up in the linker-built
>   * supported processor list.  Note that we can't use the absolute addresses
> -- 
> 2.17.1
> 

-- 
RMK's Patch system: http://www.armlinux.org.uk/developer/patches/
FTTC broadband for 0.8mile line in suburbia: sync at 12.1Mbps down 622kbps up
According to speedtest.net: 11.9Mbps down 500kbps up
