Return-Path: <linux-kernel-owner@vger.kernel.org>
Delivered-To: unknown
Received: from linux.intel.com (10.54.29.200:995) by likexu-workstation with
  POP3-SSL; 25 Nov 2018 14:42:40 -0000
X-Original-To: like.xu@linux.intel.com
Delivered-To: like.xu@linux.intel.com
Received: from orsmga001.jf.intel.com (orsmga001.jf.intel.com [10.7.209.18])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by linux.intel.com (Postfix) with ESMTPS id D963B5803C2;
	Sat, 24 Nov 2018 12:10:04 -0800 (PST)
Received: from fmsmga103.fm.intel.com ([10.1.193.90])
  by orsmga001-1.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384; 24 Nov 2018 12:10:04 -0800
X-SG-BADATTACHMENTNOREPLY: True
IronPort-PHdr: =?us-ascii?q?9a23=3Af4pGAR0qxy7W3cIismDT+DRfVm0co7zxezQtwd8Z?=
 =?us-ascii?q?segQLP7xwZ3uMQTl6Ol3ixeRBMOHs6IC07KempujcFRI2YyGvnEGfc4EfD4+ou?=
 =?us-ascii?q?JSoTYdBtWYA1bwNv/gYn9yNs1DUFh44yPzahANS47xaFLIv3K98yMZFAnhOgpp?=
 =?us-ascii?q?POT1HZPZg9iq2+yo9JDffwZFiCChbb9uMR67sRjfus4KjIV4N60/0AHJonxGe+?=
 =?us-ascii?q?RXwWNnO1eelAvi68mz4ZBu7T1et+ou+MBcX6r6eb84TaFDAzQ9L281/szrugLd?=
 =?us-ascii?q?QgaJ+3ART38ZkhtMAwjC8RH6QpL8uTb0u+ZhxCWXO9D9QKsqUjq+8ahkVB7oiD?=
 =?us-ascii?q?8GNzEn9mHXltdwh79frB64uhBz35LYbISTOfFjfK3SYMkaSHJPUMhRSSJPH4Cy?=
 =?us-ascii?q?b4UAAOUdIOlXrYfyp0AWrRa8HgSsGP/jxiNUinPqx6A2zeIsGhzG0gw6GNIOtW?=
 =?us-ascii?q?zZosnoNKcJSuC60q3IzTHeZP1T2Df97ofIeQ04rfqRQb9+bc3fwlQpGQPEiFWQ?=
 =?us-ascii?q?tIPkNC6S2+QJsmib6fdgVO20hmE9sQFxpzyvxsYqionUiYMZ0FfE9T92wIovON?=
 =?us-ascii?q?24S1d2bNi5G5VesCGaMpF5QsIkQ2xwoik60LgGuZq6fCgM1ZQmyATTa/udc4iH?=
 =?us-ascii?q?+B7jSeWRLS9jhHJ9Zr2wmQu98VS+xe3nSsm4ylBKoTRZktXUs3ACzQbT5dSdRv?=
 =?us-ascii?q?t8+Eeh1zGP2gbO4e9HOUA5jbTXJ4Ilz7Iqi5Yev1rPEjXrlEj1kKOabEQp9+qw?=
 =?us-ascii?q?5+j5frnquoKQOop7hw7jPakjmcmyDv4lPQUOQWSW/Oqx2KP/8UHkRbhGkOA6n6?=
 =?us-ascii?q?bcvZDUOMsbqKC5Dgpb0ok99hqzEzKr3dsWnXQELV9Ifg+MgZLzNFHUOv/4CO+y?=
 =?us-ascii?q?g1SynzdvwPDLJqPhAprTIXjZirvhfqhy61RayAUtydBT/ZVUCqsOIP7rW0/xss?=
 =?us-ascii?q?LXDgMhPgCq3+rqDM9x2p4QVG6RGKOVLaDfvUOS6u8uIeSAfIoVtyz8K/gh6f7u?=
 =?us-ascii?q?l3g5mVoFcKmt3JsXbm24H/t/L0Waf3XsmNEBHnkOvgYnS+zrhluCXiBJZ3upQa?=
 =?us-ascii?q?I86S80CJi8AYfAWI+tmrqB0zm/HpFMYWBGEF+MHW/yd4qYQ/cMdD6SIsh5nzwA?=
 =?us-ascii?q?VLihSJEu2QuhtQ/n0LdnKuvU+isFtZPsztR15uvTlQ0s+jxwFciSz2aNT2RslG?=
 =?us-ascii?q?MSWzA2xLx/oVB6ylqb0ah3mf1YFcBJ6PNOSAs6NYPcwPZ8C9D9QQ/BetaJSFC7?=
 =?us-ascii?q?QtSpGz0xT9Qxw8MQbEZ5AdmtkhfD3y+yCb8Pi7OLHIA08r7b33XpJcZ9zGjJ2L?=
 =?us-ascii?q?Mij1khRMtPM2qmi7V79wjSAY7JjkqYm7yrdaQawC7C6mODwXCSs0FfVQ56Sb/F?=
 =?us-ascii?q?UmwHZkvKsdT54VvPQKW1CbQnNQtBytSOKrFQZd3rllhGQPbjONLDY2O+gWuwBB?=
 =?us-ascii?q?CIxq+SY4ruYWkSwCLdCE0cmQAJ4XmGLRQ+Bjumo2/GDzxhD1Tvb1no8el/sny7?=
 =?us-ascii?q?SEA0whqOb01g0bq15xEUieadS/MVwrILpiMhpy9oE1a62tLcE8CAqBZ5fKVAfd?=
 =?us-ascii?q?M9509K2n/DuAxjIJOsNaBiiUQYcwRsoUzu0RJ7CoFDkcgvqHMn1w5yKaOe0FNc?=
 =?us-ascii?q?eDKUx5HwOrvLKmbs+BCjcbLZ2lbb0NyO4KcA9Ow4q0n/vAGuDkct7m9o08dL3H?=
 =?us-ascii?q?eG5pXFFgwSUYnvXUYx7BV6o7DaYi8g54Lbz3FsMK+0siPc1NItHucq1hGgf9JH?=
 =?us-ascii?q?OqOeCADyC9EaB9SpKOEyh1ipbxcEPOdO9K40P8KqbeeG1LSsPOZ6mDKmjGJH4I?=
 =?us-ascii?q?9m30KI9ip8TPPI3pkfz/GZ2AuHSynzjFO7vs/rnoBEYCkYHnCjxij8GI5Reqpy?=
 =?us-ascii?q?cJ4RBmeqPcK2yctxhp73V3FD6V6sGkkJ2MmqeRqVcVzwxglQ1UURoXy6liq01T?=
 =?us-ascii?q?10kzc1rqWB2CzC2fjtdB0COmRTXmltkU/sIZSoj9AdREWpbxUpmAG56krgxqlb?=
 =?us-ascii?q?pL5wL2/cQUpTeyj2LmdiUra/t7aYYs5P7o8ovjtTUOimfV+aTbv9qQMA0yz/B2?=
 =?us-ascii?q?te2Cw7dzayt5Xjnhx1lHiSLGxuo3reY81wwwnQ5MbdRfJIwjUJXi14hiTJCVim?=
 =?us-ascii?q?ONmp+86Zl5PCsuC4SmKgWYdfcSjtzYOcqiS74XdmDgG4n/C2gtfnCxQ10Tfn19?=
 =?us-ascii?q?l2UiXFtBb9Yojx26W6K+5nZVRoBFnn5sp+G4F+lJYwhZ4K1XgbgJWV4WQIkWPp?=
 =?us-ascii?q?PdpH3qL+aWIHRSQXzN7N/AjlxEpjI2qLx43jTHWdwchhZ96gbmMNwC097MNKCK?=
 =?us-ascii?q?aS7LNamyt4uV64rQPXYfhgkTYR0/ou6HgGg+4XvAoh1DmSArcXHUNAJyzjiwyI?=
 =?us-ascii?q?78yirKVQfGuucaK/1E1kkdCjDbGCpBpRWHL4epckAC9x4d9zMFPK0H3v9I7kfM?=
 =?us-ascii?q?PcYs4Uth2Rix3AlfRaKIotlvoWgipqIWH9smcky+IhjRxuwIu1vI6IK2h2+KK5?=
 =?us-ascii?q?AxhYNiD6Zs8J+zHti7pekdiS34y1ApphHTALVoPyTf20CDISqejnNwGWHT05q3?=
 =?us-ascii?q?ebGqDQERWR6Uh4tHLPD46kN2uMK3YH19ViSwKQJEhegAASQTU7kYQ1FgGsxMz9?=
 =?us-ascii?q?bkh54iod6UL/qhtJ0uhoLQXwUn/DpAe0bTc5UISfLB1T7g1Y5kbaK8qe7v9oHy?=
 =?us-ascii?q?FD/52stwiNKm2dZwRVAmAFQE2EB1b/Praw4dnM6fSXBu27L/HWe7WBtfReV+uU?=
 =?us-ascii?q?xZKoyoZp5CyDNsKLPnl/FfE73ldDUGt9G8TYnTUPViMWmzjMb86duBez5Cl3ot?=
 =?us-ascii?q?qj//TsXQLl/ZGPBKdKMdVz5xC2hr+ON+yKiyZ8NzlYzYkAxWPSxLgcwV4SiDxu?=
 =?us-ascii?q?dz+3HrQbriPNSKPQmqlKDx8UcS9zNc1I774i0QlJI8LUltT11rtghP4vF1hFTU?=
 =?us-ascii?q?Dhmt2uZcESI2C9M07HBF+WNLucIz3H2dr3YaS6Sb1fl+hUsxywuTCGE07sJDiD?=
 =?us-ascii?q?lj/pVwyxPuFIli2UIBteuISleBZ3FWfjVM7magG8MNJvjT0537w0hnDJNW4dKz?=
 =?us-ascii?q?R8cFlNrrqf7SxGmPV/BndB42FhLemFnSaZ8ubZJowXsfttHiR7ieZa7G4mxLtS?=
 =?us-ascii?q?6SFOXOZ1lzfKrt5yv1GmlfGCxSB6UBVVsDZEmoKKsV9mOaXY7ZRAXXfE/BQQ7W?=
 =?us-ascii?q?SfERgKpt1lCsHxtKBU0NTAiKXzKDJa+dLO4cQcH9TUKN6AMHc5LRrpGTvUABEZ?=
 =?us-ascii?q?QjKxKW7fh1JSkPeJ+32Rr5g6rIXsmZUURr9aUlw1Cu0VCkB/ENMeJ5d3Wysuka?=
 =?us-ascii?q?SHg84Q+Xq+sB7RSd1av5/dUPKSBPTvKDCBgrhFZxsH27X4LYsIO43/2kxibER6?=
 =?us-ascii?q?nYvQF0rRW9BNvjNubgsurEpR93h+Sz5750WwQwq35zcwEuW3nxg7jEMqaO0383?=
 =?us-ascii?q?Hv5Ew0J1zHogMxk0h3l9SzxXiNdzjgBK6sWoRXByeyvE80Yb3hRAMgVxCphkFg?=
 =?us-ascii?q?MH/nRrRex/4oXFpOwCvdv4ZfUapYTKtZcDcZ3/STZvM1wRJbsCrh2EwRtriNMo?=
 =?us-ascii?q?driAZ/Kc3klHlHwQ82KYdtfaE=3D?=
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A0AHAADtrvlbh0O0hNFjGgEBAQEBAgEBA?=
 =?us-ascii?q?QEHAgEBAQGBVAIBAQEBCwGBMIE5gQInmh4UmRgXGAsIAYhaIjcGDQEDAQEBAQE?=
 =?us-ascii?q?BAgETAQEBCA0JCCkjDII2JAGCYgECAwECNwYBATcBBQkBAQoYCSUDDAUoIQEXg?=
 =?us-ascii?q?xwBggEBAwEKpV+CH4J2AQEFhxUIjAkXPoFBgRGDEoMQCwQYhyKgBAmGfIooCxi?=
 =?us-ascii?q?RCCyNF4ptgVyBdzMaCCwEgycJCoFtG4ZGhSGCWEAygQUBAYwHAQE?=
X-IPAS-Result: =?us-ascii?q?A0AHAADtrvlbh0O0hNFjGgEBAQEBAgEBAQEHAgEBAQGBVAI?=
 =?us-ascii?q?BAQEBCwGBMIE5gQInmh4UmRgXGAsIAYhaIjcGDQEDAQEBAQEBAgETAQEBCA0JC?=
 =?us-ascii?q?CkjDII2JAGCYgECAwECNwYBATcBBQkBAQoYCSUDDAUoIQEXgxwBggEBAwEKpV+?=
 =?us-ascii?q?CH4J2AQEFhxUIjAkXPoFBgRGDEoMQCwQYhyKgBAmGfIooCxiRCCyNF4ptgVyBd?=
 =?us-ascii?q?zMaCCwEgycJCoFtG4ZGhSGCWEAygQUBAYwHAQE?=
X-IronPort-AV: E=Sophos;i="5.56,275,1539673200"; 
   d="scan'208";a="53181758"
X-Amp-Result: UNKNOWN
X-Amp-Original-Verdict: FILE UNKNOWN
X-Amp-File-Uploaded: False
Received: from vger.kernel.org ([209.132.180.67])
  by mtab.intel.com with ESMTP; 24 Nov 2018 12:10:02 -0800
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1726299AbeKYG7K (ORCPT <rfc822;like.xu@linux.intel.com>
        + 23 others); Sun, 25 Nov 2018 01:59:10 -0500
Received: from pandora.armlinux.org.uk ([78.32.30.218]:43488 "EHLO
        pandora.armlinux.org.uk" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1726107AbeKYG7K (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Sun, 25 Nov 2018 01:59:10 -0500
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
        d=armlinux.org.uk; s=pandora-2014; h=Sender:In-Reply-To:Content-Type:
        MIME-Version:References:Message-ID:Subject:Cc:To:From:Date:Reply-To:
        Content-Transfer-Encoding:Content-ID:Content-Description:Resent-Date:
        Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:List-Id:
        List-Help:List-Unsubscribe:List-Subscribe:List-Post:List-Owner:List-Archive;
         bh=FdGqo3cC/VpmpjM13+E2Bs/k7k9atBHPHKhA454la/Y=; b=e3aBn87ggYtQTSbyOsPs/7THM
        tI1Dyrm1mXU4GnkKAhi9J4RYZE+I6Zx/Aw4ZSV9Pt30dLJKKTwj2cgJbuoSOuZkHQaUql8voPLL/T
        IB21s7BISc9H/9RS4fxKdvPWLC3+VqM0qMxLEvT5baDk2pS1Qbd4QHi9c99tKZ8+R0/Yo=;
Received: from n2100.armlinux.org.uk ([2001:4d48:ad52:3201:214:fdff:fe10:4f86]:32989)
        by pandora.armlinux.org.uk with esmtpsa (TLSv1.2:ECDHE-RSA-AES128-GCM-SHA256:128)
        (Exim 4.90_1)
        (envelope-from <linux@armlinux.org.uk>)
        id 1gQeFO-0006kW-M8; Sat, 24 Nov 2018 20:09:46 +0000
Received: from linux by n2100.armlinux.org.uk with local (Exim 4.90_1)
        (envelope-from <linux@n2100.armlinux.org.uk>)
        id 1gQeFM-0007Hs-0F; Sat, 24 Nov 2018 20:09:44 +0000
Date: Sat, 24 Nov 2018 20:09:42 +0000
From: Russell King - ARM Linux <linux@armlinux.org.uk>
To: Aaro Koskinen <aaro.koskinen@iki.fi>, tony@atomide.com
Cc: Peter Ujfalusi <peter.ujfalusi@ti.com>, vkoul@kernel.org,
        dan.j.williams@intel.com, dmaengine@vger.kernel.org,
        linux-kernel@vger.kernel.org, linux-omap@vger.kernel.org
Subject: Re: [PATCH] dmaengine: ti: omap-dma: Configure LCH_TYPE for OMAP1
Message-ID: <20181124200942.GS6920@n2100.armlinux.org.uk>
References: <20181119104040.12885-1-peter.ujfalusi@ti.com>
 <20181119184649.GE16897@darkstar.musicnaut.iki.fi>
 <6af8c6e7-bf5c-5555-161b-5d3fb7ecae43@ti.com>
 <20181120210406.GB24888@darkstar.musicnaut.iki.fi>
 <20181122102948.GN6920@n2100.armlinux.org.uk>
 <20181122151236.GA9611@n2100.armlinux.org.uk>
 <6ed280af-edb6-4be7-82f4-7fc00378103e@ti.com>
 <20181123185215.GH12912@darkstar.musicnaut.iki.fi>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20181123185215.GH12912@darkstar.musicnaut.iki.fi>
User-Agent: Mutt/1.5.23 (2014-03-12)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

On Fri, Nov 23, 2018 at 08:52:15PM +0200, Aaro Koskinen wrote:
> Hi,
> 
> On Fri, Nov 23, 2018 at 02:35:04PM +0200, Peter Ujfalusi wrote:
> > On 22/11/2018 17.12, Russell King - ARM Linux wrote:
> > > I'm also not sure about this:
> > > 
> > >         if (cpu_is_omap15xx())
> > >                 end++;
> > > 
> > > in dma_dest_len() - is that missing from the omap-dma driver?  It looks
> > > like a work-around for some problem on OMAP15xx, but I can't make sense
> > > about why it's in the UDC driver rather than the legacy DMA driver.
> > 
> > afaik no other legacy drivers were doing similar thing, this must be
> > something which is needed for the omap_udc driver to fix up something?
> 
> Here's the patch that added it: https://marc.info/?l=linux-omap&m=119634396324221&w=2
> 
> "Make DMA-OUT behave on the 1510 ... the 1510 CPC register was just
> off-by-one with respect to the 1611 CDAC"

... which suggests that's a problem with the CPC register itself, and
we should fix that in the DMAengine driver rather than the USB gadget
driver.

Tony, any input on this?

-- 
RMK's Patch system: http://www.armlinux.org.uk/developer/patches/
FTTC broadband for 0.8mile line in suburbia: sync at 12.1Mbps down 622kbps up
According to speedtest.net: 11.9Mbps down 500kbps up
