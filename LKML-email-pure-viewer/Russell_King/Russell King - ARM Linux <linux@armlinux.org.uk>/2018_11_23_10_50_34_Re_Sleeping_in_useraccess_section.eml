Return-Path: <linux-kernel-owner@vger.kernel.org>
Delivered-To: unknown
Received: from linux.intel.com (10.54.29.200:995) by likexu-workstation with
  POP3-SSL; 23 Nov 2018 23:34:13 -0000
X-Original-To: like.xu@linux.intel.com
Delivered-To: like.xu@linux.intel.com
Received: from fmsmga001.fm.intel.com (fmsmga001.fm.intel.com [10.253.24.23])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by linux.intel.com (Postfix) with ESMTPS id B9C5558040F;
	Fri, 23 Nov 2018 02:51:12 -0800 (PST)
Received: from orsmga102-1.jf.intel.com (HELO mga09.intel.com) ([10.7.208.27])
  by fmsmga001-1.fm.intel.com with ESMTP; 23 Nov 2018 02:51:12 -0800
X-SG-BADATTACHMENTNOREPLY: True
IronPort-PHdr: =?us-ascii?q?9a23=3AkcJVnx3sOCTyd32osmDT+DRfVm0co7zxezQtwd8Z?=
 =?us-ascii?q?segQKv3xwZ3uMQTl6Ol3ixeRBMOHs6IC07KempujcFRI2YyGvnEGfc4EfD4+ou?=
 =?us-ascii?q?JSoTYdBtWYA1bwNv/gYn9yNs1DUFh44yPzahANS47xaFLIv3K98yMZFAnhOgpp?=
 =?us-ascii?q?POT1HZPZg9iq2+yo9JDffwZFiCChbb9uMR67sRjfus4KjIV4N60/0AHJonxGe+?=
 =?us-ascii?q?RXwWNnO1eelAvi68mz4ZBu7T1et+ou+MBcX6r6eb84TaFDAzQ9L281/szrugLd?=
 =?us-ascii?q?QgaJ+3ART38ZkhtMAwjC8RH6QpL8uTb0u+ZhxCWXO9D9QKsqUjq+8ahkVB7oiD?=
 =?us-ascii?q?8GNzEn9mHXltdwh79frB64uhBz35LYbISTOfFjfK3SYMkaSHJPUMhRSSJPH4Cy?=
 =?us-ascii?q?b4UAAOUdIOlXrYfyp0AWrRa8HgSsGP/jxiNUinPqx6A2zeIsGhzG0gw6GNIOtW?=
 =?us-ascii?q?zZosnoNKcJSuC60q3IzTHeZP1T2Df97ofIeQ04rfqRQb9+bc3fwlQpGQPEiFWQ?=
 =?us-ascii?q?tIPkNC6S2+QJsmib6fdgVO20hmE9sQFxpzyvxsYqionUiYMZ0FfE9T92wIovON?=
 =?us-ascii?q?24S1d2bNi5G5VesCGaMpF5QsIkQ2xwoik60LgGuZq6fCgM1ZQmyATTa/udc4iH?=
 =?us-ascii?q?+B7jSeWRLS9jhHJ9Zr2wmQu98VS+xe3nSsm4ylBKoTRZktTKq3sD1ATT59CZRv?=
 =?us-ascii?q?dh+kqtwyuD2g7N5u1ePEw5lrbXJ4Qgz7MyjpYfr1jPEjPrlEjzg6KZa0op9+ut?=
 =?us-ascii?q?5uv9f7rrpoGQOop6hw3gLqgih8myDfolPgUBWmWb9/mz1LPt/UD8TrVFkOA6nr?=
 =?us-ascii?q?XcvZ3VK8QWpa+0DglI2Yg58Rm/FS2p0NEAkHkHMl1FfBWHgpD3O1HBPv/4F+2z?=
 =?us-ascii?q?g1eynzdxwfDJILnhDo/KLnjZn7ftZbd960hCxwov1d1T+Y5YB7UbLP7uVEL9qs?=
 =?us-ascii?q?bUAgI6PgCo2erqCddw2psbWW2VA6+ZNK3SsUWP5uIqO+SMYI4VuDDgK/kq/vLu?=
 =?us-ascii?q?jmE2mUUbfaa32ZsbcXe4H/pgI0qHe3rhmckBEWgUsQokVuDqi0ONUSRVZ3msW6?=
 =?us-ascii?q?Iw/DY7CJipDYvbXICinKSB3DunHp1Rfm1GDlGMEXT2eImeVPYMdTmfIstgkjwC?=
 =?us-ascii?q?SLigRJUt1RCotA/m1bVnKvDY9TEftZLmzNJ1/fHclQku9TxoCMSQy2GNQHt1nm?=
 =?us-ascii?q?MUXTA227pzoUxgyliZ16h4jOdVFdhS5/NPTwc7OoTQz+18C9DuRA3Bes2FR0qh?=
 =?us-ascii?q?QtWjGTsxVM4+w8cSY0ZhHNWvlhLD3y20DLMPlLyLA5o08qTb33XqI8Z9ynDG1L?=
 =?us-ascii?q?QujlU8Q8tPM3GmibB79wTJG4HJlECZnb6wdasAxC7N6HuDzW2WsU5CSw5wUaLF?=
 =?us-ascii?q?XXMFakvMt9v55FjPT7uvCbQhLwtAxtSOKqpMat31k1pGQO3vN8jZY2K0g22wHw?=
 =?us-ascii?q?qHxquQbIr2fGUQxCbdB1ICkwwJ+XaGNBIxBiGuo2/FCDxuFFTvY17j8OVkqXO7?=
 =?us-ascii?q?SFM0wB+Ob0F7y7W1/RsVj+SGS/wPxrIEpDshqzJsEVmgxd3WFcSPqxBhfKpGZ9?=
 =?us-ascii?q?M9+0lI1WTeuwx5PZygKqRii0UacwR2uUPuyhp2Bp9BkcgssHMl0g5yJbiE31NG?=
 =?us-ascii?q?cjOSxYrwNaHPKmnu4BCvbLbb1UzE39aI5KgD8vQ4pE/lvAGyCEUi9W5q091U03?=
 =?us-ascii?q?ua+5XLAxAeUZP3UkYr6Rd6o6vWbTU654PRzXdsK7W7sife29I1A+so0gqgf9Za?=
 =?us-ascii?q?MKODCA/yE80bC9KyKOAwnFipdBYEPOFU9K47JM6mc/qG2Ki2POdvhj6mjGJH4J?=
 =?us-ascii?q?xj3UKI7SZzVunI35MdyfGCwgSHTyv8jEumss3vg49EYS8dH2WhxinkHoJefbBy?=
 =?us-ascii?q?cpsRBmeoIM23wct+ioXpW35Z8l6jGlwH1NWoeRqUc1zywwlQ2V4LrnygnCuy1y?=
 =?us-ascii?q?Z0nC0xrqqDwCzOxPzvdRoaOmJRWGZul1btIYiugNAcU0ildAwplBqj5UbnyKlX?=
 =?us-ascii?q?vqV/L2/PQUhWeyj6NX1tUqy1trCaec5A9IsosTlLUOS7eV2aUL/9rAcA3CP5Am?=
 =?us-ascii?q?Rewyo3dze0tZXjnhx2kX6SI2x3rHXEZ85w3xDf5NrHSP5V3zoGQjR4iDbNCli9?=
 =?us-ascii?q?Odmp4cubl5PZvu+iUGKhU4VZcTP3woOYqCu7+WpqDAW/nvCygNHmERI20TTm19?=
 =?us-ascii?q?lsTijIqBf8Yo/216W1K+5nf09oBEPi5Mp+AI1xjowwhJQI03gAmpqV5WYHkXv0?=
 =?us-ascii?q?MdhD26LxdmANRT0Iw97S+gTlw1dsLnGKx4L4UHWS3M1hasK+YmMX3CI98s9LBL?=
 =?us-ascii?q?2V7LxCgSt6vF64oRjNbvh6mzcX0eEu52ICg+EVpAotyT2QA7AIEklfJyDslRWI?=
 =?us-ascii?q?79aloaVTZWavd6Ww1UVkkdCgCrGCvh9TWHLjdpg+Gi9w6911MEjQ333r9oHkZN?=
 =?us-ascii?q?7QYMoQthKOkhfMlehVKI8rmfoMiipqImb9vXwjy+4mgh1ix5C6vI6bK2pz+KK1?=
 =?us-ascii?q?GAJXNjrwZ8kL4DHikb5entqK34CoBphhHzQLXJjyQv6yHjMdq+/nNxqQHz0msX?=
 =?us-ascii?q?iUB6DfHQCE5UdirnLPFY2rNn6NKHkYy9ViWAeSJEhFjA8IWzU6m4YzFhq2y8z5?=
 =?us-ascii?q?bEd5+jcR60bkqhtLz+JkLRj+XX3ZpAe1cTc0U5mfIQFS7gFD4UfVLMOf4vhyHy?=
 =?us-ascii?q?Fe4p2usgiNJnaHaARPCGEDQlaECEz7Prmy+dnA9PCVCfGkIPvJZbWOtPZSV/OV?=
 =?us-ascii?q?xZ+01otm/jCMNtiAP3V4Dv073FZDUm59G8jDhzoPTCkXnTrXb8GHvBe85jF3rs?=
 =?us-ascii?q?en/fTpQg3v4JWAC6BIPdVz4Ry2grqDN+2NhCZ/MzlYzYgBxXvJyLgZwV4ThDti?=
 =?us-ascii?q?dzirEbQcqyHNSLjclbNQDx4ecylzLtdH77og3glRPs7WktP01rlljv4sFldKT1?=
 =?us-ascii?q?rhltuyZcwNJWG9O0jKBEKKNLSAOD3KzNv7YaK6Sb1MkupUswe8tiqcE0/mJj6D?=
 =?us-ascii?q?jSXmVwizMeFQiyGWJBxet5+8chZuCmjjTcjqah6hMN9wgj0536c0hm7RNWMHNT?=
 =?us-ascii?q?h8ckVNrqCf7C9Cg/V/HXBB4WRhLeWehymZ6OzYII4MsfR3GiR0i/5a4HMixrRP?=
 =?us-ascii?q?8SFLX+Z1lzXSr9J0p1Gmk/KCyj5mUBpItzZKi5iHvURkOaXF6JZAXWzI8w4K7W?=
 =?us-ascii?q?WVEx4KvcdqCsXzu6BMzdjCjL7zKDZH897O4cQQHdTbKMKZP3onKhfpHD/UDA0Y?=
 =?us-ascii?q?TT+kL23fhkpdkO2M+X2RtJQ1tp/smJ8WQL9BSFM1Du8aClhiHNEaIJZ4RDUkkb?=
 =?us-ascii?q?uajM4O/XW/rRnRS99cvpDITf+SBfTvKDCEjbhLfRcIwLX4LZgNOY3/wUBtdl56?=
 =?us-ascii?q?nIGZU3bXCNBVqwVzfxMzugNG930tYHc03hffdxi27XsXXd21mBF+z0NXW8Fl0D?=
 =?us-ascii?q?bq/kd/cl7LojYguEArnNHkhy2BNjnrI+GtXtcFWGLPq0EtP8ajEE5OZgqokBkh?=
 =?us-ascii?q?bW+cSg=3D=3D?=
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A0AfAABh2/dbh0O0hNFiGgEBAQEBAgEBA?=
 =?us-ascii?q?QEHAgEBAQGBZYExgTmBAieYDoINFJkcEhgLCAGIVSI4EgEDAQEBAQEBAgETAQE?=
 =?us-ascii?q?BCA0JCCkjDII2JAGCYgECAwECNwYBATcBBQkBAQoYCSUDDAUoNAWDHAGCAQEDA?=
 =?us-ascii?q?QqmHIIfgnYBAQWHEgiMCRc+gUGBEYMSgxCBR3SFDosTlHEJkSQLGIFKjz4smAS?=
 =?us-ascii?q?BXYF2MxoILASDJwmCEotnglhAMoEFAQGJVIJNAQE?=
X-IPAS-Result: =?us-ascii?q?A0AfAABh2/dbh0O0hNFiGgEBAQEBAgEBAQEHAgEBAQGBZYE?=
 =?us-ascii?q?xgTmBAieYDoINFJkcEhgLCAGIVSI4EgEDAQEBAQEBAgETAQEBCA0JCCkjDII2J?=
 =?us-ascii?q?AGCYgECAwECNwYBATcBBQkBAQoYCSUDDAUoNAWDHAGCAQEDAQqmHIIfgnYBAQW?=
 =?us-ascii?q?HEgiMCRc+gUGBEYMSgxCBR3SFDosTlHEJkSQLGIFKjz4smASBXYF2MxoILASDJ?=
 =?us-ascii?q?wmCEotnglhAMoEFAQGJVIJNAQE?=
X-IronPort-AV: E=Sophos;i="5.56,269,1539673200"; 
   d="scan'208";a="54519238"
X-Amp-Result: UNSCANNABLE
X-Amp-File-Uploaded: False
Unscannable: 2
Received: from vger.kernel.org ([209.132.180.67])
  by mtab.intel.com with ESMTP; 23 Nov 2018 02:50:56 -0800
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S2503498AbeKWVej (ORCPT <rfc822;like.xu@linux.intel.com>
        + 23 others); Fri, 23 Nov 2018 16:34:39 -0500
Received: from pandora.armlinux.org.uk ([78.32.30.218]:49882 "EHLO
        pandora.armlinux.org.uk" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S2387655AbeKWVej (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Fri, 23 Nov 2018 16:34:39 -0500
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
        d=armlinux.org.uk; s=pandora-2014; h=Sender:In-Reply-To:Content-Type:
        MIME-Version:References:Message-ID:Subject:Cc:To:From:Date:Reply-To:
        Content-Transfer-Encoding:Content-ID:Content-Description:Resent-Date:
        Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:List-Id:
        List-Help:List-Unsubscribe:List-Subscribe:List-Post:List-Owner:List-Archive;
         bh=aqwRYY/+vwgYY35oZo7jprbLdTwnQC03VnyqJIDHueg=; b=pqPQxwUTHIa8iJ6YHnQl55uGn
        9By20yQzyqlJ0OPD71W3w+LWWNYPxVgwl7lHbtaTYDSz2dsJ+44JeVQYH3QxA5uGTOrjmpoWzSF2d
        gPQ45S1gczHe/1Lz75dHbYf/5SADf7G3CLtlTwCFfeiKmANe4HPVW/rSUN5y6kaWDJ6Q4=;
Received: from n2100.armlinux.org.uk ([2001:4d48:ad52:3201:214:fdff:fe10:4f86]:37903)
        by pandora.armlinux.org.uk with esmtpsa (TLSv1.2:ECDHE-RSA-AES128-GCM-SHA256:128)
        (Exim 4.90_1)
        (envelope-from <linux@armlinux.org.uk>)
        id 1gQ92s-0007Va-9P; Fri, 23 Nov 2018 10:50:46 +0000
Received: from linux by n2100.armlinux.org.uk with local (Exim 4.90_1)
        (envelope-from <linux@n2100.armlinux.org.uk>)
        id 1gQ92l-0005eA-6E; Fri, 23 Nov 2018 10:50:39 +0000
Date: Fri, 23 Nov 2018 10:50:34 +0000
From: Russell King - ARM Linux <linux@armlinux.org.uk>
To: hpa@zytor.com
Cc: Julien Thierry <julien.thierry@arm.com>,
        Ingo Molnar <mingo@redhat.com>,
        LKML <linux-kernel@vger.kernel.org>,
        "linux-arm-kernel@lists.infradead.org" 
        <linux-arm-kernel@lists.infradead.org>,
        Catalin Marinas <catalin.marinas@arm.com>,
        Will Deacon <will.deacon@arm.com>,
        James Morse <james.morse@arm.com>
Subject: Re: Sleeping in user_access section
Message-ID: <20181123105034.GQ30658@n2100.armlinux.org.uk>
References: <3e881ee6-0ff6-b8b6-0633-3d4a7743411d@arm.com>
 <5B3B6AF9-9D8C-4577-905E-D407A5E7D0E3@zytor.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <5B3B6AF9-9D8C-4577-905E-D407A5E7D0E3@zytor.com>
User-Agent: Mutt/1.5.23 (2014-03-12)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

On Fri, Nov 23, 2018 at 01:57:12AM -0800, hpa@zytor.com wrote:
> You should never call a sleeping function from a user_access section.
> It is intended for very limited regions.

So, what happens if the "unsafe" user access causes a page fault that
ends up sleeping?

-- 
RMK's Patch system: http://www.armlinux.org.uk/developer/patches/
FTTC broadband for 0.8mile line in suburbia: sync at 12.1Mbps down 622kbps up
According to speedtest.net: 11.9Mbps down 500kbps up
