Return-Path: <linux-kernel-owner@vger.kernel.org>
Delivered-To: unknown
Received: from linux.intel.com (10.54.29.200:995) by likexu-workstation with
  POP3-SSL; 23 Nov 2018 08:32:51 -0000
X-Original-To: like.xu@linux.intel.com
Delivered-To: like.xu@linux.intel.com
Received: from orsmga008.jf.intel.com (orsmga008.jf.intel.com [10.7.209.65])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by linux.intel.com (Postfix) with ESMTPS id 019AE580460;
	Thu, 22 Nov 2018 16:04:07 -0800 (PST)
Received: from orsmga106.jf.intel.com ([10.7.208.65])
  by orsmga008-1.jf.intel.com with ESMTP; 22 Nov 2018 16:04:06 -0800
X-SG-BADATTACHMENTNOREPLY: True
IronPort-PHdr: =?us-ascii?q?9a23=3AfduktBXR6pRBS6cDjg+iYDqRK8HV8LGtZVwlr6E/?=
 =?us-ascii?q?grcLSJyIuqrYZhGOuqdThVPEFb/W9+hDw7KP9fy4CSpYud6oizMrSNR0TRgLiM?=
 =?us-ascii?q?EbzUQLIfWuLgnFFsPsdDEwB89YVVVorDmROElRH9viNRWJ+iXhpTEdFQ/iOgVr?=
 =?us-ascii?q?O+/7BpDdj9it1+C15pbffxhEiCCybL9uLxi6txndutULioZ+N6g9zQfErGFVcO?=
 =?us-ascii?q?pM32NoIlyTnxf45siu+ZNo7jpdtfE8+cNeSKv2Z6s3Q6BWAzQgKGA1+dbktQLf?=
 =?us-ascii?q?QguV53sTSXsZnxxVCAXY9h76X5Pxsizntuph3SSRIMP7QawoVTmk8qxmUwHjhj?=
 =?us-ascii?q?sZODEl8WHXks1wg7xdoBK9vBx03orYbJiIOPZiYq/ReNUXTndDUMlMTSxMGo2y?=
 =?us-ascii?q?YYsRAeQcPuhYoYbyqEcTohS8CwasH/vvxz1Ti3/qwaE2z/gtHR3c0QA+Gd8FrX?=
 =?us-ascii?q?TarM/yNKcXSe270LTIzS7Yb/xI3Tf97JXDfBUgofGKUrJ7bNPdwlQzGg3ZiVub?=
 =?us-ascii?q?tIrrPzKT1uQQvGmQ8u1tVeaui24htgFwrSOiyd02ionMgoIVy1bE9Th2wYovIt?=
 =?us-ascii?q?24UkF7bcS5EJtTriyXMZZ9TM0lQ2Ftoik6y7sGtIahcygQzZQnwx/fa/qac4mH?=
 =?us-ascii?q?+B7jU/yRIThiiHJ4e7Kznxay/la6xeLhT8W7zFFKri9AktnLsHABzQfT5dOfRv?=
 =?us-ascii?q?tm5keuxyiA2B3P6u5aOkA0ibDXK5g/zb4skJcYrEfNHjfulUnokKObcl8o9vWm?=
 =?us-ascii?q?5uj5eLnqu5yRO5Nuhgz/MKkigs6yDOciPgUAQWSX4+qx2KH58UHnXblHjfs7mb?=
 =?us-ascii?q?TDvp/AP8QUvKu5DhdV0ok97xa/CC+r0MoXnXYZNlJJYhGHgJbzO1HIPv/4Ce2z?=
 =?us-ascii?q?g1O2kDdk3/zGP7vhDYvRLnXbjrvtYbJw51RBxAc909xT/Y9YB7IdLP7pW0L8ts?=
 =?us-ascii?q?TUDhojPAy1x+bnBs991oQbWW+XBq+ZMaXSsUKH5+42IOmDepUVuDDjJPgh/vLu?=
 =?us-ascii?q?inE4mVkDcqmzxpYXdn+4Eep8I0mDYnrjnM0BEWEUsQo6VuDqj0eCUTFLa3aoQ6?=
 =?us-ascii?q?08/i07CJ6hDYrbQoCtgb+B0zmhEpxZe2BLEVSMEXbud4WZVPYAciOSIsl9kjMa?=
 =?us-ascii?q?UbitUZMu1RartAXi0bpoMvLU+jEEtZLkzNV15/fclRAu9TNuCMSRyWGNT3xukW?=
 =?us-ascii?q?MOSD87x6R/oU17ylee3ql0mf1YFdpP5/xXVgc2L4LTz+t/C9rqQALOYs+JSEq6?=
 =?us-ascii?q?QtWhGTwxTNUxzMEUb0Z+HNWiiBbD3y2xDr8RlryLAoE0863G03jwIcZ912jJ1K?=
 =?us-ascii?q?07g1Y6RctPMHWshrRj+AjLG47Jj0KZmr6weqQH3C7N82SDwXCUvE5CUg59SqHF?=
 =?us-ascii?q?XXEZZkvLotX1/ELCT7myCbs5NgtN09KNKqxPatfxl1VJWO/jOMjCY2K2g2qwBg?=
 =?us-ascii?q?yHxrWWYIruemUSxiPdCEcfngAX/HaGMxU+Byi7r2LfCjxuCUzgY0f2/eZir3O7?=
 =?us-ascii?q?S1c+zxuWYE15y7q15hkViOSBRPwJwLILpj0tqzVuE1a7xNLZFdyAqw1lfKVfZN?=
 =?us-ascii?q?M95ExK1WbYtwx7I5yhILpuhl8YcwRroUzu0w97BZlHkcgvtHkq1hZ9KbqE0FNd?=
 =?us-ascii?q?cDOVxY3/NafJKmbs5hyva7TZ2lfF0NmI/KcC8/A4q1TlvAG0GUsu6XRn099J03?=
 =?us-ascii?q?SC4pXGFhYdUZX0Ukwv7Rh1u6naYjUh54PTzXBsLai0sjrF29I1BOskygysf8tF?=
 =?us-ascii?q?PKODDg/yF8waB86hKOExn1ipbxQEPP1d9aIuPsOmceeG17CvPOp6gD2mimFH6p?=
 =?us-ascii?q?hn0k2Q7yp8VvLI35Edzv6C2guISTj9g0mhs8ztgo9EeCwdEXC5ySjnA45ReLZ/?=
 =?us-ascii?q?fYIKCWeoPs22yc9yh5/rW35E6lGjA0kK19OueRqXd1b9xxFf1VwLoXy7niu11z?=
 =?us-ascii?q?x1kywzoqWDxiDPwuTiewABOm5EX2RiiVbsIY6pj9EVRkSobg4plAe76kb+3aRU?=
 =?us-ascii?q?uKN/L2zLS0dSYyf2N31iUre3treaec5P6Y8nvj9NUOuhZlCWULj9rAUA0yPiBm?=
 =?us-ascii?q?dR2Co0dzW3tZrnhRx6j2SdIW13rHrYf8Fw2Bje6MbdRf5XwjoJWi14hSPLCVi7?=
 =?us-ascii?q?Otmj5c+UmIvbsuCiS2KhUYVecCnqzY+atCq3/3ZqAQC5n/2ont3nEA460TL01t?=
 =?us-ascii?q?VwVCXIqgr8bZfv16igLe1neUxoDkfm68VmAoF+jpcwhJYI1HgYnJqV53kHkWT0?=
 =?us-ascii?q?MdlBwqLxdnkNRT0Kw97T/gfl3lZuLnaIx4L/S3WczdFtZ9i8YmMKxC0969pGB7?=
 =?us-ascii?q?uT7LxBhSF1uEa3rRrNYfhhmTcQ0fsv52Qdg+0TugotzyOdD6sWHUlZOyzsihuJ?=
 =?us-ascii?q?48q/rKVReGagb7yw2FBiktCmCbGIuhtcV2rhepc+AS9w6d1yMFHW333y8I3keM?=
 =?us-ascii?q?TQYsgVth2biBrAi+lVKJQslvsFnyZnOGT9vWE7xO4/lxBhwZa6vI2fIWV34K25?=
 =?us-ascii?q?GgJYNiHyZ84L/zHtjKVekdyM04GhAJphASkLU4XyTf2zDj0Sr/vnOh2KED09rH?=
 =?us-ascii?q?ebBLXeERWe6Edgs3LADZSrO2uLK3keyNVoXAOdK1BHgAAIQDU6mYY0FhytxMzk?=
 =?us-ascii?q?akt45yoe5ljlqhtX0eJoNgLyUmPepAeudzc1R4KTLBtQ7gFe+UjVNdaS4f50Hy?=
 =?us-ascii?q?Fd5pehthCCKnSHZwRUCmEEQleLCErkPrmq+NnM6eyYBvelIvvKYLWOr/FeVviS?=
 =?us-ascii?q?yZKu1Itm4yiDNsGVMnZ+CP0731JJXWplFMTBhzUPVysXmjrPb8GBoRez5DZ3ot?=
 =?us-ascii?q?qj8PjxWwLv+IiPC6ZUMdp14BC7mqODN++WhCZkJjdUzJIMxXnUyLcB2F4ekT1h?=
 =?us-ascii?q?dz6oEb4Yry7CULrQmrNLDx4ccy5yNMxI778l3glQI8HbjMn51qV/jv4zBFdITl?=
 =?us-ascii?q?jhmsCvZcwXLGCxLlLHBECXNLuYIT3H2d34YaS5SbdIluVbqwWwuSqHE0/kJjmD?=
 =?us-ascii?q?lyfmVxGsMeFPjSGXJh9euJu6chZiF2fjVs/magagPd9zjD02x6A0h3zQOW4dNz?=
 =?us-ascii?q?h8b11CrrmK4SxEhfV/HnRL7mB5IumchyaZ8+7YJ44Mvvt2GSt0jfxV4XQgx7tR?=
 =?us-ascii?q?7SFJX/h1mCrUrt5zrFCqiOiPyjx7UBVQrjZHnp6EvUJnOa/B7JlPRW7E/A4R7W?=
 =?us-ascii?q?WXExkKu9plCtj1t69M0NTAiKLzJylE89/P+cscBs7UKN+IMXY7MBrpHiLUAxUB?=
 =?us-ascii?q?TTKxKW7fgEldmumI9nKJtpg6toTsmJ0WR75bTlM1EPYaCkVjHNMaIZZ3Xikrkb?=
 =?us-ascii?q?iUjMMT4Xq+rR/RRNhVv5zdV/KSB+nvJyidjbVeexQIxrb4fswvMdjA0ldiYxFe?=
 =?us-ascii?q?kZrLHQKERtlWoiRlRgw5ukNA9D55VGJliGz/bQb42mIIDvOwmlYViw1xKaFl3Q?=
 =?us-ascii?q?3Jq3M2IEfa7H80kU8sif3smzWVcTjsPOG3R44QFimi5Bt5CY/yXwsgNV76pkdj?=
 =?us-ascii?q?LjqRAusJ17Y=3D?=
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A0ABAACTQvdbh0O0hNFiGgEBAQEBAgEBA?=
 =?us-ascii?q?QEHAgEBAQGBUQUBAQEBCwGBMIE5gQInjBGLf4INFJIvhHeBcRYYCwgBhECEEiI?=
 =?us-ascii?q?0CQ0BAwEBAQEBAQIBEwEBAQgNCQgpIwyCNiQBgmEBAQEBAwECNwYBATcBBQkBA?=
 =?us-ascii?q?QoVAwklAwwFKCETBYMcAYIBAQMBCqcRgh+CdgEBBYcWCIwJFz6BQYEQAYMSgxC?=
 =?us-ascii?q?CFIU1ny9VCZEkCxiBWYguhwEsmASBRoINMxoILAQ7gmwJghKLZ4JYQDKBBQEBj?=
 =?us-ascii?q?FUBAQ?=
X-IPAS-Result: =?us-ascii?q?A0ABAACTQvdbh0O0hNFiGgEBAQEBAgEBAQEHAgEBAQGBUQU?=
 =?us-ascii?q?BAQEBCwGBMIE5gQInjBGLf4INFJIvhHeBcRYYCwgBhECEEiI0CQ0BAwEBAQEBA?=
 =?us-ascii?q?QIBEwEBAQgNCQgpIwyCNiQBgmEBAQEBAwECNwYBATcBBQkBAQoVAwklAwwFKCE?=
 =?us-ascii?q?TBYMcAYIBAQMBCqcRgh+CdgEBBYcWCIwJFz6BQYEQAYMSgxCCFIU1ny9VCZEkC?=
 =?us-ascii?q?xiBWYguhwEsmASBRoINMxoILAQ7gmwJghKLZ4JYQDKBBQEBjFUBAQ?=
X-IronPort-AV: E=Sophos;i="5.56,267,1539673200"; 
   d="scan'208";a="41242623"
X-Amp-Result: UNSCANNABLE
X-Amp-File-Uploaded: False
Unscannable: 2
Received: from vger.kernel.org ([209.132.180.67])
  by mtab.intel.com with ESMTP; 22 Nov 2018 16:03:05 -0800
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S2407909AbeKWKox (ORCPT <rfc822;like.xu@linux.intel.com>
        + 23 others); Fri, 23 Nov 2018 05:44:53 -0500
Received: from pandora.armlinux.org.uk ([78.32.30.218]:42524 "EHLO
        pandora.armlinux.org.uk" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1733280AbeKWKox (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Fri, 23 Nov 2018 05:44:53 -0500
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
        d=armlinux.org.uk; s=pandora-2014; h=Sender:In-Reply-To:Content-Type:
        MIME-Version:References:Message-ID:Subject:Cc:To:From:Date:Reply-To:
        Content-Transfer-Encoding:Content-ID:Content-Description:Resent-Date:
        Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:List-Id:
        List-Help:List-Unsubscribe:List-Subscribe:List-Post:List-Owner:List-Archive;
         bh=Ll3zPgcCCM4R39XQddVEV5ht/ea+SLtI7ptO9BB4KaQ=; b=N79U+GQ/2RuIeNCS7YQ2b5XM7
        N5ELXADkeeMIeYmC2b2IS26csAJwWV4iC701TfE3pqweeBWh4XyPXwfhzY5sD90b1TSaQoiLwoZ0z
        WH41aIXyC4aCkwYgsxpbwRhAMQ6E30Y+13qbZftivY7EoXnCLB2q/Z5niNutnCTMfV1EA=;
Received: from n2100.armlinux.org.uk ([fd8f:7570:feb6:1:214:fdff:fe10:4f86]:40460)
        by pandora.armlinux.org.uk with esmtpsa (TLSv1.2:ECDHE-RSA-AES128-GCM-SHA256:128)
        (Exim 4.90_1)
        (envelope-from <linux@armlinux.org.uk>)
        id 1gPyvz-0004nd-Av; Fri, 23 Nov 2018 00:02:59 +0000
Received: from linux by n2100.armlinux.org.uk with local (Exim 4.90_1)
        (envelope-from <linux@n2100.armlinux.org.uk>)
        id 1gPyvw-0007lX-KR; Fri, 23 Nov 2018 00:02:56 +0000
Date: Fri, 23 Nov 2018 00:02:54 +0000
From: Russell King - ARM Linux <linux@armlinux.org.uk>
To: Sasha Levin <sashal@kernel.org>
Cc: stable@vger.kernel.org, linux-kernel@vger.kernel.org
Subject: Re: [PATCH AUTOSEL 4.14 10/21] ARM: make lookup_processor_type()
 non-__init
Message-ID: <20181123000254.GM30658@n2100.armlinux.org.uk>
References: <20181122195452.13520-1-sashal@kernel.org>
 <20181122195452.13520-10-sashal@kernel.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20181122195452.13520-10-sashal@kernel.org>
User-Agent: Mutt/1.5.23 (2014-03-12)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

Hi Sasha,

We need to keep track of which Spectre patches have been backported
and which haven't.  David Long has been doing the backport work,
which doesn't include all the patches in my present spectre branch.
You've picked up the last five, meaning there's a bunch in the middle
of the entire series which haven't yet been considered - for example,
the Spectre variant 1.1 patches.

The entire series of 32-bit ARM Spectre patches can be listed in
mainline via:

$ git log v4.16..383fb3ee8024

where almost all of those need to be applied to stable kernels, with
possible manual back-porting where they don't apply.

On Thu, Nov 22, 2018 at 02:54:41PM -0500, Sasha Levin wrote:
> From: Russell King <rmk+kernel@armlinux.org.uk>
> 
> [ Upstream commit 899a42f836678a595f7d2bc36a5a0c2b03d08cbc ]
> 
> Move lookup_processor_type() out of the __init section so it is callable
> from (eg) the secondary startup code during hotplug.
> 
> Reviewed-by: Julien Thierry <julien.thierry@arm.com>
> Signed-off-by: Russell King <rmk+kernel@armlinux.org.uk>
> Signed-off-by: Sasha Levin <sashal@kernel.org>
> ---
>  arch/arm/kernel/head-common.S | 6 +++---
>  1 file changed, 3 insertions(+), 3 deletions(-)
> 
> diff --git a/arch/arm/kernel/head-common.S b/arch/arm/kernel/head-common.S
> index 8733012d231f..7e662bdd5cb3 100644
> --- a/arch/arm/kernel/head-common.S
> +++ b/arch/arm/kernel/head-common.S
> @@ -122,6 +122,9 @@ __mmap_switched_data:
>  	.long	init_thread_union + THREAD_START_SP @ sp
>  	.size	__mmap_switched_data, . - __mmap_switched_data
>  
> +	__FINIT
> +	.text
> +
>  /*
>   * This provides a C-API version of __lookup_processor_type
>   */
> @@ -133,9 +136,6 @@ ENTRY(lookup_processor_type)
>  	ldmfd	sp!, {r4 - r6, r9, pc}
>  ENDPROC(lookup_processor_type)
>  
> -	__FINIT
> -	.text
> -
>  /*
>   * Read processor ID register (CP#15, CR0), and look up in the linker-built
>   * supported processor list.  Note that we can't use the absolute addresses
> -- 
> 2.17.1
> 

-- 
RMK's Patch system: http://www.armlinux.org.uk/developer/patches/
FTTC broadband for 0.8mile line in suburbia: sync at 12.1Mbps down 622kbps up
According to speedtest.net: 11.9Mbps down 500kbps up
