Return-Path: <linux-kernel-owner@vger.kernel.org>
Delivered-To: unknown
Received: from linux.intel.com (10.54.29.200:995) by likexu-workstation with
  POP3-SSL; 23 Nov 2018 08:32:24 -0000
X-Original-To: like.xu@linux.intel.com
Delivered-To: like.xu@linux.intel.com
Received: from fmsmga002.fm.intel.com (fmsmga002.fm.intel.com [10.253.24.26])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by linux.intel.com (Postfix) with ESMTPS id 9648C58037D;
	Thu, 22 Nov 2018 13:45:21 -0800 (PST)
Received: from fmsmga101.fm.intel.com ([10.1.193.65])
  by fmsmga002-1.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384; 22 Nov 2018 13:45:21 -0800
X-SG-BADATTACHMENTNOREPLY: True
IronPort-PHdr: =?us-ascii?q?9a23=3A4PeuzxKIr0X/htF//9mcpTZWNBhigK39O0sv0rFi?=
 =?us-ascii?q?tYgULvv8rarrMEGX3/hxlliBBdydt6oUzbKO+4nbGkU4qa6bt34DdJEeHzQksu?=
 =?us-ascii?q?4x2zIaPcieFEfgJ+TrZSFpVO5LVVti4m3peRMNQJW2aFLduGC94iAPERvjKwV1?=
 =?us-ascii?q?Ov71GonPhMiryuy+4ZLebxlLiTanfb9+MAi9oBnMuMURnYZsMLs6xAHTontPde?=
 =?us-ascii?q?RWxGdoKkyWkh3h+Mq+/4Nt/jpJtf45+MFOTav1f6IjTbxFFzsmKHw65NfqtRbY?=
 =?us-ascii?q?UwSC4GYXX3gMnRpJBwjF6wz6Xov0vyDnuOdxxDWWMMvrRr0yRD+s7bpkSAXwhS?=
 =?us-ascii?q?gIOT428mHZhMJzgqxGvhyuuwd/w5bWbYyOKPpyYrnQcc8GSWZdXMtcUTFKDIOm?=
 =?us-ascii?q?b4sICuoMJeFWoJPnp1sSrBu+AxSnCf7ryj9Vg3/5w6s60/89EQHH2gwgENYOu2?=
 =?us-ascii?q?nTodXwLqgSS/y1zKjOzTnZdPxW3Sr96I3WfRAnuvGMQbNwcczeyUkrDA7FgVKQ?=
 =?us-ascii?q?qYvqPzORyOsNtnKU7+tkVe61l2EnrARxryGpy8wxiYfJnpoYxk7Y+Sh92oo5ON?=
 =?us-ascii?q?O1RFBhbdK5E5ZcqzuWOop0T886XW1kpCI3xqcFtJO7ZiQG1ZUqyhzFZ/Cad4WF?=
 =?us-ascii?q?4xTuX/uLLzhinnJqYre/ig6y8Ue+zu38UdG50EhFriVbiNnArHMN2ALJ6siBVP?=
 =?us-ascii?q?R9+l2t2TGV1wDc8u1EIEY0mrTHK5M53LI8ip4evV7eEiL4hkn6lrKae0Y49uSy?=
 =?us-ascii?q?6unqYK3qppqGOI91jgH+PL4umsu6AekgNggOXm6b+fmz1bH6/k32Xq9Kjvsona?=
 =?us-ascii?q?ndqZzaIsoapqinDA9PyYsj9Rm/ACm80NgCnnkIMkhFeBSZgIjtIV3OJ+r4Dfin?=
 =?us-ascii?q?j1S2jDhr3+zGPqHmApjVKnjDkbThcqhn509T1Qo+1tRf55NSCrEcL/P/QE7xtN?=
 =?us-ascii?q?rEDhAnNwy42froCNJ41okGQ2KAHreZML/OsV+P/u8vI/ODZI4JuDnnLPgp/f7u?=
 =?us-ascii?q?jWIjll8bcqmkxp8XaHG+HvR7LESVe3vsgtEdEWgUugoyVvDliFqHUTRLfXa9Q7?=
 =?us-ascii?q?o85i0nCIKhFYrDRIetj6Kb0Ce4GZ1WYGZGCleXHHfsdoWEXeoMaS2ILs9glDwE?=
 =?us-ascii?q?SaauS4s72R6ysw/6zqJtLvDI9S0AqZLjyN916vXJmhEp9Tx0CMed33uXT25unG?=
 =?us-ascii?q?MFXDs23KF5oUxgxVaPy6l4g/pEFdNN4/NFSBs1NZnZz+ZiEdD9RhrBfsuVSFah?=
 =?us-ascii?q?WtimAis+TtQrz98KYkZyAdOijh/Y0iquAr8VkaGLBZMu/qLd2XjxO9hyy3Lc2K?=
 =?us-ascii?q?Y9iFkmR9NFNXe6ia5n6wjTG4nJnl2EmKmwa6QTwjTB9GeZwmqIp0FXTghwXaLB?=
 =?us-ascii?q?XXAcY0vWqc/05kfDT7+oFLQmPRFNyc+EKqtWdNLpiU9KS+vkONTbe2ixgXu/BQ?=
 =?us-ascii?q?6UxrOQa4rnY3gS0z/DCEcaiQwT/WyJNQ4lBii/pWLTFzhuFVPpY0Px/uhysnK7?=
 =?us-ascii?q?Tkkozw6Ua01tzaa6+hkQhfaEUfMcwqoEuDs9qzVzBFu9w9PWC9+Hpwp9fKVdYc?=
 =?us-ascii?q?kx4Etd2WLerQx9Op2gL6ZthlMFdwR3vkXu1wh4C4lakMgqqm8qwxR2Ka6CzFxB?=
 =?us-ascii?q?cDaY14jqOrLLMmny4Ayva6nO117E1NaZ5KgO5+o4qln5pw6pC1ct/G9h09lW1H?=
 =?us-ascii?q?uc+I7HDA4TUZL3T0Y2+AJ2p7DcYikh+YzU0WdgPrWzsj/Hw9gpHvcqyg68f9dD?=
 =?us-ascii?q?N6OJDA/zE9AAC8eyMuArmlipYQgCPOBd76M0O8Kmd/2b2K+kJupgnTSmjXhZ74?=
 =?us-ascii?q?B5yE6D6y18SuvQ1ZYf3/6YxheHVyv7jFq5qMD3mJxLaisIHmWizijoHohRabNo?=
 =?us-ascii?q?fYYKEGuhP9e4xtFjiJHzQX5Y81ijCkgC2M+ofxqSclP80RdR1UQRvXyohy+4wy?=
 =?us-ascii?q?ZonDEuq6qVxDbOzPj6dBobJm5LQ3FvjFftIYSuj9EWRlOobxUvlBa+4Ub6xq5b?=
 =?us-ascii?q?pLlwLmXJQEdIeTT2IH9mUqeqqrWCZMtP4osysSpLSOS8fUyaSrnlrhsYySzjBW?=
 =?us-ascii?q?hexDM8dz2woZX2hR96iGGcLHZ1snXZf9p9xRPe5NzaWP5Q0SAKRCh+iTnLGFe8?=
 =?us-ascii?q?O8Ol8smTl5fGquq+TX6uVoVPcSn3yoONrCu66ndtARGlnfCzm9vnHBM+0S/60d?=
 =?us-ascii?q?lqSCrJoAz9Yonty6S1L+ZnclN0C1/77spwApt+nZcohJEMxXgagY2Y/Xkdnmfy?=
 =?us-ascii?q?K9lb2b/+Y2ALRT4E2NPV5Anl2Et+LnOG3Y75V3Odwtd/aNm+eG8ZxiU978VSAq?=
 =?us-ascii?q?eO8LNEhTd1oka/rQ/JZPh9nzQdxuE05H8Une4JoxYtwTuHAr8JA0ZYJyPsmg+M?=
 =?us-ascii?q?79C/qqVXeWmufaKx1Ep4gdCuErWCrhtAV3b+f5coBTVw4dlnMFLQzH3z7ZnpeM?=
 =?us-ascii?q?XXbdIWrBGVkg3Pj+5IKJIqjfoKhDFqOWb8vX0j1u46ggZi3ZC8vIibNWpt+Li1?=
 =?us-ascii?q?DQJfNj3wf8kT4C3ijb5CnsaK2ICiBo5uFS8MXJvsUPKkCjYSten8OgaKET08rG?=
 =?us-ascii?q?qbGLXFEQ+e7kdms2zAE5SxO36LI3kZyM1oRAOBK0xHnAAUQDI6k4Y7Fg+wwczu?=
 =?us-ascii?q?blx56ioN5lLiqRtM1+FoNwT5UmjFvwelcTM0SJmZLBpL4QBO/UbVMcqC7u1tGy?=
 =?us-ascii?q?FU5IGurAuIKmaDfQRHEXkJWlCYB1DkJrSv5d7A8/WBBuqjNfTOZ6+CqfdZV/eO?=
 =?us-ascii?q?ypKiyY9m/zeKNsWSMXhuFfw72kxfXX9nH8TVgSkASysSlyjVdc6UuA+8+jFrrs?=
 =?us-ascii?q?C46PnrWBzg5YqMC7tRMNVj4RO2gb2EN+6fmil5MytY1ogXyH/Mybgf2kMSii50?=
 =?us-ascii?q?ezmsF7QAqTDCTKbKlqBLCB4bbjt5NNFU4KIkwglNJcnbh8vv2b5llfE1EUlKVF?=
 =?us-ascii?q?z7lsGtZMwHOGW9NFLBBEaWO7WKPzzLw8frYayiTb1clvlbtxq1uTyDCU/sIiyD?=
 =?us-ascii?q?lyX1VxCoKexMkCCbPBlEtI6haBpiFWjjQ8zgahCgNN93jDs2waA7h3/QNG4cNy?=
 =?us-ascii?q?R8fF1JrrGK8SxYhfB/EXRb7nV5NemEhzqZ7+7AJ5cWq/RrBCF0l+Nc4HsiyrpV?=
 =?us-ascii?q?7DtLRPp6mCbJqt5uolemkvSAyzZ9URpOrCpLi5yPvUl4JarZ8ZxACj74+0cN6m?=
 =?us-ascii?q?uKAggioMBsBtmpvLpfjpDNlampcx9B/sjS8M9aANLbe+ydN390FBPzBD/SRCEB?=
 =?us-ascii?q?UDumM3rDhkpSlLnG83SPspk87JLohZ8DTKRHVVo6EtsVDUNqGNEHKZZzGDgjlO?=
 =?us-ascii?q?jI34Yz+XOioUyJF41htZfdW6fKDA=3D=3D?=
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A0DtAgBBI/dbh0O0hNFiHQIfBQeBTQKCa?=
 =?us-ascii?q?IECJ4N5g3uQHYINFGaNWYhngXUqAxABiFIiNAkNAQMBAQEBAQECARMBAQEIDQk?=
 =?us-ascii?q?IKSMMgjYigmUBAgMBAiAdATgBAwIJAQEFBQsNAgImAgIDHxIBBQEcBxIFgxwBg?=
 =?us-ascii?q?WgBAxUFnHM8iw2BL4J3BYQwCkANghECBhJ5in6BVz+BEYJdNYJWhSyCVwKPGZB?=
 =?us-ascii?q?pBwKCHASEXIozGIImjmIsl3UwgSWCDTQ8gQGCOwmFf4RRhgI+M4EFAQGMVQEB?=
X-IPAS-Result: =?us-ascii?q?A0DtAgBBI/dbh0O0hNFiHQIfBQeBTQKCaIECJ4N5g3uQHYI?=
 =?us-ascii?q?NFGaNWYhngXUqAxABiFIiNAkNAQMBAQEBAQECARMBAQEIDQkIKSMMgjYigmUBA?=
 =?us-ascii?q?gMBAiAdATgBAwIJAQEFBQsNAgImAgIDHxIBBQEcBxIFgxwBgWgBAxUFnHM8iw2?=
 =?us-ascii?q?BL4J3BYQwCkANghECBhJ5in6BVz+BEYJdNYJWhSyCVwKPGZBpBwKCHASEXIozG?=
 =?us-ascii?q?IImjmIsl3UwgSWCDTQ8gQGCOwmFf4RRhgI+M4EFAQGMVQEB?=
X-IronPort-AV: E=Sophos;i="5.56,267,1539673200"; 
   d="scan'208";a="63619052"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from vger.kernel.org ([209.132.180.67])
  by mga01b.intel.com with ESMTP; 22 Nov 2018 13:45:09 -0800
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S2407586AbeKWI0W (ORCPT <rfc822;like.xu@linux.intel.com>
        + 23 others); Fri, 23 Nov 2018 03:26:22 -0500
Received: from mail-oi1-f196.google.com ([209.85.167.196]:37111 "EHLO
        mail-oi1-f196.google.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S2404988AbeKWI0V (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Fri, 23 Nov 2018 03:26:21 -0500
Received: by mail-oi1-f196.google.com with SMTP id y23so8471410oia.4;
        Thu, 22 Nov 2018 13:45:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=20161025;
        h=mime-version:references:in-reply-to:from:date:message-id:subject:to
         :cc;
        bh=2CLIN8puokknbxrAj+/ZjxfShLAif/OcRoWopnz99GQ=;
        b=lb9oXBOtfGJAcyJIe4QJyd8RJ1pt94PmxyzAxC05Lb7UjDW6pGi9MjMQnbuf/dRIkX
         Vh0rzapNXAVJ43fQbR5o61PjeJQW3k61P0T5gvK4ERKzlpSXHUhIXWW9STramYFYkRBk
         sP5hyB10KAboa7LxmPeQjX1izsjeHWWrHkWurHrN0fkysv+vBJPo5OdlDcvsi2sgYwTO
         s8zy2LUiVXiM8Yj9XHOZymtW7Q9dEljPZ50bcemqx8iSZX9Q5n4W3L2p/G+EQfjmlSIX
         ZGt4uheven64G6mxUq/wMcaQQ+BZ3ox5e3nWqq+j210ZQmdsc3IngZRrvbtrOMoopVzm
         N5GA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20161025;
        h=x-gm-message-state:mime-version:references:in-reply-to:from:date
         :message-id:subject:to:cc;
        bh=2CLIN8puokknbxrAj+/ZjxfShLAif/OcRoWopnz99GQ=;
        b=oDUTzgs/9z+WmUty/+p23JCRmQsVrH/EcomaMXvmrCq+Kos0hfpYIAIr7wPcOKLkqy
         a5YP0TqdfJwGJysy9tCBMnKILbvgf+M7H7CdaLqkcILZB/00FBi3V2a53szh3QJt2lEt
         tXnZuUIASUBb7H/dDtc1Pu6lnRaRuzF4Rlsk1cwgopaRVw1NHyA/W9HQXGI3vu7tGv4Q
         3KWL25RLEjixBWFuvZGWnhNS8IJ4gg9JbR6UBX4Qji+3kidqzr2+w1Jwh38W8dGtaukG
         tS2y3X4uYSHWTD9zXq9p5Xgg/lfFat6Ab9+B5RBfYnMgtIj6Qyo7r14KQtOuyMJYIYNO
         EW/g==
X-Gm-Message-State: AGRZ1gLxS+FsfNRddSVcryNl/iYBtpFz7oZqwWj18VqaibZl6vJSbQY3
        YQ9sf+G+WE5/re7INVxWIJUY4C17sr/bwWT6Ioo=
X-Google-Smtp-Source: AJdET5fXe5gUCxbKq3ZtpCuk7YUEdys0SSgX2Tepo4h89isC8eYm5hZoTFR6eh805vGzdw9SwZ6nCK/9trivvunlT40=
X-Received: by 2002:aca:bdc1:: with SMTP id n184-v6mr7364843oif.321.1542923106072;
 Thu, 22 Nov 2018 13:45:06 -0800 (PST)
MIME-Version: 1.0
References: <1542872803-29060-1-git-send-email-hofrat@osadl.org>
In-Reply-To: <1542872803-29060-1-git-send-email-hofrat@osadl.org>
From: Martin Blumenstingl <martin.blumenstingl@googlemail.com>
Date: Thu, 22 Nov 2018 22:44:55 +0100
Message-ID: <CAFBinCAXt1GPFMptVXrGYi-TsgSxSyNqeWFuz=B=vWV3c1+zwA@mail.gmail.com>
Subject: Re: [PATCH] iio: adc: meson-saradc: check for devm_kasprintf failure
To: hofrat@osadl.org, jic23@kernel.org
Cc: knaack.h@gmx.de, lars@metafoo.de, pmeerw@pmeerw.net,
        carlo@caione.org, khilman@baylibre.com, yixun.lan@amlogic.com,
        xingyu.chen@amlogic.com, gregkh@linuxfoundation.org,
        dan.carpenter@oracle.com, linux-iio@vger.kernel.org,
        linux-arm-kernel@lists.infradead.org,
        linux-amlogic@lists.infradead.org, linux-kernel@vger.kernel.org
Content-Type: text/plain; charset="UTF-8"
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

On Thu, Nov 22, 2018 at 8:52 AM Nicholas Mc Guire <hofrat@osadl.org> wrote:
>
> devm_kasprintf() may return NULL on failure of internal allocation thus
> the assignments to  init.name  are not safe if not checked. On error
> meson_sar_adc_clk_init() returns negative values so -ENOMEM in the
> (unlikely) failure case of devm_kasprintf() should be fine here.
>
> Signed-off-by: Nicholas Mc Guire <hofrat@osadl.org>
> Fixes: 3adbf3427330 ("iio: adc: add a driver for the SAR ADC found in Amlogic Meson SoCs")
Acked-by: Martin Blumenstingl <martin.blumenstingl@googlemail.com>

thank you for the patch!
I tested the non-error case on my Odroid-C1 and it still works fine.


Regards
Martin
