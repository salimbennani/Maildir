Return-Path: <linux-kernel-owner@vger.kernel.org>
Delivered-To: unknown
Received: from linux.intel.com (10.54.29.200:995) by likexu-workstation with
  POP3-SSL; 24 Nov 2018 12:37:48 -0000
X-Original-To: like.xu@linux.intel.com
Delivered-To: like.xu@linux.intel.com
Received: from orsmga002.jf.intel.com (orsmga002.jf.intel.com [10.7.209.21])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by linux.intel.com (Postfix) with ESMTPS id BAC5858037D;
	Fri, 23 Nov 2018 15:22:12 -0800 (PST)
Received: from orsmga102-1.jf.intel.com (HELO mga09.intel.com) ([10.7.208.27])
  by orsmga002-1.jf.intel.com with ESMTP; 23 Nov 2018 15:22:12 -0800
X-SG-BADATTACHMENTNOREPLY: True
IronPort-PHdr: =?us-ascii?q?9a23=3A3Z3SbBT3HxhqebB1l5nvOIS9TNpsv+yvbD5Q0YIu?=
 =?us-ascii?q?jvd0So/mwa64YRGAt8tkgFKBZ4jH8fUM07OQ7/iwHzRYqb+681k6OKRWUBEEjc?=
 =?us-ascii?q?hE1ycBO+WiTXPBEfjxciYhF95DXlI2t1uyMExSBdqsLwaK+i764jEdAAjwOhRo?=
 =?us-ascii?q?LerpBIHSk9631+ev8JHPfglEnjWwba9xIRmssQndqtQdjJd/JKo21hbHuGZDdf?=
 =?us-ascii?q?5MxWNvK1KTnhL86dm18ZV+7SleuO8v+tBZX6nicKs2UbJXDDI9M2Ao/8LrrgXM?=
 =?us-ascii?q?TRGO5nQHTGoblAdDDhXf4xH7WpfxtTb6tvZ41SKHM8D6Uaw4VDK/5KpwVhTmlD?=
 =?us-ascii?q?kIOCI48GHPi8x/kqRboA66pxdix4LYeZyZOOZicq/Ye94VQndPXttKVyxZHIyz?=
 =?us-ascii?q?c5cPAeQGPeZdtYb9pl0Opga6CQSjAO7jzzlFjWL006InyeQsCQ/I0gw+EdwTs3?=
 =?us-ascii?q?rUotr6O7sPXu+3wqbI1i3DYvFN1Dfy9ITFaAosre2WUL5ud8fa1EkhFxnCjlWV?=
 =?us-ascii?q?sYHrJSma1voTvGif8uFuUvighHInqw5voTik28AhipHTiYIL1F/E8T50wJspKt?=
 =?us-ascii?q?y2UkJ0fd+lHYJWuiqHOYV2RcYiTHtpuCY80rAGvZ+7fDYUx5QlwB7fduaHc46S?=
 =?us-ascii?q?7RLnTuqePTB4hHd9dL2jmhay90mgxvfgWci11ltBsylLksHUu3wTyxDe7tKLRu?=
 =?us-ascii?q?Zz80u/wzqDygPe5v1eLU01l6fXM4Mtz7owm5YJrEjPAyH7lF/ogKKXbEko5+yl?=
 =?us-ascii?q?5urhb777vJGTLZV0hRv7Mqk2msywH+A4Mg8WUmiF9uSzyqfj8Vf6QLpUlP02lL?=
 =?us-ascii?q?fWsJTAKcQcvK65DBdZ0ocl6xmhEzeryMoUkWUDIV5fZR6KgZblN0vTLP37Efuz?=
 =?us-ascii?q?mVWhnTVzy/DDJLLhA5HNLnbZkLfmeLZw80pcyAs1zdBC6JNYE7IBL+zpWk/3qt?=
 =?us-ascii?q?PYCgY1Mwu6wubhFtp9zJgTWXyAAqCHKqPeq1yI6fw1I+mKeoAVvCzxK/8/5/7h?=
 =?us-ascii?q?lXM5g0MSfbG13ZsLb3C1BvBmI0SaYXXymNsAHnoKsxE6TOzrjl2CTDFSa2yzX6?=
 =?us-ascii?q?I6+jE0FoamAZ3fSYCqhbyLxD27EYFOZmBaFlCMFm/ld4WeVPcNdCKdOMhhniYE?=
 =?us-ascii?q?Vbi8UYAh0x6uuRT+y7pmKOrU5yIZuYji1Nhz++3cixUy+SZoAMSa1mGHV3t0kX?=
 =?us-ascii?q?8QRz8qwKB/plRwylWE0admmfBYFttT5/VPUgc9LpPcy+16C9bvWgPOZNuJSVCm?=
 =?us-ascii?q?Qsm4DjE1VN4+39gOY0NlEdW4kh/DxzaqA6MSl7GTHpM06aLc33/yJ8pn0XbJzq?=
 =?us-ascii?q?shgkIiQstOM22mm6F++xLSB47Pj0WWiaKqeb4A0y7K8WeJ1XCOs11AUA5sTaXF?=
 =?us-ascii?q?WmgSZkjMotT//E/CS76uBq4hMgtO0sOCLqpKatv0jVRJXvvjOdLeY36vlGe0Hx?=
 =?us-ascii?q?qH2rSMbI/ycWUHwCrdEFQEkxwU/XueKAcxHDmhrHzEADxuD13vZVjs/vd4qH+8?=
 =?us-ascii?q?Sk80zASKb0l62rqx+x4Vg+GcSvwJ0rIFvichtyt7HFKn093KDNqAohJrfL9Abt?=
 =?us-ascii?q?Ml/FdHyWXZuhRgMZO6MaBtmEQScwRtsEPozBV4FINAnNMurHMrygpyNK2Z3ElA?=
 =?us-ascii?q?dzOewZD/JLnXJnPu8xCobq7cwkve38qO+qcT9PQ4rE3uvB2oFkon9HVnz9lV0n?=
 =?us-ascii?q?uG6pXWFgYSVojxUkI29xh8qLHXeS0954LS1X1xPqi4qD7C29Q1BOQ7zhasZctQ?=
 =?us-ascii?q?MKSBFAXqCc0VG9CuKPA2m1iudh8LJuRS+7A7Psy4d/qKwrWkPPt9kz28i2RH44?=
 =?us-ascii?q?d90lyX+ip4S+7I2YsFwv6C0guGUTf8kEmussTtlY9YYjESG3K1yTL4C45Jeq1y?=
 =?us-ascii?q?YYELBH+uIs2q3Nlxm4ThWn9Y9FG5AVMG19SkeR6Tb1z7wA1R2l4boX2hmSuk0T?=
 =?us-ascii?q?N0lyslobaY3CzL2+7ibgYIOnZXRGl+ilfhOZK0j9EGU0eydQgmiRyl6Vz8x6dF?=
 =?us-ascii?q?vqR/LnDfTltScCjyMm5tTLGwtr2EY8NU7JMosCNXUPmzYFyAS779pQca3D3nH2?=
 =?us-ascii?q?dE2D87cDSqsI3jnxNmkGKdMGpzrH3BdMBwxBfT/tzdSeRK3jobQil1kj3XBlm6?=
 =?us-ascii?q?P9m08tSYjZbDsuaiV22/Up1fazXkzYSFtCGj/21lHQW/n+yvmt3gCQU60zX018?=
 =?us-ascii?q?NpVSXLqxbweJLr2L65MeJkf0loAkHz68xhF4F6k4swgowQ2HcAipWU+3oHjXn8?=
 =?us-ascii?q?MdFB1a3ia3oNQCYBw8TJ7wj9xE1jMnWJypr5V3qHxcttfdu6YmIQ2i8m68BKCa?=
 =?us-ascii?q?GU7KFLnCdvo1q4qx7RbuZ5njsH1fQu73saifkTuAUx1iWdHqwSHU5AMCzvjRuI?=
 =?us-ascii?q?7sqyrKVKZGm1d7iw21FzndSgDLGEvwFdV2z1epYkHS9s8Mp/NEjA32H06oHhYN?=
 =?us-ascii?q?PQd84ctgWIkxfciOhYMJcxlvsJhSV9I278s2Mqy/UnjRNwx5G1p5aIK39i/K+i?=
 =?us-ascii?q?Bh5YNzv1Z94c+z33jKZemNqW0J6rHpl7BjoLW57oR+qyED0OrfTnKxqOEDokp3?=
 =?us-ascii?q?eHHrrfGBWT6UZ8oHLJDpCrLGqXJHgCwNVmRRmdIlFfgQ8OUDU7mJ45Ch6lxMj7?=
 =?us-ascii?q?fEhl4TAR40byqgFQxeJwKxn/TmDfqR+zZTguT5ifKAdW4htG50fIKsGe6uNzHy?=
 =?us-ascii?q?dF/pyutgCNK2qbZxhWAmENQECLG1fjPry279na7+eYHva+L+fJYbiWq+xRTfKI?=
 =?us-ascii?q?yoy00od84zaALMaPPmRhD/0m3EpMR2t5Ft/dmzUOTSwXii3MY9SapBe65i14sM?=
 =?us-ascii?q?S//O73VwLo4IuFE6FSPsl3+xCqnaeDMPadhSZ+KTZFz5MM2GXHyL4F0F4JjCFu?=
 =?us-ascii?q?cTatHK8EtS7MSqLQh6BWAwQaayN1KMtH8aY80hNRNs7cj9P/zqR4geItC1dZSV?=
 =?us-ascii?q?zhndmkZcwULGG8N1PHB0eLOK6FJT3RxMH3br2zSadNjOVPrBCwvTebE0n+PjWM?=
 =?us-ascii?q?jTXpVhavMf1SgyGfJhBRpIa9chN1A2j5UN3mcgG7MMNwjTAu27I0m2jFNXQCPj?=
 =?us-ascii?q?l8aU9NqryQ4DhcgvV+HWxB83VkIfOFmyaf8+nXNJIWveF3DSRzkuJQ+G46xKdN?=
 =?us-ascii?q?7CFYWPx1nzPfrsJvo1GjiOWA1iBrXwZOqjlVgoKGpkFiOaTf9pldVnfI5hMN7W?=
 =?us-ascii?q?OMCxsUo9tpEMHgu6dVytLXjqL8NC9C887I/csbH8XVKNiIMHwkMRroHj7bFAoE?=
 =?us-ascii?q?TT6xOmHZiExQi/WS9nyTrpgnpZnggpsOSrlHVFMrEvMWEFhqHNsHIMQ/YjRxvL?=
 =?us-ascii?q?iBjcVAz3O6qBTNTsISv9j8W+iICL27JTCDjLICbRIMxb7kJ4M7PYr/30VobUNz?=
 =?us-ascii?q?2o/NHhyDc8pKp3hZZxE5pA1o+XN+Q257j1rsdA6pyGIYCri/jEhl2UNFfe0x+W?=
 =?us-ascii?q?K0sB8MLV3QqX51zRA8?=
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A0B+BgA+ivhbh0O0hNFjFgYBAgQBCAQBg?=
 =?us-ascii?q?WaCaoECJ4h+jxOCDRSNb4slARQdCwgBhECEGiI4EgEDAQEBAQEBAgETAQEBCA0?=
 =?us-ascii?q?JCCkjDII2JIJjAQICAQECdgUBCQEBChQNJQMMBRgxEwWDHAGBeQgEAQqoEooMD?=
 =?us-ascii?q?4JtiRwXgX+BEYMSgxALA4E6ChErgxWCJgKJEQ+WDVUJgiCEXIooIwpVgUeOYod?=
 =?us-ascii?q?UhW+MSoF2MxoIMIMnCYV/KIorPjMBAYEDAQGJVYJMAQE?=
X-IPAS-Result: =?us-ascii?q?A0B+BgA+ivhbh0O0hNFjFgYBAgQBCAQBgWaCaoECJ4h+jxO?=
 =?us-ascii?q?CDRSNb4slARQdCwgBhECEGiI4EgEDAQEBAQEBAgETAQEBCA0JCCkjDII2JIJjA?=
 =?us-ascii?q?QICAQECdgUBCQEBChQNJQMMBRgxEwWDHAGBeQgEAQqoEooMD4JtiRwXgX+BEYM?=
 =?us-ascii?q?SgxALA4E6ChErgxWCJgKJEQ+WDVUJgiCEXIooIwpVgUeOYodUhW+MSoF2MxoIM?=
 =?us-ascii?q?IMnCYV/KIorPjMBAYEDAQGJVYJMAQE?=
X-IronPort-AV: E=Sophos;i="5.56,271,1539673200"; 
   d="asc'?scan'208";a="54585073"
X-Amp-Result: UNSCANNABLE
X-Amp-File-Uploaded: False
Unscannable: 2
Received: from vger.kernel.org ([209.132.180.67])
  by mtab.intel.com with ESMTP; 23 Nov 2018 15:22:10 -0800
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1727724AbeKXKIT (ORCPT <rfc822;like.xu@linux.intel.com>
        + 23 others); Sat, 24 Nov 2018 05:08:19 -0500
Received: from atrey.karlin.mff.cuni.cz ([195.113.26.193]:40720 "EHLO
        atrey.karlin.mff.cuni.cz" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1727607AbeKXKIT (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Sat, 24 Nov 2018 05:08:19 -0500
Received: by atrey.karlin.mff.cuni.cz (Postfix, from userid 512)
        id A367B8080F; Sat, 24 Nov 2018 00:22:02 +0100 (CET)
Date: Sat, 24 Nov 2018 00:22:04 +0100
From: Pavel Machek <pavel@ucw.cz>
To: Enric Balletbo i Serra <enric.balletbo@collabora.com>
Cc: linux-pm@vger.kernel.org, sre@kernel.org,
        Sameer Nanda <snanda@chromium.org>, gwendal@chromium.org,
        linux-kernel@vger.kernel.org, groeck@chromium.org,
        Adam.Thomson.Opensource@diasemi.com, kernel@collabora.com,
        bleung@chromium.org, "Rafael J. Wysocki" <rjw@rjwysocki.net>,
        Len Brown <len.brown@intel.com>
Subject: Re: [PATCH v2 1/2] power: supply: add input voltage limit property.
Message-ID: <20181123232203.GA3852@amd>
References: <20181122101119.29194-1-enric.balletbo@collabora.com>
MIME-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
        protocol="application/pgp-signature"; boundary="82I3+IH0IqGh5yIs"
Content-Disposition: inline
In-Reply-To: <20181122101119.29194-1-enric.balletbo@collabora.com>
User-Agent: Mutt/1.5.23 (2014-03-12)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org


--82I3+IH0IqGh5yIs
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Hi!

> We have a problem with USBPD chargers which under certain conditions
> can result in system overheating if the voltage provided by the USBPD
> port is too high. While the preferred means to control this would be
> through devicetree or ACPI settings, this is not always possible, and
> we need to have a means to set a voltage limit.
>=20
> This patch exposes a new property, similar to input current limit, to
> re-configure the maximum voltage from the external supply at runtime
> based on system-level knowledge or user input.

First, this should really be handled by dt / ACPI. If it is broken,
that's a hardware bug, and we can do DMI-based blacklists in kernel.

How are you supposed to fsck a system, for example?

> +What:		/sys/class/power_supply/<supply_name>/input_voltage_limit
> +Date:		Nov 2018
> +Contact:	linux-pm@vger.kernel.org
> +Description:
> +		Details the incoming VBUS voltage limit currently set in the
> +		supply. Normally this is configured based on the type of
> +		connection made.

"Details"?

Who can write to this value and when? What is the limit? If USB
charger is plugged in, should it show 5.0V (because that's nominal on
the USB) or 5.25V (because that is the real limit)?

Who can write to this and when. And what happens on write? What
happens if I write value that charger can't provide there?

Does it set the voltage power supply should produce? Or maximal it can
choose to produce?

This really needs better documentation.

								Pavel
--=20
(english) http://www.livejournal.com/~pavelmachek
(cesky, pictures) http://atrey.karlin.mff.cuni.cz/~pavel/picture/horses/blo=
g.html

--82I3+IH0IqGh5yIs
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: Digital signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlv4i5sACgkQMOfwapXb+vLmQACfX+ba61v27dkM11pVow8bPETy
A+QAnjhSC4iTF6CvFqR/AUcL8p7j1D8i
=fgBu
-----END PGP SIGNATURE-----

--82I3+IH0IqGh5yIs--
