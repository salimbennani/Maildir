Return-Path: <linux-kernel-owner@vger.kernel.org>
Delivered-To: unknown
Received: from linux.intel.com (10.54.29.200:995) by likexu-workstation with
  POP3-SSL; 23 Nov 2018 08:30:58 -0000
X-Original-To: like.xu@linux.intel.com
Delivered-To: like.xu@linux.intel.com
Received: from orsmga005.jf.intel.com (orsmga005.jf.intel.com [10.7.209.41])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by linux.intel.com (Postfix) with ESMTPS id A78E658037D;
	Thu, 22 Nov 2018 11:03:36 -0800 (PST)
Received: from fmsmga101.fm.intel.com ([10.1.193.65])
  by orsmga005-1.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384; 22 Nov 2018 11:03:35 -0800
X-SG-BADATTACHMENTNOREPLY: True
IronPort-PHdr: =?us-ascii?q?9a23=3AgZtCrxGmpM9Tum+3gNQIUJ1GYnF86YWxBRYc798d?=
 =?us-ascii?q?s5kLTJ75osu6bnLW6fgltlLVR4KTs6sC17KG9fi4EUU7or+5+EgYd5JNUxJXwe?=
 =?us-ascii?q?43pCcHRPC/NEvgMfTxZDY7FskRHHVs/nW8LFQHUJ2mPw6arXK99yMdFQviPgRp?=
 =?us-ascii?q?OOv1BpTSj8Oq3Oyu5pHfeQpFiCa+bL9oMBm6sRjau9ULj4dlNqs/0AbCrGFSe+?=
 =?us-ascii?q?RRy2NoJFaTkAj568yt4pNt8Dletuw4+cJYXqr0Y6o3TbpDDDQ7KG81/9HktQPC?=
 =?us-ascii?q?TQSU+HQRVHgdnwdSDAjE6BH6WYrxsjf/u+Fg1iSWIdH6QLYpUjm58axlVAHnhz?=
 =?us-ascii?q?sGNz4h8WHYlMpwjL5AoBm8oxBz2pPYbJ2JOPZ7eK7WYNEUSndbXstJWSJPAp2y?=
 =?us-ascii?q?YZYMAeoPMulXs5TyqVQMohSwHgmsHOHixyRUhnL1x6A2z/gtHBvE0QEmAtkAsG?=
 =?us-ascii?q?7UrNLwNKoKX++0wrfHxijGYfNSxzj96Y7IfQ44rf+JW6pwd8vRyUYyHA7Ck1Wc?=
 =?us-ascii?q?s4/lPzeL2eQMtWiU8fNsVeGoi2E5rQFxozevy9w0iobXgIIVxU3E9TljwIYyI9?=
 =?us-ascii?q?24SUF6bcS5H5ROriyXMZZ9TM0lQ2Ftoik6y7sGtIajfCcUzpQnyAPfa+Cdc4iP?=
 =?us-ascii?q?5BLjVemQLS1li317fr+0mhW88VC4x+HiSsW51ExGojdLn9XSrHwByh/e5tSdRv?=
 =?us-ascii?q?Z8/EqtwSiD2xzP5u1ZJE05lKjWJIIkz7MxlJcfrUHOEjLqlEnqiaKaa1gr9+2t?=
 =?us-ascii?q?5uv7frnroIKXOZVuhQHkKKsun9SyAeQmPQgKWGiW4fq81LL98k3jWrlKjeM5kr?=
 =?us-ascii?q?PfsJ/EIcQXvKm5AxVa0oo76ha/CSmp0MgAkHUZMF5IfAiLg5XnNl3QOvz0EPSy?=
 =?us-ascii?q?j0i2nDpqxf3KJrjhDY/MLnjHnrfhZ7F960tExQo3zNBf4Y9UC74YLPLwREDxrt?=
 =?us-ascii?q?rYAQE9MwCtxObmBtN92Z0EWW+UHK+ZP73dsUWS6uIsPeaMfokVtyj5K/Q/4P7u?=
 =?us-ascii?q?l3A5lUcHfaa1xZsXdGy4HvN+LkWdYHrsgckOHX0FvwojV+HqjFyCUThOZ3e9Ra?=
 =?us-ascii?q?485zc7CJ64AofHXIyinLuB3CKjFJ1Mem9GEkyMEWvvd4icW/cDciOSItN7nTwD?=
 =?us-ascii?q?T7ShS5Ih2guotA/10LdnKuvU+isFtZPsztR15uvTlQ0s+jxwFciSz2aNT2RslG?=
 =?us-ascii?q?MSWzA2xLx/oVB6ylqb06h4hOJXGcZQ5/NOVAc6M5ncwvd+C9DzXALBY9iIREyn?=
 =?us-ascii?q?QtWgHTE+UNYxz8USbEZ6HtWolgrD0DayA78Ji7yLA4Q5/bjH33jxIMZ9yGzK1L?=
 =?us-ascii?q?M7gFkkWcZPMWymhqhi9wncHYLJkkOZl7q0eqQYxiLC6GCDzW+WtkFCTAFwSbnF?=
 =?us-ascii?q?XWwYZkbOrtT2/EXCQ6WqCbQmKARBz8GCJ7BOat3oi1VGWfjiNM7fY2K3h2e/Gx?=
 =?us-ascii?q?KIyqmQY4rtfmUXxD/dB1QckwAP4XaGMhAzCTq7rGLAEjNiD1LvbFnq8elltny7?=
 =?us-ascii?q?SEg4zwWJb01k07q44RoVhf2aS/MO0bMIoiYhqzNoHFmj29LaEcaPpw1kfK9Ee9?=
 =?us-ascii?q?My/E9H1X7Ftwx6JpGvMrpthkAAfAhtv0PhzRN3Cp5ensgst34qyAtyKaSF0FJO?=
 =?us-ascii?q?bT+Y3JbwOqHJJWn25hygd6nW2lTG2taM5qgP8Og4q0nkvAyxCkoi8nBn095J03?=
 =?us-ascii?q?uc5pTGFhYSXYj2UkYt8xh6prfaYiYm6oPQ1H1sN7S0szDY19IoAusl1givf9NF?=
 =?us-ascii?q?PKyYEw/yFtUQB9KyJ+wyh1ipchUEMfhI+64wIcyneOWJ2a6xMOl7gTKpkH5I4I?=
 =?us-ascii?q?Z+0kKL6SpxUerI35cDw/GF0QqLTTb8jFG9ss/pnYBIfy0dHm26ySL8Ho5eerVy?=
 =?us-ascii?q?fZoXCWepO8C2xsh+i4TxVHJC9V+jB0kJ2MmmeReJa1z93AtQ1VkYoHC9mCu4yS?=
 =?us-ascii?q?B0nC8trqaFwCPOxOHifgIdOmFXXGlikUvsIY+sgtAAXUincxImlAG46kb93aRb?=
 =?us-ascii?q?orpwL3PSQUtRYyf5NWViXbauubqYZM5P7oglsSFWUOS6fFCbRaTxoxoc0yP/AW?=
 =?us-ascii?q?RewCo3eC2tupX8hxZ6kn6SLG5vrHrFfsF93Rfe5N3GSf9RxDYGXzR4iT/MC1i4?=
 =?us-ascii?q?Ptmp+8iUlpjZvuC/UWKhSoNccS3xwYycsyu74HVgAQejkPCrht3nDQ863Df519?=
 =?us-ascii?q?ZwTyXIrxX8Yo7x26ShK+1nfUpoBF7668VkHIFziY8whJAW2XgHiZSZ53sHkWHv?=
 =?us-ascii?q?MdpF3aLydmYCRTkOw9TN+gjqxFVjLm6Vx4L+TnicwtFuZ96gbmMU2yI96dtHCK?=
 =?us-ascii?q?OV7LxCgCt0rUC0rQPXYfhhgDgdzeEi52Idg+EMoAAt1DmSAqgOHUlEOizhjxeI?=
 =?us-ascii?q?4Mq/rKlNZGavbKK/1Exxnd26CLGCowdcWGv2e5s4HC9w6Nl/P0zI0HHp9o7kf9?=
 =?us-ascii?q?zQZ8oJthKIixfAk/RVKJUpm/oPhCpnOnjysWcryuEllhxuwY+1vJKcJGpz5qK5?=
 =?us-ascii?q?DQVVNjn0Z8MV5zHsgrxSnseQ34CzAJphHi8HU4fvTfKtCDgSr+joNx6SED0grX?=
 =?us-ascii?q?eWAabfHQia6Et8rnPACZarN2yMJHkCzNVvXx2dJE1ZgAAJUzQ2hJ85Fga2xMP/?=
 =?us-ascii?q?dEd1/Cwe5ln9qhFU0OJnKwH/UnvDpAevcjo7U4KQLB1S7gFf/UvVNdGe4/l3Hy?=
 =?us-ascii?q?FZ+J2hsQOMJnaaZwROEWEGREiEC0r/Mbmp4NnK6/KYCfamL/vSfbWOrvRTV/WS?=
 =?us-ascii?q?ypKqzIRm5CyANtmVMnlhEv072VdDXXZjFMTCgDgPTy0XlyTQb8+Uvhu8+yt3rt?=
 =?us-ascii?q?yh//TvQg7g+YyPC75KO9V15x+2mbuDN/KXhCthKTdY0Y4MxWbVyLcF2l4ekTpu?=
 =?us-ascii?q?dz6rEbQPriPNSKPQmqlKDx8UcS9zNc1I774i0QlJI8LUltT11rtghP4vF1hFTU?=
 =?us-ascii?q?Dhmt2uZcESI2GyKlLHBEWINLSHPzHLwNv3YaSzSbJOluVUqgawtC2fE0/iODSD?=
 =?us-ascii?q?ijboWwquMeFKkCGUIhhetJuhfRZqDGjpVMjmZQGjMN9rkT02xqU5iWnXNWEHKz?=
 =?us-ascii?q?hzbUNMoqeU7SNZmfh/H21B7nx4LeiLgSqZ7u/YKooIvvtvGCh7i+Va4HEiwbtP?=
 =?us-ascii?q?8C5EXOB1mDfVrtN2v1Gmk+yPxiB7XxZUtjlLhJyEvUN5NKXd95lAX2vE/R0X4W?=
 =?us-ascii?q?WRDRQKu8VqCtn1t69MzdjPkbr5KC1e/NLM4cscG8/UJdqHMXU7NxrpHT/UDA0d?=
 =?us-ascii?q?Qj+qNWHQnUpdkP6J+32Rr5g6rIXsmZUURr9aUlw1Cu0VCkB/ENMeJ5d3W2Bsrb?=
 =?us-ascii?q?nOsskLbHH2iRjaRMxe9sTiV/mSCPGpFjGahLJsdgAPz6++JoMWYN7VwUtnP2Rl?=
 =?us-ascii?q?kczpH0fRW90IgbNnbwB89FgL83xzT2s+nkHiZwWs71cLGPi7gwIsjQ1/caIh+W?=
 =?us-ascii?q?G/sB8MOlPWqX5owwEKktL/jGXUKWapIQ=3D=3D?=
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A0AVAACT/PZbh0O0hNFiHAEBAQQBAQcEA?=
 =?us-ascii?q?QGBUgYBAQsBgTCBOYEChB+UGIINFJcmgW4ZGAcMAYhSIjUIDQEDAQEBAQEBAgE?=
 =?us-ascii?q?TAQEBCA0JCCkjDII2JAGCYQEBAQECAQECIA8BRgYJAQEIAhgCAgUhAgIDDC0bB?=
 =?us-ascii?q?hgWgwYBgXkIAQMBjUSbUIEvih6BC4p+ghaBEYMSiAKCVwKLEZRxBwKBEZATI4F?=
 =?us-ascii?q?ZhQuCeIcsmDCBSAGCCnGDPAiCHheDfYogP4E3AQGMVAEB?=
X-IPAS-Result: =?us-ascii?q?A0AVAACT/PZbh0O0hNFiHAEBAQQBAQcEAQGBUgYBAQsBgTC?=
 =?us-ascii?q?BOYEChB+UGIINFJcmgW4ZGAcMAYhSIjUIDQEDAQEBAQEBAgETAQEBCA0JCCkjD?=
 =?us-ascii?q?II2JAGCYQEBAQECAQECIA8BRgYJAQEIAhgCAgUhAgIDDC0bBhgWgwYBgXkIAQM?=
 =?us-ascii?q?BjUSbUIEvih6BC4p+ghaBEYMSiAKCVwKLEZRxBwKBEZATI4FZhQuCeIcsmDCBS?=
 =?us-ascii?q?AGCCnGDPAiCHheDfYogP4E3AQGMVAEB?=
X-IronPort-AV: E=Sophos;i="5.56,266,1539673200"; 
   d="scan'208";a="63608574"
X-Amp-Result: UNKNOWN
X-Amp-Original-Verdict: FILE UNKNOWN
X-Amp-File-Uploaded: False
Received: from vger.kernel.org ([209.132.180.67])
  by mga01b.intel.com with ESMTP; 22 Nov 2018 11:03:33 -0800
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S2406604AbeKWFoM (ORCPT <rfc822;like.xu@linux.intel.com>
        + 23 others); Fri, 23 Nov 2018 00:44:12 -0500
Received: from metis.ext.pengutronix.de ([85.220.165.71]:56241 "EHLO
        metis.ext.pengutronix.de" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1728584AbeKWFoM (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Fri, 23 Nov 2018 00:44:12 -0500
Received: from ptx.hi.pengutronix.de ([2001:67c:670:100:1d::c0])
        by metis.ext.pengutronix.de with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
        (Exim 4.89)
        (envelope-from <ukl@pengutronix.de>)
        id 1gPuG3-0007Ml-Sv; Thu, 22 Nov 2018 20:03:23 +0100
Received: from ukl by ptx.hi.pengutronix.de with local (Exim 4.89)
        (envelope-from <ukl@pengutronix.de>)
        id 1gPuG2-00028E-04; Thu, 22 Nov 2018 20:03:22 +0100
Date: Thu, 22 Nov 2018 20:03:21 +0100
From: Uwe =?iso-8859-1?Q?Kleine-K=F6nig?= 
        <u.kleine-koenig@pengutronix.de>
To: =?utf-8?B?Vm9rw6HEjQ==?= Michal <Michal.Vokac@ysoft.com>
Cc: Lothar =?iso-8859-1?Q?Wa=DFmann?= <LW@KARO-electronics.de>,
        Thierry Reding <thierry.reding@gmail.com>,
        Mark Rutland <mark.rutland@arm.com>,
        "devicetree@vger.kernel.org" <devicetree@vger.kernel.org>,
        "linux-pwm@vger.kernel.org" <linux-pwm@vger.kernel.org>,
        Lukasz Majewski <l.majewski@majess.pl>,
        "linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>,
        Rob Herring <robh+dt@kernel.org>,
        "kernel@pengutronix.de" <kernel@pengutronix.de>,
        Fabio Estevam <fabio.estevam@nxp.com>,
        Linus Walleij <linus.walleij@linaro.org>,
        viresh kumar <viresh.kumar@linaro.org>
Subject: Re: [RCF PATCH,v2,2/2] pwm: imx: Configure output to GPIO in
 disabled state
Message-ID: <20181122190321.ktqegs7kpvhcemvi@pengutronix.de>
References: <20181109165555.vqbiwh4hlcnozdna@pengutronix.de>
 <20181114113449.GB2620@ulmo>
 <20181114215120.vddykljqyavm64wj@pengutronix.de>
 <20181115152545.GA8611@ulmo>
 <20181115203733.qvonika6yhn2bsnb@pengutronix.de>
 <20181116083430.7f1d8452@ipc1.ka-ro>
 <20181116082557.l2ljgu3hsu7tvdci@pengutronix.de>
 <91640f9b-d219-553e-043a-c6151f2f68d7@ysoft.com>
 <20181122162359.ufngpgxkenlmgqni@pengutronix.de>
 <b332b319-cbb3-547f-c8b7-1dd275c1596d@ysoft.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <b332b319-cbb3-547f-c8b7-1dd275c1596d@ysoft.com>
User-Agent: NeoMutt/20170113 (1.7.2)
X-SA-Exim-Connect-IP: 2001:67c:670:100:1d::c0
X-SA-Exim-Mail-From: ukl@pengutronix.de
X-SA-Exim-Scanned: No (on metis.ext.pengutronix.de); SAEximRunCond expanded to false
X-PTX-Original-Recipient: linux-kernel@vger.kernel.org
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

Hello Michal,

On Thu, Nov 22, 2018 at 04:46:39PM +0000, Vokáč Michal wrote:
> On 22.11.2018 17:23, Uwe Kleine-König wrote:
> > On Thu, Nov 22, 2018 at 03:42:14PM +0000, Vokáč Michal wrote:
> >> On 16.11.2018 09:25, Uwe Kleine-König wrote:
> >>> On Fri, Nov 16, 2018 at 08:34:30AM +0100, Lothar Waßmann wrote:
> >>>> No. You can disable the output driver via pinctrl, so that only the
> >>>> selected pull-up/down is relevant. The pin function and GPIO register
> >>>> settings don't matter at all in this case.
> >>
> >> Lothar, please can you be more specific how would you do that? IFAIK the
> >> pull-up/down internal resistors have effect only if the pin is configured
> >> as GPIO *input* (on i.MX6 at least). See the TRM, 29.4.2.2 Output driver:
> >>
> >>    "Internal pull-up, pull-down resistors, and pad keeper are disabled in
> >>     output mode."

This would mean you'd have to rely on an external pull up for your use
case. I wouldn't be surprised however if DSE=0 wouldn't count as "output
mode". Given the reliability of NXP documentation I wouldn't bet neither
on one nor the other possibility.

> > So I'd expect this to really work on i.MX6 but not the earlier SoCs
> > without a gpio specifier.
> 
> Maybe you would expect it to work but I already tested and measured
> that weeks ago ;) It did not work.

Which pin/gpio do we talk about? Which i.MX6 variant did you test this
on? (Assuming i.MX6D or i.MX6Q and PAD_DISP0_DATA09, did you try setting

	IOMUXC_SW_MUX_CTL_PAD_DISP0_DATA09 (0x020E0194) = 0x00000005
	IOMUXC_SW_PAD_CTL_PAD_DISP0_DATA09 (0x020E04A8) = 0x0000b080

and then play with GPIO 4.30 direction and output value?)

Best regards
Uwe

-- 
Pengutronix e.K.                           | Uwe Kleine-König            |
Industrial Linux Solutions                 | http://www.pengutronix.de/  |
