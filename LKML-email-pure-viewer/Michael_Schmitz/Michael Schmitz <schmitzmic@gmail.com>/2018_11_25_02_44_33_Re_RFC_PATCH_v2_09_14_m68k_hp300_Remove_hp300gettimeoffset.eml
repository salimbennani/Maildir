Return-Path: <linux-kernel-owner@vger.kernel.org>
Delivered-To: unknown
Received: from linux.intel.com (10.54.29.200:995) by likexu-workstation with
  POP3-SSL; 25 Nov 2018 14:43:20 -0000
X-Original-To: like.xu@linux.intel.com
Delivered-To: like.xu@linux.intel.com
Received: from orsmga002.jf.intel.com (orsmga002.jf.intel.com [10.7.209.21])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by linux.intel.com (Postfix) with ESMTPS id 663D05803C2;
	Sat, 24 Nov 2018 18:44:57 -0800 (PST)
Received: from orsmga106.jf.intel.com ([10.7.208.65])
  by orsmga002-1.jf.intel.com with ESMTP; 24 Nov 2018 18:44:57 -0800
X-SG-BADATTACHMENTNOREPLY: True
IronPort-PHdr: =?us-ascii?q?9a23=3AGmAL4R26rtu6xUX8smDT+DRfVm0co7zxezQtwd8Z?=
 =?us-ascii?q?segQK/zxwZ3uMQTl6Ol3ixeRBMOHs6IC07KempujcFRI2YyGvnEGfc4EfD4+ou?=
 =?us-ascii?q?JSoTYdBtWYA1bwNv/gYn9yNs1DUFh44yPzahANS47xaFLIv3K98yMZFAnhOgpp?=
 =?us-ascii?q?POT1HZPZg9iq2+yo9JDffwZFiCChbb9uMR67sRjfus4KjIV4N60/0AHJonxGe+?=
 =?us-ascii?q?RXwWNnO1eelAvi68mz4ZBu7T1et+ou+MBcX6r6eb84TaFDAzQ9L281/szrugLd?=
 =?us-ascii?q?QgaJ+3ART38ZkhtMAwjC8RH6QpL8uTb0u+ZhxCWXO9D9QKsqUjq+8ahkVB7oiD?=
 =?us-ascii?q?8GNzEn9mHXltdwh79frB64uhBz35LYbISTOfFjfK3SYMkaSHJcUMhPWSxPAoCy?=
 =?us-ascii?q?YYUBAOUOP+lXs4bzp0AWrRa8HgSsGOHixyVUinPq06A30+IsGhzG0gw6GNIOtW?=
 =?us-ascii?q?zZotL0NKgOUeC61rfHzTHeZP1LxTj96I3IchE9ofCNQLl9dtHRxlUvFwPAj1WQ?=
 =?us-ascii?q?tY3kPzaU1usRqGWb4O9gWviui24jsQ1+vj+vxsI1h4TPm4kbxFfE9SBjz4Y0I9?=
 =?us-ascii?q?21UFJ0YdmhEJtVsCGVKox2Qtk8TG1ypCk10KUKuYW8fCgX0pQo2wDQa/KAc4iS?=
 =?us-ascii?q?7RLsSvydITFmi3J5YL6/iBey8VSgyu3hTca4ykpFri1AktTKq3sD1ATT59CZRv?=
 =?us-ascii?q?dh+kqtwyuD2g7N5u1ePEw5lrbXJ4Qgz7MyjpYfrFrPEjHslEj2j6KabFgo9+qp?=
 =?us-ascii?q?5uj9ZrjquJmRPJJuhA7kKKQhgMm/DPw4MgcQW2ib/vyx1KPs/ULnWrVGlP42nb?=
 =?us-ascii?q?fDsJDcO8sborS1AwhP0oYs8xq/DjGm38oEnXQfMl5JZBaKg5L0N1zAPvz0F+qz?=
 =?us-ascii?q?jlewnDtxxv3LPKXtApDXIXjClLfhc6x960lZyAcrydBf5pRUCqwOIf7qWU/+qs?=
 =?us-ascii?q?bYDhknPAyw2urnD9t81oUAVmKVGaKZLqzSvkGS5u41IOmDepUVuDDjJPgh/fLu?=
 =?us-ascii?q?imU5mVAFcamzwZQXcGy4HuhhI0iBZXrsg9QBHnkQsgsxUeznk1mCUT9VZ3avUK?=
 =?us-ascii?q?Mw/DA7CIS6DYjdQoChmqCO3CC+HpdOfGBJFkiMEWv0d4WDQ/oMaDidIs59kjMe?=
 =?us-ascii?q?UritUY8h1Qy0uw/8xLpqNe7U+iwetZL+29l5/ezTlRcu9TNqC8SRyX2CT2Zxnm?=
 =?us-ascii?q?kQXT85wLh/oVBhyleEyaV4gftYGsJJ6/NKVQc6M5jcz+thBtD2WwLBeMqJSVm8?=
 =?us-ascii?q?TtWnBzExUsw+w9sUb0lhHNWiiwjJ3zC2DL8Ni7yLGJs0/7rG0HjqJ8Z9zHXG2L?=
 =?us-ascii?q?M7j1Y8QMtCLmmmhq959wjOCI/FiUSZl6C2dasC2C7B7nuMzW2LvEtASg5/Tb3F?=
 =?us-ascii?q?XWwDZkvRtdn55VnNT7m0BbQjMwtO08iCKqRRZ93tjFVGQurjOdvEb2KwnWewGQ?=
 =?us-ascii?q?iHxreWYIX2fGUd2T3XCFIYnAAL4XaGKQ8+Cz+8rG3EEjxhC0jjY0P2/ul4s3O0?=
 =?us-ascii?q?UEk0wwaOb01i0rq1/gUYhfidS/MVw7IFtz0tqzRyHFahwd3WD8CMqBZmfKVZed?=
 =?us-ascii?q?k9+ktI1XrFtwxhOZytN71tiUQAcwtppU/u1w94CoNbkcc0qnMn1w5yKaOe0FNc?=
 =?us-ascii?q?eDKUx5HwOrvLKmbs+BCjcbLZ2lbb0NyO4KcA9Ow4q0n/vAGuDkci73Rn09xS03?=
 =?us-ascii?q?uA5pXLDBAeUY7rXkYw7Rh6o7DaYi8y547P0X1sMK+0siLN2t4zBeslzAqgcMlb?=
 =?us-ascii?q?MK+eCADyFMgaDdC0KOM2g1ipcg4EPOdK+aEuO8OpafSH17CrPep6hz2mkHlI75?=
 =?us-ascii?q?p70kKP8Cp8VPXF35IEw/GewwuGWC3wjFanssDrh49EYSseEXa4ySjhHIRRfLF9?=
 =?us-ascii?q?fZ4XCWeyJM263tV/h4P3V3FE7lKiBlMG19WveRqddFH92QxQ1UIKoX2ogye4zj?=
 =?us-ascii?q?p0ky03oaqbxiDB3+PidB8fMG5RWGZilUvsIZSzj90CRkiobhQmmwG/5UnnwKhX?=
 =?us-ascii?q?vqJ/IHfJQUdJZiT5M3ttUq+tubWcec5P75UovD5TUOS9Z1CaV7H8rwEb0yPlA2?=
 =?us-ascii?q?tR2jQ7eyu2tZX+mhxwkHidI2prrHrFZcFwwg/S5dzdRfJL3jsKXjJ4iSTRBlWn?=
 =?us-ascii?q?O9mp/NOUl4rMs+ykVmKhUIFTfjfvzY+aqCS74mhqCwWln/+vgt3nDRQ60Sjj2t?=
 =?us-ascii?q?loTyrIthX8Yors16igKuJoZEpoBFz968p8BI5+lJA9hJUR2Xgcm5WU8mALkWb1?=
 =?us-ascii?q?MdVHx63+aGABSiIMw97Q+ALlwlFsLmqVx4LlUXWQ2stgaMO9Ym8M2CI97sZKBb?=
 =?us-ascii?q?yQ7LxFmyt1v1W5oRjQYfh7gjcS1/8u5GQGjOEOvQon1j+dDawKHUlEISzskAyF?=
 =?us-ascii?q?79Oko6VWfmqvcaWw21B4ndCuF7yCpgBcWHDkepYtByNw78N/ME7S33338I3rZN?=
 =?us-ascii?q?7QbdcLvB2OjxjAl/RVKI42lvcSgCpnOGH9smc/x+81kxNuxo26s5adK2p24q25?=
 =?us-ascii?q?GBFYOybxZ8MS/DHtkKlfktyX34CpApVuBDELUIH0QvKvFTIYre7nOBqWED0gtn?=
 =?us-ascii?q?ebHqLSHROY6EdjtX7OEoqkN3eKJHkC1tViRQKQJEhegAASQTU7kYQ1FgGsxMz9?=
 =?us-ascii?q?bkh54iod6UL/qhtJ0uhoLQXwUn/DpAe0bTc5UIOQIwBR7gFG+kfZK8ie7v9oEi?=
 =?us-ascii?q?Fc/52hqhGNK2OBawRJC2EJRlKLB1T5Mray4tnA9vCSBvCiIPvWfbWOteteWu+K?=
 =?us-ascii?q?xZ2114tp4S2MOt+TPnV4DP07x0lDXW1/G8vDgDUCUCgXlyPLb86Gqxaw4Cx3rs?=
 =?us-ascii?q?aj8Pv1XALj/5eAC7xXMd934RC5nb+DN/KMhCZ+MTtZ1pQMxWLRyLgCxlESjTti?=
 =?us-ascii?q?dyKqEbQGui7AV6bQmq5RDx4GZCJ/LspI76Qg3gZTPc7XkM/61rl9jvQtEVdKSU?=
 =?us-ascii?q?Thmt21ZcwNO2y9NE3IBEeINLSFJD3H2cL3Ybm7Sb1fkupUrQCwuS2AHk/nPzSD?=
 =?us-ascii?q?kSTpVh+1PeFNiiGbIAJRuIWnfhlxDmjjScrsagenP99vkT023bo0i2vQOm4BKj?=
 =?us-ascii?q?d8aV1Cr72K4SNcg/VyAGhB7ntjLemZlCeV9ejYKpAKsfR1BiR4jf5V4HM/y7FN?=
 =?us-ascii?q?9iFLWOR1mDfOrt5pu1ymjuiPyj99XBVSsDpEmIKLsltkOajC8plAWHDE/A8C7G?=
 =?us-ascii?q?mKChQKocdlBcPru6xK1tfPk6fzIi9Y893I5cscG9TUKMWfPXshKxXpHjvUDAoD?=
 =?us-ascii?q?TTGzNGDfh1ZSkPed9nCOqpg6q57smIcBS7NBVVw1EO8aBVphHNAYPJh3WTYkwv?=
 =?us-ascii?q?ani5sm5Hy45CXRTcRc9sTJSvKbAPPHNDudgLZebgMIwLjja48UM8vyxhomInZ3?=
 =?us-ascii?q?kZ7WU3fBQcxAuC1mYxE5pg0Z/3VzVHEb30PjdxPo5SFDFrizhBFg2SVkZuF40T?=
 =?us-ascii?q?bn4146IhLxrys1kVUj0YH+ijCUcSLjKaa7dY5TAivw8UM2N8WoEE5OcQSukBk8?=
 =?us-ascii?q?Z3//TLVLgu4lLDgzhQ=3D=3D?=
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A0AXAwB3DPpbh0O0hNFiHAEBAQQBAQcEA?=
 =?us-ascii?q?QGBZYFbgQ8DfyeHdJAdgWglFIl3hEqDcIUagVIQAQEYDQYBg3qEYCI4EgEDAQE?=
 =?us-ascii?q?BAQEBAgETAQEBCA0JCCkjDII2JAGCYgMDAQI1CAEbHQEDAgkBAQUFCwM4AyARA?=
 =?us-ascii?q?QUBHAYBDAgCAYJHMyIBgWgBAxQBBQqZFjyMHwUBF4J3BYExARNAP4FqChknDVq?=
 =?us-ascii?q?BNwIGEot3F4F/gTgMgl+CSDoZAgGHOwKLEYRLkCYJhnyKLQYYiVEQhycsjDFmi?=
 =?us-ascii?q?kYCBAIEBQIFDyGBPIF2MxojTgcsgjoBBQQNggWBIgEHgW9UhFmGDyoyAQl7AQG?=
 =?us-ascii?q?MXgEB?=
X-IPAS-Result: =?us-ascii?q?A0AXAwB3DPpbh0O0hNFiHAEBAQQBAQcEAQGBZYFbgQ8Dfye?=
 =?us-ascii?q?HdJAdgWglFIl3hEqDcIUagVIQAQEYDQYBg3qEYCI4EgEDAQEBAQEBAgETAQEBC?=
 =?us-ascii?q?A0JCCkjDII2JAGCYgMDAQI1CAEbHQEDAgkBAQUFCwM4AyARAQUBHAYBDAgCAYJ?=
 =?us-ascii?q?HMyIBgWgBAxQBBQqZFjyMHwUBF4J3BYExARNAP4FqChknDVqBNwIGEot3F4F/g?=
 =?us-ascii?q?TgMgl+CSDoZAgGHOwKLEYRLkCYJhnyKLQYYiVEQhycsjDFmikYCBAIEBQIFDyG?=
 =?us-ascii?q?BPIF2MxojTgcsgjoBBQQNggWBIgEHgW9UhFmGDyoyAQl7AQGMXgEB?=
X-IronPort-AV: E=Sophos;i="5.56,276,1539673200"; 
   d="scan'208";a="41414077"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from vger.kernel.org ([209.132.180.67])
  by mtab.intel.com with ESMTP; 24 Nov 2018 18:44:48 -0800
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1727008AbeKYNeo (ORCPT <rfc822;like.xu@linux.intel.com>
        + 23 others); Sun, 25 Nov 2018 08:34:44 -0500
Received: from mail-pg1-f194.google.com ([209.85.215.194]:45447 "EHLO
        mail-pg1-f194.google.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1726722AbeKYNen (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Sun, 25 Nov 2018 08:34:43 -0500
Received: by mail-pg1-f194.google.com with SMTP id y4so4565532pgc.12
        for <linux-kernel@vger.kernel.org>; Sat, 24 Nov 2018 18:44:45 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20161025;
        h=subject:to:references:cc:from:message-id:date:user-agent
         :mime-version:in-reply-to:content-transfer-encoding;
        bh=hMuploDnEdcZzBOSrvREITOrPwp67uGDmyvlX5GyxQ4=;
        b=cokX/umgn0K8VfZiNzf2wcl2uEzh7cB1VECQyjEJQeDrBQoPS8Hsq4EqSVakePIPh4
         3YTsraZMtEDUKRbKEtTMzM7aiHI0PjlgNivdXUq2f2PfDzt0sYWo0HTFobRiFVhoAKTX
         QGwiJ9hILBpDD7XCOzHB7zvcyw4y1QPWKKZ+oJQ1S2Cjeo7YvVSH0TaRfreC5f5VC8gg
         IWIV/th4a0wOSbDUeQNMO9zmU7+AxZ6s8FVaxWrNoC3yKxQ30zPcdQKdJj+YTu50YDdt
         LSd+ymTCAcB/Gt0UyiT1n5foZCjxKQ3AJaKq7FsSXTKEFWbJH+K8PyWCpeZyWHHPqDIY
         sRbA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20161025;
        h=x-gm-message-state:subject:to:references:cc:from:message-id:date
         :user-agent:mime-version:in-reply-to:content-transfer-encoding;
        bh=hMuploDnEdcZzBOSrvREITOrPwp67uGDmyvlX5GyxQ4=;
        b=tT/mMMLcTpL3dCi0rjum0cMoAUQd0GGDN1wVIsFmpb+3FESd2c50gbv1Ge2yNj1fsV
         Fot6PWELwiggkDzlowsbgfpXTza6PNx4woYo0IhRam2vpONTD7dgsy704zaRjWTZVD73
         wVwb4EnxQzvFvlYjxotQSZGqzfGywRbSyd4YOHuZBseq25YkLKlidfcTy7REsW1zOrc9
         qXbOCqoSVdybUb+q9BuTHTMwEMtRYTsatakbrfcj/gFMyJE30NblRZHY0TB5jJkORZ3D
         nD2zi8vEmr1z28j2vPJ9Rb7+PBg9ktVD7IXW/315V+Sdw/h2Hbroxx+TwWiepBLLD18y
         /r2w==
X-Gm-Message-State: AA+aEWYwV8lqN/fLdoJ2RaBLgSRFe1MTu4nqECzzo/VkJi0wFN7FCTWb
        DXQupmsBhhU08zgB1F2t7NcFCql3tIM=
X-Google-Smtp-Source: AFSGD/X01dgYZKnnTBwKTUX8u6Oh39rznqiEuigS8b/oiJwM2Ga2Ce3wsmdOCqyimbF8LZ5XZA8odA==
X-Received: by 2002:a63:a35c:: with SMTP id v28mr19658891pgn.205.1543113884618;
        Sat, 24 Nov 2018 18:44:44 -0800 (PST)
Received: from [192.168.1.101] (122-58-176-92-adsl.sparkbb.co.nz. [122.58.176.92])
        by smtp.gmail.com with ESMTPSA id r130sm31790537pfr.48.2018.11.24.18.44.35
        (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
        Sat, 24 Nov 2018 18:44:43 -0800 (PST)
Subject: Re: [RFC PATCH v2 09/14] m68k: hp300: Remove hp300_gettimeoffset()
To: Finn Thain <fthain@telegraphics.com.au>,
        Geert Uytterhoeven <geert@linux-m68k.org>
References: <cover.1542589838.git.fthain@telegraphics.com.au>
 <eb676d37a8e40b88f6c577b372b6512bc19a3394.1542589838.git.fthain@telegraphics.com.au>
 <CACz-3rh6Qw7YxeFK41KG_ju-bWHRoCaciWvv7JLeURn7wGVAOg@mail.gmail.com>
 <alpine.LNX.2.21.1811202034350.258@nippy.intranet>
 <CAMuHMdVQPSE7+Pe64OybnugCx-pLVfKmNS6_4DEofF3XZPBLsA@mail.gmail.com>
 <alpine.LNX.2.21.1811211917270.275@nippy.intranet>
 <CAMuHMdVexpeYVSBMXFwu5cYt3d=w9U48m_fNTuK5awhBNnsW_A@mail.gmail.com>
 <alpine.LNX.2.21.1811212032550.275@nippy.intranet>
 <CAMuHMdVzamshSdhDAnxdzq=YiQMvDhrE03UmJxHJLHr6g=u44Q@mail.gmail.com>
 <alpine.LNX.2.21.1811212129520.275@nippy.intranet>
 <alpine.LNX.2.21.1811250953120.10@nippy.intranet>
Cc: Kars de Jong <jongk@linux-m68k.org>,
        Philip Blundell <philb@gnu.org>,
        Andreas Schwab <schwab@linux-m68k.org>,
        Arnd Bergmann <arnd@arndb.de>,
        Stephen N Chivers <schivers@csc.com.au>,
        Thomas Gleixner <tglx@linutronix.de>,
        Daniel Lezcano <daniel.lezcano@linaro.org>,
        John Stultz <john.stultz@linaro.org>,
        Linus Walleij <linus.walleij@linaro.org>,
        linux-m68k <linux-m68k@lists.linux-m68k.org>,
        Linux Kernel Mailing List <linux-kernel@vger.kernel.org>
From: Michael Schmitz <schmitzmic@gmail.com>
Message-ID: <36b78174-5038-a1ac-4c70-d84a34edd275@gmail.com>
Date: Sun, 25 Nov 2018 15:44:33 +1300
User-Agent: Mozilla/5.0 (X11; Linux ppc; rv:45.0) Gecko/20100101
 Icedove/45.4.0
MIME-Version: 1.0
In-Reply-To: <alpine.LNX.2.21.1811250953120.10@nippy.intranet>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 7bit
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

Hi Finn,

Am 25.11.2018 um 14:15 schrieb Finn Thain:
> Maybe the timer interrupt has a sufficiently high priority and latency is
> low? Maybe cia_set_irq() is really expensive?
>
> I don't know the platform well enough so I'm inclined to revert. We can
> benchmark gettimeofday syscalls on elgar but is that hardware
> representative of other relevant models?

I suppose the CIA is on the main board, so running with the slower clock 
speed that you'd see with a vanilla Amiga without 060 accelerator board. 
Ought to be representative enough?

Adrian has a few other Amigas with different hardware base, so we might 
be able to get test coverage on more than one model.

Cheers,

	Michael


> [1]
> https://github.com/mamedev/mame/commit/e2ed0490520f538c346c8bdaa9084bcbc43427cb
>
> [2]
> http://vice-emu.sourceforge.net/vice_9.html
>
> [3]
> https://www.commodore.ca/manuals/funet/cbm/documents/chipdata/cia6526.zip
>
