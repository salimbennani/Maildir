Return-Path: <xen-devel-bounces@lists.xenproject.org>
Delivered-To: unknown
Received: from pop3.zju.edu.cn (124.160.105.205:110) by
  likexu-MOBL1.ccr.corp.intel.com with POP3; 22 Nov 2018 00:33:16 -0000
Received: from icoremail.net (unknown [209.85.214.179])
	by mail-app2 (Coremail) with SMTP id by_KCgDXv0KNXPVbvR3IAQ--.57602S3;
	Wed, 21 Nov 2018 21:24:29 +0800 (CST)
Received: from mail-pl1-f179.google.com (unknown [209.85.214.179])
	by mx2.icoremail.net (Coremail) with SMTP id AQAAfwCXekaEXPVbk6djAA--.10494S3;
	Wed, 21 Nov 2018 21:24:20 +0800 (CST)
Received: by mail-pl1-f179.google.com with SMTP id y6-v6so5555345plt.3
        for <xuliker@zju.edu.cn>; Wed, 21 Nov 2018 05:24:20 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20161025;
        h=x-original-authentication-results:x-gm-message-state:delivered-to
         :from:to:date:message-id:in-reply-to:references:mime-version:subject
         :precedence:list-id:list-unsubscribe:list-post:list-help
         :list-subscribe:cc:content-transfer-encoding:errors-to:sender;
        bh=tASA/XfMSrPOj8yVT4dGj+vj/Q2pKr9gRRE4lsg4rZ4=;
        b=mB0ACQ1Kdo8qQ2VH8Cd6nbMcQaYwdlGxBlYwScqjiTarrlrJqDJDNtrn67oHPYivrQ
         8NYj69JZIO82kDV7K+2McGvZHZwcA7v7zrpKOelj8sRFa3SASGRzccwQO7OpdMXoqDxa
         0K9YeQNGtOrNt/bSLWyjHhsRnBPxSmstUIraz/H6lJ7BxzTagn7TSQT4h5S5E2B3TlpH
         7i9e3W5yDLD9KJG1rtq4rd4Br1daQaKQJ94wSi1IxF2BQF1G1U3Vkdoq7rJztz5sUn7L
         yZ7Y8ceGU8sp+ClsbaW2E4VG+EdGuQv5flSFt+JtJ7JrzIbpdKKELd4ODDbXabAbvUb0
         6Acw==
X-Original-Authentication-Results: mx.google.com;       spf=pass (google.com: best guess record for domain of xen-devel-bounces@lists.xenproject.org designates 192.237.175.120 as permitted sender) smtp.mailfrom=xen-devel-bounces@lists.xenproject.org
X-Gm-Message-State: AGRZ1gJm0Lugwwi+KAtzdNkfFT6NJTKEMF4tqdVC54b+sKH8zrKA0P6L
	uUYTJHXgyFFPoT+mY4QtuCrbyuf1+MvhbtQTPiht7KFjHOvUJI4=
X-Received: by 2002:a63:fd53:: with SMTP id m19mr6055498pgj.340.1542806660543;
        Wed, 21 Nov 2018 05:24:20 -0800 (PST)
X-Forwarded-To: xuliker@zju.edu.cn
X-Forwarded-For: liker.xu@gmail.com xuliker@zju.edu.cn
Delivered-To: liker.xu@gmail.com
Received: by 2002:a17:90a:d106:0:0:0:0 with SMTP id l6-v6csp1942007pju;
        Wed, 21 Nov 2018 05:24:19 -0800 (PST)
X-Google-Smtp-Source: AJdET5fZfDLoGtizCWF1Lwbn/mi2ouzUqQw3RpvpJS4Mh8WMFEcEERgXQ+mfBaD/27TYAp1agXOI
X-Received: by 2002:a81:7651:: with SMTP id j17-v6mr6271391ywk.143.1542806659201;
        Wed, 21 Nov 2018 05:24:19 -0800 (PST)
ARC-Seal: i=1; a=rsa-sha256; t=1542806659; cv=none;
        d=google.com; s=arc-20160816;
        b=efA4jxmzFNRZWcjXoXyDSD3BnVOlRM1D6XwP7bFvJMKB4UEWwXMGbxcH9mcvMyA+GX
         7R/I1U1BB5SRTrf2c8JF6rvK/kJ7X0Gc55DpmZfdLmjJ/xHei8yTeAM+7BfJ0jrRKgV8
         JK/QIU9DfDPv8o3hnVFGHIabBVdDdlEOgTS093lESEbdoQoLAmuDIJZtM5y1NP9RLS+f
         jHlguaFaKFwebBp7xtjGEXm5cvzDvs/addFegmFGWc/wEfegqBe3iogYrG2b+QwnBj5e
         NdTf88+TPy8RKaFCCDaNfjSuSf7c2H+kfDpGaPuEElAhpJHN771ogdCblUkAd03odbX9
         KNlQ==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;
        h=sender:errors-to:content-transfer-encoding:cc:list-subscribe
         :list-help:list-post:list-unsubscribe:list-id:precedence:subject
         :mime-version:references:in-reply-to:message-id:date:to:from;
        bh=tASA/XfMSrPOj8yVT4dGj+vj/Q2pKr9gRRE4lsg4rZ4=;
        b=r63Ks9djGAZXM21HWiIoXL2HTwmUb3CzD6GCAod1fWNaxgeALUdjCS46bP/8+tkYgA
         8B4rZFb7K77zi4utvAnqsL9/dHaM8LNvluiGMhzEM4cO40tsjGYQoNKpczFJIBvKfDs+
         t43Iu0bhjI9p6IanYoBKq43Ex19OJ0z/CisPSx3dqtjhlEJg3cEZRXjZ743G4ufQ6PA/
         Zsi9FtLxj9tzVo63X/VxkE3hnt/eIWjzCS2w2vOLRy5JNSuDEOvppAnprcUIuJh5xmgL
         4/eP/zAUw45WuqgmyIw7KyFMqMv5xy4IUhwbix9Z/kHel962NxwepVV1AVQqYQW1+bqh
         7HqA==
ARC-Authentication-Results: i=1; mx.google.com;
       spf=pass (google.com: best guess record for domain of xen-devel-bounces@lists.xenproject.org designates 192.237.175.120 as permitted sender) smtp.mailfrom=xen-devel-bounces@lists.xenproject.org
Received: from lists.xenproject.org (lists.xenproject.org. [192.237.175.120])
        by mx.google.com with ESMTPS id y8si12748949ywc.47.2018.11.21.05.24.18
        (version=TLS1_2 cipher=ECDHE-RSA-CHACHA20-POLY1305 bits=256/256);
        Wed, 21 Nov 2018 05:24:19 -0800 (PST)
Received-SPF: pass (google.com: best guess record for domain of xen-devel-bounces@lists.xenproject.org designates 192.237.175.120 as permitted sender) client-ip=192.237.175.120;
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1gPSRy-0001m0-VM; Wed, 21 Nov 2018 13:21:50 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <srs0=2odm=oa=citrix.com=prvs=856d69d10=andrew.cooper3@srs-us1.protection.inumbo.net>)
 id 1gPSRx-0001ky-KZ
 for xen-devel@lists.xen.org; Wed, 21 Nov 2018 13:21:49 +0000
X-Inumbo-ID: 664240a5-ed90-11e8-9a16-bc764e045a96
Received: from SMTP03.CITRIX.COM (unknown [162.221.156.55])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTPS
 id 664240a5-ed90-11e8-9a16-bc764e045a96;
 Wed, 21 Nov 2018 13:21:48 +0000 (UTC)
X-IronPort-AV: E=Sophos;i="5.56,261,1539648000"; d="scan'208";a="71193324"
From: Andrew Cooper <andrew.cooper3@citrix.com>
To: Xen-devel <xen-devel@lists.xen.org>
Date: Wed, 21 Nov 2018 13:21:15 +0000
Message-ID: <1542806482-24030-8-git-send-email-andrew.cooper3@citrix.com>
X-Mailer: git-send-email 2.1.4
In-Reply-To: <1542806482-24030-1-git-send-email-andrew.cooper3@citrix.com>
References: <1542806482-24030-1-git-send-email-andrew.cooper3@citrix.com>
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH 07/14] x86/p2m: Coding style cleanup
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: George Dunlap <george.dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>, Wei Liu <wei.liu2@citrix.com>,
 Jan Beulich <JBeulich@suse.com>,
 =?UTF-8?q?Roger=20Pau=20Monn=C3=A9?= <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: liker.xu+caf_=xuliker=zju.edu.cn@gmail.com
X-CM-TRANSID: AQAAfwCXekaEXPVbk6djAA--.10494S3
Authentication-Results: mail-app2; spf=pass smtp.mail=liker.xu+caf_=xu
	liker=zju.edu.cn@gmail.com;
X-Coremail-Antispam: 1UD129KBjvAXoWfGr47CF1DKrWfuw43XF17Awb_yoW8XryUuo
	Wfuwn7ZrW8Kw18C39F9r40gFW3Za1Fgw4avr4v9ws8W3WDZw4293yUJrWUXF1rCF4FkFZx
	XFs3Zw47AF9xtFn3n29KB7ZKAUJUUUUU529EdanIXcx71UUUUj7v73VFW2AGmfu7jjvjm3
	AaLaJ3UjIYCTnIWjp_UUUox7k0a2IF6w4kM7kC6x804xWl14x267AKxVWUJVW8JwAFIxvE
	14AKwVWUJVWUGwA2ocxC64kIII0Yj41l84x0c7CEw4AK67xGY2AK021l84ACjcxK6xIIjx
	v20xvE14v26F1j6w1UM28EF7xvwVC0I7IYx2IY6xkF7I0E14v26r4j6F4UM28EF7xvwVC2
	z280aVAFwI0_GcCE3s1l84ACjcxK6I8E87Iv6xkF7I0E14v26rxl6s0DM2vj6VCEFcxC0V
	AYjxAxZF0EFcxC0VAYjxAxZF0Ew4CEw7xC0VCjxxvEa2IrM2AIxVAIcxkEcVAq07x20xvE
	ncxIr21l5I8CrVACY4xI64kE6c02F40Ex7xfMcIj6xIIjxv20xvE14v26r1j6r18McIj6I
	8E87Iv67AKxVWxJVW8Jr1lOx8S6xCaFVCjc4AY6r1j6r4UM4x0Y48IcxkI7VAKI48JM4xv
	F2IEb7IF0Fy264kE64k0F24l7I0Y6sxI4wCY1x0264kExVAvwVAq07x20xylc7Ca8VAvwV
	CFzxkY4VCF77xAMxkIecxEwVCI4VW5GwCY0x0Ix7I2Y4AK64vIr41lcIIF0xvE2Ix0cI8I
	cVAFwI0_Gr0_Xr1lcIIF0xvE2Ix0cI8IcVCY1x0267AKxVW8JVWxJwCYIxAIcVC2z280aV
	AFwI0_Cr1j6rxdMxvI42IY6I8E87Iv6xkF7I0E14v26F4UJVW0owCF04k20xvY0x0EwIxG
	rwCF04k20xvEw4C26cxK6c8Ij28IcwCF72vE77IF4wCFx2IqxVCFs4IE7xkEbVWUJVW8Jw
	C20s026c02F40E14v26r1j6r18MI8I3I0E7480Y4vE14v26r106r1rMI8E67AF67kF1VAF
	wI0_JF0_Jw1lIxkGc2Ij64vIr41lIxAIcVCF04k26cxKx2IYs7xG6r1j6r1xMVCEFcxC0V
	AYjxAxZFUvcSsGvfC2KfnxnUUI43ZEXa7IUYd73JUUUUU==

Tm8gZnVuY3Rpb25hbCBjaGFuZ2UuCgpTaWduZWQtb2ZmLWJ5OiBBbmRyZXcgQ29vcGVyIDxhbmRy
ZXcuY29vcGVyM0BjaXRyaXguY29tPgotLS0KQ0M6IEphbiBCZXVsaWNoIDxKQmV1bGljaEBzdXNl
LmNvbT4KQ0M6IFdlaSBMaXUgPHdlaS5saXUyQGNpdHJpeC5jb20+CkNDOiBSb2dlciBQYXUgTW9u
bsOpIDxyb2dlci5wYXVAY2l0cml4LmNvbT4KQ0M6IEdlb3JnZSBEdW5sYXAgPGdlb3JnZS5kdW5s
YXBAZXUuY2l0cml4LmNvbT4KLS0tCiB4ZW4vYXJjaC94ODYvbW0vcDJtLmMgICAgIHwgMjkgKysr
KysrKystLS0tLS0tCiB4ZW4vaW5jbHVkZS9hc20teDg2L3AybS5oIHwgOTEgKysrKysrKysrKysr
KysrKysrKysrKysrKystLS0tLS0tLS0tLS0tLS0tLS0tLS0KIDIgZmlsZXMgY2hhbmdlZCwgNjUg
aW5zZXJ0aW9ucygrKSwgNTUgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEveGVuL2FyY2gveDg2
L21tL3AybS5jIGIveGVuL2FyY2gveDg2L21tL3AybS5jCmluZGV4IDhiOTg5OGEuLmY1MmE3MWUg
MTAwNjQ0Ci0tLSBhL3hlbi9hcmNoL3g4Ni9tbS9wMm0uYworKysgYi94ZW4vYXJjaC94ODYvbW0v
cDJtLmMKQEAgLTQ0NCw3ICs0NDQsNyBAQCBtZm5fdCBfX2dldF9nZm5fdHlwZV9hY2Nlc3Moc3Ry
dWN0IHAybV9kb21haW4gKnAybSwgdW5zaWduZWQgbG9uZyBnZm5fbCwKICAgICAgICAgbWZuID0g
cDJtLT5nZXRfZW50cnkocDJtLCBnZm4sIHQsIGEsIHEsIHBhZ2Vfb3JkZXIsIE5VTEwpOwogICAg
IH0KIAotICAgIGlmICh1bmxpa2VseSgocDJtX2lzX2Jyb2tlbigqdCkpKSkKKyAgICBpZiAoIHVu
bGlrZWx5KHAybV9pc19icm9rZW4oKnQpKSApCiAgICAgewogICAgICAgICAvKiBSZXR1cm4gaW52
YWxpZF9tZm4gdG8gYXZvaWQgY2FsbGVyJ3MgYWNjZXNzICovCiAgICAgICAgIG1mbiA9IElOVkFM
SURfTUZOOwpAQCAtNjY5LDcgKzY2OSw3IEBAIHZvaWQgcDJtX3RlYXJkb3duKHN0cnVjdCBwMm1f
ZG9tYWluICpwMm0pCiAgICAgc3RydWN0IHBhZ2VfaW5mbyAqcGc7CiAgICAgc3RydWN0IGRvbWFp
biAqZDsKIAotICAgIGlmIChwMm0gPT0gTlVMTCkKKyAgICBpZiAoIHAybSA9PSBOVUxMICkKICAg
ICAgICAgcmV0dXJuOwogCiAgICAgZCA9IHAybS0+ZG9tYWluOwpAQCAtNzc2LDcgKzc3Niw3IEBA
IGd1ZXN0X3BoeXNtYXBfYWRkX2VudHJ5KHN0cnVjdCBkb21haW4gKmQsIGdmbl90IGdmbiwgbWZu
X3QgbWZuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJmEsIDAsIE5VTEwsIE5VTEwp
OwogICAgICAgICBpZiAoIHAybV9pc19zaGFyZWQob3QpICkKICAgICAgICAgewotICAgICAgICAg
ICAgLyogRG8gYW4gdW5zaGFyZSB0byBjbGVhbmx5IHRha2UgY2FyZSBvZiBhbGwgY29ybmVyIAor
ICAgICAgICAgICAgLyogRG8gYW4gdW5zaGFyZSB0byBjbGVhbmx5IHRha2UgY2FyZSBvZiBhbGwg
Y29ybmVyCiAgICAgICAgICAgICAgKiBjYXNlcy4gKi8KICAgICAgICAgICAgIGludCByYzsKICAg
ICAgICAgICAgIHJjID0gbWVtX3NoYXJpbmdfdW5zaGFyZV9wYWdlKHAybS0+ZG9tYWluLApAQCAt
NzkzLDcgKzc5Myw3IEBAIGd1ZXN0X3BoeXNtYXBfYWRkX2VudHJ5KHN0cnVjdCBkb21haW4gKmQs
IGdmbl90IGdmbiwgbWZuX3QgbWZuLAogICAgICAgICAgICAgICAgICAqIEhvd2V2ZXIsIGFsbCBj
dXJyZW50IChjaGFuZ2VzZXQgMzQzMmFiY2Y5MzgwKSBjb2RlCiAgICAgICAgICAgICAgICAgICog
cGF0aHMgYXZvaWQgdGhpcyB1bnNhdm91cnkgc2l0dWF0aW9uLiBGb3Igbm93LgogICAgICAgICAg
ICAgICAgICAqCi0gICAgICAgICAgICAgICAgICogRm9yZWlnbiBkb21haW5zIGFyZSBva2F5IHRv
IHBsYWNlIGFuIGV2ZW50IGFzIHRoZXkgCisgICAgICAgICAgICAgICAgICogRm9yZWlnbiBkb21h
aW5zIGFyZSBva2F5IHRvIHBsYWNlIGFuIGV2ZW50IGFzIHRoZXkKICAgICAgICAgICAgICAgICAg
KiB3b24ndCBnbyB0byBzbGVlcC4gKi8KICAgICAgICAgICAgICAgICAodm9pZCltZW1fc2hhcmlu
Z19ub3RpZnlfZW5vbWVtKHAybS0+ZG9tYWluLAogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgZ2ZuX3goZ2ZuX2FkZChnZm4sIGkpKSwgZmFsc2UpOwpAQCAt
ODA4LDcgKzgwOCw3IEBAIGd1ZXN0X3BoeXNtYXBfYWRkX2VudHJ5KHN0cnVjdCBkb21haW4gKmQs
IGdmbl90IGdmbiwgbWZuX3QgbWZuLAogICAgICAgICAgICAgLyogUmVhbGx5IHNob3VsZG4ndCBi
ZSB1bm1hcHBpbmcgZ3JhbnQvZm9yZWlnbiBtYXBzIHRoaXMgd2F5ICovCiAgICAgICAgICAgICBk
b21haW5fY3Jhc2goZCk7CiAgICAgICAgICAgICBwMm1fdW5sb2NrKHAybSk7Ci0gICAgICAgICAg
ICAKKwogICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7CiAgICAgICAgIH0KICAgICAgICAgZWxz
ZSBpZiAoIHAybV9pc19yYW0ob3QpICYmICFwMm1faXNfcGFnZWQob3QpICkKQEAgLTkzNCw3ICs5
MzQsNyBAQCBpbnQgcDJtX2NoYW5nZV90eXBlX29uZShzdHJ1Y3QgZG9tYWluICpkLCB1bnNpZ25l
ZCBsb25nIGdmbl9sLAogfQogCiAvKiBNb2RpZnkgdGhlIHAybSB0eXBlIG9mIGEgcmFuZ2Ugb2Yg
Z2ZucyBmcm9tIG90IHRvIG50LiAqLwotdm9pZCBwMm1fY2hhbmdlX3R5cGVfcmFuZ2Uoc3RydWN0
IGRvbWFpbiAqZCwgCit2b2lkIHAybV9jaGFuZ2VfdHlwZV9yYW5nZShzdHJ1Y3QgZG9tYWluICpk
LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgbG9uZyBzdGFydCwgdW5zaWdu
ZWQgbG9uZyBlbmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwMm1fdHlwZV90IG90LCBw
Mm1fdHlwZV90IG50KQogewpAQCAtMTU2OCw3ICsxNTY4LDcgQEAgaW50IHAybV9tZW1fcGFnaW5n
X3ByZXAoc3RydWN0IGRvbWFpbiAqZCwgdW5zaWduZWQgbG9uZyBnZm5fbCwgdWludDY0X3QgYnVm
ZmVyKQogCiAgICAgaWYgKCB1c2VyX3B0ciApCiAgICAgICAgIC8qIFNhbml0eSBjaGVjayB0aGUg
YnVmZmVyIGFuZCBiYWlsIG91dCBlYXJseSBpZiB0cm91YmxlICovCi0gICAgICAgIGlmICggKGJ1
ZmZlciAmIChQQUdFX1NJWkUgLSAxKSkgfHwgCisgICAgICAgIGlmICggKGJ1ZmZlciAmIChQQUdF
X1NJWkUgLSAxKSkgfHwKICAgICAgICAgICAgICAoIWFjY2Vzc19vayh1c2VyX3B0ciwgUEFHRV9T
SVpFKSkgKQogICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7CiAKQEAgLTE2MTMsNyArMTYxMyw3
IEBAIGludCBwMm1fbWVtX3BhZ2luZ19wcmVwKHN0cnVjdCBkb21haW4gKmQsIHVuc2lnbmVkIGxv
bmcgZ2ZuX2wsIHVpbnQ2NF90IGJ1ZmZlcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICJieXRlcyBsZWZ0ICVkXG4iLCBnZm5fbCwgZC0+ZG9tYWluX2lkLCByYyk7CiAgICAgICAg
ICAgICByZXQgPSAtRUZBVUxUOwogICAgICAgICAgICAgcHV0X3BhZ2UocGFnZSk7IC8qIERvbid0
IGxlYWsgcGFnZXMgKi8KLSAgICAgICAgICAgIGdvdG8gb3V0OyAgICAgICAgICAgIAorICAgICAg
ICAgICAgZ290byBvdXQ7CiAgICAgICAgIH0KICAgICB9CiAKQEAgLTE2ODUsNyArMTY4NSw3IEBA
IHN0YXRpYyBzdHJ1Y3QgcDJtX2RvbWFpbiAqCiBwMm1fZ2V0bHJ1X25lc3RlZHAybShzdHJ1Y3Qg
ZG9tYWluICpkLCBzdHJ1Y3QgcDJtX2RvbWFpbiAqcDJtKQogewogICAgIHN0cnVjdCBsaXN0X2hl
YWQgKmxydV9saXN0ID0gJnAybV9nZXRfaG9zdHAybShkKS0+bnAybV9saXN0OwotICAgIAorCiAg
ICAgQVNTRVJUKCFsaXN0X2VtcHR5KGxydV9saXN0KSk7CiAKICAgICBpZiAoIHAybSA9PSBOVUxM
ICkKQEAgLTE4MjUsMTMgKzE4MjUsMTIgQEAgcDJtX2dldF9uZXN0ZWRwMm1fbG9ja2VkKHN0cnVj
dCB2Y3B1ICp2KQogICAgIC8qIE1hc2sgb3V0IGxvdyBiaXRzOyB0aGlzIGF2b2lkcyBjb2xsaXNp
b25zIHdpdGggUDJNX0JBU0VfRUFERFIgKi8KICAgICBucDJtX2Jhc2UgJj0gfigweGZmZnVsbCk7
CiAKLSAgICBpZiAobnYtPm52X2ZsdXNocDJtICYmIG52LT5udl9wMm0pIHsKKyAgICBpZiAoIG52
LT5udl9mbHVzaHAybSAmJiBudi0+bnZfcDJtICkKICAgICAgICAgbnYtPm52X3AybSA9IE5VTEw7
Ci0gICAgfQogCiAgICAgbmVzdGVkcDJtX2xvY2soZCk7CiAgICAgcDJtID0gbnYtPm52X3AybTsK
LSAgICBpZiAoIHAybSApIAorICAgIGlmICggcDJtICkKICAgICB7CiAgICAgICAgIHAybV9sb2Nr
KHAybSk7CiAgICAgICAgIGlmICggcDJtLT5ucDJtX2Jhc2UgPT0gbnAybV9iYXNlICkKQEAgLTE4
ODksNyArMTg4OCw3IEBAIHN0cnVjdCBwMm1fZG9tYWluICpwMm1fZ2V0X25lc3RlZHAybShzdHJ1
Y3QgdmNwdSAqdikKIHN0cnVjdCBwMm1fZG9tYWluICoKIHAybV9nZXRfcDJtKHN0cnVjdCB2Y3B1
ICp2KQogewotICAgIGlmICghbmVzdGVkaHZtX2lzX24yKHYpKQorICAgIGlmICggIW5lc3RlZGh2
bV9pc19uMih2KSApCiAgICAgICAgIHJldHVybiBwMm1fZ2V0X2hvc3RwMm0odi0+ZG9tYWluKTsK
IAogICAgIHJldHVybiBwMm1fZ2V0X25lc3RlZHAybSh2KTsKQEAgLTI1NTQsNyArMjU1Myw3IEBA
IHZvaWQgYXVkaXRfcDJtKHN0cnVjdCBkb21haW4gKmQsCiAgICAgcDJtX2xvY2socDJtKTsKICAg
ICBwb2RfbG9jayhwMm0pOwogCi0gICAgaWYgKHAybS0+YXVkaXRfcDJtKQorICAgIGlmICggcDJt
LT5hdWRpdF9wMm0gKQogICAgICAgICBwbWJhZCA9IHAybS0+YXVkaXRfcDJtKHAybSk7CiAKICAg
ICAvKiBBdWRpdCBwYXJ0IHR3bzogd2FsayB0aGUgZG9tYWluJ3MgcGFnZSBhbGxvY2F0aW9uIGxp
c3QsIGNoZWNraW5nCkBAIC0yNjE1LDcgKzI2MTQsNyBAQCB2b2lkIGF1ZGl0X3AybShzdHJ1Y3Qg
ZG9tYWluICpkLAogCiAgICAgcG9kX3VubG9jayhwMm0pOwogICAgIHAybV91bmxvY2socDJtKTsK
LSAKKwogICAgIFAyTV9QUklOVEsoInAybSBhdWRpdCBjb21wbGV0ZVxuIik7CiAgICAgaWYgKCBv
cnBoYW5zX2NvdW50IHwgbXBiYWQgfCBwbWJhZCApCiAgICAgICAgIFAyTV9QUklOVEsoInAybSBh
dWRpdCBmb3VuZCAlbHUgb3JwaGFuc1xuIiwgb3JwaGFuc19jb3VudCk7CmRpZmYgLS1naXQgYS94
ZW4vaW5jbHVkZS9hc20teDg2L3AybS5oIGIveGVuL2luY2x1ZGUvYXNtLXg4Ni9wMm0uaAppbmRl
eCAwNGMyMTA0Li43NGQwY2Y2IDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS9hc20teDg2L3AybS5o
CisrKyBiL3hlbi9pbmNsdWRlL2FzbS14ODYvcDJtLmgKQEAgLTM0LDkgKzM0LDkgQEAKIGV4dGVy
biBib29sX3Qgb3B0X2hhcF8xZ2IsIG9wdF9oYXBfMm1iOwogCiAvKgotICogVGhlIHVwcGVyIGxl
dmVscyBvZiB0aGUgcDJtIHBhZ2V0YWJsZSBhbHdheXMgY29udGFpbiBmdWxsIHJpZ2h0czsgYWxs
IAorICogVGhlIHVwcGVyIGxldmVscyBvZiB0aGUgcDJtIHBhZ2V0YWJsZSBhbHdheXMgY29udGFp
biBmdWxsIHJpZ2h0czsgYWxsCiAgKiB2YXJpYXRpb24gaW4gdGhlIGFjY2VzcyBjb250cm9sIGJp
dHMgaXMgbWFkZSBpbiB0aGUgbGV2ZWwtMSBQVEVzLgotICogCisgKgogICogSW4gYWRkaXRpb24g
dG8gdGhlIHBoeXMtdG8tbWFjaGluZSB0cmFuc2xhdGlvbiwgZWFjaCBwMm0gUFRFIGNvbnRhaW5z
CiAgKiAqdHlwZSogaW5mb3JtYXRpb24gYWJvdXQgdGhlIGdmbiBpdCB0cmFuc2xhdGVzLCBoZWxw
aW5nIFhlbiB0byBkZWNpZGUKICAqIG9uIHRoZSBjb3JyZWN0IGNvdXJzZSBvZiBhY3Rpb24gd2hl
biBoYW5kbGluZyBhIHBhZ2UtZmF1bHQgdG8gdGhhdApAQCAtNDcsOCArNDcsOCBAQCBleHRlcm4g
Ym9vbF90IG9wdF9oYXBfMWdiLCBvcHRfaGFwXzJtYjsKICAqLwogCiAvKgotICogQU1EIElPTU1V
OiBXaGVuIHdlIHNoYXJlIHAybSB0YWJsZSB3aXRoIGlvbW11LCBiaXQgNTIgLWJpdCA1OCBpbiBw
dGUgCi0gKiBjYW5ub3QgYmUgbm9uLXplcm8sIG90aGVyd2lzZSwgaGFyZHdhcmUgZ2VuZXJhdGVz
IGlvIHBhZ2UgZmF1bHRzIHdoZW4gCisgKiBBTUQgSU9NTVU6IFdoZW4gd2Ugc2hhcmUgcDJtIHRh
YmxlIHdpdGggaW9tbXUsIGJpdCA1MiAtYml0IDU4IGluIHB0ZQorICogY2Fubm90IGJlIG5vbi16
ZXJvLCBvdGhlcndpc2UsIGhhcmR3YXJlIGdlbmVyYXRlcyBpbyBwYWdlIGZhdWx0cyB3aGVuCiAg
KiBkZXZpY2UgYWNjZXNzIHRob3NlIHBhZ2VzLiBUaGVyZWZvcmUsIHAybV9yYW1fcncgaGFzIHRv
IGJlIGRlZmluZWQgYXMgMC4KICAqLwogdHlwZWRlZiBlbnVtIHsKQEAgLTIxMiw5ICsyMTIsMTEg
QEAgc3RydWN0IHAybV9kb21haW4gewogICAgIHVpbnQ2NF90ICAgICAgICAgICBucDJtX2Jhc2U7
CiAgICAgdWludDY0X3QgICAgICAgICAgIG5wMm1fZ2VuZXJhdGlvbjsKIAotICAgIC8qIE5lc3Rl
ZCBwMm1zOiBsaW5rZWQgbGlzdCBvZiBuMnBtcyBhbGxvY2F0ZWQgdG8gdGhpcyBkb21haW4uIAot
ICAgICAqIFRoZSBob3N0IHAybSBoYXNvbGRzIHRoZSBoZWFkIG9mIHRoZSBsaXN0IGFuZCB0aGUg
bnAybXMgYXJlIAotICAgICAqIHRocmVhZGVkIG9uIGluIExSVSBvcmRlci4gKi8KKyAgICAvKgor
ICAgICAqIE5lc3RlZCBwMm1zOiBsaW5rZWQgbGlzdCBvZiBuMnBtcyBhbGxvY2F0ZWQgdG8gdGhp
cyBkb21haW4uCisgICAgICogVGhlIGhvc3QgcDJtIGhhc29sZHMgdGhlIGhlYWQgb2YgdGhlIGxp
c3QgYW5kIHRoZSBucDJtcyBhcmUKKyAgICAgKiB0aHJlYWRlZCBvbiBpbiBMUlUgb3JkZXIuCisg
ICAgICovCiAgICAgc3RydWN0IGxpc3RfaGVhZCAgIG5wMm1fbGlzdDsKICNlbmRpZgogCkBAIC0y
MjQsMTAgKzIyNiwxMiBAQCBzdHJ1Y3QgcDJtX2RvbWFpbiB7CiAgICAgLyogSG9zdCBwMm06IEds
b2JhbCBsb2ctZGlydHkgbW9kZSBlbmFibGVkIGZvciB0aGUgZG9tYWluLiAqLwogICAgIGJvb2xf
dCAgICAgICAgICAgICBnbG9iYWxfbG9nZGlydHk7CiAKLSAgICAvKiBIb3N0IHAybTogd2hlbiB0
aGlzIGZsYWcgaXMgc2V0LCBkb24ndCBmbHVzaCBhbGwgdGhlIG5lc3RlZC1wMm0gCi0gICAgICog
dGFibGVzIG9uIGV2ZXJ5IGhvc3QtcDJtIGNoYW5nZS4gIFRoZSBzZXR0ZXIgb2YgdGhpcyBmbGFn
IAorICAgIC8qCisgICAgICogSG9zdCBwMm06IHdoZW4gdGhpcyBmbGFnIGlzIHNldCwgZG9uJ3Qg
Zmx1c2ggYWxsIHRoZSBuZXN0ZWQtcDJtCisgICAgICogdGFibGVzIG9uIGV2ZXJ5IGhvc3QtcDJt
IGNoYW5nZS4gIFRoZSBzZXR0ZXIgb2YgdGhpcyBmbGFnCiAgICAgICogaXMgcmVzcG9uc2libGUg
Zm9yIHBlcmZvcm1pbmcgdGhlIGZ1bGwgZmx1c2ggYmVmb3JlIHJlbGVhc2luZyB0aGUKLSAgICAg
KiBob3N0IHAybSdzIGxvY2suICovCisgICAgICogaG9zdCBwMm0ncyBsb2NrLgorICAgICAqLwog
ICAgIGludCAgICAgICAgICAgICAgICBkZWZlcl9uZXN0ZWRfZmx1c2g7CiAKICNpZmRlZiBDT05G
SUdfSFZNCkBAIC0yNjQsNyArMjY4LDcgQEAgc3RydWN0IHAybV9kb21haW4gewogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBsb25nIGZp
cnN0X2dmbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgdW5zaWduZWQgbG9uZyBsYXN0X2dmbik7CiAgICAgdm9pZCAgICAgICAgICAgICAgICgqbWVt
b3J5X3R5cGVfY2hhbmdlZCkoc3RydWN0IHAybV9kb21haW4gKnAybSk7Ci0gICAgCisKICAgICB2
b2lkICAgICAgICAgICAgICAgKCp3cml0ZV9wMm1fZW50cnkpKHN0cnVjdCBwMm1fZG9tYWluICpw
Mm0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBs
b25nIGdmbiwgbDFfcGdlbnRyeV90ICpwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgbDFfcGdlbnRyeV90IG5ldywgdW5zaWduZWQgaW50IGxldmVsKTsKQEAgLTI5
MSw4ICsyOTUsMTAgQEAgc3RydWN0IHAybV9kb21haW4gewogICAgICAqIHJldHlwZWQgZ2V0IHRo
aXMgYWNjZXNzIHR5cGUuICBTZWUgZGVmaW5pdGlvbiBvZiBwMm1fYWNjZXNzX3QuICovCiAgICAg
cDJtX2FjY2Vzc190IGRlZmF1bHRfYWNjZXNzOwogCi0gICAgLyogSWYgdHJ1ZSwgYW5kIGFuIGFj
Y2VzcyBmYXVsdCBjb21lcyBpbiBhbmQgdGhlcmUgaXMgbm8gdm1fZXZlbnQgbGlzdGVuZXIsIAot
ICAgICAqIHBhdXNlIGRvbWFpbi4gIE90aGVyd2lzZSwgcmVtb3ZlIGFjY2VzcyByZXN0cmljdGlv
bnMuICovCisgICAgLyoKKyAgICAgKiBJZiB0cnVlLCBhbmQgYW4gYWNjZXNzIGZhdWx0IGNvbWVz
IGluIGFuZCB0aGVyZSBpcyBubyB2bV9ldmVudCBsaXN0ZW5lciwKKyAgICAgKiBwYXVzZSBkb21h
aW4uICBPdGhlcndpc2UsIHJlbW92ZSBhY2Nlc3MgcmVzdHJpY3Rpb25zLgorICAgICAqLwogICAg
IGJvb2xfdCAgICAgICBhY2Nlc3NfcmVxdWlyZWQ7CiAKICAgICAvKiBIaWdoZXN0IGd1ZXN0IGZy
YW1lIHRoYXQncyBldmVyIGJlZW4gbWFwcGVkIGluIHRoZSBwMm0gKi8KQEAgLTMxMCwxMyArMzE2
LDE1IEBAIHN0cnVjdCBwMm1fZG9tYWluIHsKICAgICB1bnNpZ25lZCBsb25nIG5leHRfc2hhcmVk
X2dmbl90b19yZWxpbnF1aXNoOwogCiAjaWZkZWYgQ09ORklHX0hWTQotICAgIC8qIFBvcHVsYXRl
LW9uLWRlbWFuZCB2YXJpYWJsZXMKKyAgICAvKgorICAgICAqIFBvcHVsYXRlLW9uLWRlbWFuZCB2
YXJpYWJsZXMKICAgICAgKiBBbGwgdmFyaWFibGVzIGFyZSBwcm90ZWN0ZWQgd2l0aCB0aGUgcG9k
IGxvY2suIFdlIGNhbm5vdCByZWx5IG9uCiAgICAgICogdGhlIHAybSBsb2NrIGlmIGl0J3MgdHVy
bmVkIGludG8gYSBmaW5lLWdyYWluZWQgbG9jay4KLSAgICAgKiBXZSBvbmx5IHVzZSB0aGUgZG9t
YWluIHBhZ2VfYWxsb2MgbG9jayBmb3IgYWRkaXRpb25zIGFuZCAKKyAgICAgKiBXZSBvbmx5IHVz
ZSB0aGUgZG9tYWluIHBhZ2VfYWxsb2MgbG9jayBmb3IgYWRkaXRpb25zIGFuZAogICAgICAqIGRl
bGV0aW9ucyB0byB0aGUgZG9tYWluJ3MgcGFnZSBsaXN0LiBCZWNhdXNlIHdlIHVzZSBpdCBuZXN0
ZWQKICAgICAgKiB3aXRoaW4gdGhlIFBvRCBsb2NrLCB3ZSBlbmZvcmNlIGl0J3Mgb3JkZXJpbmcg
KGJ5IHJlbWVtYmVyaW5nCi0gICAgICogdGhlIHVubG9jayBsZXZlbCBpbiB0aGUgYXJjaF9kb21h
aW4gc3ViIHN0cnVjdCkuICovCisgICAgICogdGhlIHVubG9jayBsZXZlbCBpbiB0aGUgYXJjaF9k
b21haW4gc3ViIHN0cnVjdCkuCisgICAgICovCiAgICAgc3RydWN0IHsKICAgICAgICAgc3RydWN0
IHBhZ2VfbGlzdF9oZWFkIHN1cGVyLCAgIC8qIExpc3Qgb2Ygc3VwZXJwYWdlcyAgICAgICAgICAg
ICAgICAqLwogICAgICAgICAgICAgICAgICAgICAgICAgIHNpbmdsZTsgICAgICAgLyogTm9uLXN1
cGVyIGxpc3RzICAgICAgICAgICAgICAgICAgICovCkBAIC00MjYsMTMgKzQzNCwxNSBAQCBtZm5f
dCBfX25vbm51bGwoMywgNCkgX19nZXRfZ2ZuX3R5cGVfYWNjZXNzKAogICAgIHN0cnVjdCBwMm1f
ZG9tYWluICpwMm0sIHVuc2lnbmVkIGxvbmcgZ2ZuLCBwMm1fdHlwZV90ICp0LAogICAgIHAybV9h
Y2Nlc3NfdCAqYSwgcDJtX3F1ZXJ5X3QgcSwgdW5zaWduZWQgaW50ICpwYWdlX29yZGVyLCBib29s
X3QgbG9ja2VkKTsKIAotLyogUmVhZCBhIHBhcnRpY3VsYXIgUDJNIHRhYmxlLCBtYXBwaW5nIHBh
Z2VzIGFzIHdlIGdvLiAgTW9zdCBjYWxsZXJzCisvKgorICogUmVhZCBhIHBhcnRpY3VsYXIgUDJN
IHRhYmxlLCBtYXBwaW5nIHBhZ2VzIGFzIHdlIGdvLiAgTW9zdCBjYWxsZXJzCiAgKiBzaG91bGQg
X25vdF8gY2FsbCB0aGlzIGRpcmVjdGx5OyB1c2UgdGhlIG90aGVyIGdldF9nZm4qIGZ1bmN0aW9u
cwogICogYmVsb3cgdW5sZXNzIHlvdSBrbm93IHlvdSB3YW50IHRvIHdhbGsgYSBwMm0gdGhhdCBp
c24ndCBhIGRvbWFpbidzCiAgKiBtYWluIG9uZS4KLSAqIElmIHRoZSBsb29rdXAgc3VjY2VlZHMs
IHRoZSByZXR1cm4gdmFsdWUgaXMgIT0gSU5WQUxJRF9NRk4gYW5kIAorICogSWYgdGhlIGxvb2t1
cCBzdWNjZWVkcywgdGhlIHJldHVybiB2YWx1ZSBpcyAhPSBJTlZBTElEX01GTiBhbmQKICAqICpw
YWdlX29yZGVyIGlzIGZpbGxlZCBpbiB3aXRoIHRoZSBvcmRlciBvZiB0aGUgc3VwZXJwYWdlIChp
ZiBhbnkpIHRoYXQKLSAqIHRoZSBlbnRyeSB3YXMgZm91bmQgaW4uICAqLworICogdGhlIGVudHJ5
IHdhcyBmb3VuZCBpbi4KKyAqLwogc3RhdGljIGlubGluZSBtZm5fdCBfX25vbm51bGwoMywgNCkg
Z2V0X2dmbl90eXBlX2FjY2VzcygKICAgICBzdHJ1Y3QgcDJtX2RvbWFpbiAqcDJtLCB1bnNpZ25l
ZCBsb25nIGdmbiwgcDJtX3R5cGVfdCAqdCwKICAgICBwMm1fYWNjZXNzX3QgKmEsIHAybV9xdWVy
eV90IHEsIHVuc2lnbmVkIGludCAqcGFnZV9vcmRlcikKQEAgLTQ1OSwxMCArNDY5LDExIEBAIHZv
aWQgX19wdXRfZ2ZuKHN0cnVjdCBwMm1fZG9tYWluICpwMm0sIHVuc2lnbmVkIGxvbmcgZ2ZuKTsK
IAogI2RlZmluZSBwdXRfZ2ZuKGQsIGdmbikgX19wdXRfZ2ZuKHAybV9nZXRfaG9zdHAybSgoZCkp
LCAoZ2ZuKSkKIAotLyogVGhlIGludGVudCBvZiB0aGUgInVubG9ja2VkIiBhY2Nlc3NvciBpcyB0
byBoYXZlIHRoZSBjYWxsZXIgbm90IHdvcnJ5IGFib3V0Ci0gKiBwdXRfZ2ZuLiBUaGV5IGFwcGx5
IHRvIHZlcnkgc3BlY2lmaWMgc2l0dWF0aW9uczogZGVidWcgcHJpbnRrJ3MsIGR1bXBzIAotICog
ZHVyaW5nIGEgZG9tYWluIGNyYXNoLCBvciB0byBwZWVrIGF0IGEgcDJtIGVudHJ5L3R5cGUuIENh
bGxlciBpcyBub3QgCi0gKiBob2xkaW5nIHRoZSBwMm0gZW50cnkgZXhjbHVzaXZlbHkgZHVyaW5n
IG9yIGFmdGVyIGNhbGxpbmcgdGhpcy4gCisvKgorICogVGhlIGludGVudCBvZiB0aGUgInVubG9j
a2VkIiBhY2Nlc3NvciBpcyB0byBoYXZlIHRoZSBjYWxsZXIgbm90IHdvcnJ5IGFib3V0CisgKiBw
dXRfZ2ZuLiBUaGV5IGFwcGx5IHRvIHZlcnkgc3BlY2lmaWMgc2l0dWF0aW9uczogZGVidWcgcHJp
bnRrJ3MsIGR1bXBzCisgKiBkdXJpbmcgYSBkb21haW4gY3Jhc2gsIG9yIHRvIHBlZWsgYXQgYSBw
Mm0gZW50cnkvdHlwZS4gQ2FsbGVyIGlzIG5vdAorICogaG9sZGluZyB0aGUgcDJtIGVudHJ5IGV4
Y2x1c2l2ZWx5IGR1cmluZyBvciBhZnRlciBjYWxsaW5nIHRoaXMuCiAgKgogICogVGhpcyBpcyBh
bHNvIHVzZWQgaW4gdGhlIHNoYWRvdyBjb2RlIHdoZW5ldmVyIHRoZSBwYWdpbmcgbG9jayBpcwog
ICogaGVsZCAtLSBpbiB0aG9zZSBjYXNlcywgdGhlIGNhbGxlciBpcyBwcm90ZWN0ZWQgYWdhaW5z
dCBjb25jdXJyZW50CkBAIC00NzMsMTkgKzQ4NCwyMSBAQCB2b2lkIF9fcHV0X2dmbihzdHJ1Y3Qg
cDJtX2RvbWFpbiAqcDJtLCB1bnNpZ25lZCBsb25nIGdmbik7CiAgKiBBbnkgb3RoZXIgdHlwZSBv
ZiBxdWVyeSBjYW4gY2F1c2UgYSBjaGFuZ2UgaW4gdGhlIHAybSBhbmQgbWF5IG5lZWQgdG8KICAq
IHBlcmZvcm0gbG9ja2luZy4KICAqLwotc3RhdGljIGlubGluZSBtZm5fdCBnZXRfZ2ZuX3F1ZXJ5
X3VubG9ja2VkKHN0cnVjdCBkb21haW4gKmQsIAotICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHVuc2lnbmVkIGxvbmcgZ2ZuLCAKK3N0YXRpYyBpbmxpbmUgbWZuX3Qg
Z2V0X2dmbl9xdWVyeV91bmxvY2tlZChzdHJ1Y3QgZG9tYWluICpkLAorICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGxvbmcgZ2ZuLAogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAybV90eXBlX3QgKnQpCiB7CiAgICAg
cDJtX2FjY2Vzc190IGE7CiAgICAgcmV0dXJuIF9fZ2V0X2dmbl90eXBlX2FjY2VzcyhwMm1fZ2V0
X2hvc3RwMm0oZCksIGdmbiwgdCwgJmEsIDAsIE5VTEwsIDApOwogfQogCi0vKiBBdG9taWNhbGx5
IGxvb2sgdXAgYSBHRk4gYW5kIHRha2UgYSByZWZlcmVuY2UgY291bnQgb24gdGhlIGJhY2tpbmcg
cGFnZS4KKy8qCisgKiBBdG9taWNhbGx5IGxvb2sgdXAgYSBHRk4gYW5kIHRha2UgYSByZWZlcmVu
Y2UgY291bnQgb24gdGhlIGJhY2tpbmcgcGFnZS4KICAqIFRoaXMgbWFrZXMgc3VyZSB0aGUgcGFn
ZSBkb2Vzbid0IGdldCBmcmVlZCAob3Igc2hhcmVkKSB1bmRlcmZvb3QsCiAgKiBhbmQgc2hvdWxk
IGJlIHVzZWQgYnkgYW55IHBhdGggdGhhdCBpbnRlbmRzIHRvIHdyaXRlIHRvIHRoZSBiYWNraW5n
IHBhZ2UuCiAgKiBSZXR1cm5zIE5VTEwgaWYgdGhlIHBhZ2UgaXMgbm90IGJhY2tlZCBieSBSQU0u
Ci0gKiBUaGUgY2FsbGVyIGlzIHJlc3BvbnNpYmxlIGZvciBjYWxsaW5nIHB1dF9wYWdlKCkgYWZ0
ZXJ3YXJkcy4gKi8KKyAqIFRoZSBjYWxsZXIgaXMgcmVzcG9uc2libGUgZm9yIGNhbGxpbmcgcHV0
X3BhZ2UoKSBhZnRlcndhcmRzLgorICovCiBzdHJ1Y3QgcGFnZV9pbmZvICpwMm1fZ2V0X3BhZ2Vf
ZnJvbV9nZm4oc3RydWN0IHAybV9kb21haW4gKnAybSwgZ2ZuX3QgZ2ZuLAogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAybV90eXBlX3QgKnQsIHAybV9hY2Nlc3NfdCAq
YSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwMm1fcXVlcnlfdCBx
KTsKQEAgLTUyNSw3ICs1MzgsNyBAQCBzdHJ1Y3QgdHdvX2dmbnMgewogLyogUmV0dXJucyBtZm4s
IHR5cGUgYW5kIGFjY2VzcyBmb3IgcG90ZW50aWFsIGNhbGxlciBjb25zdW1wdGlvbiwgYnV0IGFu
eQogICogb2YgdGhvc2UgY2FuIGJlIE5VTEwgKi8KIHN0YXRpYyBpbmxpbmUgdm9pZCBnZXRfdHdv
X2dmbnMoc3RydWN0IGRvbWFpbiAqcmQsIHVuc2lnbmVkIGxvbmcgcmdmbiwKLSAgICAgICAgcDJt
X3R5cGVfdCAqcnQsIHAybV9hY2Nlc3NfdCAqcmEsIG1mbl90ICpybWZuLCBzdHJ1Y3QgZG9tYWlu
ICpsZCwgCisgICAgICAgIHAybV90eXBlX3QgKnJ0LCBwMm1fYWNjZXNzX3QgKnJhLCBtZm5fdCAq
cm1mbiwgc3RydWN0IGRvbWFpbiAqbGQsCiAgICAgICAgIHVuc2lnbmVkIGxvbmcgbGdmbiwgcDJt
X3R5cGVfdCAqbHQsIHAybV9hY2Nlc3NfdCAqbGEsIG1mbl90ICpsbWZuLAogICAgICAgICBwMm1f
cXVlcnlfdCBxLCBzdHJ1Y3QgdHdvX2dmbnMgKnJ2YWwpCiB7CkBAIC01NTYsOSArNTY5LDkgQEAg
ZG8geyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBc
CiAjdW5kZWYgYXNzaWduX3BvaW50ZXJzCiAKICAgICAvKiBOb3cgZG8gdGhlIGdldHMgKi8KLSAg
ICAqZmlyc3RfbWZuICA9IGdldF9nZm5fdHlwZV9hY2Nlc3MocDJtX2dldF9ob3N0cDJtKHJ2YWwt
PmZpcnN0X2RvbWFpbiksIAorICAgICpmaXJzdF9tZm4gID0gZ2V0X2dmbl90eXBlX2FjY2Vzcyhw
Mm1fZ2V0X2hvc3RwMm0ocnZhbC0+Zmlyc3RfZG9tYWluKSwKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgcnZhbC0+Zmlyc3RfZ2ZuLCBmaXJzdF90LCBmaXJzdF9hLCBxLCBO
VUxMKTsKLSAgICAqc2Vjb25kX21mbiA9IGdldF9nZm5fdHlwZV9hY2Nlc3MocDJtX2dldF9ob3N0
cDJtKHJ2YWwtPnNlY29uZF9kb21haW4pLCAKKyAgICAqc2Vjb25kX21mbiA9IGdldF9nZm5fdHlw
ZV9hY2Nlc3MocDJtX2dldF9ob3N0cDJtKHJ2YWwtPnNlY29uZF9kb21haW4pLAogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydmFsLT5zZWNvbmRfZ2ZuLCBzZWNvbmRfdCwg
c2Vjb25kX2EsIHEsIE5VTEwpOwogfQogCkBAIC01NzQsOSArNTg3LDcgQEAgc3RhdGljIGlubGlu
ZSB2b2lkIHB1dF90d29fZ2ZucyhzdHJ1Y3QgdHdvX2dmbnMgKmFyZykKIC8qIEluaXQgdGhlIGRh
dGFzdHJ1Y3R1cmVzIGZvciBsYXRlciB1c2UgYnkgdGhlIHAybSBjb2RlICovCiBpbnQgcDJtX2lu
aXQoc3RydWN0IGRvbWFpbiAqZCk7CiAKLS8qIEFsbG9jYXRlIGEgbmV3IHAybSB0YWJsZSBmb3Ig
YSBkb21haW4uIAotICoKLSAqIFJldHVybnMgMCBmb3Igc3VjY2VzcyBvciAtZXJybm8uICovCisv
KiBBbGxvY2F0ZSBhIG5ldyBwMm0gdGFibGUgZm9yIGEgZG9tYWluLiAgUmV0dXJucyAwIGZvciBz
dWNjZXNzIG9yIC1lcnJuby4gKi8KIGludCBwMm1fYWxsb2NfdGFibGUoc3RydWN0IHAybV9kb21h
aW4gKnAybSk7CiAKIC8qIFJldHVybiBhbGwgdGhlIHAybSByZXNvdXJjZXMgdG8gWGVuLiAqLwpA
QCAtNjEwLDExICs2MjEsMTEgQEAgdm9pZCBwMm1fZGlzYWJsZV9oYXJkd2FyZV9sb2dfZGlydHko
c3RydWN0IGRvbWFpbiAqZCk7CiB2b2lkIHAybV9mbHVzaF9oYXJkd2FyZV9jYWNoZWRfZGlydHko
c3RydWN0IGRvbWFpbiAqZCk7CiAKIC8qIENoYW5nZSB0eXBlcyBhY3Jvc3MgYWxsIHAybSBlbnRy
aWVzIGluIGEgZG9tYWluICovCi12b2lkIHAybV9jaGFuZ2VfZW50cnlfdHlwZV9nbG9iYWwoc3Ry
dWN0IGRvbWFpbiAqZCwgCit2b2lkIHAybV9jaGFuZ2VfZW50cnlfdHlwZV9nbG9iYWwoc3RydWN0
IGRvbWFpbiAqZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwMm1fdHlwZV90
IG90LCBwMm1fdHlwZV90IG50KTsKIAogLyogQ2hhbmdlIHR5cGVzIGFjcm9zcyBhIHJhbmdlIG9m
IHAybSBlbnRyaWVzIChzdGFydCAuLi4gZW5kLTEpICovCi12b2lkIHAybV9jaGFuZ2VfdHlwZV9y
YW5nZShzdHJ1Y3QgZG9tYWluICpkLCAKK3ZvaWQgcDJtX2NoYW5nZV90eXBlX3JhbmdlKHN0cnVj
dCBkb21haW4gKmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBsb25nIHN0
YXJ0LCB1bnNpZ25lZCBsb25nIGVuZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAybV90
eXBlX3Qgb3QsIHAybV90eXBlX3QgbnQpOwogCkBAIC02NTEsNyArNjYyLDcgQEAgaW50IGNsZWFy
X2lkZW50aXR5X3AybV9lbnRyeShzdHJ1Y3QgZG9tYWluICpkLCB1bnNpZ25lZCBsb25nIGdmbik7
CiBpbnQgcDJtX2FkZF9mb3JlaWduKHN0cnVjdCBkb21haW4gKnRkb20sIHVuc2lnbmVkIGxvbmcg
ZmdmbiwKICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgbG9uZyBncGZuLCBkb21pZF90IGZv
cmVpZ25fZG9taWQpOwogCi0vKiAKKy8qCiAgKiBQb3B1bGF0ZS1vbi1kZW1hbmQKICAqLwogCkBA
IC03MzIsNyArNzQzLDcgQEAgaW50IHAybV9tZW1fcGFnaW5nX25vbWluYXRlKHN0cnVjdCBkb21h
aW4gKmQsIHVuc2lnbmVkIGxvbmcgZ2ZuKTsKIC8qIEV2aWN0IGEgZnJhbWUgKi8KIGludCBwMm1f
bWVtX3BhZ2luZ19ldmljdChzdHJ1Y3QgZG9tYWluICpkLCB1bnNpZ25lZCBsb25nIGdmbik7CiAv
KiBUZWxsIHhlbnBhZ2luZyB0byBkcm9wIGEgcGFnZWQgb3V0IGZyYW1lICovCi12b2lkIHAybV9t
ZW1fcGFnaW5nX2Ryb3BfcGFnZShzdHJ1Y3QgZG9tYWluICpkLCB1bnNpZ25lZCBsb25nIGdmbiwg
Cit2b2lkIHAybV9tZW1fcGFnaW5nX2Ryb3BfcGFnZShzdHJ1Y3QgZG9tYWluICpkLCB1bnNpZ25l
ZCBsb25nIGdmbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcDJtX3R5cGVfdCBw
Mm10KTsKIC8qIFN0YXJ0IHBvcHVsYXRpbmcgYSBwYWdlZCBvdXQgZnJhbWUgKi8KIHZvaWQgcDJt
X21lbV9wYWdpbmdfcG9wdWxhdGUoc3RydWN0IGRvbWFpbiAqZCwgdW5zaWduZWQgbG9uZyBnZm4p
OwpAQCAtNzQxLDcgKzc1Miw3IEBAIGludCBwMm1fbWVtX3BhZ2luZ19wcmVwKHN0cnVjdCBkb21h
aW4gKmQsIHVuc2lnbmVkIGxvbmcgZ2ZuLCB1aW50NjRfdCBidWZmZXIpOwogLyogUmVzdW1lIG5v
cm1hbCBvcGVyYXRpb24gKGluIGNhc2UgYSBkb21haW4gd2FzIHBhdXNlZCkgKi8KIHZvaWQgcDJt
X21lbV9wYWdpbmdfcmVzdW1lKHN0cnVjdCBkb21haW4gKmQsIHZtX2V2ZW50X3Jlc3BvbnNlX3Qg
KnJzcCk7CiAKLS8qIAorLyoKICAqIEludGVybmFsIGZ1bmN0aW9ucywgb25seSBjYWxsZWQgYnkg
b3RoZXIgcDJtIGNvZGUKICAqLwogCkBAIC03OTYsNyArODA3LDcgQEAgc3RhdGljIGlubGluZSBw
Mm1fdHlwZV90IHAybV9mbGFnc190b190eXBlKHVuc2lnbmVkIGxvbmcgZmxhZ3MpCiB7CiAgICAg
LyogRm9yIEFNRCBJT01NVXMgd2UgbmVlZCB0byB1c2UgdHlwZSAwIGZvciBwbGFpbiBSQU0sIGJ1
dCB3ZSBuZWVkCiAgICAgICogdG8gbWFrZSBzdXJlIHRoYXQgYW4gZW50aXJlbHkgZW1wdHkgUFRF
IGRvZXNuJ3QgaGF2ZSBSQU0gdHlwZSAqLwotICAgIGlmICggZmxhZ3MgPT0gMCApIAorICAgIGlm
ICggZmxhZ3MgPT0gMCApCiAgICAgICAgIHJldHVybiBwMm1faW52YWxpZDsKICAgICAvKiBBTUQg
SU9NTVVzIHVzZSBiaXRzIDktMTEgdG8gZW5jb2RlIG5leHQgaW8gcGFnZSBsZXZlbCBhbmQgYml0
cwogICAgICAqIDU5LTYyIGZvciBpb21tdSBmbGFncyBzbyB3ZSBjYW4ndCB1c2UgdGhlbSB0byBz
dG9yZSBwMm0gdHlwZSBpbmZvLiAqLwpAQCAtODI4LDcgKzgzOSw3IEBAIHN0YXRpYyBpbmxpbmUg
cDJtX3R5cGVfdCBwMm1fcmVjYWxjX3R5cGUoYm9vbCByZWNhbGMsIHAybV90eXBlX3QgdCwKIGlu
dCBwMm1fcHRfaGFuZGxlX2RlZmVycmVkX2NoYW5nZXModWludDY0X3QgZ3BhKTsKIAogLyoKLSAq
IE5lc3RlZCBwMm06IHNoYWRvdyBwMm0gdGFibGVzIHVzZWQgZm9yIG5lc3RlZCBIVk0gdmlydHVh
bGl6YXRpb24gCisgKiBOZXN0ZWQgcDJtOiBzaGFkb3cgcDJtIHRhYmxlcyB1c2VkIGZvciBuZXN0
ZWQgSFZNIHZpcnR1YWxpemF0aW9uCiAgKi8KIAogLyogRmx1c2hlcyBzcGVjaWZpZWQgcDJtIHRh
YmxlICovCi0tIAoyLjEuNAoKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnByb2pl
Y3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94ZW4t
ZGV2ZWw=
