Return-Path: <linux-kernel-owner@vger.kernel.org>
Delivered-To: unknown
Received: from linux.intel.com (10.54.29.200:995) by likexu-workstation with
  POP3-SSL; 12 Dec 2018 08:55:02 -0000
X-Original-To: like.xu@linux.intel.com
Delivered-To: like.xu@linux.intel.com
Received: from orsmga003.jf.intel.com (orsmga003.jf.intel.com [10.7.209.27])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by linux.intel.com (Postfix) with ESMTPS id 5A0545807A0;
	Tue, 11 Dec 2018 11:13:03 -0800 (PST)
Received: from fmsmga104.fm.intel.com ([10.1.193.100])
  by orsmga003-1.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384; 11 Dec 2018 11:13:02 -0800
X-SG-BADATTACHMENTNOREPLY: True
IronPort-PHdr: =?us-ascii?q?9a23=3ATMTE3RE0zR2QFXlk95TcjZ1GYnF86YWxBRYc798d?=
 =?us-ascii?q?s5kLTJ75oc+4bnLW6fgltlLVR4KTs6sC17KG9fi4EUU7or+5+EgYd5JNUxJXwe?=
 =?us-ascii?q?43pCcHRPC/NEvgMfTxZDY7FskRHHVs/nW8LFQHUJ2mPw6arXK99yMdFQviPgRp?=
 =?us-ascii?q?OOv1BpTSj8Oq3Oyu5pHfeQpFiCa+bL9oMBm6sRjau9ULj4dlNqs/0AbCrGFSe+?=
 =?us-ascii?q?RRy2NoJFaTkAj568yt4pNt8Dletuw4+cJYXqr0Y6o3TbpDDDQ7KG81/9HktQPC?=
 =?us-ascii?q?TQSU+HQRVHgdnwdSDAjE6BH6WYrxsjf/u+Fg1iSWIdH6QLYpUjm58axlVAHnhz?=
 =?us-ascii?q?sGNz4h8WHYlMpwjL5AoBm8oxBz2pPYbJ2JOPZ7eK7WYNEUSndbXstJVyJPHJ6y?=
 =?us-ascii?q?b5cBAeQCPOZXs4bzqFQVrRumBwShH//vxSRSi3PqwaE2z+YsHAfb1wIgBdIOt3?=
 =?us-ascii?q?HUoc37OKkUT++1yrTHwi/fYPNV2Tbx8JXDfA4hofGLWLJ/a9HRxUcyHA7CkFuQ?=
 =?us-ascii?q?qYvlPzaP2eQWqWSV6fRvVeSyhGE9tw5xoTiuy9w2hYnMm40Z0EzL9SJ8wIssI9?=
 =?us-ascii?q?CzVUB1YdmhEJRKtiGaMZN7QsA8TGFyviY11LkGtYS8fCgQx5QqwQPUZf+fc4WQ?=
 =?us-ascii?q?/B7vSOKcLS1liH9rZr6znQu+/Eu8xuHmV8S50k5GojdEn9TMrHwByQDf58edRv?=
 =?us-ascii?q?Z//EqtwyuD2xjd6u5aIk04ia/WJps6zbEsipYcr0HOEy34mEj0gq+bc1sr9fap?=
 =?us-ascii?q?5unnZ7jpuIGQOJJ0hwz4L68ggNawAf4iPQgLR2Wb+fqz1Lnk/UDhXrVKgeM5kr?=
 =?us-ascii?q?PDvJDZO8sbvKi5DBFR0oo57Ba/FTim3MwZnXkBMl1FZAqKg5b1N1zKOvz0EPmy?=
 =?us-ascii?q?j0q2nDt2xP3KIqftD5TPI3TblbfuZ7d960pSyAopytBf4opZCrUAIPL1R0/wu8?=
 =?us-ascii?q?XUDhwnPAyuxeboFtF92poZWWOBBK+WLrnSvESW5uIgPeaMfpUZuDXjJPg/4f7h?=
 =?us-ascii?q?k3s5lUUafamz0psbcGq4Eeh+I0WFfXrshc8MEWMLvgo9UuPmklKDUSNIana2Xq?=
 =?us-ascii?q?I84Cw7CY28AYfCQICtnKKO3COhEpJKYWBGD0iGEW30eIWcR/cMdCWSL9dhkjMe?=
 =?us-ascii?q?VLihV5Uu1Ra0uA/61rpoNOzU+iIDuJLn1dh14fDTlB4o+Tx1CcSdz3+CT2Vukm?=
 =?us-ascii?q?wUQD822bh1oVZhxVebzah4n/tYGMRR5/NOTAg2L53cz+t8C9D0XQLMZdOJSFeg?=
 =?us-ascii?q?QtW7DjA9VNMxw9kSY0ljH9WulAzM3y2vA7UNjbyEGIQ08r7A33j2P8ty0W3G1K?=
 =?us-ascii?q?kmj1klWMdPL3ephqxk+gjXBo7JlViZlqmweaQd2i7N6HmMzW6UsE5EVw5wVL3P?=
 =?us-ascii?q?XWoDaUvOsdT5+kTCQqetCbs9NAtN08qCKqpQZd3vglVLX/PjONXYY2KslGa8Hx?=
 =?us-ascii?q?eIxrWQbIX0f2URxjnSCE8BkwoL53aJKRA+Bju9o2LZFDFhCEjgY13y/uVkqHO0?=
 =?us-ascii?q?VEk0zxqUYE1n0La1/h0VhfmYS/4I2rIEuSEhqyh7HVqn3tLWDcaAqBRlfKlGfd?=
 =?us-ascii?q?w951JH33rDtwNhJpygM7xihlkGfgtqpUzuyQt4Bp9AkccwqnMq1xR9KaSD3VNF?=
 =?us-ascii?q?djOY243wO7LNJmnz+hCvd7DZ2lXE3NmK/acP7ewyq0//swGxCkoi73Jn3sFJ03?=
 =?us-ascii?q?ud45XKCxYSUZLxU0ot6xh2vbbaYjM554PV031sPrK5sjvD29IvGeskxQysf9ZZ?=
 =?us-ascii?q?MKOYCgDyF9cWCNSpKOwvg1KpdA4LPPhO9K4oOMOrb+GJ2Kq1M+dvgj2njX5L75?=
 =?us-ascii?q?tg0k2R7SV8TO3I35Ebw/yD2guHVjH8jEqus8ztmIBEYy0SEXS7yST+GIFRYahy?=
 =?us-ascii?q?d54RCWiyO8232sl+h5n1Vn9Y6V6vHU8J1NWoeBqSdVP92wJQ2F8ToXymnyu40j?=
 =?us-ascii?q?N1nysorqqZwCzB3eDieAAbNW5MQWlolU3sLpSsj9AGQEioaBAklAGk5Unm3adb?=
 =?us-ascii?q?vrlwL27JTUdOYSf2NWBiXrKsubWYZ85A9Y0nsT9QUOS6el2aTr/9ox0H0yLsBW?=
 =?us-ascii?q?dexTY7dy20tZX9hRB1lGWdLHNrpnrDZc5w3Qvf5MDbRfNJ3jsGRTN0iDnNClin?=
 =?us-ascii?q?Itmp+86Zl5PCsuC4SmKgWYdfcSjtzYOcqiS74XdmDgG4n/C2gtfnCxQ10Tfn19?=
 =?us-ascii?q?l2UiXFtBT8bZPx16S5MuJneVNkBETm5Mp5GYF+k40wi48W2XUBgpWV/HwHkXr8?=
 =?us-ascii?q?MNlB2KL+amYNSiAPw9LP/Afl30hjJGqTx43lTnWd3tdhZ96ib2IWwC096NpGCK?=
 =?us-ascii?q?WV7LxChiZ1plu4rQTMYflyhDsdyP0u6GIEjOENogYi0iKdArUKF0lCISPsjwiI?=
 =?us-ascii?q?78y5rKhPZ2aga7mw2FB+ndC8Fr6CpA5cVW39epcjGy9w88p+PEjN0H319oHrZt?=
 =?us-ascii?q?3QYcgPuR2TlhfKl/JVJ44plvoWmSpnPnrwvXgky+44lxNix5+7s5acK2Vx4q25?=
 =?us-ascii?q?GAVXOSPvZ8Mc4TztiadensCL34GgBJlhGzMLXIf2QvKsCj4dqfPnNwOWGj0mtn?=
 =?us-ascii?q?ibAabfHROY6Ep+s3LPFJWrO2uWJXYDy9ViWQKdJFdegA0PWDU6n5g5Fh2lxcD7?=
 =?us-ascii?q?cUd54CwR6UD8qhdW1u1oMBz/WH/FpAi0cjc0VISfLB1O4w5Z/UjVNsie7v9pEy?=
 =?us-ascii?q?Fc452stwiNKm2dZwRVAmAFQE2EB1b/Praw4dnM6fSXBu27L/HWe7WBtfReV+uU?=
 =?us-ascii?q?xZKoyoZm/SyDNsCRMXl5FfE7xlBPXXNkG8TahjUPTTYYlznWYs6fpRe8/DB3r8?=
 =?us-ascii?q?+l/PTqXgLv+ZWAC79IPdpz/BC2hL+JN/SMiyZhNTZYypQMyGfIybgYwV4Skjxu?=
 =?us-ascii?q?eCOrEbgari7NS6TQmqBMAh4faiNzMtZI7q0m0glMP87bls361rpigvEpDFdFUE?=
 =?us-ascii?q?Trmtu1aswSP2G9KFTHCV6LNLuYJD3LwML3YaKmRb1TluVUsBKwtiiBE0/+JTSO?=
 =?us-ascii?q?jD3pVxGpMeFRgyCXJh1euIehchlzDWjvVs7pahq+MNVvlz053aU0hm/WNW4bKT?=
 =?us-ascii?q?VzaV5NoaaK7SxGgvRzAWhB7nt+IOmAmiaZ6fTYK5kMvftqBCR0i/xV4HAgx7RJ?=
 =?us-ascii?q?6yFEQeR/mDHOod52v1Gmju6PxyJ7UBpPrzZHnp6EsV9+NqXZ6JZAX23J/BYM7W?=
 =?us-ascii?q?WWFhQLqMFpCtzpu6BM1NfPkLj/JytF89LR5cEcHdTbKNqbMHo9NhrkAD7VAxED?=
 =?us-ascii?q?TT6uNGHfgVRSkfCS9nKPqJg6pYPhmJ4PSr9dSVw0GekWCkVjHNwePph3Wikonq?=
 =?us-ascii?q?KcjM4NtjKCq0ybVJUElpPKTPSfBbPoMjnTxe1UN0Ugwr7iK4kXcIrh1BomIhN+?=
 =?us-ascii?q?nYLXCw/TUMpLrylJcAA5ugNO/WJ4Q2l13FjqIEv55H4VCO7xnRMsjAZ6Sfoi+S?=
 =?us-ascii?q?2q4FotIFfO4iwqnx9it8/ihGXbVDP3IK67XpASQxb0sE04KdmzFzp1agi7hgpA?=
 =?us-ascii?q?OTHITrlSnpNpcGwtgwjZ78gcUcVARLFJNUdDjcqcYO8lhBEF8n2q?=
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A0AUAACNCxBch0O0hNFkHQEBBQEHBQGBU?=
 =?us-ascii?q?QgBCwGBMFBpcwQLJwqDcYNHA4RPi0dKgiGXPoEkA0wTARgDEAGEWYJVIjQJDQE?=
 =?us-ascii?q?DAQEBAQEBAgETAQEBCA0JCCkjDII2JAGCaQIgEQwBAR0aAQUJAgEBIgImAgICA?=
 =?us-ascii?q?S8VEgQBDQUFgxwBgWkDFQECApsCAooHcIEvgnYBAQWCPIJNGIIJCIELizCBWD6?=
 =?us-ascii?q?DdYgzgleLLZVQAwQCAocHij0jkT8BiSOPaQIEAgQFAg0BAQWBRoIOcIM8CYISD?=
 =?us-ascii?q?BeDSoUUhT9BMYEFAQEhiSMBgR4BAQ?=
X-IPAS-Result: =?us-ascii?q?A0AUAACNCxBch0O0hNFkHQEBBQEHBQGBUQgBCwGBMFBpcwQ?=
 =?us-ascii?q?LJwqDcYNHA4RPi0dKgiGXPoEkA0wTARgDEAGEWYJVIjQJDQEDAQEBAQEBAgETA?=
 =?us-ascii?q?QEBCA0JCCkjDII2JAGCaQIgEQwBAR0aAQUJAgEBIgImAgICAS8VEgQBDQUFgxw?=
 =?us-ascii?q?BgWkDFQECApsCAooHcIEvgnYBAQWCPIJNGIIJCIELizCBWD6DdYgzgleLLZVQA?=
 =?us-ascii?q?wQCAocHij0jkT8BiSOPaQIEAgQFAg0BAQWBRoIOcIM8CYISDBeDSoUUhT9BMYE?=
 =?us-ascii?q?FAQEhiSMBgR4BAQ?=
X-IronPort-AV: E=Sophos;i="5.56,343,1539673200"; 
   d="scan'208";a="54760051"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from vger.kernel.org ([209.132.180.67])
  by mtab.intel.com with ESMTP; 11 Dec 2018 11:13:01 -0800
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1726915AbeLKTM7 (ORCPT <rfc822;like.xu@linux.intel.com>
        + 23 others); Tue, 11 Dec 2018 14:12:59 -0500
Received: from mail-eopbgr770082.outbound.protection.outlook.com ([40.107.77.82]:40488
        "EHLO NAM02-SN1-obe.outbound.protection.outlook.com"
        rhost-flags-OK-OK-OK-FAIL) by vger.kernel.org with ESMTP
        id S1726350AbeLKTM6 (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
        Tue, 11 Dec 2018 14:12:58 -0500
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector1-amd-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=h3o2V1zwTtjggr1snHfzXO7Hq0lCjmNgAhqsAw12l1g=;
 b=QcLrEw1ZH3vXRjIKdwWgJpAFLA78sDCtK36wSmEFiZk3I2CuNqRGAds2cLzUyNKWSWeYHF9WfcCKPVdM6AdAdkMzV+Ww/uo+AN2Zp4jzEZvKrE4LwcYGx2xttgx+dOcaX4dlTZuJUUc530ENZBe8DxEKCnxuJTktqdVTiljzdY4=
Received: from SN1PR12MB0175.namprd12.prod.outlook.com (10.162.3.15) by
 SN1PR12MB2493.namprd12.prod.outlook.com (52.132.196.148) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.1404.17; Tue, 11 Dec 2018 19:10:02 +0000
Received: from SN1PR12MB0175.namprd12.prod.outlook.com
 ([fe80::bc0e:7f7f:ee65:e2d5]) by SN1PR12MB0175.namprd12.prod.outlook.com
 ([fe80::bc0e:7f7f:ee65:e2d5%6]) with mapi id 15.20.1425.016; Tue, 11 Dec 2018
 19:10:02 +0000
From: "Lendacky, Thomas" <Thomas.Lendacky@amd.com>
To: "x86@kernel.org" <x86@kernel.org>,
        "linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>
CC: Andrea Arcangeli <aarcange@redhat.com>,
        Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
        Jiri Kosina <jkosina@suse.cz>, Ingo Molnar <mingo@redhat.com>,
        Borislav Petkov <bp@alien8.de>,
        Thomas Gleixner <tglx@linutronix.de>,
        Tim Chen <tim.c.chen@linux.intel.com>,
        David Woodhouse <dwmw@amazon.co.uk>
Subject: [PATCH] x86/speculation: Add support for STIBP always-on preferred
 mode
Thread-Topic: [PATCH] x86/speculation: Add support for STIBP always-on
 preferred mode
Thread-Index: AQHUkYUdUUqHSw55jUaGOaWlduXUMQ==
Date: Tue, 11 Dec 2018 19:10:01 +0000
Message-ID: <20181211190959.28321.56433.stgit@tlendack-t1.amdoffice.net>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: SN6PR02CA0013.namprd02.prod.outlook.com
 (2603:10b6:805:a2::26) To SN1PR12MB0175.namprd12.prod.outlook.com
 (2a01:111:e400:5143::15)
authentication-results: spf=none (sender IP is )
 smtp.mailfrom=Thomas.Lendacky@amd.com; 
x-ms-exchange-messagesentrepresentingtype: 1
x-originating-ip: [165.204.77.1]
x-ms-publictraffictype: Email
x-microsoft-exchange-diagnostics: 1;SN1PR12MB2493;20:OGAanKPlLihGETJL+W4IUSWrcc+xzq6v9RBFxod/0Hkf8OLb2VEMYBekMm5LrJK6h/kzlpJxW9OZvs/WVrCO9+oSy2v7R0hqkhO+RQsH+3mFrnigEsBy4RyrP1rEqT8Kf0JxFkEw5Mog8XXPBF2PveNGU6YZXrR8aBefKulYwHAzWuDkZQFltnbh3m9mILT3B6LYusv5D+jMQi5jnAvzPo9CrpR+zZuXAcDaC8MmsMutZE+6SssedaicUCieHRCR
x-ms-office365-filtering-correlation-id: aca678f5-fc46-400d-993b-08d65f9c4026
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0;PCL:0;RULEID:(2390098)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600074)(711020)(4618075)(2017052603328)(7153060)(7193020);SRVR:SN1PR12MB2493;
x-ms-traffictypediagnostic: SN1PR12MB2493:
x-microsoft-antispam-prvs: <SN1PR12MB2493E6F509BF990FAAC403C6ECA60@SN1PR12MB2493.namprd12.prod.outlook.com>
x-ms-exchange-senderadcheck: 1
x-exchange-antispam-report-cfa-test: BCL:0;PCL:0;RULEID:(8211001083)(6040522)(2401047)(8121501046)(5005006)(823302103)(10201501046)(3231455)(999002)(944501520)(52105112)(93006095)(93001095)(3002001)(6055026)(148016)(149066)(150057)(6041310)(20161123560045)(20161123562045)(201703131423095)(201702281528075)(20161123555045)(201703061421075)(201703061406153)(20161123558120)(20161123564045)(201708071742011)(7699051)(76991095);SRVR:SN1PR12MB2493;BCL:0;PCL:0;RULEID:;SRVR:SN1PR12MB2493;
x-forefront-prvs: 08831F51DC
x-forefront-antispam-report: SFV:NSPM;SFS:(10009020)(979002)(39860400002)(376002)(136003)(366004)(346002)(396003)(199004)(189003)(14444005)(33896004)(6512007)(25786009)(81166006)(9686003)(1076002)(6436002)(2501003)(486006)(6116002)(97736004)(86362001)(103116003)(256004)(3846002)(8676002)(72206003)(97746001)(6486002)(71190400001)(71200400001)(105586002)(476003)(66066001)(316002)(4326008)(7736002)(99286004)(7416002)(305945005)(106356001)(5660300001)(52116002)(6506007)(386003)(186003)(8936002)(81156014)(68736007)(478600001)(14454004)(26005)(102836004)(53936002)(54906003)(110136005)(2906002)(969003)(989001)(999001)(1009001)(1019001);DIR:OUT;SFP:1101;SCL:1;SRVR:SN1PR12MB2493;H:SN1PR12MB0175.namprd12.prod.outlook.com;FPR:;SPF:None;LANG:en;PTR:InfoNoRecords;A:1;MX:1;
x-microsoft-antispam-message-info: W97CHR8hnHNKp8+WbVEzY5xHa7/M3OkGfE/uwB/d2CBC7IwzcyubZMluUECgd+F+/aWVWw2Cy4Qtmy73UXDoGMryjiX3JJaa4mUXPhqK+ywb51zR2eSrpsORCfyAeWcRlKCz4tT951ZqFLhbC+OziYibQ0RAFwcN5PbfusDHSzjhAYtjvkqkBH13iJQQVUhhWLVUtCug6WvqJZfEa0fC7dODOmCqfsXpBiasYWgt7e9xJA9D6tNe2CanMKYA7T2VA0xhttsahCCTu6VnU+s3tPAami0lIZXqIMe3tjp+URT7wYk0czxi4l1s8spe2rlF
spamdiagnosticoutput: 1:99
spamdiagnosticmetadata: NSPM
Content-Type: text/plain; charset="utf-8"
Content-ID: <76C469B3873ADF4FAD156D62411141AC@namprd12.prod.outlook.com>
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: aca678f5-fc46-400d-993b-08d65f9c4026
X-MS-Exchange-CrossTenant-originalarrivaltime: 11 Dec 2018 19:10:01.8794
 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-Transport-CrossTenantHeadersStamped: SN1PR12MB2493
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

RGlmZmVyZW50IEFNRCBwcm9jZXNzb3JzIG1heSBoYXZlIGRpZmZlcmVudCBpbXBsZW1lbnRhdGlv
bnMgb2YgU1RJQlAuDQpXaGVuIFNUSUJQIGlzIGNvbmRpdGlvbmFsbHkgZW5hYmxlZCwgc29tZSBp
bXBsZW1lbnRhdGlvbnMgd291bGQgYmVuZWZpdA0KZnJvbSBoYXZpbmcgU1RJQlAgYWx3YXlzIG9u
IGluc3RlYWQgb2YgdG9nZ2xpbmcgdGhlIFNUSUJQIGJpdCB0aHJvdWdoIE1TUg0Kd3JpdGVzLiBU
aGlzIHByZWZlcmVuY2UgaXMgYWR2ZXJ0aXNlZCB0aHJvdWdoIGEgQ1BVSUQgZmVhdHVyZSBiaXQu
DQoNCldoZW4gY29uZGl0aW9uYWwgU1RJQlAgc3VwcG9ydCBpcyByZXF1ZXN0ZWQgYXQgYm9vdCBh
bmQgdGhlIENQVSBhZHZlcnRpc2VzDQpTVElCUCBhbHdheXMtb24gbW9kZSBhcyBwcmVmZXJyZWQs
IHN3aXRjaCB0byBTVElCUCAib24iIHN1cHBvcnQuIFRvIHNob3cNCnRoYXQgdGhpcyB0cmFuc2l0
aW9uIGhhcyBvY2N1cnJlZCwgY3JlYXRlIGEgbmV3IHNwZWN0cmVfdjJfdXNlcl9taXRpZ2F0aW9u
DQp2YWx1ZSBhbmQgYSBuZXcgc3BlY3RyZV92Ml91c2VyX3N0cmluZ3MgbWVzc2FnZS4gVGhlIG5l
dyBtaXRpZ2F0aW9uIHZhbHVlDQppcyB1c2VkIGluIHNwZWN0cmVfdjJfdXNlcl9zZWxlY3RfbWl0
aWdhdGlvbigpIHRvIHByaW50IHRoZSBuZXcgbWl0aWdhdGlvbg0KbWVzc2FnZSBhcyB3ZWxsIGFz
IHRvIHJldHVybiBhIG5ldyBzdHJpbmcgZnJvbSBzdGlicF9zdGF0ZSgpLg0KDQpTaWduZWQtb2Zm
LWJ5OiBUb20gTGVuZGFja3kgPHRob21hcy5sZW5kYWNreUBhbWQuY29tPg0KLS0tDQoNClRoaXMg
cGF0Y2ggaXMgYWdhaW5zdCB0aGUgeDg2L3B0aSBicmFuY2ggb2YgdGhlIHRpcCB0cmVlOg0KICBn
aXQ6Ly9naXQua2VybmVsLm9yZy9wdWIvc2NtL2xpbnV4L2tlcm5lbC9naXQvdGlwL3RpcC5naXQg
eDg2L3B0aQ0KDQogYXJjaC94ODYvaW5jbHVkZS9hc20vY3B1ZmVhdHVyZXMuaCAgIHwgICAgMSAr
DQogYXJjaC94ODYvaW5jbHVkZS9hc20vbm9zcGVjLWJyYW5jaC5oIHwgICAgMSArDQogYXJjaC94
ODYva2VybmVsL2NwdS9idWdzLmMgICAgICAgICAgIHwgICAyOCArKysrKysrKysrKysrKysrKysr
KysrLS0tLS0tDQogMyBmaWxlcyBjaGFuZ2VkLCAyNCBpbnNlcnRpb25zKCspLCA2IGRlbGV0aW9u
cygtKQ0KDQpkaWZmIC0tZ2l0IGEvYXJjaC94ODYvaW5jbHVkZS9hc20vY3B1ZmVhdHVyZXMuaCBi
L2FyY2gveDg2L2luY2x1ZGUvYXNtL2NwdWZlYXR1cmVzLmgNCmluZGV4IDI4YzRhNTAuLmRmOGU5
NGUyIDEwMDY0NA0KLS0tIGEvYXJjaC94ODYvaW5jbHVkZS9hc20vY3B1ZmVhdHVyZXMuaA0KKysr
IGIvYXJjaC94ODYvaW5jbHVkZS9hc20vY3B1ZmVhdHVyZXMuaA0KQEAgLTI4NCw2ICsyODQsNyBA
QA0KICNkZWZpbmUgWDg2X0ZFQVRVUkVfQU1EX0lCUEIJCSgxMyozMisxMikgLyogIiIgSW5kaXJl
Y3QgQnJhbmNoIFByZWRpY3Rpb24gQmFycmllciAqLw0KICNkZWZpbmUgWDg2X0ZFQVRVUkVfQU1E
X0lCUlMJCSgxMyozMisxNCkgLyogIiIgSW5kaXJlY3QgQnJhbmNoIFJlc3RyaWN0ZWQgU3BlY3Vs
YXRpb24gKi8NCiAjZGVmaW5lIFg4Nl9GRUFUVVJFX0FNRF9TVElCUAkJKDEzKjMyKzE1KSAvKiAi
IiBTaW5nbGUgVGhyZWFkIEluZGlyZWN0IEJyYW5jaCBQcmVkaWN0b3JzICovDQorI2RlZmluZSBY
ODZfRkVBVFVSRV9BTURfU1RJQlBfQUxXQVlTX09OCSgxMyozMisxNykgLyogIiIgU2luZ2xlIFRo
cmVhZCBJbmRpcmVjdCBCcmFuY2ggUHJlZGljdG9ycyBhbHdheXMtb24gcHJlZmVycmVkICovDQog
I2RlZmluZSBYODZfRkVBVFVSRV9BTURfU1NCRAkJKDEzKjMyKzI0KSAvKiAiIiBTcGVjdWxhdGl2
ZSBTdG9yZSBCeXBhc3MgRGlzYWJsZSAqLw0KICNkZWZpbmUgWDg2X0ZFQVRVUkVfVklSVF9TU0JE
CQkoMTMqMzIrMjUpIC8qIFZpcnR1YWxpemVkIFNwZWN1bGF0aXZlIFN0b3JlIEJ5cGFzcyBEaXNh
YmxlICovDQogI2RlZmluZSBYODZfRkVBVFVSRV9BTURfU1NCX05PCQkoMTMqMzIrMjYpIC8qICIi
IFNwZWN1bGF0aXZlIFN0b3JlIEJ5cGFzcyBpcyBmaXhlZCBpbiBoYXJkd2FyZS4gKi8NCmRpZmYg
LS1naXQgYS9hcmNoL3g4Ni9pbmNsdWRlL2FzbS9ub3NwZWMtYnJhbmNoLmggYi9hcmNoL3g4Ni9p
bmNsdWRlL2FzbS9ub3NwZWMtYnJhbmNoLmgNCmluZGV4IDAzMmI2MDAuLmRhZDEyYjcgMTAwNjQ0
DQotLS0gYS9hcmNoL3g4Ni9pbmNsdWRlL2FzbS9ub3NwZWMtYnJhbmNoLmgNCisrKyBiL2FyY2gv
eDg2L2luY2x1ZGUvYXNtL25vc3BlYy1icmFuY2guaA0KQEAgLTIzMiw2ICsyMzIsNyBAQCBlbnVt
IHNwZWN0cmVfdjJfbWl0aWdhdGlvbiB7DQogZW51bSBzcGVjdHJlX3YyX3VzZXJfbWl0aWdhdGlv
biB7DQogCVNQRUNUUkVfVjJfVVNFUl9OT05FLA0KIAlTUEVDVFJFX1YyX1VTRVJfU1RSSUNULA0K
KwlTUEVDVFJFX1YyX1VTRVJfU1RSSUNUX1BSRUZFUlJFRCwNCiAJU1BFQ1RSRV9WMl9VU0VSX1BS
Q1RMLA0KIAlTUEVDVFJFX1YyX1VTRVJfU0VDQ09NUCwNCiB9Ow0KZGlmZiAtLWdpdCBhL2FyY2gv
eDg2L2tlcm5lbC9jcHUvYnVncy5jIGIvYXJjaC94ODYva2VybmVsL2NwdS9idWdzLmMNCmluZGV4
IDU4Njg5YWMuLmU1M2NlZmEgMTAwNjQ0DQotLS0gYS9hcmNoL3g4Ni9rZXJuZWwvY3B1L2J1Z3Mu
Yw0KKysrIGIvYXJjaC94ODYva2VybmVsL2NwdS9idWdzLmMNCkBAIC0yNjIsMTAgKzI2MiwxMSBA
QCBlbnVtIHNwZWN0cmVfdjJfdXNlcl9jbWQgew0KIH07DQogDQogc3RhdGljIGNvbnN0IGNoYXIg
KiBjb25zdCBzcGVjdHJlX3YyX3VzZXJfc3RyaW5nc1tdID0gew0KLQlbU1BFQ1RSRV9WMl9VU0VS
X05PTkVdCQk9ICJVc2VyIHNwYWNlOiBWdWxuZXJhYmxlIiwNCi0JW1NQRUNUUkVfVjJfVVNFUl9T
VFJJQ1RdCT0gIlVzZXIgc3BhY2U6IE1pdGlnYXRpb246IFNUSUJQIHByb3RlY3Rpb24iLA0KLQlb
U1BFQ1RSRV9WMl9VU0VSX1BSQ1RMXQkJPSAiVXNlciBzcGFjZTogTWl0aWdhdGlvbjogU1RJQlAg
dmlhIHByY3RsIiwNCi0JW1NQRUNUUkVfVjJfVVNFUl9TRUNDT01QXQk9ICJVc2VyIHNwYWNlOiBN
aXRpZ2F0aW9uOiBTVElCUCB2aWEgc2VjY29tcCBhbmQgcHJjdGwiLA0KKwlbU1BFQ1RSRV9WMl9V
U0VSX05PTkVdCQkJPSAiVXNlciBzcGFjZTogVnVsbmVyYWJsZSIsDQorCVtTUEVDVFJFX1YyX1VT
RVJfU1RSSUNUXQkJPSAiVXNlciBzcGFjZTogTWl0aWdhdGlvbjogU1RJQlAgcHJvdGVjdGlvbiIs
DQorCVtTUEVDVFJFX1YyX1VTRVJfU1RSSUNUX1BSRUZFUlJFRF0JPSAiVXNlciBzcGFjZTogTWl0
aWdhdGlvbjogU1RJQlAgYWx3YXlzLW9uIHByZWZlcnJlZCBwcm90ZWN0aW9uIiwNCisJW1NQRUNU
UkVfVjJfVVNFUl9QUkNUTF0JCQk9ICJVc2VyIHNwYWNlOiBNaXRpZ2F0aW9uOiBTVElCUCB2aWEg
cHJjdGwiLA0KKwlbU1BFQ1RSRV9WMl9VU0VSX1NFQ0NPTVBdCQk9ICJVc2VyIHNwYWNlOiBNaXRp
Z2F0aW9uOiBTVElCUCB2aWEgc2VjY29tcCBhbmQgcHJjdGwiLA0KIH07DQogDQogc3RhdGljIGNv
bnN0IHN0cnVjdCB7DQpAQCAtMzU1LDYgKzM1NiwxNSBAQCBzdGF0aWMgdm9pZCBfX2luaXQgc3Bl
Y192Ml91c2VyX3ByaW50X2NvbmQoY29uc3QgY2hhciAqcmVhc29uLCBib29sIHNlY3VyZSkNCiAJ
CWJyZWFrOw0KIAl9DQogDQorCS8qDQorCSAqIEF0IHRoaXMgcG9pbnQsIGFuIFNUSUJQIG1vZGUg
b3RoZXIgdGhhbiAib2ZmIiBoYXMgYmVlbiBzZXQuDQorCSAqIElmIFNUSUJQIHN1cHBvcnQgaXMg
bm90IGJlaW5nIGZvcmNlZCwgY2hlY2sgaWYgU1RJQlAgYWx3YXlzLW9uDQorCSAqIGlzIHByZWZl
cnJlZC4NCisJICovDQorCWlmIChtb2RlICE9IFNQRUNUUkVfVjJfVVNFUl9TVFJJQ1QgJiYNCisJ
ICAgIGJvb3RfY3B1X2hhcyhYODZfRkVBVFVSRV9BTURfU1RJQlBfQUxXQVlTX09OKSkNCisJCW1v
ZGUgPSBTUEVDVFJFX1YyX1VTRVJfU1RSSUNUX1BSRUZFUlJFRDsNCisNCiAJLyogSW5pdGlhbGl6
ZSBJbmRpcmVjdCBCcmFuY2ggUHJlZGljdGlvbiBCYXJyaWVyICovDQogCWlmIChib290X2NwdV9o
YXMoWDg2X0ZFQVRVUkVfSUJQQikpIHsNCiAJCXNldHVwX2ZvcmNlX2NwdV9jYXAoWDg2X0ZFQVRV
UkVfVVNFX0lCUEIpOw0KQEAgLTYxMCw2ICs2MjAsNyBAQCB2b2lkIGFyY2hfc210X3VwZGF0ZSh2
b2lkKQ0KIAljYXNlIFNQRUNUUkVfVjJfVVNFUl9OT05FOg0KIAkJYnJlYWs7DQogCWNhc2UgU1BF
Q1RSRV9WMl9VU0VSX1NUUklDVDoNCisJY2FzZSBTUEVDVFJFX1YyX1VTRVJfU1RSSUNUX1BSRUZF
UlJFRDoNCiAJCXVwZGF0ZV9zdGlicF9zdHJpY3QoKTsNCiAJCWJyZWFrOw0KIAljYXNlIFNQRUNU
UkVfVjJfVVNFUl9QUkNUTDoNCkBAIC04MTIsNyArODIzLDggQEAgc3RhdGljIGludCBpYl9wcmN0
bF9zZXQoc3RydWN0IHRhc2tfc3RydWN0ICp0YXNrLCB1bnNpZ25lZCBsb25nIGN0cmwpDQogCQkg
KiBJbmRpcmVjdCBicmFuY2ggc3BlY3VsYXRpb24gaXMgYWx3YXlzIGRpc2FibGVkIGluIHN0cmlj
dA0KIAkJICogbW9kZS4NCiAJCSAqLw0KLQkJaWYgKHNwZWN0cmVfdjJfdXNlciA9PSBTUEVDVFJF
X1YyX1VTRVJfU1RSSUNUKQ0KKwkJaWYgKHNwZWN0cmVfdjJfdXNlciA9PSBTUEVDVFJFX1YyX1VT
RVJfU1RSSUNUIHx8DQorCQkgICAgc3BlY3RyZV92Ml91c2VyID09IFNQRUNUUkVfVjJfVVNFUl9T
VFJJQ1RfUFJFRkVSUkVEKQ0KIAkJCXJldHVybiAtRVBFUk07DQogCQl0YXNrX2NsZWFyX3NwZWNf
aWJfZGlzYWJsZSh0YXNrKTsNCiAJCXRhc2tfdXBkYXRlX3NwZWNfdGlmKHRhc2spOw0KQEAgLTgy
NSw3ICs4MzcsOCBAQCBzdGF0aWMgaW50IGliX3ByY3RsX3NldChzdHJ1Y3QgdGFza19zdHJ1Y3Qg
KnRhc2ssIHVuc2lnbmVkIGxvbmcgY3RybCkNCiAJCSAqLw0KIAkJaWYgKHNwZWN0cmVfdjJfdXNl
ciA9PSBTUEVDVFJFX1YyX1VTRVJfTk9ORSkNCiAJCQlyZXR1cm4gLUVQRVJNOw0KLQkJaWYgKHNw
ZWN0cmVfdjJfdXNlciA9PSBTUEVDVFJFX1YyX1VTRVJfU1RSSUNUKQ0KKwkJaWYgKHNwZWN0cmVf
djJfdXNlciA9PSBTUEVDVFJFX1YyX1VTRVJfU1RSSUNUIHx8DQorCQkgICAgc3BlY3RyZV92Ml91
c2VyID09IFNQRUNUUkVfVjJfVVNFUl9TVFJJQ1RfUFJFRkVSUkVEKQ0KIAkJCXJldHVybiAwOw0K
IAkJdGFza19zZXRfc3BlY19pYl9kaXNhYmxlKHRhc2spOw0KIAkJaWYgKGN0cmwgPT0gUFJfU1BF
Q19GT1JDRV9ESVNBQkxFKQ0KQEAgLTg5Niw2ICs5MDksNyBAQCBzdGF0aWMgaW50IGliX3ByY3Rs
X2dldChzdHJ1Y3QgdGFza19zdHJ1Y3QgKnRhc2spDQogCQkJcmV0dXJuIFBSX1NQRUNfUFJDVEwg
fCBQUl9TUEVDX0RJU0FCTEU7DQogCQlyZXR1cm4gUFJfU1BFQ19QUkNUTCB8IFBSX1NQRUNfRU5B
QkxFOw0KIAljYXNlIFNQRUNUUkVfVjJfVVNFUl9TVFJJQ1Q6DQorCWNhc2UgU1BFQ1RSRV9WMl9V
U0VSX1NUUklDVF9QUkVGRVJSRUQ6DQogCQlyZXR1cm4gUFJfU1BFQ19ESVNBQkxFOw0KIAlkZWZh
dWx0Og0KIAkJcmV0dXJuIFBSX1NQRUNfTk9UX0FGRkVDVEVEOw0KQEAgLTEwODksNiArMTEwMyw4
IEBAIHN0YXRpYyBjaGFyICpzdGlicF9zdGF0ZSh2b2lkKQ0KIAkJcmV0dXJuICIsIFNUSUJQOiBk
aXNhYmxlZCI7DQogCWNhc2UgU1BFQ1RSRV9WMl9VU0VSX1NUUklDVDoNCiAJCXJldHVybiAiLCBT
VElCUDogZm9yY2VkIjsNCisJY2FzZSBTUEVDVFJFX1YyX1VTRVJfU1RSSUNUX1BSRUZFUlJFRDoN
CisJCXJldHVybiAiLCBTVElCUDogYWx3YXlzLW9uIHByZWZlcnJlZCI7DQogCWNhc2UgU1BFQ1RS
RV9WMl9VU0VSX1BSQ1RMOg0KIAljYXNlIFNQRUNUUkVfVjJfVVNFUl9TRUNDT01QOg0KIAkJaWYg
KHN0YXRpY19rZXlfZW5hYmxlZCgmc3dpdGNoX3RvX2NvbmRfc3RpYnApKQ0KDQo=
