Return-Path: <linux-kernel-owner@vger.kernel.org>
Delivered-To: unknown
Received: from linux.intel.com (10.54.29.200:995) by i7-8700 with POP3-SSL;
  14 Dec 2018 08:43:18 -0000
X-Original-To: like.xu@linux.intel.com
Delivered-To: like.xu@linux.intel.com
Received: from fmsmga008.fm.intel.com (fmsmga008.fm.intel.com [10.253.24.58])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by linux.intel.com (Postfix) with ESMTPS id CD5DC58079D;
	Thu, 13 Dec 2018 15:04:09 -0800 (PST)
Received: from fmsmga102.fm.intel.com ([10.1.193.69])
  by fmsmga008-1.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384; 13 Dec 2018 15:04:09 -0800
X-SG-BADATTACHMENTNOREPLY: True
IronPort-PHdr: =?us-ascii?q?9a23=3AYAt2XhyeJipY+1rXCy+O+j09IxM/srCxBDY+r6Qd?=
 =?us-ascii?q?0ewVKPad9pjvdHbS+e9qxAeQG9mDu7Qc06L/iOPJYSQ4+5GPsXQPItRndiQuro?=
 =?us-ascii?q?EopTEmG9OPEkbhLfTnPGQQFcVGU0J5rTngaRAGUMnxaEfPrXKs8DUcBgvwNRZv?=
 =?us-ascii?q?JuTyB4Xek9m72/q99pHPYAhEniaxba9vJxiqsAvdsdUbj5F/Iagr0BvJpXVIe+?=
 =?us-ascii?q?VSxWx2IF+Yggjx6MSt8pN96ipco/0u+dJOXqX8ZKQ4UKdXDC86PGAv5c3krgfM?=
 =?us-ascii?q?QA2S7XYBSGoWkx5IAw/Y7BHmW5r6ryX3uvZh1CScIMb7Vq4/Vyi84Kh3SR/okC?=
 =?us-ascii?q?YHOCA/8GHLkcx7kaZXrAu8qxBj34LYZYeYP+d8cKzAZ9MXXWpPUNhMWSxdDI2y?=
 =?us-ascii?q?bIoPAPYOM+lXtIn9v1kDoACiBQa3Hu7j1iNEimP00KA8zu8vERvG3AslH98Wvn?=
 =?us-ascii?q?jaqsv6NKEPXu+v0KbIzjXCY+tL0jnj6IjIdRUhruuXXb5+bMHczlchFwPCjlWV?=
 =?us-ascii?q?s4PlJCmZ2OITvGid8uVvT/6gi20nqgxquDevw9ojhpPViYISz1DJ7CN0y5s7K9?=
 =?us-ascii?q?2/TU50e9+kEJ1IuiGZKYR2WMUiTH9suCogzb0Go5G7cS4Xw5ok3x7Sc+KLf5SM?=
 =?us-ascii?q?7x75SeqcLyl0iGh4dL+8mxq+60mtx+/kWsWp0VtHrjBJnsfQun0CzRDe6MqKRu?=
 =?us-ascii?q?Fg8ku51zaAyQPe5v1BLE0xjqXUN4ItzaA1m5cRv0TOHCH2lUDog6CId0gp+u2l?=
 =?us-ascii?q?5Pr5brr7ppKRMZJ/hBvkPaQ0gMO/BPw1MggQUGif/uSxzKPj/ULnT7VQlPE2kb?=
 =?us-ascii?q?fWsIrcJcsFoq61GQhV0pws6xqnDjem1soXnWUfIV5bZB6Ki5LlN0zALfzmF/uz?=
 =?us-ascii?q?nlehnCtxy/3HPLDtGpDNIWLCkLflc7Z98UlcyA8rwNBb5pJUDKwBIf3qVk/yqt?=
 =?us-ascii?q?PYFBk5PBKww+r+D9V82IUeVnyVAqKCLqPSvkGH5vg1L+mPeoAVojD9JOYh5/L0?=
 =?us-ascii?q?in85g1AdcbGz3ZQLcHC4AuhmI0KBbHrog9cBEnkFshAxTez3k1CCVT9TZ3CvX6?=
 =?us-ascii?q?Mz/D07CYSmDZvdSYCpmrCOwCC7HphObGBcFl+MCWvod5mDW/oUaCKdOM5hkiAe?=
 =?us-ascii?q?WrimUYMh1QyuuxX8y7poNefU/iwYtZT+1Nl6/eHTlBcy9SBqAMSZyW2CU2Z0nm?=
 =?us-ascii?q?YQTT8swK9/uVB9ykuE0aVggfxYEsJc6+lKUgc9M57cyet6Bsv2WgLAeNeJVVmn?=
 =?us-ascii?q?Ts+nATE3UtI+3dsOb1xhFNWlixDJxzCqDKMNl7yXGJw09brR0GLqJ8Z9zHbG17?=
 =?us-ascii?q?Mtj0M8TctNLmCmgq9/9w7OB4/GiUmZlqCqdbgC0y7J7muM0W2OvERAWg5qTarF?=
 =?us-ascii?q?RWwfZlfRrdnh5UPNVbmuBa4jMgtA08GCLKRKZ8btjVVHQvfjJdvfb3iwm2e2GR?=
 =?us-ascii?q?aH2LeMYJD2dGUa2SXXEFIEnBwL/XaaKQg+AT+srH/EAzxwC13jeUPs/vN4qHOg?=
 =?us-ascii?q?UEA0yQaGb0li17qw/h4YnvicS/IV3rIZtyYtsTR0HFCh393ID9qMvRZufKJZYd?=
 =?us-ascii?q?kl+ldIyXrZtxBhPpynN61tm0QRcxppsE/01xV4EINAkdM0o3Ms1wdyLaOY0FVc?=
 =?us-ascii?q?dzKXx5zwO7vXKnXs8xCrcaLZxlbe0NOO8KcV9Ps4s0njvB2uFkc673Vn0txV03?=
 =?us-ascii?q?yA5pXKDAseS47xXlww9xhgo7HaYy8954zP2H1oMKm0tCLC2t0zCOskzBagY8lQ?=
 =?us-ascii?q?MKeeGADuFM0aAtCkKPY2lFixchIEIOdS+bYuMMOiafSH17CkPeZ6kD29kGRI/Z?=
 =?us-ascii?q?py0kSP9yp7VO7FxJIFw/Ce3guaWDbwllahssbrmY9aYTEeBHawyS/hBIRJfK19?=
 =?us-ascii?q?YZ4LCXuyI82w3th/h4PtV2RE+1K5BlIG2NWmeRydb1Hm2Q1Q1EIXoWGomCeizj?=
 =?us-ascii?q?x0lS0pobSb3CDU3+vicx8HMHZRRGZ+lVfsPZS0j9cCUUiybggmiAGq5VznyKhc?=
 =?us-ascii?q?vqh/KXfcQV1JfyTvM25tSK+wuaecbM5V75Motz5aUOC9YVCcV778rAEW0yLlH2?=
 =?us-ascii?q?tC2j87cyumtYn+nxx/kGidNmp8rGLFecFswhfS/NzdRf9L0jsGXiV4kiTXBl6n?=
 =?us-ascii?q?Mtmt/NWUkYrDs++kW2KgUJ1TbTfkzYeauCSn4m1qBAW1n+qvld3/DQg6zSj72s?=
 =?us-ascii?q?FoVSrSthb8YYrr16OgPeJ8ZEZoB1z868t8Go5glIs9n5UQ2XkchpWI8nsLi2bz?=
 =?us-ascii?q?MdNH2a3gaHoBXyIEw9nQ4AL9wk1sMmqJx57lVnWa2sZgZ8O1YmQM1iI/7sBKDr?=
 =?us-ascii?q?yZ7LhFnStzv1q5ohjdYfl7njcB1/Qu7GQWjP0OuAoo1i+dGKwdHVFEPSzwkBSF?=
 =?us-ascii?q?99O+o79WZGq1cbiwyVBxndauDLyZpgFcWXD5eootHCNq78V/Nk7M32P36o3+ZN?=
 =?us-ascii?q?bQatcTvAWOkxjcl+hVNI4xlv0SiCpiOGL9vmcqx/Q1jBNwxpG6oJaIK392862n?=
 =?us-ascii?q?GB5YOSb4Z8cS+jHrkKZfkdya34GpHpV9BDoLWIHkQu6vEDIXrf7nLRqBECUgqn?=
 =?us-ascii?q?eHHrrSBROf6EBjr37VEpGkLXeXJGQCzdV5RRmQP0hfgAESXDUnkZ81DAGqxMr9?=
 =?us-ascii?q?cEhn4jAd/EL3qhxJyuhwLRnwTn/fpBu0ajczUJWQNwBZ7gZG50fIK8Ce6v9zEj?=
 =?us-ascii?q?pc/p2gqgyNN2Oaax5JDWEPRkyLGVTjMqOy6tnH9uiSHvC+IOfWYbWStexeUO+F?=
 =?us-ascii?q?xZC13Ytj4TmMLd+DPmV4A/04x0pDXm15G8LDlDUUUCEXkyPNb8iGpBaz4CF3r8?=
 =?us-ascii?q?a/8Oj1VwLr/4eAF7xSMdB38RCsnaiDL/KQhDp+KTtA1pIMwmLIyKEC3FEIjSFi?=
 =?us-ascii?q?bSKtEbMGtS7CV6/Qnq5XDxgGayJ8LsdI7qQ83hVTNs7fkN/6yrl4jvstAVdfSV?=
 =?us-ascii?q?Phgt2pZdANI2ylNFPIGkeLNLeFJT3K2c33Yrm8SbpfjOpKrR2wpC2bHlTnPjSC?=
 =?us-ascii?q?kTnpSh+uPftNjCGdIBxRpoW9fgxxBmjkSdLscge7P8NvjT0q3b00gWvHOnQBMT?=
 =?us-ascii?q?dnaUNCsL2R4TlcgvV+AGFB6ntlLe+ZmyeW9eXYK5AWsed1DSRwje5V/HM6y75N?=
 =?us-ascii?q?5iFeWPN1gDfSrsJpo1y+jumPyz9nXABSpTpRmI2LvVttOaPC+5lEWHbE+g8N7G?=
 =?us-ascii?q?qKBxQLodtlFsPgu6RKxtfTk6LzLS9I88jI8ssEG8jUNMWHPWIhMBXzHj7UCQoF?=
 =?us-ascii?q?TTizOmDeh0xSiveS9nKOo5g+q5jsnocOS7BBWFw0EPMaFlpqHNgYLJhrWTMklO?=
 =?us-ascii?q?3TsMldr2ru8jHSSd9cs5SBUeidS727OGbHpbpJfR0FxfX/N4tFcsWx301kd0k/?=
 =?us-ascii?q?n4nQHUfUdc5CrzcnbQIupkhJtn9kQSd7j0bkbB69pXweD/i5mjYohQZkJ+cg7j?=
 =?us-ascii?q?Hh5xEwPFWc9wUql0xk0/HohzyYez3gaO+MXYZTAjG+/xwNMpT+Sh0zSQC0kUVv?=
 =?us-ascii?q?NybsTrddybBncDY420fnpZJTFKsEHuV/axgKyKTSPq1w3A=3D=3D?=
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A0ApAACQ5BJch0O0hNFjHgEGBwaBUggLA?=
 =?us-ascii?q?YEwUGlzBAsnCoNyg0cDkBZKgiGDMZQPFIEQBUoTARgDEAGEWYJsIjUIDQEDAQE?=
 =?us-ascii?q?BAQEBAgETAQEBCA0JCCkjDII2JAGCaQIgEQwBAR0aAQUJAgEBIgImAgICAS8VE?=
 =?us-ascii?q?gQBDQUFgxwBgWgDFQECAp0oAooHcIEvgnYBAQWCPIJIGIIJCIELizGBWD6DdYU?=
 =?us-ascii?q?XgxyCV4s0lV0DBAIChwuKQSORSokuj3QCBAIEBQINAQEFgUgBggtwgzwJghIMF?=
 =?us-ascii?q?4NKhRSFP0ExgQUBASGKfwGBHgEB?=
X-IPAS-Result: =?us-ascii?q?A0ApAACQ5BJch0O0hNFjHgEGBwaBUggLAYEwUGlzBAsnCoN?=
 =?us-ascii?q?yg0cDkBZKgiGDMZQPFIEQBUoTARgDEAGEWYJsIjUIDQEDAQEBAQEBAgETAQEBC?=
 =?us-ascii?q?A0JCCkjDII2JAGCaQIgEQwBAR0aAQUJAgEBIgImAgICAS8VEgQBDQUFgxwBgWg?=
 =?us-ascii?q?DFQECAp0oAooHcIEvgnYBAQWCPIJIGIIJCIELizGBWD6DdYUXgxyCV4s0lV0DB?=
 =?us-ascii?q?AIChwuKQSORSokuj3QCBAIEBQINAQEFgUgBggtwgzwJghIMF4NKhRSFP0ExgQU?=
 =?us-ascii?q?BASGKfwGBHgEB?=
X-IronPort-AV: E=Sophos;i="5.56,350,1539673200"; 
   d="scan'208";a="56834230"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from vger.kernel.org ([209.132.180.67])
  by mtab.intel.com with ESMTP; 13 Dec 2018 15:04:07 -0800
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1728772AbeLMXEE (ORCPT <rfc822;like.xu@linux.intel.com>
        + 23 others); Thu, 13 Dec 2018 18:04:04 -0500
Received: from mail-eopbgr690076.outbound.protection.outlook.com ([40.107.69.76]:51968
        "EHLO NAM04-CO1-obe.outbound.protection.outlook.com"
        rhost-flags-OK-OK-OK-FAIL) by vger.kernel.org with ESMTP
        id S1726813AbeLMXEE (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
        Thu, 13 Dec 2018 18:04:04 -0500
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector1-amd-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=Kh/V5UcRAwlihzqTaFdqc+mU9/IL2uuw1+0cIedl5ug=;
 b=a0aO7icaM/PJzdUmcArLM3tPI6vMN+NoyPJZ5+jU+fDNeHh726o30aKi/osNkGInrwiUZnda8on1HbefoGPF2G+zD9TvTpeDZ7FViaaysG9XXgoMcOMvLfEqmYGHv209aZm/EkUfTcvhNzVQzdl8DvPVIbCLH3rD8ZUEKNF9gkw=
Received: from SN1PR12MB0175.namprd12.prod.outlook.com (10.162.3.15) by
 SN1PR12MB0525.namprd12.prod.outlook.com (10.162.105.157) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.1425.19; Thu, 13 Dec 2018 23:03:54 +0000
Received: from SN1PR12MB0175.namprd12.prod.outlook.com
 ([fe80::bc0e:7f7f:ee65:e2d5]) by SN1PR12MB0175.namprd12.prod.outlook.com
 ([fe80::bc0e:7f7f:ee65:e2d5%6]) with mapi id 15.20.1425.016; Thu, 13 Dec 2018
 23:03:54 +0000
From: "Lendacky, Thomas" <Thomas.Lendacky@amd.com>
To: "x86@kernel.org" <x86@kernel.org>,
        "linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>
CC: Andrea Arcangeli <aarcange@redhat.com>,
        Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
        Jiri Kosina <jkosina@suse.cz>, Ingo Molnar <mingo@redhat.com>,
        Borislav Petkov <bp@alien8.de>,
        Thomas Gleixner <tglx@linutronix.de>,
        Tim Chen <tim.c.chen@linux.intel.com>,
        David Woodhouse <dwmw@amazon.co.uk>
Subject: [PATCH v3] x86/speculation: Add support for STIBP always-on preferred
 mode
Thread-Topic: [PATCH v3] x86/speculation: Add support for STIBP always-on
 preferred mode
Thread-Index: AQHUkzgefjt7tjOm8Ea2BTlYWwcWCA==
Date: Thu, 13 Dec 2018 23:03:54 +0000
Message-ID: <20181213230352.6937.74943.stgit@tlendack-t1.amdoffice.net>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: SN4PR0801CA0023.namprd08.prod.outlook.com
 (2603:10b6:803:29::33) To SN1PR12MB0175.namprd12.prod.outlook.com
 (2a01:111:e400:5143::15)
authentication-results: spf=none (sender IP is )
 smtp.mailfrom=Thomas.Lendacky@amd.com; 
x-ms-exchange-messagesentrepresentingtype: 1
x-originating-ip: [165.204.77.1]
x-ms-publictraffictype: Email
x-microsoft-exchange-diagnostics: 1;SN1PR12MB0525;20:MyLVhcJqL8NZ6FiP/t+YxAOgMb9IM2BT2GrJ+WtBVKsY/3L9/i9gNN+2ewb1Dr6Mn/iM1NsOy6OK2OOO8D4Brzjmoq2SpyVon7iQyaMbU6uTre5us08KRJDjPCqVO1DZY+EYZZJp+f/HnC1gOLl1d6cnUcuxFMnWSSdLo6zDvpoHKHWF6L149zlenZd4MGQnGGpyLjuv3BN5+3roV+MxGwnMDSb2GzLv5IRxKejAb8vDYzctY66aHg0cWib0AQMv
x-ms-office365-filtering-correlation-id: b931762b-bd38-43d1-521c-08d6614f40e6
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0;PCL:0;RULEID:(2390098)(7020095)(4652040)(8989299)(5600074)(711020)(4618075)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(2017052603328)(7153060)(7193020);SRVR:SN1PR12MB0525;
x-ms-traffictypediagnostic: SN1PR12MB0525:
x-microsoft-antispam-prvs: <SN1PR12MB05252051F8D554C47B4E8A67ECA00@SN1PR12MB0525.namprd12.prod.outlook.com>
x-ms-exchange-senderadcheck: 1
x-exchange-antispam-report-cfa-test: BCL:0;PCL:0;RULEID:(8211001083)(3230021)(999002)(6040522)(2401047)(8121501046)(5005006)(823302103)(3002001)(10201501046)(93006095)(93001095)(3231475)(944501520)(52105112)(6055026)(148016)(149066)(150057)(6041310)(20161123558120)(20161123564045)(20161123560045)(20161123562045)(201703131423095)(201702281528075)(20161123555045)(201703061421075)(201703061406153)(201708071742011)(7699051)(76991095);SRVR:SN1PR12MB0525;BCL:0;PCL:0;RULEID:;SRVR:SN1PR12MB0525;
x-forefront-prvs: 088552DE73
x-forefront-antispam-report: SFV:NSPM;SFS:(10009020)(376002)(136003)(346002)(39860400002)(366004)(396003)(199004)(189003)(316002)(2501003)(33896004)(8936002)(5660300001)(1076002)(305945005)(9686003)(25786009)(6512007)(186003)(53936002)(99286004)(71190400001)(52116002)(66066001)(71200400001)(68736007)(256004)(14444005)(86362001)(476003)(97746001)(81156014)(81166006)(54906003)(2906002)(103116003)(8676002)(26005)(6436002)(486006)(7736002)(478600001)(4326008)(6486002)(7416002)(6116002)(3846002)(6506007)(97736004)(102836004)(72206003)(110136005)(14454004)(105586002)(106356001)(386003);DIR:OUT;SFP:1101;SCL:1;SRVR:SN1PR12MB0525;H:SN1PR12MB0175.namprd12.prod.outlook.com;FPR:;SPF:None;LANG:en;PTR:InfoNoRecords;A:1;MX:1;
x-microsoft-antispam-message-info: 9utTpP75hei5/aOe2O7LknnmBUvwg+fd69jQRasj+MfGaEJC6zcjEnCVnsIT989km82k0s2do/ppo8T1L92dSSyHvxuKrqvO/CRH9fIhlv5548pWk+PPsz0D1eWPMP2BveKOQ3GUTlSt66MnaX1OzdMMfiU5uZgi2d7R2sObw1gwkl0e7PqdbCN4cw3j3c/wQduLYdPz2NpxICg2kQ257dk0vMNhoIbMiHUyHi2AbjWByC7TaYtBKOj04gOrmnEXTY+ld9yA53QyRuNk7zOJP7ea3XjM56PbCfzY8bRfEXpfiy4Ue4dED4oDA8LURkph
spamdiagnosticoutput: 1:99
spamdiagnosticmetadata: NSPM
Content-Type: text/plain; charset="utf-8"
Content-ID: <99DE71BE73C7C94F8F58E5D54B82C025@namprd12.prod.outlook.com>
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: b931762b-bd38-43d1-521c-08d6614f40e6
X-MS-Exchange-CrossTenant-originalarrivaltime: 13 Dec 2018 23:03:54.1843
 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-Transport-CrossTenantHeadersStamped: SN1PR12MB0525
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

RGlmZmVyZW50IEFNRCBwcm9jZXNzb3JzIG1heSBoYXZlIGRpZmZlcmVudCBpbXBsZW1lbnRhdGlv
bnMgb2YgU1RJQlAuDQpXaGVuIFNUSUJQIGlzIGNvbmRpdGlvbmFsbHkgZW5hYmxlZCwgc29tZSBp
bXBsZW1lbnRhdGlvbnMgd291bGQgYmVuZWZpdA0KZnJvbSBoYXZpbmcgU1RJQlAgYWx3YXlzIG9u
IGluc3RlYWQgb2YgdG9nZ2xpbmcgdGhlIFNUSUJQIGJpdCB0aHJvdWdoIE1TUg0Kd3JpdGVzLiBU
aGlzIHByZWZlcmVuY2UgaXMgYWR2ZXJ0aXNlZCB0aHJvdWdoIGEgQ1BVSUQgZmVhdHVyZSBiaXQu
DQoNCldoZW4gY29uZGl0aW9uYWwgU1RJQlAgc3VwcG9ydCBpcyByZXF1ZXN0ZWQgYXQgYm9vdCBh
bmQgdGhlIENQVSBhZHZlcnRpc2VzDQpTVElCUCBhbHdheXMtb24gbW9kZSBhcyBwcmVmZXJyZWQs
IHN3aXRjaCB0byBTVElCUCAib24iIHN1cHBvcnQuIFRvIHNob3cNCnRoYXQgdGhpcyB0cmFuc2l0
aW9uIGhhcyBvY2N1cnJlZCwgY3JlYXRlIGEgbmV3IHNwZWN0cmVfdjJfdXNlcl9taXRpZ2F0aW9u
DQp2YWx1ZSBhbmQgYSBuZXcgc3BlY3RyZV92Ml91c2VyX3N0cmluZ3MgbWVzc2FnZS4gVGhlIG5l
dyBtaXRpZ2F0aW9uIHZhbHVlDQppcyB1c2VkIGluIHNwZWN0cmVfdjJfdXNlcl9zZWxlY3RfbWl0
aWdhdGlvbigpIHRvIHByaW50IHRoZSBuZXcgbWl0aWdhdGlvbg0KbWVzc2FnZSBhcyB3ZWxsIGFz
IHRvIHJldHVybiBhIG5ldyBzdHJpbmcgZnJvbSBzdGlicF9zdGF0ZSgpLg0KDQpTaWduZWQtb2Zm
LWJ5OiBUb20gTGVuZGFja3kgPHRob21hcy5sZW5kYWNreUBhbWQuY29tPg0KLS0tDQoNClRoaXMg
cGF0Y2ggaXMgYWdhaW5zdCB0aGUgeDg2L3B0aSBicmFuY2ggb2YgdGhlIHRpcCB0cmVlOg0KICBn
aXQ6Ly9naXQua2VybmVsLm9yZy9wdWIvc2NtL2xpbnV4L2tlcm5lbC9naXQvdGlwL3RpcC5naXQg
eDg2L3B0aQ0KDQpDaGFuZ2VzIGZyb20gdjI6DQotIFJldmVydGVkIGJhY2sgdG8gb3JpZ2luYWwg
dmVyc2lvbiBvZiB0aGUgcGF0Y2gNCi0gVXBkYXRlZCB0aGUgbWVzc2FnZXMgdGhhdCBhcmUgaXNz
dWVkLiBJJ20gbm90IHRlcnJpYmx5IGhhcHB5IHdpdGggdGhlDQogIHdvcmRpbmcsIHNvIGlmIHRo
ZXJlIGFyZSBhbnkgc3VnZ2VzdGlvbnMuLi4NCg0KQ2hhbmdlcyBmcm9tIHYxOg0KLSBSZW1vdmVk
IGV4cGxpY2l0IFNQRUNUUkVfVjJfVVNFUl9TVFJJQ1RfUFJFRkVSUkVEIG1vZGUNCi0gQWRkZWQg
YSBtZXNzYWdlIHdoZW4gc3dpdGNoaW5nIHRvIGFsd2F5cy1vbiBtb2RlDQotIFNldCBhbmQgdXNl
ZCBhIHN0YXRpYyBib29sZWFuIGZvciB0aGUgc3RyaW5nIGluIHN0aWJwX3N0YXRlKCkNCg0KIGFy
Y2gveDg2L2luY2x1ZGUvYXNtL2NwdWZlYXR1cmVzLmggICB8ICAgIDEgKw0KIGFyY2gveDg2L2lu
Y2x1ZGUvYXNtL25vc3BlYy1icmFuY2guaCB8ICAgIDEgKw0KIGFyY2gveDg2L2tlcm5lbC9jcHUv
YnVncy5jICAgICAgICAgICB8ICAgMjggKysrKysrKysrKysrKysrKysrKysrKy0tLS0tLQ0KIDMg
ZmlsZXMgY2hhbmdlZCwgMjQgaW5zZXJ0aW9ucygrKSwgNiBkZWxldGlvbnMoLSkNCg0KZGlmZiAt
LWdpdCBhL2FyY2gveDg2L2luY2x1ZGUvYXNtL2NwdWZlYXR1cmVzLmggYi9hcmNoL3g4Ni9pbmNs
dWRlL2FzbS9jcHVmZWF0dXJlcy5oDQppbmRleCAyOGM0YTUwLi5kZjhlOTRlMiAxMDA2NDQNCi0t
LSBhL2FyY2gveDg2L2luY2x1ZGUvYXNtL2NwdWZlYXR1cmVzLmgNCisrKyBiL2FyY2gveDg2L2lu
Y2x1ZGUvYXNtL2NwdWZlYXR1cmVzLmgNCkBAIC0yODQsNiArMjg0LDcgQEANCiAjZGVmaW5lIFg4
Nl9GRUFUVVJFX0FNRF9JQlBCCQkoMTMqMzIrMTIpIC8qICIiIEluZGlyZWN0IEJyYW5jaCBQcmVk
aWN0aW9uIEJhcnJpZXIgKi8NCiAjZGVmaW5lIFg4Nl9GRUFUVVJFX0FNRF9JQlJTCQkoMTMqMzIr
MTQpIC8qICIiIEluZGlyZWN0IEJyYW5jaCBSZXN0cmljdGVkIFNwZWN1bGF0aW9uICovDQogI2Rl
ZmluZSBYODZfRkVBVFVSRV9BTURfU1RJQlAJCSgxMyozMisxNSkgLyogIiIgU2luZ2xlIFRocmVh
ZCBJbmRpcmVjdCBCcmFuY2ggUHJlZGljdG9ycyAqLw0KKyNkZWZpbmUgWDg2X0ZFQVRVUkVfQU1E
X1NUSUJQX0FMV0FZU19PTgkoMTMqMzIrMTcpIC8qICIiIFNpbmdsZSBUaHJlYWQgSW5kaXJlY3Qg
QnJhbmNoIFByZWRpY3RvcnMgYWx3YXlzLW9uIHByZWZlcnJlZCAqLw0KICNkZWZpbmUgWDg2X0ZF
QVRVUkVfQU1EX1NTQkQJCSgxMyozMisyNCkgLyogIiIgU3BlY3VsYXRpdmUgU3RvcmUgQnlwYXNz
IERpc2FibGUgKi8NCiAjZGVmaW5lIFg4Nl9GRUFUVVJFX1ZJUlRfU1NCRAkJKDEzKjMyKzI1KSAv
KiBWaXJ0dWFsaXplZCBTcGVjdWxhdGl2ZSBTdG9yZSBCeXBhc3MgRGlzYWJsZSAqLw0KICNkZWZp
bmUgWDg2X0ZFQVRVUkVfQU1EX1NTQl9OTwkJKDEzKjMyKzI2KSAvKiAiIiBTcGVjdWxhdGl2ZSBT
dG9yZSBCeXBhc3MgaXMgZml4ZWQgaW4gaGFyZHdhcmUuICovDQpkaWZmIC0tZ2l0IGEvYXJjaC94
ODYvaW5jbHVkZS9hc20vbm9zcGVjLWJyYW5jaC5oIGIvYXJjaC94ODYvaW5jbHVkZS9hc20vbm9z
cGVjLWJyYW5jaC5oDQppbmRleCAwMzJiNjAwLi5kYWQxMmI3IDEwMDY0NA0KLS0tIGEvYXJjaC94
ODYvaW5jbHVkZS9hc20vbm9zcGVjLWJyYW5jaC5oDQorKysgYi9hcmNoL3g4Ni9pbmNsdWRlL2Fz
bS9ub3NwZWMtYnJhbmNoLmgNCkBAIC0yMzIsNiArMjMyLDcgQEAgZW51bSBzcGVjdHJlX3YyX21p
dGlnYXRpb24gew0KIGVudW0gc3BlY3RyZV92Ml91c2VyX21pdGlnYXRpb24gew0KIAlTUEVDVFJF
X1YyX1VTRVJfTk9ORSwNCiAJU1BFQ1RSRV9WMl9VU0VSX1NUUklDVCwNCisJU1BFQ1RSRV9WMl9V
U0VSX1NUUklDVF9QUkVGRVJSRUQsDQogCVNQRUNUUkVfVjJfVVNFUl9QUkNUTCwNCiAJU1BFQ1RS
RV9WMl9VU0VSX1NFQ0NPTVAsDQogfTsNCmRpZmYgLS1naXQgYS9hcmNoL3g4Ni9rZXJuZWwvY3B1
L2J1Z3MuYyBiL2FyY2gveDg2L2tlcm5lbC9jcHUvYnVncy5jDQppbmRleCA1ODY4OWFjLi43N2Jm
MjI1IDEwMDY0NA0KLS0tIGEvYXJjaC94ODYva2VybmVsL2NwdS9idWdzLmMNCisrKyBiL2FyY2gv
eDg2L2tlcm5lbC9jcHUvYnVncy5jDQpAQCAtMjYyLDEwICsyNjIsMTEgQEAgZW51bSBzcGVjdHJl
X3YyX3VzZXJfY21kIHsNCiB9Ow0KIA0KIHN0YXRpYyBjb25zdCBjaGFyICogY29uc3Qgc3BlY3Ry
ZV92Ml91c2VyX3N0cmluZ3NbXSA9IHsNCi0JW1NQRUNUUkVfVjJfVVNFUl9OT05FXQkJPSAiVXNl
ciBzcGFjZTogVnVsbmVyYWJsZSIsDQotCVtTUEVDVFJFX1YyX1VTRVJfU1RSSUNUXQk9ICJVc2Vy
IHNwYWNlOiBNaXRpZ2F0aW9uOiBTVElCUCBwcm90ZWN0aW9uIiwNCi0JW1NQRUNUUkVfVjJfVVNF
Ul9QUkNUTF0JCT0gIlVzZXIgc3BhY2U6IE1pdGlnYXRpb246IFNUSUJQIHZpYSBwcmN0bCIsDQot
CVtTUEVDVFJFX1YyX1VTRVJfU0VDQ09NUF0JPSAiVXNlciBzcGFjZTogTWl0aWdhdGlvbjogU1RJ
QlAgdmlhIHNlY2NvbXAgYW5kIHByY3RsIiwNCisJW1NQRUNUUkVfVjJfVVNFUl9OT05FXQkJCT0g
IlVzZXIgc3BhY2U6IFZ1bG5lcmFibGUiLA0KKwlbU1BFQ1RSRV9WMl9VU0VSX1NUUklDVF0JCT0g
IlVzZXIgc3BhY2U6IE1pdGlnYXRpb246IFNUSUJQIHByb3RlY3Rpb24iLA0KKwlbU1BFQ1RSRV9W
Ml9VU0VSX1NUUklDVF9QUkVGRVJSRURdCT0gIlVzZXIgc3BhY2U6IE1pdGlnYXRpb246IFNUSUJQ
IGFsd2F5cy1vbiBwcm90ZWN0aW9uIiwNCisJW1NQRUNUUkVfVjJfVVNFUl9QUkNUTF0JCQk9ICJV
c2VyIHNwYWNlOiBNaXRpZ2F0aW9uOiBTVElCUCB2aWEgcHJjdGwiLA0KKwlbU1BFQ1RSRV9WMl9V
U0VSX1NFQ0NPTVBdCQk9ICJVc2VyIHNwYWNlOiBNaXRpZ2F0aW9uOiBTVElCUCB2aWEgc2VjY29t
cCBhbmQgcHJjdGwiLA0KIH07DQogDQogc3RhdGljIGNvbnN0IHN0cnVjdCB7DQpAQCAtMzU1LDYg
KzM1NiwxNSBAQCBzdGF0aWMgdm9pZCBfX2luaXQgc3BlY192Ml91c2VyX3ByaW50X2NvbmQoY29u
c3QgY2hhciAqcmVhc29uLCBib29sIHNlY3VyZSkNCiAJCWJyZWFrOw0KIAl9DQogDQorCS8qDQor
CSAqIEF0IHRoaXMgcG9pbnQsIGFuIFNUSUJQIG1vZGUgb3RoZXIgdGhhbiAib2ZmIiBoYXMgYmVl
biBzZXQuDQorCSAqIElmIFNUSUJQIHN1cHBvcnQgaXMgbm90IGJlaW5nIGZvcmNlZCwgY2hlY2sg
aWYgU1RJQlAgYWx3YXlzLW9uDQorCSAqIGlzIHByZWZlcnJlZC4NCisJICovDQorCWlmIChtb2Rl
ICE9IFNQRUNUUkVfVjJfVVNFUl9TVFJJQ1QgJiYNCisJICAgIGJvb3RfY3B1X2hhcyhYODZfRkVB
VFVSRV9BTURfU1RJQlBfQUxXQVlTX09OKSkNCisJCW1vZGUgPSBTUEVDVFJFX1YyX1VTRVJfU1RS
SUNUX1BSRUZFUlJFRDsNCisNCiAJLyogSW5pdGlhbGl6ZSBJbmRpcmVjdCBCcmFuY2ggUHJlZGlj
dGlvbiBCYXJyaWVyICovDQogCWlmIChib290X2NwdV9oYXMoWDg2X0ZFQVRVUkVfSUJQQikpIHsN
CiAJCXNldHVwX2ZvcmNlX2NwdV9jYXAoWDg2X0ZFQVRVUkVfVVNFX0lCUEIpOw0KQEAgLTYxMCw2
ICs2MjAsNyBAQCB2b2lkIGFyY2hfc210X3VwZGF0ZSh2b2lkKQ0KIAljYXNlIFNQRUNUUkVfVjJf
VVNFUl9OT05FOg0KIAkJYnJlYWs7DQogCWNhc2UgU1BFQ1RSRV9WMl9VU0VSX1NUUklDVDoNCisJ
Y2FzZSBTUEVDVFJFX1YyX1VTRVJfU1RSSUNUX1BSRUZFUlJFRDoNCiAJCXVwZGF0ZV9zdGlicF9z
dHJpY3QoKTsNCiAJCWJyZWFrOw0KIAljYXNlIFNQRUNUUkVfVjJfVVNFUl9QUkNUTDoNCkBAIC04
MTIsNyArODIzLDggQEAgc3RhdGljIGludCBpYl9wcmN0bF9zZXQoc3RydWN0IHRhc2tfc3RydWN0
ICp0YXNrLCB1bnNpZ25lZCBsb25nIGN0cmwpDQogCQkgKiBJbmRpcmVjdCBicmFuY2ggc3BlY3Vs
YXRpb24gaXMgYWx3YXlzIGRpc2FibGVkIGluIHN0cmljdA0KIAkJICogbW9kZS4NCiAJCSAqLw0K
LQkJaWYgKHNwZWN0cmVfdjJfdXNlciA9PSBTUEVDVFJFX1YyX1VTRVJfU1RSSUNUKQ0KKwkJaWYg
KHNwZWN0cmVfdjJfdXNlciA9PSBTUEVDVFJFX1YyX1VTRVJfU1RSSUNUIHx8DQorCQkgICAgc3Bl
Y3RyZV92Ml91c2VyID09IFNQRUNUUkVfVjJfVVNFUl9TVFJJQ1RfUFJFRkVSUkVEKQ0KIAkJCXJl
dHVybiAtRVBFUk07DQogCQl0YXNrX2NsZWFyX3NwZWNfaWJfZGlzYWJsZSh0YXNrKTsNCiAJCXRh
c2tfdXBkYXRlX3NwZWNfdGlmKHRhc2spOw0KQEAgLTgyNSw3ICs4MzcsOCBAQCBzdGF0aWMgaW50
IGliX3ByY3RsX3NldChzdHJ1Y3QgdGFza19zdHJ1Y3QgKnRhc2ssIHVuc2lnbmVkIGxvbmcgY3Ry
bCkNCiAJCSAqLw0KIAkJaWYgKHNwZWN0cmVfdjJfdXNlciA9PSBTUEVDVFJFX1YyX1VTRVJfTk9O
RSkNCiAJCQlyZXR1cm4gLUVQRVJNOw0KLQkJaWYgKHNwZWN0cmVfdjJfdXNlciA9PSBTUEVDVFJF
X1YyX1VTRVJfU1RSSUNUKQ0KKwkJaWYgKHNwZWN0cmVfdjJfdXNlciA9PSBTUEVDVFJFX1YyX1VT
RVJfU1RSSUNUIHx8DQorCQkgICAgc3BlY3RyZV92Ml91c2VyID09IFNQRUNUUkVfVjJfVVNFUl9T
VFJJQ1RfUFJFRkVSUkVEKQ0KIAkJCXJldHVybiAwOw0KIAkJdGFza19zZXRfc3BlY19pYl9kaXNh
YmxlKHRhc2spOw0KIAkJaWYgKGN0cmwgPT0gUFJfU1BFQ19GT1JDRV9ESVNBQkxFKQ0KQEAgLTg5
Niw2ICs5MDksNyBAQCBzdGF0aWMgaW50IGliX3ByY3RsX2dldChzdHJ1Y3QgdGFza19zdHJ1Y3Qg
KnRhc2spDQogCQkJcmV0dXJuIFBSX1NQRUNfUFJDVEwgfCBQUl9TUEVDX0RJU0FCTEU7DQogCQly
ZXR1cm4gUFJfU1BFQ19QUkNUTCB8IFBSX1NQRUNfRU5BQkxFOw0KIAljYXNlIFNQRUNUUkVfVjJf
VVNFUl9TVFJJQ1Q6DQorCWNhc2UgU1BFQ1RSRV9WMl9VU0VSX1NUUklDVF9QUkVGRVJSRUQ6DQog
CQlyZXR1cm4gUFJfU1BFQ19ESVNBQkxFOw0KIAlkZWZhdWx0Og0KIAkJcmV0dXJuIFBSX1NQRUNf
Tk9UX0FGRkVDVEVEOw0KQEAgLTEwODksNiArMTEwMyw4IEBAIHN0YXRpYyBjaGFyICpzdGlicF9z
dGF0ZSh2b2lkKQ0KIAkJcmV0dXJuICIsIFNUSUJQOiBkaXNhYmxlZCI7DQogCWNhc2UgU1BFQ1RS
RV9WMl9VU0VSX1NUUklDVDoNCiAJCXJldHVybiAiLCBTVElCUDogZm9yY2VkIjsNCisJY2FzZSBT
UEVDVFJFX1YyX1VTRVJfU1RSSUNUX1BSRUZFUlJFRDoNCisJCXJldHVybiAiLCBTVElCUDogYWx3
YXlzLW9uIjsNCiAJY2FzZSBTUEVDVFJFX1YyX1VTRVJfUFJDVEw6DQogCWNhc2UgU1BFQ1RSRV9W
Ml9VU0VSX1NFQ0NPTVA6DQogCQlpZiAoc3RhdGljX2tleV9lbmFibGVkKCZzd2l0Y2hfdG9fY29u
ZF9zdGlicCkpDQoNCg==
