Return-Path: <linux-kernel-owner@vger.kernel.org>
Delivered-To: unknown
Received: from linux.intel.com (10.54.29.200:995) by likexu-workstation with
  POP3-SSL; 23 Nov 2018 23:33:48 -0000
X-Original-To: like.xu@linux.intel.com
Delivered-To: like.xu@linux.intel.com
Received: from orsmga002.jf.intel.com (orsmga002.jf.intel.com [10.7.209.21])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by linux.intel.com (Postfix) with ESMTPS id 8856D58040F;
	Fri, 23 Nov 2018 02:15:34 -0800 (PST)
Received: from fmsmga105.fm.intel.com ([10.1.193.10])
  by orsmga002-1.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384; 23 Nov 2018 02:15:34 -0800
X-SG-BADATTACHMENTNOREPLY: True
IronPort-PHdr: =?us-ascii?q?9a23=3Afv42sB/BSzp2EP9uRHKM819IXTAuvvDOBiVQ1KB9?=
 =?us-ascii?q?1esVIJqq85mqBkHD//Il1AaPAd2Lraocw8Pt8InYEVQa5piAtH1QOLdtbDQizf?=
 =?us-ascii?q?ssogo7HcSeAlf6JvO5JwYzHcBFSUM3tyrjaRsdF8nxfUDdrWOv5jAOBBr/KRB1?=
 =?us-ascii?q?JuPoEYLOksi7ze+/94HQbglSmDaxfa55IQmrownWqsQYm5ZpJLwryhvOrHtIeu?=
 =?us-ascii?q?BWyn1tKFmOgRvy5dq+8YB6/ShItP0v68BPUaPhf6QlVrNYFygpM3o05MLwqxbO?=
 =?us-ascii?q?SxaE62YGXWUXlhpIBBXF7A3/U5zsvCb2qvZx1S+HNsDtU7s6RSqt4LtqSB/wiS?=
 =?us-ascii?q?cIKTg58H3MisdtiK5XuQ+tqwBjz4LRZoyeKfhwcb7Hfd4CRWRPQNtfVzBPDI2/?=
 =?us-ascii?q?YYsADesBMulEoIfyvFsOtRmzCBKwBOz01jNEmmP60bE43uknDArI3BYgH9ULsH?=
 =?us-ascii?q?nMotv6LrkSUeGow6LVyzvMdfJW2Tj96IjUbxsspv+CUqhuccrQ1EYjDQXLgU+R?=
 =?us-ascii?q?qYzqPzOVyv8AvnSF4uVuU+yil3Mqpxtvrza2wckhk4/EjZ8WxFDc7Sh13po5KN?=
 =?us-ascii?q?miREJmb9OoDoFcuzyZOodqWM8vQmNltD4nxrEao5K3YjQGxIo9yxLBd/CKc5KE?=
 =?us-ascii?q?7g//WOuTOTt4imxqdbGjixu39EWtxePxWdWx3VtLqidIksfDu3UO2hHQ9sSHRP?=
 =?us-ascii?q?5w80Sj1DuPywze7PxPL1oumqrBMZEhx6Y9lpoNvkTHGS/7gFv2jKCIeUU+4OSo?=
 =?us-ascii?q?6ProYq/gppCCM494kAb+Mr4hmsCnAOQ4NBYBX3SD9OiiyLHu+Vf1TKhEg/EoiK?=
 =?us-ascii?q?XVrZPXKdgBqqO4AQJZyoMj5Ay+Dzei3tQYh34HLFdddRKDjojpPUzOIf/hAfe8?=
 =?us-ascii?q?nVusijFryO7CPrH4BZXMIH7Dn6n7fbtm9U5cxxQ8zcpF65JXFL4BOvTzVVH1tN?=
 =?us-ascii?q?DCCR85KQO0z/79CNphzoMeRX6PAqiBPaPWsF+I5fwgL/ODZY8Iozv9L/kl5/jz?=
 =?us-ascii?q?jX42g1MdfK+p3YcJZ3C8BPhpP0KZYX/0iNcbDWgKphY+TPDtiFCaUT5cfXeyX7?=
 =?us-ascii?q?4m6TE8Eo6mDZrDSZqrgLyOxyq7GpxWZmZbClGDC3vodoOEW+sSZyKWOMNujjsE?=
 =?us-ascii?q?Vb25QY87yR6urBP6y6ZgLufM+C0Ysozs2MJ25+3UkxEy8zt0At+Z02GMSWF0g2?=
 =?us-ascii?q?wJSyU33KB5vUxy1FOD3bJkjPxfENxZ/+lJXRsiNZ7A0+x6DMj/VRjafteJT1am?=
 =?us-ascii?q?Qc+qASsrQdIz2NIOZ0d9G9O/jhHMxSaqArkVl6CVC5ww6K7Tw3/xJ8NlwXbcyK?=
 =?us-ascii?q?Yhl0UmQtdINWC+ha5w7Q7TC5TNk0WYjamqc6sc0TXJ9GeCy2qOoU5ZXBRxUaXD?=
 =?us-ascii?q?QXAQeE/Woc7l6UPFSr+kEa4nPRdZyc6eNqtKbcXkgkhcS/f9JtvSeWKxlH22BR?=
 =?us-ascii?q?aT2LyMao3me2Ee3CXYDEgJiAQT/XeANQgjCSatuWPeDDpyFV3xZ0Pg6/VxqHS+?=
 =?us-ascii?q?TkUs1QGFc1Vh16ap+h4SnfGTVukc3qwatys7qzV7BlC938nIBNqGvAdheKRcYd?=
 =?us-ascii?q?Ug4FZIz27Ztgp9PoC+IKBmnFIRbwN3v0b23RVtFopAidQqrG8tzAdqNaKY0VZB?=
 =?us-ascii?q?dzSE3ZDwOrzbMHXy8Aqoa67M3lHe0dCW+qgU5fQ8qlXjuhypF0U4/3Vm1dlVz2?=
 =?us-ascii?q?WT5pHQAAUOVpLxV1499wJmqLHCfik9+4TU2GV2PqmwrDDD1MwmBes/xhm7YtdQ?=
 =?us-ascii?q?LbmLFAnxE80dGcijM+gqm1mvbhIZM+Fe7q80P8W6d/SY3K6nJvpvnDWjjW5f+o?=
 =?us-ascii?q?ByzlqM9zZgSu7Px5sEw+yY0hGbWDvmjVahstr4mYZLZTwJGmq/yC7kBJNeZ6Fo?=
 =?us-ascii?q?fIYLD3uuLNOzxtlkm5HtXHtY/ka5B1wawM+pZQaSb1vl0A1K1EQYvWaomTGlwD?=
 =?us-ascii?q?xziT0pqLSQ3DbPw+j7aBUIIGpLS3R8glf2Joi0icsXXEypbwgviRuk6lz2x6ld?=
 =?us-ascii?q?pKRjMWbTRV1EcDTxL2FnSqGwrKaNY9ZT6JM0tiVaSOS9YVGARr/9uRcayD7jH2?=
 =?us-ascii?q?1FyTA/djGqvIj5nhNghGKcKnZzsGTWecVqyRjD49zcQOZb3iAaSylglTnXGl+8?=
 =?us-ascii?q?MsGr/dqOjZfDseO+V2W7Wp1IaybrzoCAtCq95WJ0Bx2yhPSzmtzhEQgn3i73zd?=
 =?us-ascii?q?hqVSPUrBniZonnzbi1MeVifkNwHl/z99J6Gp1ikos3nJwR2WIVhpKP8XoFkGfz?=
 =?us-ascii?q?N85W2ab/bHoLWD4KzMTZ4Anj2E1/MH2Jw5j1WWmawstkf9O6eH8Z2joh78BWD6?=
 =?us-ascii?q?eZ9L9EkjF0olairQLRfOJynjESyfY17H4agucJuBcizymHA7ASG1VYMjLolxiS?=
 =?us-ascii?q?89++q6BXbn61cbeszEp+gcyhDLaarwFZWXb5eY0tETV+78phK1LMzGP86pv/d9?=
 =?us-ascii?q?bOd9ITuQaZkxPBj+hTNZIwmeAGhSthOWLho3Ilz/Q3ggBp3ZG/pIKHMXli/Lql?=
 =?us-ascii?q?Ah5EMT34f98T+jbojapEn8eZxYavHoh6GjUQXZvlVvaoEDMUtfT6OAeCCjw8qn?=
 =?us-ascii?q?GHGbXBGQ+T8ltpr3XKE5qzLXGYOGEZzcl+RBmaPEFQmxobXDI+np4kDAyqwNHh?=
 =?us-ascii?q?fVx95jAQ4F74txRNxvhpNxn5TmfQugOoZi0oR5iYKRpc9htC6FvNMcyC8uJzGD?=
 =?us-ascii?q?lV/p+7owyINGObfB5EDX0TVkyHGlDjPaSu5d/a/OiDHee+K/rOYbOTqe1RTfuI?=
 =?us-ascii?q?xJSv0pd48DaILMmAIn5iD/gj0EpZQX95A9jZmykISyEPlyPNaNObpA6h+iJtqM?=
 =?us-ascii?q?Cz6u/rWAXp5YuAELZSNdRv+xargaaMLeKQhSB5KSpG2ZMI33PH1L8f3FsKgSF0?=
 =?us-ascii?q?azatCagAtTLKTK/Imq9YER8bayBwNMtJ9a483RNNOcnUitzrzL54k+U1BkxBVV?=
 =?us-ascii?q?zgnMGpeMMLL3u8NFPBGEaEKrCGKSfXzMHwZKO2UadQg/lMtx2spTabFFfuMS6e?=
 =?us-ascii?q?lzbyTRCgL+FNgDufPBxfo4y9dhdtCW7+TNPpcBG7Mdl3jSEozr0wnH/FKWkcMT?=
 =?us-ascii?q?1keUNXsrKQ9T9Ygul4G2FZ8nplLOyElzyF4OXCNpkWseVkAiJvmuJe4XQ6zaZV?=
 =?us-ascii?q?7S5eSPx0nivSssBho1W8nuaTzTpnVQJEqixXi4KToUViJaLZ+4FAWHne+hIN6G?=
 =?us-ascii?q?SQCxISqNpkCt3goaZQytfUmaL3KTdC9c/U/MQGC8jVLsKHLGQuMR7zFDHICwsF?=
 =?us-ascii?q?SG3jCWaKq0VDkf3a0nSUoZgm4szAkYQPRvl/XV06Fu8yI29YOPUoZrxQe2Vg2f?=
 =?us-ascii?q?G/jcgV/jKCqwPPTcFWpd+PAu6VG+vmLDqCpb1FYQYYhL3/MIIfP5H63EokbUN1?=
 =?us-ascii?q?ysCCVGPWUcpAvWVFcxMzpURX63t/ASVn31/5bSuu7WUVGPrymQQ53FhQe+MooR?=
 =?us-ascii?q?vl/VY7bn7DpSQwjAFltdz7gDzXVDfwI6esdah9Ng7dnQ4aFbatEFU9VhG7gUEx?=
 =?us-ascii?q?bGSMfLlWlbY1MDkz0AI=3D?=
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A0AeAABl0vdbh0O0hNFiHAEBAQQBAQcEA?=
 =?us-ascii?q?QGBUwUBAQsBgTCCOxUcg2+Id4segg0UlyeCBysBhFmDfCI2Bw0BAwEBAQEBAQI?=
 =?us-ascii?q?BEwEBAQgNCQgpL4I2JAGCYQEBAQEDAQIgER8mBgkBAQEBCBUBBAImAgICARwTJ?=
 =?us-ascii?q?QIEAQkECgODGYICAQSmLgEBAW6BL4oXgQuKfoFXP4ERgxKIAoJXAoh/ghKUcQc?=
 =?us-ascii?q?CHIIEjwcIGIFZiC6HAZgwgScmCoF8Mxojgz2QWYF3AQGLAoEfAQE?=
X-IPAS-Result: =?us-ascii?q?A0AeAABl0vdbh0O0hNFiHAEBAQQBAQcEAQGBUwUBAQsBgTC?=
 =?us-ascii?q?COxUcg2+Id4segg0UlyeCBysBhFmDfCI2Bw0BAwEBAQEBAQIBEwEBAQgNCQgpL?=
 =?us-ascii?q?4I2JAGCYQEBAQEDAQIgER8mBgkBAQEBCBUBBAImAgICARwTJQIEAQkECgODGYI?=
 =?us-ascii?q?CAQSmLgEBAW6BL4oXgQuKfoFXP4ERgxKIAoJXAoh/ghKUcQcCHIIEjwcIGIFZi?=
 =?us-ascii?q?C6HAZgwgScmCoF8Mxojgz2QWYF3AQGLAoEfAQE?=
X-IronPort-AV: E=Sophos;i="5.56,269,1539673200"; 
   d="scan'208";a="139300834"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from vger.kernel.org ([209.132.180.67])
  by mtab.intel.com with ESMTP; 23 Nov 2018 02:15:32 -0800
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S2503153AbeKWU4I (ORCPT <rfc822;like.xu@linux.intel.com>
        + 23 others); Fri, 23 Nov 2018 15:56:08 -0500
Received: from eu-smtp-delivery-151.mimecast.com ([146.101.78.151]:30287 "EHLO
        eu-smtp-delivery-151.mimecast.com" rhost-flags-OK-OK-OK-OK)
        by vger.kernel.org with ESMTP id S2387808AbeKWU4H (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Fri, 23 Nov 2018 15:56:07 -0500
Received: from AcuMS.aculab.com (156.67.243.126 [156.67.243.126]) (Using
 TLS) by relay.mimecast.com with ESMTP id
 uk-mta-25-MDF-VcXoPOm9BxBa3KMGBw-1; Fri, 23 Nov 2018 10:12:26 +0000
Received: from AcuMS.Aculab.com (fd9f:af1c:a25b::d117) by AcuMS.aculab.com
 (fd9f:af1c:a25b::d117) with Microsoft SMTP Server (TLS) id 15.0.1347.2; Fri,
 23 Nov 2018 10:12:33 +0000
Received: from AcuMS.Aculab.com ([fe80::43c:695e:880f:8750]) by
 AcuMS.aculab.com ([fe80::43c:695e:880f:8750%12]) with mapi id 15.00.1347.000;
 Fri, 23 Nov 2018 10:12:33 +0000
From: David Laight <David.Laight@ACULAB.COM>
To: David Laight <David.Laight@ACULAB.COM>,
        'Linus Torvalds' <torvalds@linux-foundation.org>,
        'Andrew Lutomirski' <luto@kernel.org>
CC: "'dvlasenk@redhat.com'" <dvlasenk@redhat.com>,
        'Jens Axboe' <axboe@kernel.dk>,
        'Ingo Molnar' <mingo@kernel.org>,
        'Thomas Gleixner' <tglx@linutronix.de>,
        'Ingo Molnar' <mingo@redhat.com>,
        "'bp@alien8.de'" <bp@alien8.de>, 'Peter Anvin' <hpa@zytor.com>,
        'the arch/x86 maintainers' <x86@kernel.org>,
        'Andrew Morton' <akpm@linux-foundation.org>,
        "'Peter Zijlstra'" <a.p.zijlstra@chello.nl>,
        "'brgerst@gmail.com'" <brgerst@gmail.com>,
        'Linux List Kernel Mailing' <linux-kernel@vger.kernel.org>,
        "'pabeni@redhat.com'" <pabeni@redhat.com>
Subject: RE: [PATCH] x86: only use ERMS for user copies for larger sizes
Thread-Topic: [PATCH] x86: only use ERMS for user copies for larger sizes
Thread-Index: AQHUgaBY0KBBfG3q00apJLDxEV5GB6VcD8pwgAAXuEiAAPNRcIAAB5ww
Date: Fri, 23 Nov 2018 10:12:33 +0000
Message-ID: <64fd67993af04579b5262c270a7a4694@AcuMS.aculab.com>
References: <02bfc577-32a5-66be-64bf-d476b7d447d2@kernel.dk>
 <20181121063609.GA109082@gmail.com>
 <48e27a3a-2bb2-ff41-3512-8aeb3fd59e57@kernel.dk>
 <26eff539-7de7-784c-0c88-f1d30753299d@redhat.com>
 <7ea44458b90b4d41a08ba9012818d273@AcuMS.aculab.com>
 <CAHk-=wjLNuNpHRfuVTb6awstC9OOmSb3S8aP51ufep-Th4dXKw@mail.gmail.com>
 <CALCETrW=hMZLUM_nPEEgUW9x9Bmhm2LZ6ZRDiRRguxVT=-_BWA@mail.gmail.com>
 <CAHk-=wiEUVpSU-GxpKDvN9wnH2yDxkJgE7Vqh46A+fmnvhubyw@mail.gmail.com>
 <cd11d9423c8b46ecbf97753f8317c294@AcuMS.aculab.com>
In-Reply-To: <cd11d9423c8b46ecbf97753f8317c294@AcuMS.aculab.com>
Accept-Language: en-GB, en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-ms-exchange-transport-fromentityheader: Hosted
x-originating-ip: [10.202.205.107]
MIME-Version: 1.0
X-MC-Unique: MDF-VcXoPOm9BxBa3KMGBw-1
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

RnJvbTogRGF2aWQgTGFpZ2h0DQo+IFNlbnQ6IDIzIE5vdmVtYmVyIDIwMTggMDk6MzUNCj4gRnJv
bTogTGludXMgVG9ydmFsZHMNCj4gPiBTZW50OiAyMiBOb3ZlbWJlciAyMDE4IDE4OjU4DQo+IC4u
Lg0KPiA+IE9oLCBhbmQgSSBqdXN0IG5vdGljZWQgdGhhdCBvbiB4ODYgd2UgZXhwcmVzc2x5IHVz
ZSBvdXIgb2xkICJzYWZlIGFuZA0KPiA+IHNhbmUiIGZ1bmN0aW9uczogc2VlIF9faW5saW5lX21l
bWNweSgpLCBhbmQgaXRzIHVzZSBpbg0KPiA+IF9fbWVtY3B5X3tmcm9tLHRvfWlvKCkuDQo+ID4N
Cj4gPiBTbyB0aGUgImZhbGxzIGJhY2sgdG8gbWVtY3B5IiB3YXMgYWx3YXlzIGEgcmVkIGhlcnJp
bmcuIFdlIGRvbid0DQo+ID4gYWN0dWFsbHkgZG8gdGhhdC4NCj4gPg0KPiA+IFdoaWNoIGV4cGxh
aW5zIHdoeSB0aGluZ3Mgd29yay4NCj4gDQo+IEl0IGRvZXNuJ3QgZXhwbGFpbiB3aHkgSSd2ZSBz
ZWVuIHNpbmdsZSBieXRlIFBDSWUgVExQIGdlbmVyYXRlZA0KPiBieSBtZW1jcHlfdG8vZnJvbWlv
KCkuDQo+IA0KPiBJJ3ZlIGhhZCB0byBjaGFuZ2UgY29kZSB0byB1c2UgcmVhZHEvd3JpdGVxIGxv
b3BzIGJlY2F1c2UgdGhlDQo+IGJ5dGUgYWNjZXNzZXMgYXJlIHNvIHNsb3cgLSBldmVuIHdoZW4g
UElPIHBlcmZvcm1hbmNlIHNob3VsZA0KPiBiZSAnZ29vZCBlbm91Z2gnLg0KPiANCj4gSXQgbWln
aHQgaGF2ZSBiZWVuIGNoYW5nZWQgc2luY2UgbGFzdCB0aW1lIEkgdGVzdGVkIGl0Lg0KPiBCdXQg
SSBkb24ndCByZW1lbWJlciBzZWVpbmcgYSBjb21taXQgZ28gYnkuDQoNCkkndmUganVzdCBwYXRj
aGVkIG15IGRyaXZlciBhbmQgcmVkb25lIHRoZSB0ZXN0IG9uIGEgNC4xMyAodWJ1bnR1KSBrZXJu
ZWwuDQpDYWxsaW5nIG1lbWNweV9mcm9taW8oa2VybmVsX2J1ZmZlciwgUENJZV9hZGRyZXNzLCBs
ZW5ndGgpDQpnZW5lcmF0ZXMgYSBsb3Qgb2Ygc2luZ2xlIGJ5dGUgVExQLg0KDQpXaGF0IHRoZSBj
b2RlIG5vcm1hbGx5IGRvZXMgaXMgNjRiaXQgYWxpZ25lZCBQQ0llIHJlYWRzIHdpdGgNCm11bHRp
cGxlIHdyaXRlcyBhbmQgc2hpZnRzIHRvIGF2b2lkIHdyaXRpbmcgYmV5b25kIHRoZSBlbmQgb2YN
CnRoZSBrZXJuZWwgYnVmZmVyIGZvciAnb2RkJyBsZW5ndGggdHJhbnNmZXJzLg0KDQpNb3N0IG9m
IG91ciBQSU8gY29waWVzIGFyZSBhY3R1YWxseSBkaXJlY3QgdG8vZnJvbSB1c2Vyc3BhY2UuDQpX
aGlsZSBjb3B5X3RvL2Zyb21fdXNlcigpIHdpbGwgd29yayBvbiBQQ0llIG1lbW9yeSwgaXQgaXMg
J3JlcCBtb3N2YicuDQpXZSBhbHNvIG1tYXAoKSB0aGUgUENJZSBzcGFjZSBpbnRvIHByb2Nlc3Mg
bWVtb3J5IC0gYW5kIGhhdmUgYmUNCmNhcmVmdWwgbm90IHRvIHVzZSBtZW1jcHkoKSBpbiB1c2Vz
cGFjZS4NCg0KT24gc3VpdGFibGUgc3lzdGVtcyB1c2Vyc3BhY2UgY2FuIHVzZSB0aGUgQVZYMjU2
IGluc3RydWN0aW9ucyB0bw0KZ2V0IHdpZGUgcmVhZHMuIE11Y2ggaGFyZGVyIGFuZCBtb3JlIGV4
cGVuc2l2ZSBpbiB0aGUga2VybmVsLg0KDQpJbiBwcmFjdGlzZSBtb3N0IG9mIHRoZSBidWxrIGRh
dGEgdHJhbnNmZXJzIGFyZSByZXF1ZXN0ZWQgYnkgdGhlIFBDSWUgc2xhdmUuDQpCdXQgdGhlcmUg
YXJlIHRpbWVzIHdoZW4gUElPIG9uZXMgYXJlIG5lZWRlZCwgYW5kIDY0IGJpdCB0cmFuc2ZlcnMg
YXJlDQo4IHRpbWVzIGZhc3RlciB0aGFuIDggYml0IG9uZXMuDQpUaGlzIGlzIGFsbCBtYWRlIG1v
cmUgc2lnbmlmaWNhbnQgYmVjYXVzZSBpdCB0YWtlcyBvdXIgZnBnYSBhYm91dCA1MDBucw0KdG8g
Y29tcGxldGUgYSBzaW5nbGUgd29yZCBQQ0llIHJlYWQuDQoNCglEYXZpZA0KDQotDQpSZWdpc3Rl
cmVkIEFkZHJlc3MgTGFrZXNpZGUsIEJyYW1sZXkgUm9hZCwgTW91bnQgRmFybSwgTWlsdG9uIEtl
eW5lcywgTUsxIDFQVCwgVUsNClJlZ2lzdHJhdGlvbiBObzogMTM5NzM4NiAoV2FsZXMpDQo=

