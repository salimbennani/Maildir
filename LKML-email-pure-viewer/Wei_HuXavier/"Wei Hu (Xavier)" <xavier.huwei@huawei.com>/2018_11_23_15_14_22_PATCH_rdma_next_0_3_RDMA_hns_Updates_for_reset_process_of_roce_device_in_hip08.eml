Return-Path: <linux-kernel-owner@vger.kernel.org>
Delivered-To: unknown
Received: from linux.intel.com (10.54.29.200:995) by likexu-workstation with
  POP3-SSL; 23 Nov 2018 23:36:07 -0000
X-Original-To: like.xu@linux.intel.com
Delivered-To: like.xu@linux.intel.com
Received: from orsmga002.jf.intel.com (orsmga002.jf.intel.com [10.7.209.21])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by linux.intel.com (Postfix) with ESMTPS id 508885803EB;
	Fri, 23 Nov 2018 06:41:00 -0800 (PST)
Received: from orsmga102-1.jf.intel.com (HELO mga09.intel.com) ([10.7.208.27])
  by orsmga002-1.jf.intel.com with ESMTP; 23 Nov 2018 06:41:00 -0800
X-SG-BADATTACHMENTNOREPLY: True
IronPort-PHdr: =?us-ascii?q?9a23=3A0yHGnxYJWzjIYGBjkua0wrv/LSx+4OfEezUN459i?=
 =?us-ascii?q?sYplN5qZpcm6Zx7h7PlgxGXEQZ/co6odzbaO4+a4ASQp2tWoiDg6aptCVhsI24?=
 =?us-ascii?q?09vjcLJ4q7M3D9N+PgdCcgHc5PBxdP9nC/NlVJSo6lPwWB6nK94iQPFRrhKAF7?=
 =?us-ascii?q?Ovr6GpLIj8Swyuu+54Dfbx9HiTahYr5+Ngm6oRnMvcQKnIVuLbo8xAHUqXVSYe?=
 =?us-ascii?q?RWwm1oJVOXnxni48q74YBu/SdNtf8/7sBMSar1cbg2QrxeFzQmLns65Nb3uhnZ?=
 =?us-ascii?q?TAuA/WUTX2MLmRdVGQfF7RX6XpDssivms+d2xSeXMdHqQb0yRD+v6bpgRh31hy?=
 =?us-ascii?q?cdLzM38H/ZhNF+gqxYpxyuqABww4/PYIGNNvdzZb/dcc8ASGZdRMtdSzBND4Wh?=
 =?us-ascii?q?ZIUPFeoBOuNYopHzq1QOsxS+BBSnCuHyyjRVgnP53Lc10/ogEQ7YxgwsGtwCu2?=
 =?us-ascii?q?nTodT6LqgST+G1w7fSzTnZb/NWxDn855bJch06ofGMQKh/cMTPxkkuDQ/KklKQ?=
 =?us-ascii?q?qYn8Mj6Ty+8DvW+b7+96WuKujW4qswJxrSa1xscqlIbJgpgZylfe9SV2xos+ON?=
 =?us-ascii?q?62SFZjbNK6DJddszuWO5Z4T888WW1kpSU3xqEctZO6fiUG0IkrywLFZ/GFboSE?=
 =?us-ascii?q?+AzvWPqNLTtiin9pZaqzihmy/ES61OHxWc253ExUoiZYjNXArH4A2hzV58OaUP?=
 =?us-ascii?q?Vy5F2h1iyK1w3L6uFLP0Q0la3DJp4/zb4/iIATvV7AHiDogkX2irGZdkE+9uiv?=
 =?us-ascii?q?8eTnba3qpp6aN4BqlgHzKroiltC7DOgiLwQDUXaX9f6h2LDg4UH1WrRHg/8unq?=
 =?us-ascii?q?ncqp/aJMAbpqCjAw9S14Yu8xK/Dzag0NQFkngLNVFFdwydj4jvJV7OJOn0DfCx?=
 =?us-ascii?q?glSqjjhr3evLPqPuAprTNHjPirThcqhn605a1gUzycpT55VOCrEOOP7zQFP+tM?=
 =?us-ascii?q?TEDh8lNAy52+LnCNR+1owAQ26ODbKZPbjWsV+J4OIvPuaNaJUUuDb7N/gq+fru?=
 =?us-ascii?q?gWUlll8aeKmjxYEXZ2ygHvR6P0WZZmLhgtcbHmcLogoxVuvqhEeCUT5OfXmyWa?=
 =?us-ascii?q?086yo/CIKnC4fDW4+sjKaA3Ce9Ap1ZeGRGBkqQHnfvcoWOQ+0MZz6KIs99jjwE?=
 =?us-ascii?q?UqCsS40m1R6wrgP6yL1nLuzS+i0frp/j0Nl15+vOlRA97zB0DsKd032TQGFwhG?=
 =?us-ascii?q?8HWzg23KVnq0xn1liDybR4g+BfFdFL/fxJSQc6NZnfz+BgEdD9QADBc8yNSFan?=
 =?us-ascii?q?RNWmHD4wQsgww98If0ZyBdGiggrf0CqtBr8fj6aLC4As8qLAw3jxIN5wy3Xc26?=
 =?us-ascii?q?knlVUmRspPOneghq5w7AXTA4/Jk0OEl6elb6gc3SjN9HudwmqKpk1XTAlwUaDd?=
 =?us-ascii?q?V3AFekTWtcj55l/FT7K2FLsoKBVBxtCYJqtKcNLpi05GS+nlONjZZ2KxmGKwBR?=
 =?us-ascii?q?KTy7OIbYrqfXgd3SrHBEgFlQAT4WiJNQwkCii9pGLeCSRkFUjzbEP07el+tHS7?=
 =?us-ascii?q?Q1cpwA6QcU1uyaC5+h4PivyaUPMcwLQEtTwlqzV1Gla9wt3XB8CBpwpnYKVTf9?=
 =?us-ascii?q?c97E1b2mLesgx3JoagILx6hl4CbwR3uFvj1wl2CoVFlsgqsHMqzQpoJaKEyl9B?=
 =?us-ascii?q?cCmY3ZTxOr3RJWn/5xSva6/Q2lHD39ea4KYP6PIkq1r9uAGlDFYt83Ji09NNyX?=
 =?us-ascii?q?uT+o3KDBYOUZL2Sks47Rx6qK/VYyYj54LYz2ZjMbSpvTDY3dIpB+wlygi7ctdb?=
 =?us-ascii?q?MaOEEhLyEsIAC8ivLuwqh0ambhYeMO9O8640Otusd+Ga166zIOZggDWmgHxH4Y?=
 =?us-ascii?q?BgyE6D6zBwS+/I35kfxfGY0RCKVzP9jFenr8D2lppIZTAUHmqj1yfkAJRdabF1?=
 =?us-ascii?q?fYYOEW2uOdG4xs1ih57xXH5V7ESjB1Ia18CzYxqdclv90RdW1UsJu3ynmDK0wC?=
 =?us-ascii?q?BunDEts6WQwjbOw+PkdBccPm5LRW9ijUrjIISujtAaWlSoYBYtlBe/+Un6wK1b?=
 =?us-ascii?q?rrxlL2bPWUdIYzT2L2Z6X6qwt7qOec5O5IkzsSVKVuSxelSaSr/7oxsH3CLvBW?=
 =?us-ascii?q?pexDYndz60vpX1hQB1iGWYLHxrtnrWZdlwxQvD5NzbXfNR3CAJRDN7iTnUAViw?=
 =?us-ascii?q?JcKp8s+Xl5fAs+C+UXyuVptIfCnvzIOAsja75GJwDR2+mfCzhsPoEQwg3SDn0N?=
 =?us-ascii?q?lqUD3CrAzgbYnzy6S6LeVnc1FoBVDm7Mp2AIN+koo2hJwL3Xgah5OV/WcIkGvp?=
 =?us-ascii?q?MNVb377+Y2QJRTIR39HV5w3l0lV5Ln2V34L5Smmdwsx5atm5eGwW2zgx78BXCK?=
 =?us-ascii?q?iO6rxEkjB4ol65rQLXfPh8kS0Ryfoo6H4Gne4JvBAhwTmaArAXBUNYJzDjlwyU?=
 =?us-ascii?q?79Ciq6VafGOvcbmz1EVkh9ygAq+NohpAWHnnYJctBjF/7t9wMF/X1H3z64fkeM?=
 =?us-ascii?q?TfbN4Jtx2UlQvAgPZRKJ4rivUKgi9nM3rnvXI50+47kQBu3ZaisYibLGVt+bi1?=
 =?us-ascii?q?Ax9COT3zesMT4SrtjadFk8aS3oCvGIhhGzoRUJvpS/KoDCwdtfD9OwmSFz08r2?=
 =?us-ascii?q?+RGaDDEg+H9Edms3XPHoiwOH6NI3kZychiSAOZJExCmw0UWDQ6npgkFgGl3sDh?=
 =?us-ascii?q?cUF55iwP6V78sBdD1uVoNxznWGfFuAiocis0SISYLBdO7AFN/ULVPtKF7u5pAy?=
 =?us-ascii?q?FU5J6hrBGOKmyGYQRHF3oJV1eAB1DiOLmu+NbB//KZBuq4M/vBf7GOpfZCWPeP?=
 =?us-ascii?q?wJKlypFm8CqUNsWTInliCOU220pEXXBkAsTZhi8ASyoNmyLWaM6bohi89zZzrs?=
 =?us-ascii?q?C+9vTrRQ3u6ZGOC7tULdVg5RS2jb2fOO6XgSZzMSxY2Y8UxX/U1Lgf20YfiyFw?=
 =?us-ascii?q?eDmsErQAti/NQLjTmq9NCB4bZD18NNFV76InxQRNPc/bitXo1r93lPI1ClFFVU?=
 =?us-ascii?q?D/lcGtf8AFP2a9NFbfDkaRKLuGPSHLw93wYa6kU7JQkf5btweutjebCUPjOjWD?=
 =?us-ascii?q?miLtVxCuN+FMkS6aMAZfuIG7bhZiF2zjQMj6ZR28Nd99lSc2zqEshnPWKW4cNi?=
 =?us-ascii?q?Bxc19Mrr2V9y9Xnu9zFHBB7nV7K+mJgCKZ7+jeKpYLvvpnGCV0l+RG4Hskz7tZ?=
 =?us-ascii?q?9j1LRPtwmCHKtN5hv0mmkvWTyjpgSBdPqixEhISOvUVjP6XW7phBWXbe8xIL4m?=
 =?us-ascii?q?WdEBAKp9pjCt3ytKFc0NnPlKTvKDhc99LY59cTB8/RKJHPDH10ZRbtFTLaCxEJ?=
 =?us-ascii?q?ZSSmOWHWmwpWl/TEsjXBrJc1gortlYIDDLRSAg8bDPQfXw5aEd1KAIo/HgMtj7?=
 =?us-ascii?q?+Wlo9CrS6upQfQSd8cvo3YW/O6AejmNzuYy7JDYk1bkvvDMY0PO9ijiARZYV5g?=
 =?us-ascii?q?kdGSFg=3D=3D?=
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A0AdAAAzEPhbh0O0hNFjHgEGBwaBUQkLA?=
 =?us-ascii?q?YJpgQInCpgHgiGXJxSBXC8LCAGIWiI0CQ0BAwEBAQEBAQIBEwEBAQgNCQgpIwy?=
 =?us-ascii?q?CNiKCbAJ2BgkCUANaAQ0KgxwBggEFCqg1ihQFh16EK4IWgRGCZIMwgVoLhXICi?=
 =?us-ascii?q?xGECHaPcwcCAoZ6gy2HBgIWkQiCeYpKjDOCDXCDPIJQiEyFSzIBATEBgQMBAQE?=
 =?us-ascii?q?OiVWBH4EfAQE?=
X-IPAS-Result: =?us-ascii?q?A0AdAAAzEPhbh0O0hNFjHgEGBwaBUQkLAYJpgQInCpgHgiG?=
 =?us-ascii?q?XJxSBXC8LCAGIWiI0CQ0BAwEBAQEBAQIBEwEBAQgNCQgpIwyCNiKCbAJ2BgkCU?=
 =?us-ascii?q?ANaAQ0KgxwBggEFCqg1ihQFh16EK4IWgRGCZIMwgVoLhXICixGECHaPcwcCAoZ?=
 =?us-ascii?q?6gy2HBgIWkQiCeYpKjDOCDXCDPIJQiEyFSzIBATEBgQMBAQEOiVWBH4EfAQE?=
X-IronPort-AV: E=Sophos;i="5.56,270,1539673200"; 
   d="scan'208";a="54541100"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from vger.kernel.org ([209.132.180.67])
  by mtab.intel.com with ESMTP; 23 Nov 2018 06:40:58 -0800
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S2440042AbeKXBWO (ORCPT <rfc822;like.xu@linux.intel.com>
        + 23 others); Fri, 23 Nov 2018 20:22:14 -0500
Received: from szxga07-in.huawei.com ([45.249.212.35]:46505 "EHLO huawei.com"
        rhost-flags-OK-OK-OK-FAIL) by vger.kernel.org with ESMTP
        id S2388198AbeKXBWO (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
        Fri, 23 Nov 2018 20:22:14 -0500
Received: from DGGEMS402-HUB.china.huawei.com (unknown [172.30.72.58])
        by Forcepoint Email with ESMTP id E7530DDE0EE3A;
        Fri, 23 Nov 2018 22:37:39 +0800 (CST)
Received: from linux-ioko.site (10.71.200.31) by
 DGGEMS402-HUB.china.huawei.com (10.3.19.202) with Microsoft SMTP Server id
 14.3.408.0; Fri, 23 Nov 2018 22:37:35 +0800
From: "Wei Hu (Xavier)" <xavier.huwei@huawei.com>
To: <dledford@redhat.com>, <jgg@ziepe.ca>
CC: <linux-rdma@vger.kernel.org>, <xavier.huwei@huawei.com>,
        <lijun_nudt@163.com>, <oulijun@huawei.com>,
        <charles.chenxin@huawei.com>, <liuyixian@huawei.com>,
        <zhangxiping3@huawei.com>, <linuxarm@huawei.com>,
        <linux-kernel@vger.kernel.org>, <xavier_huwei@163.com>
Subject: [PATCH rdma-next 0/3] RDMA/hns: Updates for reset process of roce device in hip08
Date: Fri, 23 Nov 2018 23:14:22 +0800
Message-ID: <1542986065-44265-1-git-send-email-xavier.huwei@huawei.com>
X-Mailer: git-send-email 1.9.1
MIME-Version: 1.0
Content-Type: text/plain
X-Originating-IP: [10.71.200.31]
X-CFilter-Loop: Reflected
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

Hi, Doug and Janson

This series mainly include updates for reset process of roce device
in hip08.
One patch adds support for reset and loading or unloading driver occur
simultaneously to ensure work normally, one stops sending mailbox&cmq&
doorbell when reset occured or reset is occuring, the last one modifies
the name of hns RoCE device's name in order to ensure that the name is
consistent before and after reset.

This series relies on the the new interfaces in hns NIC driver those
had been accepted by David, the related commit as below:
https://git.kernel.org/pub/scm/linux/kernel/git/davem/net-next.git 
commit cb7ea80c6dfda472a068d40f4f9755d034b2dfde

Best Regards
Xavier


Wei Hu (Xavier) (3):
  RDMA/hns: Add support for reset and loading or unloading driver occur
    simultaneously
  RDMA/hns: Stop sending mailbox&cmq&doorbell when reset occured or is
    occuring
  RDMA/hns: Modify hns RoCE device's name

 drivers/infiniband/hw/hns/hns_roce_cmd.c    |  32 ++-
 drivers/infiniband/hw/hns/hns_roce_device.h |  30 +++
 drivers/infiniband/hw/hns/hns_roce_hw_v2.c  | 323 ++++++++++++++++++++++++++--
 drivers/infiniband/hw/hns/hns_roce_hw_v2.h  |  21 ++
 drivers/infiniband/hw/hns/hns_roce_main.c   |   4 +-
 5 files changed, 382 insertions(+), 28 deletions(-)

-- 
1.9.1

