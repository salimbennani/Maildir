Return-Path: <qemu-devel-bounces+like.xu=linux.intel.com@nongnu.org>
Delivered-To: unknown
Received: from linux.intel.com (10.54.29.200:995) by likexu-workstation with
  POP3-SSL; 23 Nov 2018 15:31:32 -0000
X-Original-To: like.xu@linux.intel.com
Delivered-To: like.xu@linux.intel.com
Received: from FMSMGA003.fm.intel.com (fmsmga003.fm.intel.com [10.253.24.29])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by linux.intel.com (Postfix) with ESMTPS id B2C8A58040F
	for <like.xu@linux.intel.com>; Thu, 22 Nov 2018 22:30:00 -0800 (PST)
Received: from fmsmga101.fm.intel.com ([10.1.193.65])
  by FMSMGA003-1.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384; 22 Nov 2018 22:30:00 -0800
IronPort-PHdr: =?us-ascii?q?9a23=3A/kVzYxSJ0O6GojEgaP4K7D6Ledpsv+yvbD5Q0YIu?=
 =?us-ascii?q?jvd0So/mwa67ZBKBt8tkgFKBZ4jH8fUM07OQ7/iwHzRYqb+681k6OKRWUBEEjc?=
 =?us-ascii?q?hE1ycBO+WiTXPBEfjxciYhF95DXlI2t1uyMExSBdqsLwaK+i764jEdAAjwOhRo?=
 =?us-ascii?q?LerpBIHSk9631+ev8JHPfglEnjWwba9xIRmssQndqtQdjJd/JKo21hbHuGZDdf?=
 =?us-ascii?q?5MxWNvK1KTnhL86dm18ZV+7SleuO8v+tBZX6nicKs2UbJXDDI9M2Ao/8LrrgXM?=
 =?us-ascii?q?TRGO5nQHTGoblAdDDhXf4xH7WpfxtTb6tvZ41SKHM8D6Uaw4VDK/5KpwVhTmlD?=
 =?us-ascii?q?kIOCI48GHPi8x/kqRboA66pxdix4LYeZyZOOZicq/Ye94RWGhPUdtLVyFZDI2y?=
 =?us-ascii?q?b5UBAekPPelXs4byulkBohWjCwm0Bu7hyDBFimL40KEmzeshChrL3AM8E98Uqn?=
 =?us-ascii?q?nYsM/4OLkUXOuozKfI1zLDb/ZO1Dnz8ofIbBEhruyRVrxxcMre0lIvFwTDjl6N?=
 =?us-ascii?q?roHqIima1voMs2eG9OdgWuOvhHU8qwF2pDij3NojipPOhoIN0V/L6z92wJwvKd?=
 =?us-ascii?q?25VUF3e8SrEIZJuiycKoB4TMQiQ2RytyY7zL0LoZm7fSkOyJs93BHfcOaLc4+S?=
 =?us-ascii?q?4hLsTOqePC14hHV9eL2kmRm961Kgxvf9Vsap1ltBsylLksHUu3wTyxDe6dKLRu?=
 =?us-ascii?q?Zg8kqiwzqDyQ7e5+FeLUwpl6fXM4AtzqI+m5YJrEjPAzX6lUfrgKOMa0kp/PWj?=
 =?us-ascii?q?5f79bbX8vJCcMpd5igHgPaQqncyyGeA4MgkVX2iH4uSwzrLj/UvkQLlQif02iK?=
 =?us-ascii?q?bZvIjbJcQduKG5HxdY3pg/5xu8FTuqzckUkHodIF5bdh+Kj5LlN0zMLfzgCPew?=
 =?us-ascii?q?mVWskDNlx/DcOb3hB43ALmHdn7fkYLZx8lNTxxQtzd9B45JYE6oOIPXuWk/3qN?=
 =?us-ascii?q?PXEAQ5Pwuww+bmC9VyyJkSWG2SAqKBNKPSsFmI5v8gIuWWZY8Vvir9JOYh5/L0?=
 =?us-ascii?q?kXA5nlodcLKv3ZsQbnC4EfJmI1iDbXrrmNcBHn8GvhAiQ+zylF2CTTlTam62X6?=
 =?us-ascii?q?I95TE0FpiqDIjeRo22hLyB3SG7HoBZZ2xcC1CMF2voeJuAW/sWdC2SJcphwXQ5?=
 =?us-ascii?q?U6O8QdohyQ22r129jL5mNfbPvCsfs53lyZ5y/eKUkBgz8Tl9CYOay32MSGdv2X?=
 =?us-ascii?q?oFQiJz0K1hrEgu91GYzKIthvVZEcBUtepEVxp/OZPCwug/Ed3rRw/aYv+PT1Cp?=
 =?us-ascii?q?RMjgBis+Gcksyd0DaFooBtO5kxrY1DCrCbJGq7veLpEy8KvZ3n65B8tn0XvAz6?=
 =?us-ascii?q?IhilgqXoMbP2CghoZ8+hLVCoqPmF+QjKarc6ta2zTCojSt122L6W1RTg98GYrE?=
 =?us-ascii?q?V2sYYAOCod3n50/qQL6kErMhdAdbztaIJ6JQLNzly1xbEqSwcO/Can68zj/jTS?=
 =?us-ascii?q?2DwamBOc+zIz0Q?=
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A0AMAAACnfdbhxHrdtBiFgYBAQEEAQEHB?=
 =?us-ascii?q?AEBLoEjBwEBCwGBMIE5gSmMEV+LH4INlzuBcAUNBRgHDYhSIjQJDQEDAQEBAQE?=
 =?us-ascii?q?BAgETAQEBCgsJCCkjDII2BQIDGgEGglwBAgMBAj0BAQQKKQECAwECBgEBCg4KC?=
 =?us-ascii?q?R0IAwELBRgxGASDGAGCAAEBBKY7gh+CdgEBBYcMBwiCbYgAgRwXgX+BEYMSilm?=
 =?us-ascii?q?JE5ZxCYIghFyKKAsYX3pNjmKJbYYiiCGBRoINMxoIFxmDJwmCEoInhlqFUi0xg?=
 =?us-ascii?q?QQDiiuBdwEB?=
X-IPAS-Result: =?us-ascii?q?A0AMAAACnfdbhxHrdtBiFgYBAQEEAQEHBAEBLoEjBwEBCwG?=
 =?us-ascii?q?BMIE5gSmMEV+LH4INlzuBcAUNBRgHDYhSIjQJDQEDAQEBAQEBAgETAQEBCgsJC?=
 =?us-ascii?q?CkjDII2BQIDGgEGglwBAgMBAj0BAQQKKQECAwECBgEBCg4KCR0IAwELBRgxGAS?=
 =?us-ascii?q?DGAGCAAEBBKY7gh+CdgEBBYcMBwiCbYgAgRwXgX+BEYMSilmJE5ZxCYIghFyKK?=
 =?us-ascii?q?AsYX3pNjmKJbYYiiCGBRoINMxoIFxmDJwmCEoInhlqFUi0xgQQDiiuBdwEB?=
X-IronPort-AV: E=Sophos;i="5.56,268,1539673200"; 
   d="asc'?scan'208";a="63651003"
X-Amp-Result: UNKNOWN
X-Amp-Original-Verdict: FILE UNKNOWN
X-Amp-File-Uploaded: False
Received: from lists.gnu.org ([208.118.235.17])
  by mga01b.intel.com with ESMTP/TLS/AES256-SHA; 22 Nov 2018 22:29:59 -0800
Received: from localhost ([::1]:50609 helo=lists.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <qemu-devel-bounces+like.xu=linux.intel.com@nongnu.org>)
	id 1gQ4yU-0001Cn-JQ
	for like.xu@linux.intel.com; Fri, 23 Nov 2018 01:29:58 -0500
Received: from eggs.gnu.org ([2001:4830:134:3::10]:52463)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <dgibson@ozlabs.org>) id 1gQ4ra-0003Ct-0A
	for qemu-devel@nongnu.org; Fri, 23 Nov 2018 01:22:51 -0500
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <dgibson@ozlabs.org>) id 1gQ4rW-0002lJ-H6
	for qemu-devel@nongnu.org; Fri, 23 Nov 2018 01:22:49 -0500
Received: from ozlabs.org ([203.11.71.1]:34725)
	by eggs.gnu.org with esmtps (TLS1.0:DHE_RSA_AES_256_CBC_SHA1:32)
	(Exim 4.71) (envelope-from <dgibson@ozlabs.org>)
	id 1gQ4rS-0002RL-J2; Fri, 23 Nov 2018 01:22:44 -0500
Received: by ozlabs.org (Postfix, from userid 1007)
	id 431R7D5mKwz9sCh; Fri, 23 Nov 2018 17:22:32 +1100 (AEDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
	d=gibson.dropbear.id.au; s=201602; t=1542954152;
	bh=Ul6zRldg9qd4lC0IHUYi+L+qrddob6sgq2rkfRULE9Q=;
	h=Date:From:To:Cc:Subject:References:In-Reply-To:From;
	b=YOdNSxoX9XvU833H4AoIB+rR4pFxEKAslOhGSIPUD44TbIi5p80AH7uKzJ23zoZ6h
	5cj+ci6BfAImZRZNHdedK1fuWH2oCeAS6Kv9KfGFAvZ1mflIiIpKYf9dVrAx0WTqyC
	VzYgMpVehuPhC32Jpn/1UaEQVg/C22VdQm1OK5OI=
Date: Fri, 23 Nov 2018 12:10:05 +1100
From: David Gibson <david@gibson.dropbear.id.au>
To: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Message-ID: <20181123011005.GU10448@umbus.fritz.box>
References: <20181116105729.23240-1-clg@kaod.org>
	<20181116105729.23240-5-clg@kaod.org>
	<20181122044450.GF10448@umbus.fritz.box>
	<121d4f915a03c2e734feebceda023947aedb78a3.camel@kernel.crashing.org>
MIME-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha256;
	protocol="application/pgp-signature"; boundary="3pZQ0wszfDg7ZRO+"
Content-Disposition: inline
In-Reply-To: <121d4f915a03c2e734feebceda023947aedb78a3.camel@kernel.crashing.org>
User-Agent: Mutt/1.10.1 (2018-07-13)
X-detected-operating-system: by eggs.gnu.org: GNU/Linux 2.2.x-3.x [generic]
	[fuzzy]
X-Received-From: 203.11.71.1
Subject: Re: [Qemu-devel] [PATCH v5 04/36] ppc/xive: introduce the
 XiveRouter model
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.21
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
	<mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <http://lists.nongnu.org/archive/html/qemu-devel/>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
	<mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Cc: qemu-ppc@nongnu.org, =?iso-8859-1?Q?C=E9dric?= Le Goater <clg@kaod.org>,
	qemu-devel@nongnu.org
Errors-To: qemu-devel-bounces+like.xu=linux.intel.com@nongnu.org
Sender: "Qemu-devel" <qemu-devel-bounces+like.xu=linux.intel.com@nongnu.org>


--3pZQ0wszfDg7ZRO+
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

On Thu, Nov 22, 2018 at 05:50:07PM +1100, Benjamin Herrenschmidt wrote:
> On Thu, 2018-11-22 at 15:44 +1100, David Gibson wrote:
> >=20
> > Sorry, didn't think of this in my first reply.
> >=20
> > 1) Does the hardware ever actually write back to the EAS?  I know it
> > does for the END, but it's not clear why it would need to for the
> > EAS.  If not, we don't need the setter.
>=20
> Nope, though the PAPR model will via hcalls

Right, bit AIUI the set_eas hook is about abstracting PAPR vs bare
metal details.  Since the hcall knows it's PAPR it can just update the
backing information for the EAS directly, and no need for an
abstracted hook.

>=20
> >=20
> > 2) The signatures are a bit odd here.  For the setter, a value would
> > make sense than a (XiveEAS *), since it's just a word.  For the getter
> > you could return the EAS value directly rather than using a pointer -
> > there's already a valid bit in the EAS so you can construct a value
> > with that cleared if the lisn is out of bounds.
>=20

--=20
David Gibson			| I'll have my music baroque, and my code
david AT gibson.dropbear.id.au	| minimalist, thank you.  NOT _the_ _other_
				| _way_ _around_!
http://www.ozlabs.org/~dgibson

--3pZQ0wszfDg7ZRO+
Content-Type: application/pgp-signature; name="signature.asc"

-----BEGIN PGP SIGNATURE-----

iQIzBAEBCAAdFiEEdfRlhq5hpmzETofcbDjKyiDZs5IFAlv3U20ACgkQbDjKyiDZ
s5JZ7hAAmMzFWMb7lZ+lcf9n+mWzwaoI1ITIy9hAvx+Q8DUDL/9Q18HK4HKW18qe
1et2aBF5Rb1lgD87loiwwFx25eAPABsH9mQz3mylw2G22VMLxjYDIy07Crswcr7b
FI1ihgwOMKOUJML2+oAWG61ggTyYS/EndLPhUfQ2B1/iT7k7WbXFs027srqc1MrN
xOgkI5NzQglWcFjwPrmAQK8/SaSfhXalwv9pwWcHOO6j3Kwb0OGy2diiqe14D6pi
OeDs1o7ugoDLRraAS1nJJVRZQ6fHjhtonQrf7giCAAUwBxYL7fJ+sMcQnrR/Du2q
Rafrb+Qjl2PvQ54nhRHfkm7BpVfhFf9B5vLoa+nSH/U4gm6nhXNCgbxPq1s0rUoV
LRZ/WIDpUaTvRN0JfjP4VdA+VnEqns/9oLCt+/gnq6Mggs5TRvQBFDFbuYTmIBbF
3YPI2Kjss5b3f64lVxGRvGpFkMtRE+6LSm62jxFywA0Nm8hfBT+oLKPWUVHIE5NK
YvYeFiyYIP+1+CceoiPa578yFG3NLi85RUvzn0j+S6cjCW39ano8TQj9Sx64Pfc1
36G9xNozW4t0Xgv/hUIWQfnbJ7xSxyvjMjoiVeuBMVfEXBUYTAFjJAlFjSwyoAmy
7x+ifPQn/MPwcxIGgMmfmor+uOIBolDm0uXKQfDl+XeYDvCUXqs=
=L+AL
-----END PGP SIGNATURE-----

--3pZQ0wszfDg7ZRO+--

