Return-Path: <qemu-devel-bounces+like.xu=linux.intel.com@nongnu.org>
Delivered-To: unknown
Received: from linux.intel.com (10.54.29.200:995) by likexu-workstation with
  POP3-SSL; 25 Nov 2018 22:12:46 -0000
X-Original-To: like.xu@linux.intel.com
Delivered-To: like.xu@linux.intel.com
Received: from orsmga003.jf.intel.com (orsmga003.jf.intel.com [10.7.209.27])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by linux.intel.com (Postfix) with ESMTPS id A8245580478
	for <like.xu@linux.intel.com>; Sun, 25 Nov 2018 00:22:54 -0800 (PST)
Received: from fmsmga104.fm.intel.com ([10.1.193.100])
  by orsmga003-1.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384; 25 Nov 2018 00:22:54 -0800
IronPort-PHdr: =?us-ascii?q?9a23=3ALWM/XBbawOlKysChCuALqtz/LSx+4OfEezUN459i?=
 =?us-ascii?q?sYplN5qZpsy8Yx7h7PlgxGXEQZ/co6odzbaO4+a4ASQp2tWoiDg6aptCVhsI24?=
 =?us-ascii?q?09vjcLJ4q7M3D9N+PgdCcgHc5PBxdP9nC/NlVJSo6lPwWB6nK94iQPFRrhKAF7?=
 =?us-ascii?q?Ovr6GpLIj8Swyuu+54Dfbx9HiTahYr5+Ngm6oRnMvcQKnIVuLbo8xAHUqXVSYe?=
 =?us-ascii?q?RWwm1oJVOXnxni48q74YBu/SdNtf8/7sBMSar1cbg2QrxeFzQmLns65Nb3uhnZ?=
 =?us-ascii?q?TAuA/WUTX2MLmRdVGQfF7RX6XpDssivms+d2xSeXMdHqQb0yRD+v9LlgRgP2hy?=
 =?us-ascii?q?gbNj456GDXhdJ2jKJHuxKquhhzz5fJbI2JKPZye6XQds4YS2VcRMZcTyJPDIOi?=
 =?us-ascii?q?YYUMAeoOMvpXoJT/qFQAsBW+HQuhCuHgxzNViHL6wbM10/86HAHJwAAtBcgDvG?=
 =?us-ascii?q?jOodnrMqoZTOC7zLPPzTXGd/5Y1y3y6JbJch88vPqCXLNwftHKyUkoEQPOk1Kd?=
 =?us-ascii?q?ppH/MDOL1+QCrnOW7+VhVe20kG4nrAdxriKyycc2jYnJnpkaxU7e+iVj2oo1JM?=
 =?us-ascii?q?C3RFRhbt65CZZdsTyROYVxQsMnWW5ouSA6x6UBuZ+6eCgF0o8oxwXFZ/yAaYiI?=
 =?us-ascii?q?7QrvW/uLITd/nHJqY6ywiAyo8US6y+3zS8+520tJoCpditTAqGwB2h/J5sSaV/?=
 =?us-ascii?q?dw/V2t1SiB2g3T8O1IPEI5mbLFJ5Mu3rI8i58evErHEyPqhEn7ibGae0A59uWt?=
 =?us-ascii?q?7unrfLPrrYKGOYBukAHxKKEul9S/AesmNggOWHCW+eC91L344U35W69GjvIwkq?=
 =?us-ascii?q?nEqpzaIt4bpqGhDw9U1IYs9Qq/Ai+43NgEnnQLNk9JdA+EgoTzJV3DLvD1Ae2i?=
 =?us-ascii?q?j1muiDtrwurJPrzlApXDNHjDl7LhcK5k60FCzQoz0MlT6I9KBbEfPv3zXlb9u8?=
 =?us-ascii?q?ffDh8kNQy73/joCM562oMaWGKPAbGWPLndsF+V/u8vJ+iMZIkIuDfyMfQl5vju?=
 =?us-ascii?q?jWMnll8ZZ6WmwZwXaHWjE/RgJEWZZ3XsgtEcEWsQuQo+VuPqhEWYUTFPf3ayQ7?=
 =?us-ascii?q?485jYjBYKiDIfDRZ6ijKaO3SemBZBWYmFGClaREXbnbYmEWvEMaD6MLc9liDAL?=
 =?us-ascii?q?Sb+hS4pynSyorxLwnrp7MvLPqGpfsZP4yMMz4erVmhcvsztuAIOY2mCJSmhy2W?=
 =?us-ascii?q?QQWz4x2rs4uEF41xKP3LZ1h69lE8dO7aZMWwY+KZmO1uF/FpX+VxzMepKTRU+7?=
 =?us-ascii?q?T866KTc2SN033pkJeUkqAMiojB3Iw3+3BaQInaeAHp0+//Hg2C3JKtpw0T7j3b?=
 =?us-ascii?q?gtgl0iCp9XOHGrnOh6/hnfCorNu0GYka+wcuIbxiGbp0mZym/bkEhGUQI4fqTP?=
 =?us-ascii?q?RncZLh/apMr46mvNTrW1DrJhPhFG0cSPI7EMa9GvhEgQF6SrA8jXf2/kwzT4Ph?=
 =?us-ascii?q?2P3L7ZKdOyI2g=3D?=
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A0ABAACGW/pbhxHrdtBhFgQBAQEBAQIBA?=
 =?us-ascii?q?QEBBwIBAQEBgVEFAQEBAQsBgTCBOYEpjBFfiyCCDXqWQoFuBw0FGAcNiFoiNAk?=
 =?us-ascii?q?NAQMBAQEBAQECARMBAQEKCwkIGw4jDII2BQIDGgEGglwBAgMBAj0BAQQKKQECA?=
 =?us-ascii?q?wECBgEBChgJHQgDAQsFGDETBQSDGAGCAQEEpQqCH4J2AQEFhwwHCIJtiACBHBe?=
 =?us-ascii?q?Bf4EQAYJdNYRig1GCJosTlHEJgiCEXIooCxhfgUeOYpAPiCGBRoINMxoIFxmDJ?=
 =?us-ascii?q?wmCEgwXggSGWoVSLTGBBAOKdIF3AQE?=
X-IPAS-Result: =?us-ascii?q?A0ABAACGW/pbhxHrdtBhFgQBAQEBAQIBAQEBBwIBAQEBgVE?=
 =?us-ascii?q?FAQEBAQsBgTCBOYEpjBFfiyCCDXqWQoFuBw0FGAcNiFoiNAkNAQMBAQEBAQECA?=
 =?us-ascii?q?RMBAQEKCwkIGw4jDII2BQIDGgEGglwBAgMBAj0BAQQKKQECAwECBgEBChgJHQg?=
 =?us-ascii?q?DAQsFGDETBQSDGAGCAQEEpQqCH4J2AQEFhwwHCIJtiACBHBeBf4EQAYJdNYRig?=
 =?us-ascii?q?1GCJosTlHEJgiCEXIooCxhfgUeOYpAPiCGBRoINMxoIFxmDJwmCEgwXggSGWoV?=
 =?us-ascii?q?SLTGBBAOKdIF3AQE?=
X-IronPort-AV: E=Sophos;i="5.56,277,1539673200"; 
   d="asc'?scan'208";a="52506355"
X-Amp-Result: UNKNOWN
X-Amp-Original-Verdict: FILE UNKNOWN
X-Amp-File-Uploaded: False
Received: from lists.gnu.org ([208.118.235.17])
  by mtab.intel.com with ESMTP/TLS/AES256-SHA; 25 Nov 2018 00:22:48 -0800
Received: from localhost ([::1]:59104 helo=lists.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <qemu-devel-bounces+like.xu=linux.intel.com@nongnu.org>)
	id 1gQpgm-0000Vd-1j
	for like.xu@linux.intel.com; Sun, 25 Nov 2018 03:22:48 -0500
Received: from eggs.gnu.org ([2001:4830:134:3::10]:55071)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <dgibson@ozlabs.org>) id 1gQpgN-0000VV-Rf
	for qemu-devel@nongnu.org; Sun, 25 Nov 2018 03:22:24 -0500
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <dgibson@ozlabs.org>) id 1gQpgN-0000wM-3D
	for qemu-devel@nongnu.org; Sun, 25 Nov 2018 03:22:23 -0500
Received: from ozlabs.org ([2401:3900:2:1::2]:57175)
	by eggs.gnu.org with esmtps (TLS1.0:DHE_RSA_AES_256_CBC_SHA1:32)
	(Exim 4.71) (envelope-from <dgibson@ozlabs.org>)
	id 1gQpgM-0000tr-1G; Sun, 25 Nov 2018 03:22:23 -0500
Received: by ozlabs.org (Postfix, from userid 1007)
	id 432jhS06VBz9s3C; Sun, 25 Nov 2018 19:22:15 +1100 (AEDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
	d=gibson.dropbear.id.au; s=201602; t=1543134136;
	bh=shZTMkH7Muz7Oz7EHWSgIMEWskmG6o5uRLnxOBaW1BE=;
	h=Date:From:To:Cc:Subject:References:In-Reply-To:From;
	b=UMPj7ZWLvToyBu/JEWidEZMcVgNE+dMe1dkRtj7v4y0vvMYqYeAQ77nw8qR7i9yCI
	fIZ24yGcy4TC7+jHAAEfyFVb3wLevGagyi7xanbG92KgrRvEiURemacLV3Ofhyzo0U
	rjBI2COE3z78X2Cz6T7gUvTXdbxdC1DnVkTltinw=
Date: Sun, 25 Nov 2018 19:22:10 +1100
From: David Gibson <david@gibson.dropbear.id.au>
To: Peter Maydell <peter.maydell@linaro.org>
Message-ID: <20181125082210.GD2251@umbus.fritz.box>
References: <20181108121646.26173-1-david@gibson.dropbear.id.au>
	<20181108121646.26173-2-david@gibson.dropbear.id.au>
	<CAFEAcA9XbnnpTKDJQMHqxfChBaKp5j71gsxUYOCo2SQXkOZ9DQ@mail.gmail.com>
	<CAFEAcA_=jkQjVbZEvNd_5wboHo2poHUwiVSC66u9v5JGQDB6cw@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha256;
	protocol="application/pgp-signature"; boundary="iVCmgExH7+hIHJ1A"
Content-Disposition: inline
In-Reply-To: <CAFEAcA_=jkQjVbZEvNd_5wboHo2poHUwiVSC66u9v5JGQDB6cw@mail.gmail.com>
User-Agent: Mutt/1.10.1 (2018-07-13)
X-detected-operating-system: by eggs.gnu.org: Genre and OS details not
	recognized.
X-Received-From: 2401:3900:2:1::2
Subject: Re: [Qemu-devel] [PULL 01/22] target/ppc: add external PID support
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.21
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
	<mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <http://lists.nongnu.org/archive/html/qemu-devel/>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
	<mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Cc: Laurent Vivier <lvivier@redhat.com>, Roman Kapl <rka@sysgo.com>,
	Alexander Graf <agraf@suse.de>, QEMU Developers <qemu-devel@nongnu.org>,
	Greg Kurz <groug@kaod.org>, qemu-ppc <qemu-ppc@nongnu.org>
Errors-To: qemu-devel-bounces+like.xu=linux.intel.com@nongnu.org
Sender: "Qemu-devel" <qemu-devel-bounces+like.xu=linux.intel.com@nongnu.org>


--iVCmgExH7+hIHJ1A
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

On Mon, Nov 19, 2018 at 04:39:29PM +0000, Peter Maydell wrote:
> On 15 November 2018 at 10:22, Peter Maydell <peter.maydell@linaro.org> wr=
ote:
> > Hi; Coverity reports an issue (CID1396864) with this function:
> >
> >> +/* dcbfep (external PID dcbf) */
> >> +static void gen_dcbfep(DisasContext *ctx)
> >> +{
> >> +    /* XXX: specification says this is treated as a load by the MMU */
> >> +    TCGv t0;
> >> +    CHK_SV;
> >> +    gen_set_access_type(ctx, ACCESS_CACHE);
> >> +    t0 =3D tcg_temp_new();
> >> +    gen_addr_reg_index(ctx, t0);
> >> +    tcg_gen_qemu_ld_tl(t0, t0, PPC_TLB_EPID_LOAD, DEF_MEMOP(MO_UB));
> >> +    tcg_temp_free(t0);
> >> +}
> >
> > It says that the gen_set_access_type() call is unreachable. I think
> > this is a false positive (the code is unreachable, but only if
> > CONFIG_USER_ONLY is defined). On the other hand, all the other
> > similar gen_* functions in this file that use CHK_SV seem to have
> > a pattern of
> >
> > #if defined(CONFIG_USER_ONLY)
> >     GEN_PRIV;
> > #else
> >     TCGv t0;
> >     CHK_SV;
> >     [etc]
> > #endif
> >
> > so maybe we should do that here too for consistency?
>=20
> I've marked the issue as a false-positive in Coverity (since it is,
> and that's what we've done with some equivalent target/ppc Coverity
> issues with other functions previously). I'll let you decide whether
> you want to prefer "with ifdefs" or "without". (TBH I think the
> "without" style is better here.)

I tend to agree, but are you ok dealing with the whole slew of
Coverity false positives it will create if we move to that style?
AFAIK, I don't have the power to deal with it from my end.

--=20
David Gibson			| I'll have my music baroque, and my code
david AT gibson.dropbear.id.au	| minimalist, thank you.  NOT _the_ _other_
				| _way_ _around_!
http://www.ozlabs.org/~dgibson

--iVCmgExH7+hIHJ1A
Content-Type: application/pgp-signature; name="signature.asc"

-----BEGIN PGP SIGNATURE-----

iQIzBAEBCAAdFiEEdfRlhq5hpmzETofcbDjKyiDZs5IFAlv6W68ACgkQbDjKyiDZ
s5Jpfg//ahMEgv046/BrBWw4M+AvfCXrywyPo5wi8OXh5bwUcxr5qUsiOXwSra91
TRC6XX+zBGZMlljoC3O6T0ZjXSMEEg29OUEHyvi6FxA0dvRMuBE4w0xSxZ5ztUtz
OU2ysDhTg6KkcuiyhhdaTQ6j8Tdb4nUGi4orgABZoAv4d5YbgfZewGSIgYYPba/R
TKvYg88nRf4EqW4qhHaxJYe2EomL2+CtYIzeqy8vdikzJkPGKDO1bYhGajXopi4J
IBdrAE3MdRMR55cPf2dLlxwIForEw9q9cV8XdEj2Ehh24Y+tDl04Hmwhj9aZsTpl
fov9N2k11bs3CyUKc+sysjs6hlDF5YTnNtirxgNfcgZlkyAPYSXo/afH/PggXgPJ
IHwtkM/rudm6oqln+IZ8zkxjq9HDGEowiW1O+MqpsAThDpNprTbZ/G81RLqMSUgZ
blDcYTiVl4sF92DT2HBd31U/eOq6dJC9VK/oZuGN2ff16g3UesaquzE700RTREAN
rqhsbBmUhWnmyTOFjUWH2CrdodmyBMlIweWOvj8GlW/UUAueF+pI/Ou7cwYKqH4q
90W13hmpeoRGe0T7p3AL3dRs5bUBjKnkonUp0wj97h3oeS5Bqtch4K6rgv1kithJ
6NcD6cQiVHzfmVScr6tmmVxd3UGPYq6CSuKcPYhkLQca2Sv8qJc=
=GXFU
-----END PGP SIGNATURE-----

--iVCmgExH7+hIHJ1A--

