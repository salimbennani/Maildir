Return-Path: <qemu-devel-bounces+like.xu=linux.intel.com@nongnu.org>
Delivered-To: unknown
Received: from linux.intel.com (10.54.29.200:995) by likexu-workstation with
  POP3-SSL; 23 Nov 2018 23:32:43 -0000
X-Original-To: like.xu@linux.intel.com
Delivered-To: like.xu@linux.intel.com
Received: from orsmga006.jf.intel.com (orsmga006.jf.intel.com [10.7.209.51])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by linux.intel.com (Postfix) with ESMTPS id 6B3F958037D
	for <like.xu@linux.intel.com>; Fri, 23 Nov 2018 01:00:37 -0800 (PST)
Received: from orsmga102-1.jf.intel.com (HELO mga09.intel.com) ([10.7.208.27])
  by orsmga006-1.jf.intel.com with ESMTP; 23 Nov 2018 01:00:37 -0800
IronPort-PHdr: =?us-ascii?q?9a23=3AkWY6Yx1Vf7ZB3l50smDT+DRfVm0co7zxezQtwd8Z?=
 =?us-ascii?q?seMfI/ad9pjvdHbS+e9qxAeQG9mDu7Qc06L/iOPJYSQ4+5GPsXQPItRndiQuro?=
 =?us-ascii?q?EopTEmG9OPEkbhLfTnPGQQFcVGU0J5rTngaRAGUMnxaEfPrXKs8DUcBgvwNRZv?=
 =?us-ascii?q?JuTyB4Xek9m72/q99pHPYAhEniaxba9vJxiqsAvdsdUbj5F/Iagr0BvJpXVIe+?=
 =?us-ascii?q?VSxWx2IF+Yggjx6MSt8pN96ipco/0u+dJOXqX8ZKQ4UKdXDC86PGAv5c3krgfM?=
 =?us-ascii?q?QA2S7XYBSGoWkx5IAw/Y7BHmW5r6ryX3uvZh1CScIMb7Vq4/Vyi84Kh3SR/okC?=
 =?us-ascii?q?YHOCA/8GHLkcx7kaZXrAu8qxBj34LYZYeYP+d8cKzAZ9MXXWhOXshRWSJPAY2y?=
 =?us-ascii?q?cZcAAfcZPetarYfwqEYCoBWiCQayH+Pi0SNIimPs0KEmz+gtDQPL0Qo9FNwOqn?=
 =?us-ascii?q?TUq9D1Ob8IX++r0KnH0y/DZO5R1zjn6InHbw4uofWIXbltdsfR0VcgFx/bgVWK?=
 =?us-ascii?q?s4DlOima1+QQvGeF6+pgUfmii2omqwF3uDev3MAshpPOhoIPxVDJ7CN0y5s2K9?=
 =?us-ascii?q?2gUEN3f8KoHZhKuy2HKod7QdkuT39mtSs60LEKpJy2cDAUxJkm2xLSafmKc4aL?=
 =?us-ascii?q?7x34SOqcJDh1iXFkdb+wghu+71Ssx+j5W8Wq3ltHryxImcTWuH8XzRzc8M2HR+?=
 =?us-ascii?q?N9/ki/3TaP0Bje6uVFIUAviarbMIQtwrE2lpoOq0jDGTX2mErugK+XcEUr5PSo?=
 =?us-ascii?q?5vz5brn6pZKQLZJ4hhz9P6g0hMCyD+Q1PhITU2WZ4ei80afs/Uz9QLVElP02la?=
 =?us-ascii?q?zZvYjDJcsFo665HhZZ3Zs95BahETim1M0UkmIALFJYfhKIk5bmO0rJLPD8DPe/?=
 =?us-ascii?q?gEqjnC1kxvDbJrDhBpTNLn7ekLbuZ7p96khcyBYtwtBb/Z5bFrYBIPfoV0/3s9?=
 =?us-ascii?q?zYCBA5Mwqpw+r9D9V9zIweVXqVAqCFKKPSrUOI5uU3LumIZY8VuyjyJ+Iq5v7z?=
 =?us-ascii?q?lnI5nV4dfa+03ZoYcny4H/JmI1mHbnromNsODWAKvg9tBNHsk0CIBD5Pe26pDe?=
 =?us-ascii?q?V74jAgFJngC4DFSYawxrub02C+F5xSY2lATVeUDXbvcZ7DQvoJdWeeL9Fslm85?=
 =?us-ascii?q?U6O8Qdok3BCqqAio0rdiM6/Y9zMVsdf52cFo6vbPvRc18zNyEoKayW7aVHx+nG?=
 =?us-ascii?q?4DW2or2rtiq1d20FaJ3PtEhKldH91X7vcBBgInNZfZyuV2PNrzXgvFVtKETkqh?=
 =?us-ascii?q?WJOtBjRnHfwrxNpbW0thFs/qqxnS0yeuB/dBj7GXCYZy96vN03X1I+55ynDPzq?=
 =?us-ascii?q?5niEMpFJgcfVa6j7JyolCAT7XClF+UwuPzLfwR?=
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A0APAABXwPdbhxHrdtBiHgEGBwaBUQkLA?=
 =?us-ascii?q?YEwgmKDeYh3ix+CDZc7gW4ZGBSIVCI0CQ0BAwEBAQEBAQIBEwEBAQoLCQgpIwy?=
 =?us-ascii?q?CNgUCAxoBBoJcAQIDAQIgHQEBBAopAQIDAQIGAQEKCw0CAiIEAgIDAR4SAQUBH?=
 =?us-ascii?q?AYTBYMcggIBBJtjPIodcIEvgnYBAQWHEwgSeYp+gVc/gRGCZC6IAoJXiRuBeIV?=
 =?us-ascii?q?NjyQHAoIcBI8PGIFZhQuKJIJ5lSgPIYElgg0zGjB0BoI1ghuJAYU+QTGBB4org?=
 =?us-ascii?q?XcBAQ?=
X-IPAS-Result: =?us-ascii?q?A0APAABXwPdbhxHrdtBiHgEGBwaBUQkLAYEwgmKDeYh3ix+?=
 =?us-ascii?q?CDZc7gW4ZGBSIVCI0CQ0BAwEBAQEBAQIBEwEBAQoLCQgpIwyCNgUCAxoBBoJcA?=
 =?us-ascii?q?QIDAQIgHQEBBAopAQIDAQIGAQEKCw0CAiIEAgIDAR4SAQUBHAYTBYMcggIBBJt?=
 =?us-ascii?q?jPIodcIEvgnYBAQWHEwgSeYp+gVc/gRGCZC6IAoJXiRuBeIVNjyQHAoIcBI8PG?=
 =?us-ascii?q?IFZhQuKJIJ5lSgPIYElgg0zGjB0BoI1ghuJAYU+QTGBB4orgXcBAQ?=
X-IronPort-AV: E=Sophos;i="5.56,269,1539673200"; 
   d="scan'208";a="54510213"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from lists.gnu.org ([208.118.235.17])
  by mtab.intel.com with ESMTP/TLS/AES256-SHA; 23 Nov 2018 01:00:36 -0800
Received: from localhost ([::1]:51068 helo=lists.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <qemu-devel-bounces+like.xu=linux.intel.com@nongnu.org>)
	id 1gQ7KG-0007eY-3a
	for like.xu@linux.intel.com; Fri, 23 Nov 2018 04:00:36 -0500
Received: from eggs.gnu.org ([2001:4830:134:3::10]:51696)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <peter.maydell@linaro.org>) id 1gQ7Jp-0007bp-W4
	for qemu-devel@nongnu.org; Fri, 23 Nov 2018 04:00:10 -0500
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <peter.maydell@linaro.org>) id 1gQ7Jn-0004Wc-U2
	for qemu-devel@nongnu.org; Fri, 23 Nov 2018 04:00:09 -0500
Received: from mail-oi1-x236.google.com ([2607:f8b0:4864:20::236]:41717)
	by eggs.gnu.org with esmtps (TLS1.0:RSA_AES_128_CBC_SHA1:16)
	(Exim 4.71) (envelope-from <peter.maydell@linaro.org>)
	id 1gQ7Jn-0004VC-Ly
	for qemu-devel@nongnu.org; Fri, 23 Nov 2018 04:00:07 -0500
Received: by mail-oi1-x236.google.com with SMTP id j21so9390406oii.8
	for <qemu-devel@nongnu.org>; Fri, 23 Nov 2018 01:00:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=linaro.org; s=google;
	h=mime-version:in-reply-to:references:from:date:message-id:subject:to
	:cc; bh=9GgdJNcmb/r6okYc58WejmCW1uu64o0N3gk1WrBNbCo=;
	b=G4nLfLGjO4O2V6GZdk8/KAV3dM/VAz7v+29tA7v9OvpmhAEWzmVGNw+rwC94vUvlyl
	9eKucSrBMB03aaiLM71TQpXupta+xfUbL3wxcdLdq3tZL0p92akMUfgeAwi/5V4UJGrb
	+iX3XnPJWn+wO2bLFI+TKBQ+njZBlDFIkdh5M=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=1e100.net; s=20161025;
	h=x-gm-message-state:mime-version:in-reply-to:references:from:date
	:message-id:subject:to:cc;
	bh=9GgdJNcmb/r6okYc58WejmCW1uu64o0N3gk1WrBNbCo=;
	b=O1Quf0ns60iVXfhrSgE07xaykEmK/xMI/0Lk+jhrgTXy1mOknVRCAy7qku8hkOOXgG
	X/ioodUQJ8CJScKCtBKiOO/N0z2JrMEGeUStMGYI7nV+Ik0TDzGC4SOUKBVEy09lHyx/
	CFh075hPyz3qYr64Z2sgiMQfyQObSmSJwOjrmwK6AfZxBm3/cFCpzOCMSpA892Xtw12t
	yQz97YUHyKHiH1gy8Lr4dzAm8CVj3iW5TZ7CYyHmWLjGXckfJLVBhVqanUno2tFu2AVd
	yBFFAdyOEuQ9wOa1nqyKKpP38ptALWSloKqkOwJrwt9DB3jw5aq8tT/fbByZXgUE6zhH
	L6lQ==
X-Gm-Message-State: AGRZ1gIoJCPHX5SGc5K/H9RSTvlyFpbpD6mauzNTJwbTY+MS5gzOdunM
	S+Y7BtAoyvMeEZGpMj4NLlqdR/iFjAtAg6VnwiMdFw==
X-Google-Smtp-Source: AJdET5cOYyNHz9Nbd3SMObbPlZc8X/2BEsYnE0p9Qfd4rSrgUEMOU73gs8XcObJO0QKg1JyZ6k8dctKQMVPpWDMXMKQ=
X-Received: by 2002:aca:2dc9:: with SMTP id t192mr8385501oit.325.1542963606890;
	Fri, 23 Nov 2018 01:00:06 -0800 (PST)
MIME-Version: 1.0
Received: by 2002:a9d:4b0e:0:0:0:0:0 with HTTP; Fri, 23 Nov 2018 00:59:46
	-0800 (PST)
In-Reply-To: <e8dae726-8853-4e44-1eb8-b9cfb0bc44f2@mentor.com>
References: <e8dae726-8853-4e44-1eb8-b9cfb0bc44f2@mentor.com>
From: Peter Maydell <peter.maydell@linaro.org>
Date: Fri, 23 Nov 2018 08:59:46 +0000
Message-ID: <CAFEAcA_EM39P8HFoC=B=XP3Ax8NgNSotn=wMJJsG05P8Ywdruw@mail.gmail.com>
To: mbilal <muhammad_bilal@mentor.com>
Content-Type: text/plain; charset="UTF-8"
X-detected-operating-system: by eggs.gnu.org: Genre and OS details not
	recognized.
X-Received-From: 2607:f8b0:4864:20::236
Subject: Re: [Qemu-devel] [Qemu-discuss] How to select specific qemu net
 'nic' device
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.21
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
	<mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <http://lists.nongnu.org/archive/html/qemu-devel/>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
	<mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Cc: "Edgar E. Iglesias" <edgar.iglesias@gmail.com>,
	qemu-arm <qemu-arm@nongnu.org>, QEMU Developers <qemu-devel@nongnu.org>,
	Alistair Francis <alistair@alistair23.me>,
	qemu-discuss <qemu-discuss@nongnu.org>
Errors-To: qemu-devel-bounces+like.xu=linux.intel.com@nongnu.org
Sender: "Qemu-devel" <qemu-devel-bounces+like.xu=linux.intel.com@nongnu.org>

On 23 November 2018 at 04:13, mbilal <muhammad_bilal@mentor.com> wrote:
> Hi,
>
> I'm using qemu emulation for xilinx zcu102 platform, this board have four
> networking GEM0, GEM1, GEM2 and GEM3 devices.
>
> To run network demo on this board *only* require GEM3 device to be configure
> while other GEM devices don't need to be configure, that's why u-boot and
> other RTOS only configure GEM3 device.
>
>
> QEMU is enabling these GEM devices  with networking '-net nic' option and
> QEMU consider first '-net nic' option for GEM0 and second '-net nic' option
> for GEM1 and so on. that's why if need to enable GEM3 network device we must
> need to give following full command line options
>
> -net nic -net nic -net nic -net nic -net user, ...
>
> In this way all four GEM devices would be enable but first three GEM0-GEM2
> devices are un-configured and useless. In our case QEMU is being *crashed*
> due to trying to use these un-configured GEM devices to o send/receive GDB
> breakoint/interrupt cause. IIUC QEMU uses first device in the -nic loop
> i.e
>
> qemu-system-aarch64: hw/net/cadence_gem.c:921: gem_receive: Assertion
> `!first_desc' failed.

If QEMU asserts like this, this is a bug in QEMU. I've cc'd
the maintainers of the Xilinx board.

Could you provide a complete set of instructions to reproduce
this bug, please ? (full command line, guest image, etc)

Could you also tell us which version of QEMU you are using?
If possible, try with the current git master or
with the 3.1 rc2 release candidate we've just put out, to
see if it's already been fixed.

thanks
-- PMM

