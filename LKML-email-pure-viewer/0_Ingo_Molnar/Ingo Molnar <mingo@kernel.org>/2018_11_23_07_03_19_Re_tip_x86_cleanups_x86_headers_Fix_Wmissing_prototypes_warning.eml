Return-Path: <linux-kernel-owner@vger.kernel.org>
Delivered-To: unknown
Received: from linux.intel.com (10.54.29.200:995) by likexu-workstation with
  POP3-SSL; 23 Nov 2018 15:31:43 -0000
X-Original-To: like.xu@linux.intel.com
Delivered-To: like.xu@linux.intel.com
Received: from orsmga002.jf.intel.com (orsmga002.jf.intel.com [10.7.209.21])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by linux.intel.com (Postfix) with ESMTPS id A6B7658037D;
	Thu, 22 Nov 2018 23:04:05 -0800 (PST)
Received: from orsmga101.jf.intel.com ([10.7.208.22])
  by orsmga002-1.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384; 22 Nov 2018 23:04:05 -0800
X-SG-BADATTACHMENTNOREPLY: True
IronPort-PHdr: =?us-ascii?q?9a23=3AIjAslhVXREK5jVSssAQ7v3zuutrV8LGtZVwlr6E/?=
 =?us-ascii?q?grcLSJyIuqrYZhGDvqdThVPEFb/W9+hDw7KP9fy4CSpYud6oizMrSNR0TRgLiM?=
 =?us-ascii?q?EbzUQLIfWuLgnFFsPsdDEwB89YVVVorDmROElRH9viNRWJ+iXhpTEdFQ/iOgVr?=
 =?us-ascii?q?O+/7BpDdj9it1+C15pbffxhEiCCybL9uLxi6txndutULioZ+N6g9zQfErGFVcO?=
 =?us-ascii?q?pM32NoIlyTnxf45siu+ZNo7jpdtfE8+cNeSKv2Z6s3Q6BWAzQgKGA1+dbktQLf?=
 =?us-ascii?q?QguV53sTSXsZnxxVCAXY9h76X5Pxsizntuph3SSRIMP7QawoVTmk8qxmTgLjhi?=
 =?us-ascii?q?UaOD4j6GzZhMx+grxGrhyiqRxwzJLbb5yXO/VwZaPdZdEXSHFdXspNTSFNHp+w?=
 =?us-ascii?q?YpERA+cHIO1Wr5P9p1wLrRamBgesAuzvyjhVjXHx2q061+IhHhvc3Ac9GN8OtX?=
 =?us-ascii?q?XUrNP6NKcVSu21z7fHzS/Fb/xI3Tfx8o/IcgouofyVW797bMTfyU4qFwzfj1WQ?=
 =?us-ascii?q?r5ToPzCL2eQXtWiU8e5gWfioi249pAF8pCWkyMQ0ioTRmI4Z1lTJ+T9kzIs7O9?=
 =?us-ascii?q?G0UlN3bN24HJdKtiyXNZN6T8wjTm1ypSo3xLkLtYSmcCQU0pgr2QPTZvKBfoOV?=
 =?us-ascii?q?+BzsTvyRLi19hH99eLKwmRKy8U+4x+3iWcm7zkxKojBGktbSrHAN0QLc6sydRv?=
 =?us-ascii?q?t65Eeh1i6D1wHV6u5aPUA5jbTXJ4Ilz7Iqi5Yev1rPEjXrlEj1kKOabEQp9+qw?=
 =?us-ascii?q?5+TieLrmp5ucN4FuigH5N6Qjgsi/AeU+MggTUGmX4Oe826P5/U3/XrpKiuQ6kq?=
 =?us-ascii?q?7XsZDcO8sbvLW0AxFa0ok98RazFTSm38oCnXkBMl1FfAiLj4/zO1HBOPz4F+uw?=
 =?us-ascii?q?g0ywkDd3wPDLJrnhApTOLnfdirvgcqt95lVYyAoyy9Bf+p1VBqsAIPL1Rk/+qt?=
 =?us-ascii?q?jYAgUlPAyzxubtEM992Z8GWWKTHq+ZN7vfsV+S6eIuP+mDfogVtCz9K/g4/fHu?=
 =?us-ascii?q?i3A5lEQZfamo25sXdX+5Eu5nI0WffXrjnNMBHX0WsQo5SezgkEeCXiJLZ3auQ6?=
 =?us-ascii?q?I84Sk2CIChDYjdXIytg7uB3CG9Hp1RfW1GDlGMEXH1d4SLQfsMaSSSItN/nTwA?=
 =?us-ascii?q?T7SuV4gh1RS2vg/g17VnNvbU+jEftZ/7ztd1/O3TlRYx9TBuFcSSyWONQnpwnm?=
 =?us-ascii?q?MJQT82wa9+rVZ8yleFzah3nfhYGcZP6PNOVwcwLYTcwPBiC9DuRgLBec+ESFW8?=
 =?us-ascii?q?TdWgGz0xStMxzMUIY0ZyANiiihHD3yy3A74ajbCLBZo08r7C0Hj1Pcpy13HG1K?=
 =?us-ascii?q?w5hVk8XsRPLXGmhrJ49wXLGoHGiVuZmLiweaQcxiHN8nyDwnSIvE1fVA5wUqDF?=
 =?us-ascii?q?XXQEa0vSrNT54F7CTrC0BbQmNAtB1dCNKq9QZtL1ilVGQe/pOM7CbGKph2ewGR?=
 =?us-ascii?q?GIy6uRY4XwZWUSwj/RCEgenAAV5naJKw4+Czylo2LfCjxuCF3ub1nt8el4tHO0?=
 =?us-ascii?q?UEs0wxuWYE1m0rq/4gQViuCES/MPwrIEvz8sqyl1HFa42NLWF9qApgp7cKVAe9?=
 =?us-ascii?q?89501H1WbYtwx7MZytNKRihl8YcwRqsELizRR3CoNckcc0qHMm1hZ9KaWd0FlZ?=
 =?us-ascii?q?bTOXwYjwOqHLKmn15B2gcarW1U/R0dmI+qYD8u83q0j+sw6zEEoi8HJn08dO3n?=
 =?us-ascii?q?uY55XKChcSUJ3rXkY28Rh6u6/VYi0n64zI0n1sNLG+siXe1NIxGOsl1hGgcs9f?=
 =?us-ascii?q?MaOZDgP9D9cWBsmuKOMwnVipYQkJPORT9K4yIsOneOGK2K+tPOZ8gj2miX5L75?=
 =?us-ascii?q?x60kKJ7yB8UPLH344Zw/GE2QuKTy38jFa9vc/tg4BLeDYSEnC5ySf6Ho5RZ7R+?=
 =?us-ascii?q?cpoRBmeqPsK42M9+h5nrW3ND8F6jBlUG2NKmeBaIblz92xFQ2loToXC9hSS4yD?=
 =?us-ascii?q?l0mSkzrqWDxCzO3/jidB0fN29LRWlul1ftLZKvj9AHWkildAwplBqj5UbnyKlX?=
 =?us-ascii?q?vqV/L2/PQUhWeyj6NX1tUqy1trCaec5A9IsosTlLUOS7eV2aSKTyowEZ0yPgGG?=
 =?us-ascii?q?tS3is7eCupupX6nhx6jnySLHBooXrdeMFwwwrf5dPGSf5Q2DoGWDd3iT3NCleg?=
 =?us-ascii?q?ONmp+M2el43fveCmS2KhSppTfDHrzIyasyu3/29qARy5n/2ont3nEA460TL01t?=
 =?us-ascii?q?VwVCXIqgr8bZfv16igLe1neUxoDkfm68VmAoF+jpcwhJYI1HgZnJqV/GALkWfu?=
 =?us-ascii?q?MdpB36L+Y2EARToKw97T/Qjk11dvLnOPx4LlSHqdxtFtaMW9YmMTwig99dxFCL?=
 =?us-ascii?q?+I7LxYmit4ul+4rQPSYfdnhDscx+Uh6GUGg+4Xogoi1TuSAqodHURDOSzslhKI?=
 =?us-ascii?q?782xralNZWavd6Sw21R6ndy7EL6CpQRcUm7jepg+BS9w8tl/MFXU3X3v7YHkfc?=
 =?us-ascii?q?PcbNMJuR2SjhfAlPNVKJMqm/oOhCpnP3/9vHI/x+46ixxuwY+1vIydJ2px+6K5?=
 =?us-ascii?q?BwZSNifpaMML5jHtkaFek96N0I+1GZVhHigLUIHsTfK1Cz8SsfXnNwCTEDwzsH?=
 =?us-ascii?q?ubGLzfHROB50ditX7AD5erN3SPLnkD0dpiXAWdJFBYgA0MXjU1hJs5GR6xxMD7?=
 =?us-ascii?q?bEd1/DMR5kP7qhtRzOJnLQL/X3zbpAepbDc0VZeeIABX7gFE+0faL8ie4vhvEC?=
 =?us-ascii?q?Ff+52rtBaNJXCDZwRUEWEJXVSJBlDkPrmz/NnA7vKXBuykI/vVZrWOr+NeWuyM?=
 =?us-ascii?q?xZKu1Itm4jmNOt+OPnlkE/00xE5DUWplFMTenjUFUzYXmD7Vb86HuBe8/TV6rs?=
 =?us-ascii?q?Ch//TqWwLv5oqPB6FRMdV1/BC2jrmMN/SNhCZiMjtY0pIMxXnVyLkQxlISiidu?=
 =?us-ascii?q?dyWzHrQEryLCUKXQmqpPBR4BdyxzLNdI77473gRVI8Hbl8j61qRmgf81EVtFUV?=
 =?us-ascii?q?3hl9qtZcwLJWG9KVzGCFyKNLSAOT3E3cX3bbmgRr1XieVerwewtiqDE0//IjSD?=
 =?us-ascii?q?kCHkVwyuMeFJli2UIAZSt529chlzD2juV9bmahy9MN9qgjw627w0hnXWNWECNT?=
 =?us-ascii?q?hwaV9CrrqV7SlAmPVwB3RB7mZ5LemDgyuY7/PXKpATsftqBCR7j+Nb4HQgxLtT?=
 =?us-ascii?q?4yFJX/h1mCrUrt5zrFCqiOiPyjx7UBVQrjZHnp6EvUJnOfaRyp4VRn/C81Qc7D?=
 =?us-ascii?q?jBIwYWqp1uDdipsKYUgsTIjrz6LDtZ29bV+9YMQsbTNcSLOWYgNhyvHyTbSEMZ?=
 =?us-ascii?q?Qjq7HWXegVFBivaU923TopV+4pztnoceD7xWTlo4EtsEBUl/Wt8POpF6WnUji7?=
 =?us-ascii?q?HfxM4Q7FKsvQXWXoNRuZWDHuqfHfj1Oh6Yi7debhcFyL++Kp4cZaPh3Ek3S191?=
 =?us-ascii?q?m8zvHE7WVMoF9ihgaAAziEZA6n5zSis0wU2zOVDl22MaCfPhxk1+sQB5e+l4rD?=
 =?us-ascii?q?o=3D?=
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A0ATAAC9pfdbh0O0hNFiGgEBAQEBAgEBA?=
 =?us-ascii?q?QEHAgEBAQGBVAIBAQEBCwGCaYECJ4xwix+CDRSZFRcBARgLCAGITQUiNwYNAQM?=
 =?us-ascii?q?BAQEBAQECARMBAQEIDQkIKSMMgjYigmUBAgIBAQI3BgE4AQMBAQkBAQUFCwcPE?=
 =?us-ascii?q?xIDDAUgAQUBAgwVEgWDHAGBaQMNCAQBCptXPIw8gncFgTEBg0QNghECAQUSilu?=
 =?us-ascii?q?BHBeBf4QjiDOCJgKVNopMCYZ8iigLGIlRhzeNQ4pGBgIJBw8hgTuBdzMaCCgIb?=
 =?us-ascii?q?AaCNYIbDBeDSoUUhT8/Mgp6AQEBDgOMEQEB?=
X-IPAS-Result: =?us-ascii?q?A0ATAAC9pfdbh0O0hNFiGgEBAQEBAgEBAQEHAgEBAQGBVAI?=
 =?us-ascii?q?BAQEBCwGCaYECJ4xwix+CDRSZFRcBARgLCAGITQUiNwYNAQMBAQEBAQECARMBA?=
 =?us-ascii?q?QEIDQkIKSMMgjYigmUBAgIBAQI3BgE4AQMBAQkBAQUFCwcPExIDDAUgAQUBAgw?=
 =?us-ascii?q?VEgWDHAGBaQMNCAQBCptXPIw8gncFgTEBg0QNghECAQUSiluBHBeBf4QjiDOCJ?=
 =?us-ascii?q?gKVNopMCYZ8iigLGIlRhzeNQ4pGBgIJBw8hgTuBdzMaCCgIbAaCNYIbDBeDSoU?=
 =?us-ascii?q?UhT8/Mgp6AQEBDgOMEQEB?=
X-IronPort-AV: E=Sophos;i="5.56,268,1539673200"; 
   d="scan'208";a="41956329"
X-Amp-Result: UNSCANNABLE
X-Amp-File-Uploaded: False
Unscannable: 2
Received: from vger.kernel.org ([209.132.180.67])
  by mtab.intel.com with ESMTP; 22 Nov 2018 23:03:27 -0800
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S2408224AbeKWRqV (ORCPT <rfc822;like.xu@linux.intel.com>
        + 23 others); Fri, 23 Nov 2018 12:46:21 -0500
Received: from mail-wr1-f68.google.com ([209.85.221.68]:40396 "EHLO
        mail-wr1-f68.google.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1731655AbeKWRqU (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Fri, 23 Nov 2018 12:46:20 -0500
Received: by mail-wr1-f68.google.com with SMTP id p4so11248117wrt.7;
        Thu, 22 Nov 2018 23:03:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20161025;
        h=sender:date:from:to:cc:subject:message-id:references:mime-version
         :content-disposition:in-reply-to:user-agent;
        bh=gQdZKYblrwTj4f+bCgwmPJ00GVcY5LnOcDagPbVLG3Y=;
        b=Fk4yUBRNxIqZjCaXkHOJ0T2WyX9VXGl7ElxKMqMFuY5UEVJk2GEKuA2cowTQXX3Nvw
         t8YSunHD7YbkjjauGQJWc9NPKjTFKzCQi9OhdP/cL5qeixwB3LRi8H8rrGgQQ3/sT7s8
         okp1fdzbsusfm5buavNpHtkuxpppyN2qzO7u5NB/ff/OsnTaSHWTjLhykoAhqHmcQNKN
         rllxQTd9C9BTshG/Sinc6SVvfY8ZVB1iXEwpyFihwP0eecgYX26yzW2IvMq/xQYbBJc2
         xd1tfFKMoi2jHjuPFlJ1awgryIVrsihsj5opS050HgzU7e8CnvyH0sl5MedEIk/0j41e
         PW3w==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20161025;
        h=x-gm-message-state:sender:date:from:to:cc:subject:message-id
         :references:mime-version:content-disposition:in-reply-to:user-agent;
        bh=gQdZKYblrwTj4f+bCgwmPJ00GVcY5LnOcDagPbVLG3Y=;
        b=YgxxSjDyBbw8T4K8eZHX6yrvm3KcrLqnMOFCC83x8zOuPTI1LjEbpP4Ehx/W2cIR37
         C/ZF48FhL5G8dZ3aBJ7v/GKkrCLG5LNjd/liiqsIpYLUYp/Ry6jae2SXOed33hhHzPuK
         RjGV/+SmYOlmGfpDtJ6B2gnRgopgSxw6mt+Y6NtyEPGNwS8WK7UTzc/6CPOdCeBq/c0a
         /pqF0iyW9kssURFZQMQgASyNGvQ2HhLDEpCaL2xO3Eix+RR4iXpqQwHWx8o9RhqMF6Y+
         eCTiPaa538t+LMy0bsGjLrLEfzHTLYIV1V2Yl7ELSuZ+HV3PE9SWVIRVpvvRNRoEvdmY
         p/tA==
X-Gm-Message-State: AA+aEWbq8U0uLQG5ucIMgd3YOy+i4uP8vudeeA2vbtfXHrilX4wo00R0
        QLHPD45/TPcPp+Pw1G7j8qY=
X-Google-Smtp-Source: AFSGD/WIEJBED7akuaI6SyWLnTy/VUXnraCVdxMlXYa1fI8SBtyqyMXi/Gx2WErscWyZix0fvQtCKg==
X-Received: by 2002:a5d:470b:: with SMTP id y11mr11944684wrq.16.1542956602086;
        Thu, 22 Nov 2018 23:03:22 -0800 (PST)
Received: from gmail.com (2E8B0CD5.catv.pool.telekom.hu. [46.139.12.213])
        by smtp.gmail.com with ESMTPSA id x8sm14620145wrd.53.2018.11.22.23.03.20
        (version=TLS1_2 cipher=ECDHE-RSA-CHACHA20-POLY1305 bits=256/256);
        Thu, 22 Nov 2018 23:03:21 -0800 (PST)
Date: Fri, 23 Nov 2018 08:03:19 +0100
From: Ingo Molnar <mingo@kernel.org>
To: wang.yi59@zte.com.cn, torvalds@linux-foundation.org,
        tglx@linutronix.de, linux-kernel@vger.kernel.org, hpa@zytor.com,
        peterz@infradead.org
Cc: linux-tip-commits@vger.kernel.org
Subject: Re: [tip:x86/cleanups] x86/headers: Fix -Wmissing-prototypes warning
Message-ID: <20181123070318.GA41027@gmail.com>
References: <1542852249-19820-1-git-send-email-wang.yi59@zte.com.cn>
 <tip-d37904c5b14317a2c76efec6b9e4dbcaa17380e5@git.kernel.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <tip-d37904c5b14317a2c76efec6b9e4dbcaa17380e5@git.kernel.org>
User-Agent: Mutt/1.9.4 (2018-02-28)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org


* tip-bot for Yi Wang <tipbot@zytor.com> wrote:

> Commit-ID:  d37904c5b14317a2c76efec6b9e4dbcaa17380e5
> Gitweb:     https://git.kernel.org/tip/d37904c5b14317a2c76efec6b9e4dbcaa17380e5
> Author:     Yi Wang <wang.yi59@zte.com.cn>
> AuthorDate: Thu, 22 Nov 2018 10:04:09 +0800
> Committer:  Ingo Molnar <mingo@kernel.org>
> CommitDate: Thu, 22 Nov 2018 09:52:28 +0100
> 
> x86/headers: Fix -Wmissing-prototypes warning


>  #endif /* _ASM_X86_CRASH_H */
> diff --git a/arch/x86/include/asm/efi.h b/arch/x86/include/asm/efi.h
> index eea40d52ca78..063f1d4d698e 100644
> --- a/arch/x86/include/asm/efi.h
> +++ b/arch/x86/include/asm/efi.h
> @@ -173,8 +173,6 @@ static inline bool efi_runtime_supported(void)
>  extern struct console early_efi_console;
>  extern void parse_efi_setup(u64 phys_addr, u32 data_len);
>  
> -extern void efifb_setup_from_dmi(struct screen_info *si, const char *opt);
> -
>  #ifdef CONFIG_EFI_MIXED
>  extern void efi_thunk_runtime_setup(void);
>  extern efi_status_t efi_thunk_set_virtual_address_map(

> diff --git a/include/linux/efi.h b/include/linux/efi.h
> index 845174e113ce..890c4cb37502 100644
> --- a/include/linux/efi.h
> +++ b/include/linux/efi.h
> @@ -1053,6 +1053,8 @@ extern struct kobject *efi_kobj;
>  extern int efi_reboot_quirk_mode;
>  extern bool efi_poweroff_required(void);
>  
> +extern void efifb_setup_from_dmi(struct screen_info *si, const char *opt);
> +
>  #ifdef CONFIG_EFI_FAKE_MEMMAP
>  extern void __init efi_fake_memmap(void);
>  #else

These efifb_setup_from_dmi() changes were completely bogus and broke 
every non-x86 EFI architecture, which a simple:

  git grep efifb_setup_from_dmi

should have already exposed.

Did you actually check the usage of every single prototype and think 
about them case by case? It doesn't seem to be the case.

Thanks,

	Ingo
