Return-Path: <linux-kernel-owner@vger.kernel.org>
Delivered-To: unknown
Received: from linux.intel.com (10.54.29.200:995) by likexu-workstation with
  POP3-SSL; 23 Nov 2018 08:29:02 -0000
X-Original-To: like.xu@linux.intel.com
Delivered-To: like.xu@linux.intel.com
Received: from fmsmga006.fm.intel.com (fmsmga006.fm.intel.com [10.253.24.20])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by linux.intel.com (Postfix) with ESMTPS id 6ED8358037D;
	Thu, 22 Nov 2018 07:30:44 -0800 (PST)
Received: from orsmga102-1.jf.intel.com (HELO mga09.intel.com) ([10.7.208.27])
  by fmsmga006-1.fm.intel.com with ESMTP; 22 Nov 2018 07:30:43 -0800
X-SG-BADATTACHMENTNOREPLY: True
IronPort-PHdr: =?us-ascii?q?9a23=3Aj7x4TBy9QmSoh7XXCy+O+j09IxM/srCxBDY+r6Qd?=
 =?us-ascii?q?0ewTKfad9pjvdHbS+e9qxAeQG9mDu7Qc06L/iOPJYSQ4+5GPsXQPItRndiQuro?=
 =?us-ascii?q?EopTEmG9OPEkbhLfTnPGQQFcVGU0J5rTngaRAGUMnxaEfPrXKs8DUcBgvwNRZv?=
 =?us-ascii?q?JuTyB4Xek9m72/q99pHPYAhEniaxba9vJxiqsAvdsdUbj5F/Iagr0BvJpXVIe+?=
 =?us-ascii?q?VSxWx2IF+Yggjx6MSt8pN96ipco/0u+dJOXqX8ZKQ4UKdXDC86PGAv5c3krgfM?=
 =?us-ascii?q?QA2S7XYBSGoWkx5IAw/Y7BHmW5r6ryX3uvZh1CScIMb7Vq4/Vyi84Kh3SR/okC?=
 =?us-ascii?q?YHOCA/8GHLkcx7kaZXrAu8qxBj34LYZYeYP+d8cKzAZ9MXXXdPUNhfVyJBAY2y?=
 =?us-ascii?q?YYUAAOUDMulEoIf9vEMOoBmlCAmwB+7i0CNEimP40KA41ekqDAHI3BYnH9ILqH?=
 =?us-ascii?q?naos/6NKETUe+ryKnD0DPNYO1X2Djh8ofIdBchquyLUL1ta8XRz0gvGB3BjlmK?=
 =?us-ascii?q?rYzqITKU2fgXvGid6OptTuavi28hqw5ruDivwd0gio7ThoIa013J8zhyzogyJd?=
 =?us-ascii?q?29UkF7YNikHYNUtyGZMot2RtkuQ2ZyuCY10rEGpZC6fCkWyJQ72RHfceaLfJSP?=
 =?us-ascii?q?4hLmTOqRJTZ4hHR/d7KlgBa+60+gyvfzVsWs3lZFtDZKncfXuXAK0BzT6dKLRe?=
 =?us-ascii?q?d6/kek3zuEygPd6vlcLEwqiabWL4QtzqM+m5YNq0jPAyz7lFnsgKKXdEgo4uql?=
 =?us-ascii?q?5ub9brn7qJKRNpV4hwD+P6g0lcGyDuI1ORUUUWeB4+Szzrjj8FX5QLpUiv02lb?=
 =?us-ascii?q?HUsI7VJcsFvK61GQxV3Zg56xa5ETim1M4UnX4dLFJKYB6Hjo7pNE/SIP3gE/uz?=
 =?us-ascii?q?n1ChnC12y/3IILHtGIjBI3vfnLv7fLtw6VZQyA8pwtBe45JUBKsBIPX2WkLpsN?=
 =?us-ascii?q?zYDxk5MxG7wur+C9VyyJkeWWSRDa+dKa/StlGJ5uQxLOmWf4IVpjn9JOY/5/L0?=
 =?us-ascii?q?jn82h0Udfa+30psTcny4Ge5mI0qBbXr2ntgBCXsKvhY5TOHyjF2CUD1TaGioU6?=
 =?us-ascii?q?Mz+zE2E4amDYbFRoCwj72Nxia7HptKZm9YDlCAC2vnd4KBW/0UciKdPtdhkiAY?=
 =?us-ascii?q?VbimU4Ih1QuhtA7my7V9KerY4C0YtY/529hz6O3ejhUy9T1yD8SA3GCBVWB0nm?=
 =?us-ascii?q?UURzAo2KBzu1ByylCG0aJgmfxXCcRT5+9VUgc9LZPczet6BM7oVgLCedeJTlCm?=
 =?us-ascii?q?QtK9DDE1T9IxxcIOYklnF9WjiBDDwzSlA7sPm7OXA5w097rW32LtKMZl13bGyK?=
 =?us-ascii?q?4hgkE8TctUNW2mga1/+xLJB4HTkUWUjKKqdaUa3C7Q+2aP12uOvEdEUAFuVaXJ?=
 =?us-ascii?q?R2wQZkzTrd7h/EPNU6euCag7MgtG0cOCKbFFatvzgVVCRffsItLeY22qlme0BB?=
 =?us-ascii?q?aIwK6MbYXwd2Uc2iXdFFYLkwQJ8XmaMgg+Az+ro3jCAzx2CVLvf0Ts/PFjp3yh?=
 =?us-ascii?q?UE870RuGb0172Lqz4R4am/qcR/QX3rIHvSchry55HFK839LQFtqBqBBtfKRaYd?=
 =?us-ascii?q?Mh/lhH0XjVuBB6PpylN6pinEIRcxxrv0Py0BV6EphPntI0rHw01gZyKbiX0FVa?=
 =?us-ascii?q?dzyG25D9IbnXKmj0/BCyZK/awFDe0NCK+qgR7PQ0sUnsvAasFkA66XVoz8FV02?=
 =?us-ascii?q?eA5pXNFAcSTZPxUkMw9xhmp7HbYjMx55/O2X1rK6m0tj7C29QmBOY+zhagftFf?=
 =?us-ascii?q?ML6LFQPoEs0aAdSuJ/Ium1Szch0EO+VS/rYuP8y6b/uGxLKrPOF4kT28iWRI/o?=
 =?us-ascii?q?983VyM9iZmUeHIwosKzOue3guEUDf8kkysssT2mYBCeDETEXCzySniBI5NeKJy?=
 =?us-ascii?q?eZwHBnupI82y3t9+nYLiW2ZE9F6/AFMLwM+oeQeIY1PhxwFR1EQXrmahmSu31D?=
 =?us-ascii?q?F0lzAprqyC3C3B2ejidRwHOnJVS2lml1vjPY+0j9UCVkiycwcpjAel5Vr9x6VD?=
 =?us-ascii?q?vqR/LnXcTl1SfyfrKGFuSK2wuaSYY85O8Z8nrT9YUOChbl+EUL79pB0a3jjnH2?=
 =?us-ascii?q?tfwjA7aj6rto/4nxx8lGKSMnJzoGDFdsF3wBfV/MbcSuJJ3joaWCl4jiHaB1i9?=
 =?us-ascii?q?P9Wz/dSYjYzDsv24V2+6Up1TcC/rzZ6PtSeh5G1qBwG/kO63mtH9DQc61ir73c?=
 =?us-ascii?q?FwVSrUtBb8fpXr16OiPOJlZEZoHlz868l9Go1kiYs/npIQ2XsbhpWT43UHl3z+?=
 =?us-ascii?q?MdFa2aL4cXoMSiQHw9/T4Aj5xkJjKmiFyJ7+VnWY2sFhfcW1YnsK2iIh6MBHEK?=
 =?us-ascii?q?eV46ZDnSdvoFq4rATRbON5njccz/su9XEbj/sIuAor0iWSHLQSEVNEMizrkhSC?=
 =?us-ascii?q?98q+o7lPZGazbbiw01JzndO7A7GDuA1cWGv5dY0kHS9/9ch/NFPM0Hvu6oDrYt?=
 =?us-ascii?q?XQbNQTtgGKnBfEleRaNJUxlv8Sjyp9JW39pWEly/I8jRF22JG6vYuHJH938KO3?=
 =?us-ascii?q?HBFYLSH1aN0J+j72k6lehMmW0purHpVgHDULQZTpQeipEDIUqfToKQKOHCcgpX?=
 =?us-ascii?q?ecHLrVBRWf51t+r3LTD5CrMGmaJGUezdVnXhWcJVZQgAYJXDUhhZ45FxunxMjg?=
 =?us-ascii?q?cEd/+zAQ6UT0qhpKyuJ0KRb/Vn3TqxuvajcxUJKfNgZZ7hle50fJNsyT9vl8ED?=
 =?us-ascii?q?tf/p2lsQyBMGibZxlTAGENW0yEAU3jP7a06dnB9eiYGvSxL//UbbqSruxeUu+C?=
 =?us-ascii?q?xYiz3Yt+4zaMKsKPM2FgD/Ih30pMQ2t5F97FmzkVSCwXiiHNb9OdpBim4S16tc?=
 =?us-ascii?q?S/8PXtWALy6oqDEbpSMdNz+x+ohaePLfKfhCF8KTxAzJMD2WfIyKQD3F4Vkyxv?=
 =?us-ascii?q?dz6tEakZtS7QVq3QnLVbDwUcayN1O8tF9KY83ghLOc7GhdL5zL94jvgpC1hbUV?=
 =?us-ascii?q?ztgN2mZcsPI2ulLlPIGF6LNKiaJT3M28z3Yb2zSbxTjOVXth28ozWbE1XkPjSM?=
 =?us-ascii?q?iTbpTQ2vMfpXgSGfPRxevpy9cxl3BWjiStLmdgO0MNttgTIqxr00g2vANXQAPj?=
 =?us-ascii?q?hkb0NNsrqQ4DtCjfViAGNB9GRqLOmelyad7unVMZIWsfptAiRpmONW+nU6y71J?=
 =?us-ascii?q?7C5aQPx5gjfdrtlro1u+iOmA1iJnUAZSqjZMnI+LoURiOaDD+pZcQ3rL4BIN4n?=
 =?us-ascii?q?uWCxkRo9tlC9vvu71fy9TVlaLzLitC/MzQ/ccGG8fUL8eHOmI7MRX1AD7UEBcF?=
 =?us-ascii?q?TTmzOGDfnUNdlvSS9nyTrpciq5nsmIABSrlUVFEuEvMaC0JlHMENIZttXzMkl6?=
 =?us-ascii?q?Kbg9AM5XaksBbRQ8Ba7dj7Uae4APfyYBqQlvEQbRoK3PX0JJ87PJW9wUFkZ0Jz?=
 =?us-ascii?q?h8LBHE+GGZh3pScpTgIuukRL/zAqVGo52wHpdiuu7WUVGPrymQQ53E82RO0393?=
 =?us-ascii?q?/W/kszL1zG7H81mVMy38/4nTSYdjLZJb21G4pRDnynmVI2N8bXSgB0YAn6uUF2?=
 =?us-ascii?q?Pz7CQPoFg7JmdG1vzgvRq5BGH/l0SaxCaQUXg/aNaKN7ghxntiy7yBoftqP+Ap?=
 =?us-ascii?q?x4mV5vKMb0og=3D=3D?=
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A0AaAAAUy/Zbh0O0hNFiHAEBAQQBAQcEA?=
 =?us-ascii?q?QGBUQcBAQsBgmkDfyeDeIM8hFyMAYFoJRRmjTyJBIFzEgEBGAcMAYFLhwciNAk?=
 =?us-ascii?q?NAQMBAQEBAQECARMBAQEIDQkIKSMMgjYkAYJhAQEBAQMBAiAPAQ0BATcBBQkBA?=
 =?us-ascii?q?QoXAQICJgICAzEBBQEUCAYBDAYCAQEBBIMYAYIBBAEKnXc8ih1wgS+CdgEBBYE?=
 =?us-ascii?q?wAYEShFsIEnmJYoEcgVc/gREnDIIqNYMQCwIChGOCV4dSgSsogW6KJYpMBwKCH?=
 =?us-ascii?q?ASDe2GKLQYYgiaHKxCHJ4J5ikqKRgIEAgQFAgUPIYElgg0zGjCDLwkWgXyDbYU?=
 =?us-ascii?q?UhT8/MgGBBAEBjFQBAQ?=
X-IPAS-Result: =?us-ascii?q?A0AaAAAUy/Zbh0O0hNFiHAEBAQQBAQcEAQGBUQcBAQsBgmk?=
 =?us-ascii?q?DfyeDeIM8hFyMAYFoJRRmjTyJBIFzEgEBGAcMAYFLhwciNAkNAQMBAQEBAQECA?=
 =?us-ascii?q?RMBAQEIDQkIKSMMgjYkAYJhAQEBAQMBAiAPAQ0BATcBBQkBAQoXAQICJgICAzE?=
 =?us-ascii?q?BBQEUCAYBDAYCAQEBBIMYAYIBBAEKnXc8ih1wgS+CdgEBBYEwAYEShFsIEnmJY?=
 =?us-ascii?q?oEcgVc/gREnDIIqNYMQCwIChGOCV4dSgSsogW6KJYpMBwKCHASDe2GKLQYYgia?=
 =?us-ascii?q?HKxCHJ4J5ikqKRgIEAgQFAgUPIYElgg0zGjCDLwkWgXyDbYUUhT8/MgGBBAEBj?=
 =?us-ascii?q?FQBAQ?=
X-IronPort-AV: E=Sophos;i="5.56,266,1539673200"; 
   d="scan'208";a="54435239"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from vger.kernel.org ([209.132.180.67])
  by mtab.intel.com with ESMTP; 22 Nov 2018 07:30:41 -0800
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S2437732AbeKWCK3 (ORCPT <rfc822;like.xu@linux.intel.com>
        + 23 others); Thu, 22 Nov 2018 21:10:29 -0500
Received: from mail-wm1-f67.google.com ([209.85.128.67]:37796 "EHLO
        mail-wm1-f67.google.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S2437719AbeKWCK2 (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Thu, 22 Nov 2018 21:10:28 -0500
Received: by mail-wm1-f67.google.com with SMTP id p2-v6so9466432wmc.2
        for <linux-kernel@vger.kernel.org>; Thu, 22 Nov 2018 07:30:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=linaro.org; s=google;
        h=subject:to:cc:references:from:message-id:date:user-agent
         :mime-version:in-reply-to:content-language:content-transfer-encoding;
        bh=/gdyEMmwIpDA7UWL4y3n+Qu2eQKbycMOptMcNyq9TtM=;
        b=KUIwFAUojixNVqwyOkA7px+DwBP5BnsrypPW6Kf08K20Abmxx6gpgVglCYlWsOr+SK
         PjETrOPTMoaqBrmjHlOpWe7+XI8iU4+Ifg6x1Dn/qazVdHkDQm7j6n0m0T+dC+FeaEaF
         rs/qWJkmYQmSkgn+a/DUBff1eTXBCB3jus6V0=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20161025;
        h=x-gm-message-state:subject:to:cc:references:from:message-id:date
         :user-agent:mime-version:in-reply-to:content-language
         :content-transfer-encoding;
        bh=/gdyEMmwIpDA7UWL4y3n+Qu2eQKbycMOptMcNyq9TtM=;
        b=Vl3HVqE53Gnb/BE4TO8ZzQkDK56KOOAUSevtOuEBDrN05IjoLEfSDYpKguVcYqG1SQ
         AhFmAkLrJ/Ga2xh24VaaBy/bOYBkJnSx6mTlKUEXP6LfnroE7taqxqhJ2hV4i0LCWefu
         K/BuJSP9/a980TLJQDJKRTrNprlZoilb0Gud6LfDMw8FAde9h1aI6Ncw35HVFv7S8zS9
         temJtvoOSB5u0PuzyzpZFHTgOB2YwBCqAAshl2nVtJmnUM0DcDkVkZ4xXnxTQr0Zg6Tx
         sagKg6rsn1lHO2nyBHNcqpa/Y6CMdb7iyFAqN4ixHEL7us1e9xa51ITRp8Y70Qdta7uY
         Mknw==
X-Gm-Message-State: AA+aEWbGhATITKzk0OHxSWifrq0i/DPtlMXR1ldK3t6OrOdtyDH+dS0k
        AaRLnh5sxcc2JgRoK0vgxivkfaeidFE=
X-Google-Smtp-Source: AFSGD/XbH00E0euf9fkANB+RDL/SEgN8+xfY41NYNere2lbUWntPvO05aB1Ur4tU6ZijhleEQUFceQ==
X-Received: by 2002:a1c:cec1:: with SMTP id e184mr2247209wmg.75.1542900636264;
        Thu, 22 Nov 2018 07:30:36 -0800 (PST)
Received: from [192.168.0.40] (44.65.136.77.rev.sfr.net. [77.136.65.44])
        by smtp.googlemail.com with ESMTPSA id p14sm15918641wrt.37.2018.11.22.07.30.34
        (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
        Thu, 22 Nov 2018 07:30:35 -0800 (PST)
Subject: Re: [PATCH] arm64: dts: renesas: r8a7796: Add CMT device nodes
To: Biju Das <biju.das@bp.renesas.com>,
        Rob Herring <robh+dt@kernel.org>,
        Mark Rutland <mark.rutland@arm.com>
Cc: Simon Horman <horms@verge.net.au>,
        Magnus Damm <magnus.damm@gmail.com>,
        "linux-renesas-soc@vger.kernel.org" 
        <linux-renesas-soc@vger.kernel.org>,
        "devicetree@vger.kernel.org" <devicetree@vger.kernel.org>,
        Geert Uytterhoeven <geert+renesas@glider.be>,
        Chris Paterson <Chris.Paterson2@renesas.com>,
        Thomas Gleixner <tglx@linutronix.de>,
        John Stultz <john.stultz@linaro.org>,
        Fabrizio Castro <fabrizio.castro@bp.renesas.com>,
        "linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>,
        Marc Zyngier <Marc.Zyngier@arm.com>
References: <1540542307-63158-1-git-send-email-biju.das@bp.renesas.com>
 <1be47ef6-1a92-e032-12c1-1deae5b67960@linaro.org>
 <OSBPR01MB210312547BBCBBC9FC01A616B8D80@OSBPR01MB2103.jpnprd01.prod.outlook.com>
 <67cf2385-9379-f02a-36fd-b2e07dfd5497@linaro.org>
 <TYAPR01MB2111A4092907D265493DDF3FB8D80@TYAPR01MB2111.jpnprd01.prod.outlook.com>
 <dbc5f62d-aff0-8c6a-e957-e7dea15cc002@linaro.org>
 <OSBPR01MB21030159FAA26E6C8FE492FFB8DB0@OSBPR01MB2103.jpnprd01.prod.outlook.com>
 <a82d3315-7608-3ff8-eaa1-e2a2c05c0694@linaro.org>
 <OSBPR01MB21034E0B1AE2304A9A17DE50B8DB0@OSBPR01MB2103.jpnprd01.prod.outlook.com>
From: Daniel Lezcano <daniel.lezcano@linaro.org>
Message-ID: <84b6bc0e-486d-e9f4-7579-0d6b513c15ba@linaro.org>
Date: Thu, 22 Nov 2018 16:30:33 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.2.1
MIME-Version: 1.0
In-Reply-To: <OSBPR01MB21034E0B1AE2304A9A17DE50B8DB0@OSBPR01MB2103.jpnprd01.prod.outlook.com>
Content-Type: text/plain; charset=utf-8
Content-Language: en-US
Content-Transfer-Encoding: 8bit
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org


Added Marc Zyngier in Cc.

On 22/11/2018 16:16, Biju Das wrote:
> Hello Daniel,
> 
> Thanks for the feedback.
> 
>>>> Subject: Re: [PATCH] arm64: dts: renesas: r8a7796: Add CMT device
>>>> nodes
>>>>
>>>> On 19/11/2018 16:50, Biju Das wrote:
>>>>> Hi Daniel,
>>>>>
>>>>> Thanks for the feedback.
>>>>>
>>>>>>>> Subject: Re: [PATCH] arm64: dts: renesas: r8a7796: Add CMT device
>>>>>>>> nodes
>>>>>>>>
>>>>>>>> On 26/10/2018 10:25, Biju Das wrote:
>>>>>>>>> This patch adds CMT{0|1|2|3} device nodes for r8a7796 SoC.
>>>>>>>>>
>>>>>>>>> Signed-off-by: Biju Das <biju.das@bp.renesas.com>
>>>>>>>>> ---
>>>>>>>>> This patch is tested against renesas-dev
>>>>>>>>>
>>>>>>>>> I have executed on inconsistency-check, nanosleep and
>>>>>>>>> clocksource_switch selftests on this arm64 SoC. The
>>>>>>>>> inconsistency-check and nanosleep tests are working fine.The
>>>>>>>>> clocksource_switch asynchronous test is failing due to
>>>>>>>>> inconsistency-check
>>>>>>>> failure on "arch_sys_counter".
>>>>>>>>>
>>>>>>>>> But if i skip the clocksource_switching of "arch_sys_counter",
>>>>>>>>> the asynchronous test is passing for CMT0/1/2/3 timer.
>>>>>>>>>
>>>>>>>>> Has any one noticed this issue?
>>>>>>>>
>>>>>>>> So now that you mention that, I've been through the
>>>>>>>> clocksource_switch on another ARM64 platform (hikey960) and
>>>>>>>> disabled the
>>>>>>>> ARM64_ERRATUM_858921 config option. I can see the same issue.
>>>>>>>>
>>>>>>>> Is this option set on your config ?
>>>>>>>
>>>>>>> No.  As per  " config ARM64_ERRATUM_858921", it is "Workaround for
>>>>>> Cortex-A73 erratum 858921"
>>>>>>>
>>>>>>> Our SoC is 2xCA-57 + 4 x CA-53.  Does  it impact CA-57 + CA_53?
>>>>>>
>>>>>> Dunno :/
>>>>>>
>>>>>>> Any way I will enable this config option and will provide you the
>> results.
>>>>>>
>>>>>> Ok, thanks!
>>>>>
>>>>> The following config is enabled by default on upstream
>>>>> kernel(4.20-rc3) CONFIG_ARM_ARCH_TIMER_EVTSTREAM=y
>>>>> CONFIG_ARM_ARCH_TIMER_OOL_WORKAROUND=y
>>>>> CONFIG_FSL_ERRATUM_A008585=y
>>>>> CONFIG_HISILICON_ERRATUM_161010101=y
>>>>> CONFIG_ARM64_ERRATUM_858921=y
>>>>>
>>>>> For a quick testing,  I have activated the erratum using the
>>>>> property
>>>> "fsl,erratum-a008585" on device tree.
>>>>> With this I confirm the issue is fixed.
>>>>>
>>>>> I have  some questions on this.
>>>>> 1) Based  on the test result ,do you think renesas soc also
>>>>> impacted by the
>>>> ARM64_ERRATUM_858921?
>>>>> 2) Is there any way to find, is this Erratum actually causing the
>>>> asynchronous test to fail?
>>>>
>>>> I guess, you can hack the __fsl_a008585_read_reg macro and check if
>>>> the invalid condition is reached.
>>>>
>>>> This thread https://lkml.org/lkml/2018/5/10/773 will give you all the
>>>> answers you are looking for (well very likely).
>>>>
>>>> Let me know if it helped.
>>>
>>> In our case , Delta: 174760 ns
>>>
>>> 1530553351:205762284
>>> 1530553351:205762404
>>> --------------------
>>> 1530553351:205951226
>>> 1530553351:205776466
>>> --------------------
>>>
>>> I have tried the workaround for ARM64_ERRATUM_858921, that also fixes
>> the issue.
>>>
>>> But all the workaround disables ARM64 VDSO. How do we conclude that is
>> it VDSO issue or ARM64_ERRATUM issue?
>>
>> May be disable all errata and set vdso_default to false?
>>
>> [ ... ]
>>
>> -static bool vdso_default = true;
>> +static bool vdso_default = false;
>>
>> [ ... ]
> 
> I have disabled the  activation of errata from device tree and set vdso_default=false.
> With this also it works fine. So looks like arm64 vdso is the issue in our case.
> 
> Do you agree with the conclusion?

I agree we have an element to investigate the issue. That is very
specific to this timer and a good knowledge of the internals is required.

Certainly Marc Zyngier or Mark Rutland can help here.

> [    0.000000] rcu: Adjusting geometry for rcu_fanout_leaf=16, nr_cpu_ids=6
> [    0.000000] NR_IRQS: 64, nr_irqs: 64, preallocated irqs: 0
> [    0.000000] arch_timer: cp15 timer(s) running at 8.32MHz (virt).
> [    0.000000] clocksource: arch_sys_counter: mask: 0xffffffffffffff max_cycles: 0x1eb398c07, max_idle_ns: 440795202503 ns
> [    0.000004] sched_clock: 56 bits at 8MHz, resolution 120ns, wraps every 2199023255503ns



-- 
 <http://www.linaro.org/> Linaro.org â”‚ Open source software for ARM SoCs

Follow Linaro:  <http://www.facebook.com/pages/Linaro> Facebook |
<http://twitter.com/#!/linaroorg> Twitter |
<http://www.linaro.org/linaro-blog/> Blog

